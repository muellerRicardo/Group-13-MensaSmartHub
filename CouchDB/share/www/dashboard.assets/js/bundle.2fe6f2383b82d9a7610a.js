/*! For license information please see bundle.2fe6f2383b82d9a7610a.js.LICENSE.txt */
(self.webpackChunkfauxton=self.webpackChunkfauxton||[]).push([[296],{16399:(e,t,n)=>{"use strict";var r=n(24332),o=n.n(r);const i={root:"/",version:"1.0",host:"../",i18n:{en_US:{"mango-descripton":"Mango is an easy way to find documents on predefined indexes.","new-mango-index":"Mango Indexes","mango-help-title":"Mango","run-query-with-mango":"Run A Query with Mango","mango-title-editor":"Mango Query","mango-descripton-index-editor":"Mango is an easy way to find documents on predefined indexes. <br/><br/>Create an Index to query it afterwards. The example in the editor shows how to create an index for the field '_id'. <br/><br/>The Indexes that you already created are listed on the right.","mango-additional-indexes-heading":"Your additional Indexes:","mango-indexeditor-title":"Mango","couchdb-productname":"Apache CouchDB","cors-disable-cors-prompt":"Are you sure? Disabling CORS will overwrite your specific origin domains.","cors-notice":"Cross-Origin Resource Sharing (CORS) lets you connect to remote servers directly from the browser, so you can host browser-based apps on static pages and talk directly with CouchDB to load your data.","replication-password-modal-header":"Enter Account Password.","replication-password-modal-text":"Replication requires authentication on your credentials.","replication-user-password-auth-label":"Username and password","replication-username-input-placeholder":"Username","replication-password-input-placeholder":"Password","auth-missing-credentials":"Username or password cannot be blank.","auth-logged-in":"You have been logged in.","auth-admin-created":"CouchDB admin created","auth-change-password":"Your password has been updated.","auth-admin-creation-failed-prefix":"Could not create admin.","auth-passwords-not-matching":"Passwords do not match.","create-db-partitioned-help":"This is an advanced feature. If you are unsure whether you need a partitioned database, you probably do not. A partitioned database requires a partition key for every document, where the document _id format is '&lt;partition_key&gt;:&lt;doc_key&gt;'. A partition is a logical grouping of documents. Partition queries are often faster than global ones."}}};var a=n(13974),s=n.n(a);const c={MISC:{TRAY_TOGGLE_SPEED:250,DEFAULT_PAGE_SIZE:20},DATABASES:{DOCUMENT_LIMIT:100},EVENTS:{TRAY_OPENED:"tray:opened",NAVBAR_SIZE_CHANGED:"navbar:size_changed"},DOC_URLS:{GENERAL:"./docs/intro/api.html#documents",ALL_DBS:"./docs/api/server/common.html?highlight=all_dbs#get--_all_dbs",REPLICATION:"./docs/replication/replicator.html#basics",DESIGN_DOCS:"./docs/ddocs/ddocs.html#design-docs",DESIGN_DOC_METADATA:"./docs/api/ddoc/common.html#api-ddoc-view-index-info",VIEW_FUNCS:"./docs/ddocs/ddocs.html#view-functions",MAP_FUNCS:"./docs/ddocs/ddocs.html#map-functions",REDUCE_FUNCS:"./docs/ddocs/ddocs.html#reduce-and-rereduce-functions",API_REF:"./docs/http-api.html",DB_PERMISSION:"./docs/api/database/security.html#db-security",STATS:"./docs/api/server/common.html?highlight=stats#get--_stats",ACTIVE_TASKS:"./docs/api/server/common.html?highlight=stats#active-tasks",LOG:"./docs/api/server/common.html?highlight=stats#log",CONFIG:"./docs/config/index.html",VIEWS:"./docs/intro/overview.html#views",MANGO_INDEX:"./docs/intro/api.html#documents",MANGO_SEARCH:"./docs/intro/api.html#documents",CHANGES:"./docs/api/database/changes.html?highlight=changes#post--db-_changes",SETUP:"./docs/cluster/setup.html#the-cluster-setup-wizard",MEMBERSHIP:"./docs/cluster/nodes.html"}};var u=n(84979),l=n.n(u),p={getParams:function(e){e&&("?"===e.substring(0,1)?e=e.substring(1):e.indexOf("?")>-1&&(e=e.split("?")[1]));var t=window.location.hash.split("?")[1];e=e||t||window.location.search.substring(1);var n={},r=/\+/g,o=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(r," "))},a=e;if(e)for(var s;s=o.exec(a);)n[i(s[1])]=i(s[2]);return n},removeSpecialCharacters:function(e){return e.replace(/[^\w\s]/gi,"")},safeURLName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return encodeURIComponent(e)},queryParams:function(e){return l()(e)},queryString:function(e){return Object.keys(e).forEach((function(t){void 0===e[t]&&delete e[t]})),l()(e)},getDocTypeFromId:function(e){return e&&/^_design\//.test(e)?"design doc":"doc"},isSystemDatabase:function(e){return/^_/.test(e)},getSafeIdForDoc:function(e){if("design doc"===p.getDocTypeFromId(e)){var t=e.replace(/^_design\//,"");return"_design/"+p.safeURLName(t)}return p.safeURLName(e)},localStorageSet:function(e,t){(s().isObject(t)||s().isArray(t))&&(t=JSON.stringify(t));var n=!0;try{window.localStorage.setItem(e,t)}catch(e){n=!1}return n},localStorageGet:function(e){var t;if(s().has(window.localStorage,e)){t=window.localStorage[e];try{return JSON.parse(t)}catch(e){return t}}return t},stripHTML:function(e){if(!document)return e;var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText}};const f=p;var d=n(90421),h=n.n(d),y=n(43149),b=(n(43375),new(n(42246).x)),m=function(e,t){return Promise.resolve({url:e,options:t})},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,a.defaultsDeep)({},n,{method:t,credentials:"include",headers:{accept:"application/json","Content-Type":"application/json",Pragma:"no-cache"},cache:"no-cache"});return m(e,r).then((function(e){return fetch(e.url,e.options).then((function(e){return b.next(e),n.raw?e:e.json()}))}))},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g(e,"GET",t)},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g(e,"DELETE",t)},E=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return void 0!==t&&(n.rawBody?n.body=t:n.body=JSON.stringify(t)),g(e,"POST",n)},O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return void 0!==t&&(n.rawBody?n.body=t:n.body=JSON.stringify(t)),g(e,"PUT",n)},S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return g(e,t,(0,a.defaultsDeep)({},n,{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}))},D={};D.removeSpecialCharacters=f.removeSpecialCharacters,D.safeURL=f.safeURLName,D.imageUrl=function(e){return e},D.getDocUrl=function(e){return s().has(c.DOC_URLS,e)?c.DOC_URLS[e]:"#"},D.formatSize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=512;if(e<n)return e+" bytes";for(var r=["KB","MB","GB","TB","PB","EB","ZB","YB"],o=0;e>=n&&o<r.length;)o+=1,e/=1024;return e.toFixed(t)+" "+r[o-1]},D.formatDate=function(e){return h()(e,"X").format("MMM Do, h:mm:ss a")},D.getDateFromNow=function(e){return h()(e,"X").fromNow()},D.escapeJQuerySelector=function(e){return e&&e.replace(/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~]/g,"\\$&")},D.getApiUrl=function(e){return i.host.endsWith("/")&&e.startsWith("/")&&(e=e.substr(1)),y.resolve(window.location.href,i.host+e)},D.getServerUrl=function(e){return i.host.endsWith("/")&&e.startsWith("/")&&(e=e.substr(1)),i.host+e},D.getRootUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location,t=e.origin,n=e.pathname;return y.resolve(t+n,i.host)},D.getUUID=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=D.getServerUrl("/_uuids?count=".concat(e));return v(t)},D.isIE1X=function(){return 11==document.documentMode||10==document.documentMode};const N=D;var R=n(73982),P=n.n(R);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k.apply(this,arguments)}var j={router:{navigate:function(){}},masterLayout:{},addHeaderLink:function(e){j.reduxDispatch({type:"ADD_NAVBAR_LINK",link:e})},showHeaderLinkBadge:function(e){j.reduxDispatch({type:"SHOW_NAVBAR_LINK_BADGE",link:e})},hideHeaderLinkBadge:function(e){j.reduxDispatch({type:"HIDE_NAVBAR_LINK_BADGE",link:e})},addNotification:function(e){e=k({msg:"Notification Event Triggered!",type:"info",escape:!0,clear:!1},e),j.reduxDispatch&&j.reduxDispatch({type:"ADD_NOTIFICATION",options:{info:e}})},showPermanentNotification:function(e){j.reduxDispatch({type:"SHOW_PERMANENT_NOTIFICATION",options:{msg:e}})},config:function(e){return s().extend(this,e)},Deferred:function(){return $.Deferred()},when:function(e){return e instanceof Array?$.when.apply(null,e):$.when(e)},addonExtensions:{initialize:function(){},RouteObjects:{},Views:{}},addon:function(e){return s().extend(s().clone(j.addonExtensions),e)}};j.View=P().View.extend({establish:function(){return null},loaderClassname:"loader",manage:!0,forceRender:function(){this.hasRendered=!1}});var I={fetchOnce:function(e){var t=s().extend({},e);return this._deferred&&"rejected"!==this._deferred.state()&&!t.forceFetch||(this._deferred=this.fetch()),this._deferred}};j.Model=P().Model.extend({}),j.Collection=P().Collection.extend({}),s().each([j.Model,j.Collection],(function(e){s().extend(e.prototype,I)}));var A=s().extend({},P().Events);j.registerExtension=function(e,t){A[e]||(A[e]=[]),A.trigger("add:"+e,t),A[e].push(t)},j.unRegisterExtension=function(e){var t=A[e];t&&(A.trigger("remove:"+e,t),delete A[e])},j.getExtensions=function(e){var t=A[e];return t||(t=[]),t},j.removeExtensionItem=function(e,t,n){var r=A[e];if(r){var o=arguments[arguments.length-1];s().isObject(t)&&!n&&(o=function(e){return s().isEqual(e,t)}),r=s().filter(r,(function(e){return!o(e)})),A[e]=r,A.trigger("removeItem:"+e,t)}},j.extensions=A,j.setSession=function(e){j.session=e},j.reducers={},j.addReducers=function(e){j.reducers=T(T({},j.reducers),e)},j.middlewares=[],j.addMiddleware=function(e){e&&"function"==typeof e&&j.middlewares.push(e)};const L=j;var M=n(85582),U=n.n(M),q=function(e,t){if(e.isAdminParty())return!0;if(e.matchesRoles(t))return!0;throw new Error("Unable to authenticate")},B=function(){var e=window.location.hash.replace("#","").replace("login?urlback=","");e&&L.navigate("/login?urlback=".concat(e),{replace:!0}),L.navigate("/login",{replace:!0})},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new(U())((function(t,n){return L.session.getSession().then((function(){q(L.session,e)?t():n()})).catch((function(e){n(e),B()}))}))},F={};const K=P().Router.extend({routes:{},originalPageTitle:window.document.title,beforeUnload:function(e,t){F[e]=t},removeBeforeUnload:function(e){delete F[e]},navigate:function(e,t){var n=!0,r=s().find(s().map(F,(function(e){return e()})),(function(e){if(e)return!0}));if(r&&(n=window.confirm(r)),t&&t.redirect)return window.location=e;n&&(P().Router.prototype.navigate(e,t),this.updateWindowTitle(e))},updateWindowTitle:function(e){e.startsWith("#/")?window.document.title=this.originalPageTitle+" - "+e.substring(2):e.startsWith("/")||e.startsWith("#")?window.document.title=this.originalPageTitle+" - "+e.substring(1):window.document.title=this.originalPageTitle+" - "+e},addModuleRouteObject:function(e){var t=this,n=this;e.prototype.getRouteUrls().forEach((function(r){t.route(r,r.toString(),(function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var s=e.prototype.getRouteRoles(r);V(s).then((function(){n.activeRouteObject&&n.activeRouteObject.hasRoute(r)||(n.activeRouteObject=new e(r,i));var o=n.activeRouteObject.routeCallback(r,i);n.currentRouteOptions={selectedHeader:t.activeRouteObject.selectedHeader,component:o,roles:s,route:r.toString()},n.trigger("new-component",t.currentRouteOptions)}),(function(){}))}))}))},setModuleRoutes:function(e){var t=this;s().each(e,(function(e){e&&(e.initialize(),e.RouteObjects&&s().each(e.RouteObjects,t.addModuleRouteObject.bind(t)))}))},initialize:function(e){this.addons=e,this.setModuleRoutes(e),this.lastPages=[],P().history.on("route",(function(){this.lastPages.push(P().history.fragment),this.lastPages.length>5&&this.lastPages.shift()}),this)}});var z=n(46116);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}var G=function(e){this._options=e,this.reactComponents={},this._configure(e||{}),this.initialize.apply(this,arguments)};G.extend=P().Model.extend;var W=["routes","roles"];s().extend(G.prototype,{routes:{},route:function(){},roles:[],initialize:function(){}},{get:function(e){return s().isFunction(this[e])?this[e]():this[e]},_configure:function(e){var t=this;s().each(s().intersection(s().keys(e),W),(function(n){t[n]=e[n]}))},getRouteUrls:function(){return s().keys(this.get("routes"))},hasRoute:function(e){return!!this.get("routes")[e]},routeCallback:function(e,t){var n=this.get("routes")[e];return("object"===H(n)?this[n.route]:this[n]).apply(this,t)},getRouteRoles:function(e){var t=this.get("routes")[e];return"object"===H(t)&&t.roles?t.roles:this.roles}});const X=G;var Q=function(){this.initialize.apply(this,arguments),s().bindAll(this)};Q.extend=P().Model.extend,s().extend(Q.prototype,P().Events,{triggerChange:function(){this.trigger("change")},initialize:function(){}});const J=Q;var Y=[],Z=0;const ee={register:function(e){if("function"!=typeof e)throw new Error("Store dispatch method must be a function");return Z+=1,Y.push(e),e.dispatchId=Z,Z},dispatch:function(e){Y.forEach((function(t){t(e)}))},unregister:function(e){var t=(0,a.findIndex)(Y,(function(t){return t.dispatchId===e}));-1!==t&&Y.splice(t,1)}};function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},te.apply(this,arguments)}P().$=o(),P().ajax=function(){return P().$.ajax.apply(P().$,arguments)},te(L,{Router:K,RouteObject:X,utils:f,Store:J,dispatcher:ee,Promise:U(),Events:s().extend({},P().Events)}),L.constants=c,L.dispatch=ee.dispatch,L.navigate=function(e,t){var n=s().extend({trigger:!0},t);L.router.navigate(e,n),n.trigger&&L.router.trigger("trigger-update")},L.beforeUnload=function(){L.router.beforeUnload.apply(L.router,arguments)},L.removeBeforeUnload=function(){L.router.removeBeforeUnload.apply(L.router,arguments)},L.addRoute=function(e){L.router.route(e.route,e.name,e.callback)};var ne={};L.registerUrls=function(e,t){ne[e]=t},L.url={encode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/[$+/]/g.test(e)?encodeURIComponent(e):e},decode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/[$+/]/g.test(e)?decodeURIComponent(e):e}},L.urls=function(e,t){var n,r=L.getExtensions("urls:interceptors"),o=arguments;return s().find(r,(function(e){var t=e.apply(null,o);return!!t&&(n=t,!0)})),s().isUndefined(n)?ne[e]?ne[e][t]?(o=Array.prototype.slice.call(arguments,2),n=ne[e][t].apply(null,o)):(console.error("could not find context ",t),""):(console.error("could not find name ",e),""):n},L.getIndexTypePropNames=function(){var e=L.getExtensions("IndexTypes:propNames");return e.push("views"),e};const re=L;function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oe.apply(this,arguments)}n(45942),s().isUndefined(console)&&(console={log:function(){},trace:function(){},debug:function(){}}),oe(i,{utils:f,getParams:re.utils.getParams,helpers:N}),re.config({addHeaderLink:function(e){re.reduxDispatch({type:"ADD_NAVBAR_LINK",link:e})},updateHeaderLink:function(e){re.reduxDispatch({type:"UPDATE_NAVBAR_LINK",link:e})},removeHeaderLink:function(e){re.reduxDispatch({type:"REMOVE_NAVBAR_LINK",link:e})},hideLogin:function(){re.reduxDispatch({type:"NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION",visible:!1})},showLogout:function(){re.reduxDispatch({type:"NAVBAR_SHOW_LOGOUT_BUTTON"})},showLogin:function(){re.reduxDispatch({type:"NAVBAR_SHOW_LOGIN_BUTTON"})}});const ie=i;var ae=n(35466);const se="ADD_NAVBAR_LINK",ce="TOGGLE_NAVBAR_MENU",ue="UPDATE_NAVBAR_LINK",le="REMOVE_NAVBAR_LINK",pe="HIDE_NAVBAR_LINK_BADGE",fe="SHOW_NAVBAR_LINK_BADGE",de="NAVBAR_SET_VERSION_INFO",he="NAVBAR_ACTIVE_LINK",ye="NAVBAR_HIDE",be="NAVBAR_SHOW",me="NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION",ge="NAVBAR_SHOW_LOGIN_BUTTON",_e="NAVBAR_SHOW_LOGOUT_BUTTON";function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){Ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oe={isMinimized:!0,activeLink:null,version:null,navLinks:[],footerNavLinks:[],bottomNavLinks:[],navBarVisible:!0,loginSectionVisible:!1,loginVisibleInsteadOfLogout:!0};function Se(e,t){var n=we({},e);return t.top&&!t.bottomNav?(n.navLinks=[].concat(n.navLinks),n.navLinks.unshift(t),n):t.top&&t.bottomNav?(n.bottomNavLinks=[].concat(n.bottomNavLinks),n.bottomNavLinks.unshift(t),n):t.bottomNav?(n.bottomNavLinks=[].concat(n.bottomNavLinks),n.bottomNavLinks.push(t),n):t.footerNav?(n.footerNavLinks=[].concat(n.footerNavLinks),n.footerNavLinks.push(t),n):(n.navLinks=[].concat(n.navLinks),n.navLinks.push(t),n)}function De(e,t){var n=Pe(e,t),r=n.links,o=n.sectionName,i=r.filter((function(e){return e.id!==t.id}));if(i.length===r.length)return e;var a=we({},e);return a[o]=i,a}function Ne(e,t){var n=Pe(e,t),r=n.links,o=n.sectionName,i=!1,a=r.map((function(e){return e.id===t.id?(i=!0,we(we({},e),{},{title:t.title,href:t.href})):e}));if(!i)return e;var s=we({},e);return s[o]=a,s}function Re(e,t,n){var r=Pe(e,t),o=r.links,i=r.sectionName,a=!1,s=o.map((function(e){return e.title===t.title?(a=!0,we(we({},e),{},{badge:n})):e}));if(!a)return e;var c=we({},e);return c[i]=s,c}function Pe(e,t){var n=e.navLinks,r="navLinks";return t.bottomNav&&(n=e.bottomNavLinks,r="bottomNavLinks"),t.footerNav&&(n=e.footerNavLinks,r="footerNavLinks"),{links:n,sectionName:r}}const Ce="ADD_NOTIFICATION",Te="SHOW_NOTIFICATION_CENTER",xe="HIDE_NOTIFICATION_CENTER",ke="CLEAR_SINGLE_NOTIFICATION",je="CLEAR_ALL_NOTIFICATIONS",Ie="SELECT_NOTIFICATION_FILTER",Ae="SHOW_PERMANENT_NOTIFICATION",Le="HIDE_PERMANENT_NOTIFICATION";var Me=n(50189);function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){Be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ve={notifications:[],notificationCenterVisible:!1,selectedNotificationFilter:"all",permanentNotificationVisible:!1,permanentNotificationMessage:""},Fe=0,Ke=["success","error","info"],ze=["all","success","error","info"];function He(e,t){var n=e.notifications,r=n.slice();if((t=qe({},t)).toastId=++Fe,t.time=h()(),t.cleanMsg=ie.utils.stripHTML(t.msg),!0!==t.escape&&!1!==t.escape&&(t.escape=!0),t.htmlMsg={__html:t.escape?_.escape(t.cleanMsg):t.cleanMsg},t.clear){var o=_.map(n,"toastId");setTimeout((function(){o.forEach((function(e){return Me.Am.dismiss(e)}))}),800)}return r.unshift(t),(0,Me.Am)(ae.createElement("span",{dangerouslySetInnerHTML:t.htmlMsg}),t),r}function Ge(e,t){var n=e.notifications,r=n.findIndex((function(e){return e.toastId===t}));if(-1===r)return n;var o=[].concat(n);return o.splice(r,1),Me.Am.dismiss(t),o}var We=re.addon();We.initialize=function(){var e=new We.VersionInfo;e.fetch().then((function(){!function(e){re.reduxDispatch({type:de,version:e})}(e.get("version"))}))},We.VersionInfo=Backbone.Model.extend({url:function(){return ie.host}}),re.addReducers({navigation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return Se(e,t.link);case ce:return we(we({},e),{},{isMinimized:!e.isMinimized});case ue:return Ne(e,t.link);case le:return De(e,t.link);case fe:return Re(e,t.link,!0);case pe:return Re(e,t.link,!1);case de:return we(we({},e),{},{version:t.version});case he:return we(we({},e),{},{activeLink:t.name});case ye:return we(we({},e),{},{navBarVisible:!1});case be:return we(we({},e),{},{navBarVisible:!0});case me:return we(we({},e),{},{loginSectionVisible:t.visible});case ge:return we(we({},e),{},{loginSectionVisible:!0,loginVisibleInsteadOfLogout:!0});case _e:return we(we({},e),{},{loginSectionVisible:!0,loginVisibleInsteadOfLogout:!1});default:return e}},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0,n=t.options,r=t.type;switch(r){case Ce:return-1===Ke.indexOf(n.info.type)?e:qe(qe({},e),{},{notifications:He(e,n.info)});case je:return Me.Am.dismiss(),qe(qe({},e),{},{notifications:[]});case ke:return qe(qe({},e),{},{notifications:Ge(e,n.toastId)});case Te:return qe(qe({},e),{},{notificationCenterVisible:!0});case xe:return qe(qe({},e),{},{notificationCenterVisible:!1});case Ie:return-1===ze.indexOf(n.filter)?e:qe(qe({},e),{},{selectedNotificationFilter:n.filter});case Ae:return qe(qe({},e),{},{permanentNotificationVisible:!0,permanentNotificationMessage:n.msg});case Le:return qe(qe({},e),{},{permanentNotificationVisible:!1});default:return e}}});const Xe=We,Qe="DATABASES_SETPAGE",$e="DATABASES_SETLIMIT",Je="DATABASES_SET_PROMPT_VISIBLE",Ye="DATABASES_STARTLOADING",Ze="DATABASES_LOADCOMPLETE",et="DATABASES_UPDATE",tt="DATABASES_PARTITIONED_DB_AVAILABLE",nt="DATABASES_FETCH_SELECTED_DB_METADATA",rt="DATABASES_FETCH_SELECTED_DB_METADATA_SUCCESS";var ot=P().Collection.extend({constructor:function(){P().Collection.apply(this,arguments),this.configure.apply(this,arguments)},configure:function(e,t){var n=s().result(this,"url").split("?")[1]||"";this.paging=s().defaults(t.paging||{},{defaultParams:s().defaults({},t.params,this._parseQueryString(n)),hasNext:!1,hasPrevious:!1,params:{},pageSize:20,direction:void 0}),this.paging.params=s().clone(this.paging.defaultParams),this.updateUrlQuery(this.paging.defaultParams)},calculateParams:function(e,t,n){var r=s().clone(e);return r.skip=(parseInt(e.skip,10)||0)+t,this.paging.defaultParams.limit&&(r.limit=Math.min(this.paging.defaultParams.limit,r.limit)),r.limit=n+1,r.skip=Math.max(r.skip,0),r},pageSizeReset:function(e,t){var n=s().defaults(t||{},{fetch:!0});if(this.paging.direction=void 0,this.paging.pageSize=e,this.paging.params=this.paging.defaultParams,this.paging.params.limit=e,this.updateUrlQuery(this.paging.params),n.fetch)return this.fetch()},_parseQueryString:function(e){var t=decodeURI(e).split(/&/);return s().reduce(t,(function(e,t){var n=t.split(/=/);return 2===n.length&&(e[n[0]]=n[1]),e}),{})},_iterate:function(e,t){var n=s().defaults(t||{},{fetch:!0});if(this.paging.params=this.calculateParams(this.paging.params,e,this.paging.pageSize),this.updateUrlQuery(this.paging.params),n.fetch)return this.fetch({reset:!0})},next:function(e){return this.paging.direction="next",this._iterate(this.paging.pageSize,e)},previous:function(e){return this.paging.direction="previous",this._iterate(0-this.paging.pageSize,e)},shouldStringify:function(e){try{return JSON.parse(e),!1}catch(e){return!0}},updateUrlQuery:function(e){var t=this,n=s().result(this,"url").split("?")[0];s().each(["startkey","endkey","key"],(function(n){s().has(e,n)&&t.shouldStringify(e[n])&&(e[n]=JSON.stringify(e[n]))})),this.url=n+"?"+ie.utils.queryParams(e)},fetch:function(){return!this.paging.direction&&this.paging.params.limit>0&&(this.paging.direction="fetch",this.paging.params.limit=this.paging.params.limit+1,this.updateUrlQuery(this.paging.params)),P().Collection.prototype.fetch.apply(this,arguments)},parse:function(e){var t=e.rows;return this.paging.hasNext=this.paging.hasPrevious=!1,this.viewMeta={total_rows:e.total_rows,offset:e.offset,update_seq:e.update_seq},this.paging.params.skip>0&&(this.paging.hasPrevious=!0),t.length===this.paging.pageSize+1&&(this.paging.hasNext=!0,t.pop(),this.viewMeta.total_rows=this.viewMeta.total_rows-1),t},hasNext:function(){return this.paging.hasNext},hasPrevious:function(){return this.paging.hasPrevious}});const it=ot;function at(){return at=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},at.apply(this,arguments)}var st=re.addon();st.Doc=re.Model.extend({idAttribute:"_id",documentation:function(){return re.constants.DOC_URLS.GENERAL},url:function(e){void 0===e&&(e="server");var t=this.safeID();t||(t="");var n=this.fetchConflicts?"?conflicts=true":"";return re.urls("document",e,this.getDatabase().safeID(),t,n)},initialize:function(e,t){this.collection&&this.collection.database?this.database=this.collection.database:t.database&&(this.database=t.database),t.fetchConflicts&&(this.fetchConflicts=!0),this.partitionKey=t.partitionKey},getDatabase:function(){return this.database?this.database:this.collection.database},validate:function(e){if(this.id&&this.id!==e._id&&this.get("_rev"))return"Cannot change a documents id."},docType:function(){return ie.utils.getDocTypeFromId(this.id)},isBulkDeletable:function(){return!!this.id&&!!this.get("_rev")},isDeletable:function(){return!!this.id},isFromView:function(){return!this.id},isMangoDoc:function(){return!(!this.isDdoc()||"query"!==this.get("language")&&(!this.get("doc")||"query"!==this.get("doc").language))},isDdoc:function(){return"design doc"===this.docType()},setDDocPartitionedOption:function(e){if(!this.isDdoc())return!1;var t=this.get("options");return t||(t={}),t.partitioned=e,this.set({options:t}),!0},setDdocView:function(e,t,n){if(!this.isDdoc())return!1;var r=this.get("views");r||(r={},this.set({language:"javascript"}));var o=r[e]||{};return n?o.reduce=n:delete o.reduce,o.map=t,r[e]=o,this.set({views:r}),!0},removeDdocView:function(e){if(!this.isDdoc())return!1;var t=this.get("views");delete t[e],this.set({views:t})},dDocModel:function(){if(!this.isDdoc())return!1;var e=this.get("doc");return e?(e._rev=this.get("_rev"),new st.Doc(e,{database:this.database})):this},safeID:function(){return ie.utils.getSafeIdForDoc(this.id)},destroy:function(){var e=this.url()+"?rev="+this.get("_rev");return w(e).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))},parse:function(e){return e.rev&&(e._rev=e.rev,delete e.rev),e.id&&_.isUndefined(this.id)&&(e._id=e.id),e.ok&&(delete e.id,delete e.ok),e},prettyJSON:function(){var e=this.get("doc")?this.get("doc"):this.attributes;return JSON.stringify(e,null,"  ")},copy:function(e){var t=at({},this.attributes,{_id:e});return delete t._rev,new this.constructor(t,{database:this.database}).save()},isNewDoc:function(){return!this.get("_rev")}}),st.AllDocs=it.extend({model:st.Doc,documentation:function(){return re.constants.DOC_URLS.GENERAL},initialize:function(e,t){this.viewMeta=t.viewMeta,this.database=t.database,this.params=_.clone(t.params),this.on("remove",this.decrementTotalRows,this),this.perPageLimit=t.perPageLimit||20,this.params.limit||(this.params.limit=this.perPageLimit)},isEditable:function(){return!0},urlRef:function(e,t){var n="";return t?n=_.isEmpty(t)?"":"?"+ie.utils.queryParams(t):this.params&&(n="?"+ie.utils.queryParams(this.params)),_.isUndefined(e)&&(e="server"),re.urls("allDocs",e,this.database.safeID(),n)},url:function(){return this.urlRef.apply(this,arguments)},simple:function(){var e=this.map((function(e){return{_id:e.id,_rev:e.get("_rev")}}));return new st.AllDocs(e,{database:this.database,params:this.params})},totalRows:function(){return this.viewMeta.total_rows||"unknown"},decrementTotalRows:function(){this.viewMeta.total_rows&&(this.viewMeta.total_rows=this.viewMeta.total_rows-1,this.trigger("totalRows:decrement"))},updateSeq:function(){return this.viewMeta&&this.viewMeta.update_seq||!1},parse:function(e){var t=e.rows,n=_.filter(t,(function(e){return e.value}));return e.rows=_.map(n,(function(e){var t={_id:e.id,_rev:e.value.rev,value:e.value,key:e.key};return e.doc&&(t.doc=e.doc),t})),it.prototype.parse.call(this,e)},clone:function(){return new this.constructor(this.models,{database:this.database,params:this.params,paging:this.paging})}});const ct=st;var ut;ct.QueryParams=(ut=function(e,t){var n=_.clone(e);return _.each(["startkey","endkey","key"],(function(e){_.has(n,e)&&(n[e]=t(n[e]))})),n},{parse:function(e){return ut(e,JSON.parse)},stringify:function(e){return ut(e,JSON.stringify)}}),ct.DdocInfo=re.Model.extend({idAttribute:"_id",documentation:function(){return re.constants.DOC_URLS.GENERAL},initialize:function(e,t){this.database=t.database},url:function(e){return e||(e="server"),re.urls("designDocs",e,this.database.safeID(),this.safeID())},safeID:function(){return ie.utils.getSafeIdForDoc(this.id)}}),ct.NewDoc=ct.Doc.extend({fetch:function(){var e=this,t=this.partitionKey?this.partitionKey+":":"";return N.getUUID().then((function(n){return n.uuids?e.set("_id",t+n.uuids[0]):e.set("_id",t+"enter_document_id"),n})).catch((function(){e.set("_id",t+"enter_document_id")}))}}),ct.BulkDeleteDoc=re.Model.extend({idAttribute:"_id"}),ct.BulkDeleteDocCollection=re.Collection.extend({model:ct.BulkDeleteDoc,sync:function(){},initialize:function(e,t){this.databaseId=t.databaseId},url:function(){return re.urls("bulk_docs","server",this.databaseId,"")},bulkDelete:function(){var e=this,t=this.createPayload(this.toJSON());return new re.Promise((function(n,r){E(e.url(),t).then((function(t){if(t.error)throw new Error(t.reason||t.error);e.handleResponse(t,n,r)})).catch((function(){var t=_.reduce(e.toArray(),(function(e,t){return e.push(t.id),e}),[]);e.trigger("error",t),r(t)}))}))},handleResponse:function(e,t,n){var r=_.reduce(e,(function(e,t){return t.error&&e.errorIds.push(t.id),t.error||e.successIds.push(t.id),e}),{errorIds:[],successIds:[]});this.removeDocuments(r.successIds),r.errorIds.length&&this.trigger("error",r.errorIds),_.isEmpty(r.successIds)?n(r.errorIds):t(r),this.trigger("updated")},removeDocuments:function(e){var t=this;_.each(e,(function(e){t.remove(t.get(e))})),this.trigger("removed",e)},createPayload:function(e){return{docs:e}}}),ct.MangoBulkDeleteDocCollection=ct.BulkDeleteDocCollection.extend({url:function(){return N.getServerUrl("/".concat(this.databaseId,"/_index/_bulk_delete"))},createPayload:function(e){var t=e.filter((function(e){return"_all_docs"!==e._id})).map((function(e){return e._id}));return{docids:t}}});const lt=ct;var pt=re.addon();pt.DocLimit=100,pt.Model=re.Model.extend({partitioned:!1,setPartitioned:function(e){this.partitioned=e},documentation:function(){return re.constants.DOC_URLS.ALL_DBS},buildAllDocs:function(e){return this.allDocs=new lt.AllDocs(null,{database:this,params:e}),this.allDocs},isNew:function(){return!1},isSystemDatabase:function(){return ie.utils.isSystemDatabase(this.id)},url:function(e){return"index"===e?"/database/"+this.safeID()+"/_all_docs":"web-index"===e?"#/database/"+this.safeID()+"/_all_docs?limit="+pt.DocLimit:"apiurl"===e?N.getApiUrl("/database/"+this.safeID()+"/_all_docs"):"changes"===e?re.urls("changes","app",this.safeID(),"","?descending=true&limit=100&include_docs=true"):"changes-apiurl"===e?re.urls("changes","apiurl",this.safeID(),"?descending=true&limit=100&include_docs=true"):"app"===e?"/database/"+this.safeID():this.partitioned?N.getServerUrl("/"+this.safeID())+"?partitioned=true":N.getServerUrl("/"+this.safeID())},safeID:function(){return ie.utils.safeURLName(this.id)},buildChanges:function(e){return e.limit||(e.limit=100),this.changes=new pt.Changes({database:this,params:e}),this.changes}}),pt.Changes=re.Collection.extend({initialize:function(e){this.database=e.database,this.params=e.params},documentation:function(){return re.constants.DOC_URLS.CHANGES},url:function(e){var t="";return this.params&&(t="?"+ie.utils.queryParams(this.params)),e||(e="server"),re.urls("changes",e,this.database.safeID(),t)},parse:function(e){return this.last_seq=e.last_seq,e.results}});const ft=pt;function dt(){return dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dt.apply(this,arguments)}var ht=ft.Model,yt=re.Store.extend({initialize:function(){this.reset()},reset:function(){var e;this._loading=!1,this._promptVisible=!1,this._page=1,this._limit=((e=ie.utils.localStorageGet("fauxton:dbs_per_page"))||(e=re.constants.MISC.DEFAULT_PAGE_SIZE),e),this._dbList=[],this._databaseDetails=[],this._failedDbs=[],this._fullDbList=[],this._partitionedDatabasesAvailable=!1},getPage:function(){return this._page},getLimit:function(){return this._limit},setLimit:function(e){this._limit=e,ie.utils.localStorageSet("fauxton:dbs_per_page",e)},isLoading:function(){return this._loading},setLoading:function(e){this._loading=e},isPromptVisible:function(){return this._promptVisible},setPromptVisible:function(e){this._promptVisible=e},obtainNewDatabaseModel:function(e,t){var n=new ht({id:e,name:e});return n.setPartitioned(t),n},doesDatabaseExist:function(e){return-1!==this._dbList.indexOf(e)},getTotalAmountOfDatabases:function(){return this._fullDbList.length},getDbList:function(){var e=this;return this._dbList.map((function(t){var n=e._databaseDetails.filter((function(e){return e.db_name===t}));return dt({},{id:t,encodedId:encodeURIComponent(t),url:re.urls("allDocsSanitized","app",t),failed:-1!==e._failedDbs.indexOf(t)},e._getDetails(n[0]))}))},_getDetails:function(e){if(!e)return{};var t=re.getExtensions("DatabaseList:dbSizeReportFieldName"),n="active";t.length>0&&(n=t[0]);var r=e.sizes,o=r&&r[n]||r&&r.active||r&&r.external||e.data_size||0;return{dataSize:N.formatSize(o),docCount:e.doc_count,docDelCount:e.doc_del_count,showTombstoneWarning:e.doc_del_count>e.doc_count,isPartitioned:e.props&&!0===e.props.partitioned}},isPartitionedDatabasesAvailable:function(){return this._partitionedDatabasesAvailable},dispatch:function(e){switch(e.type){case Qe:this._page=e.options.page;break;case $e:this.setLimit(e.options.limit);break;case Je:this.setPromptVisible(e.options.visible);break;case Ye:this.setLoading(!0);break;case Ze:this.setLoading(!1);break;case et:this._fullDbList=e.options.fullDbList,this._dbList=e.options.dbList,this._databaseDetails=e.options.databaseDetails,this._failedDbs=e.options.failedDbs,this.setLoading(!1);break;case tt:this._partitionedDatabasesAvailable=e.options.available;break;default:return}this.triggerChange()}}),bt=new yt;bt.dispatchToken=re.dispatcher.register(bt.dispatch.bind(bt));const mt={databasesStore:bt,DatabasesStoreConstructor:yt};var gt=function(e){var t=re.urls("databaseBaseURL","server",e);return v(t)};function _t(e,t){var n=[],r=[],o=0;e.forEach((function(i){vt(re.urls("databaseBaseURL","server",i)).then((function(e){n.push(e)})).catch((function(){r.push(i)})).then((function(){++o===e.length&&Ot({dbList:e,databaseDetails:n,failedDbs:r,fullDbList:t})}))}))}function vt(e){return v(e).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))}function wt(){return vt(re.urls("allDBs","server"))}function Et(e,t,n){var r=(t-1)*n,o=t*n;return e.slice(r,o)}function Ot(e){re.dispatch({type:et,options:e})}const St={getDatabaseList:wt,paginate:Et,getDatabaseDetails:_t,fetch:vt,updateDatabases:Ot,init:function(e){var t=this,n=e.page,r=e.limit;this.setStartLoading(),this.setPage(n),r&&this.setLimit(r),wt().then((function(e){var o=Et(e,n,r);t.updateDatabases({dbList:o,databaseDetails:[],failedDbs:[],fullDbList:e}),_t(o,e)}))},setPage:function(e){re.dispatch({type:Qe,options:{page:e}})},setLimit:function(e){re.dispatch({type:$e,options:{limit:e}})},setStartLoading:function(){re.dispatch({type:Ye})},setLoadComplete:function(){re.dispatch({type:Ze})},createNewDatabase:function(e,t){if(_.isNull(e)||0===e.trim().length)re.addNotification({msg:"Please enter a valid database name",type:"error",clear:!0});else{e=e.trim(),re.dispatch({type:Je,options:{visible:!1}});var n=mt.databasesStore.obtainNewDatabaseModel(e,t);re.addNotification({msg:"Creating database."}),n.save().done((function(){re.addNotification({msg:"Database created successfully",type:"success",clear:!0});var t=re.urls("allDocs","app",ie.utils.safeURLName(e));ie.router.navigate(t,{trigger:!0})})).fail((function(e){var t=JSON.parse(e.responseText).reason;re.addNotification({msg:"Create database failed: "+t,type:"error",clear:!0})}))}},jumpToDatabase:function(e){if(!_.isNull(e)&&0!==e.trim().length){e=e.trim();var t=re.urls("allDocs","app",ie.utils.safeURLName(e),"");return setTimeout((function(){re.navigate(t)}))}},fetchAllDbsWithKey:function(e,t){var n="?"+ie.utils.queryParams({startkey:JSON.stringify(e),endkey:JSON.stringify(e+"香"),limit:30}),r=N.getServerUrl("/_all_dbs".concat(n));v(r).then((function(e){var n=e.map((function(e){return{value:e,label:e}}));t(null,{options:n})}))},setPartitionedDatabasesAvailable:function(e){var t={type:tt,options:{available:e}};re.dispatch(t),re.reduxDispatch(t)},checkPartitionedQueriesIsAvailable:function(){var e=this,t=re.getExtensions(Rs.PARTITONED_DB_CHECK_EXTENSION).map((function(e){return e()}));re.Promise.all(t).then((function(t){var n=t.every((function(e){return!0===e}));e.setPartitionedDatabasesAvailable(n)})).catch((function(){}))},fetchSelectedDatabaseInfo:function(e){re.reduxDispatch({type:nt}),gt(e).then((function(e){if(!e.db_name){var t=e.reason?e.reason:"";throw new Error("Failed to fetch database info. "+t)}re.reduxDispatch({type:rt,options:{metadata:e}})})).catch((function(e){re.addNotification({msg:e.message,type:"error",clear:!0})}))}};var Dt=n(3074),Nt=n.n(Dt),Rt=n(51038);function Pt(e){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pt(e)}function Ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xt(e,t){return xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xt(e,t)}function kt(e,t){if(t&&("object"===Pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function jt(e){return jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jt(e)}var It,At,Lt,Mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xt(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=jt(r);if(o){var n=jt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return kt(this,e)});function a(){return Ct(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e="fonticon fonticon-bell"+(this.props.visible?"":" hide");return ae.createElement("div",{className:e,onClick:this.props.onClick})}}])&&Tt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);It=Mt,At="propTypes",Lt={onClick:Nt().func.isRequired,visible:Nt().bool.isRequired},At in It?Object.defineProperty(It,At,{value:Lt,enumerable:!0,configurable:!0,writable:!0}):It[At]=Lt;const Ut=(0,Rt.$j)((function(e){return{visible:!e.notifications.notificationCenterVisible}}),(function(e){return{onClick:function(){e((function(e){e({type:Te})}))}}}))(Mt);var qt=function(e){var t=e.endpoint;return t?ae.createElement("div",{className:"faux__jsonlink"},ae.createElement("a",{"data-bypass":!0,className:"faux__jsonlink-link",href:t,target:"_blank",rel:"noopener noreferrer"},ae.createElement("span",{className:"faux__jsonlink-link-brackets"},"{ }"),ae.createElement("span",{className:"faux__jsonlink-link-label"},"JSON"))):null},Bt=function(e){var t=e.docURL;return t?ae.createElement("div",{className:"faux__doclink"},ae.createElement("a",{"data-bypass":"true",href:t,target:"_blank",rel:"noopener noreferrer",className:"faux__doclink-link"},ae.createElement("i",{className:"icon fonticon-bookmark"}))):null},Vt=function(e){var t=e.crumbs;return ae.createElement("div",{className:"faux-header__breadcrumbs"},function(e){var t=e.length-1;return e.map((function(e,n){var r=[ae.createElement(Ft,{key:n},e.name)];return e.link&&(r=[ae.createElement(Ft,{key:n},ae.createElement("a",{className:"faux-header__breadcrumbs-link",href:"#/"+e.link},e.name))]),e.name?(n<t&&r.push(ae.createElement(Kt,{key:"divider_"+n})),r):r}))}(t))};Vt.propTypes={crumbs:Nt().array.isRequired};var Ft=function(e){var t=e.children;return ae.createElement("div",{className:"faux-header__breadcrumbs-element"},t)},Kt=function(){return ae.createElement("div",{className:"fonticon-right-open faux-header__breadcrumbs-divider"})},zt=function(e){var t=e.docURL,n=e.endpoint;return ae.createElement("div",{className:"faux__jsondoc-wrapper"},ae.createElement(qt,{endpoint:n}),ae.createElement(Bt,{docURL:t}))},Ht=function(e){var t=e.children;return ae.createElement("div",{id:"dashboard",className:"one-pane "},t)},Gt=function(e){var t=e.showApiUrl,n=e.docURL,r=e.endpoint,o=e.crumbs,i=e.children,a="right-header-flex";return N.isIE1X()&&(a+=" "+a+"--ie1X"),ae.createElement("header",null,ae.createElement("div",{className:"flex-layout flex-row"},ae.createElement("div",{id:"breadcrumbs",className:"flex-body"},ae.createElement(Vt,{crumbs:o})),ae.createElement("div",{id:"right-header"},ae.createElement("div",{className:a},i)),t?ae.createElement(zt,{docURL:n,endpoint:r}):null,ae.createElement("div",{id:"notification-center-btn"},ae.createElement(Ut,null))))};Gt.defaultProps={showApiUrl:!0,crumbs:[]},Gt.propTypes={docURL:Nt().string,endpoint:Nt().string,crumbs:Nt().array};var Wt=function(e){var t=e.children;return ae.createElement("div",{className:"content-area container-fluid"},ae.createElement("div",{id:"tabs"}),ae.createElement("div",{id:"dashboard-content",className:"scrollable"},t))},Xt=function(e){var t=e.children;return ae.createElement("div",{className:"faux__onepane-footer"},t)},Qt=function(e){var t=e.component,n=e.docURL,r=e.endpoint,o=e.crumbs;return ae.createElement(Ht,null,ae.createElement(Gt,{crumbs:o,endpoint:r,docURL:n}),ae.createElement(Wt,null,t),ae.createElement(Xt,null))},$t=function(e){var t=e.children;return ae.createElement("div",{id:"dashboard-content"},t)},Jt=function(e){var t=e.component,n=e.docURL,r=e.endpoint,o=e.crumbs;return ae.createElement("div",{id:"dashboard",className:"one-pane doc-editor-page"},ae.createElement(Gt,{crumbs:o,endpoint:r,docURL:n}),ae.createElement($t,null,t))},Yt=n(92703),Zt=n.n(Yt),en=n(30653);function tn(e){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(e)}function nn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function on(e,t){return on=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},on(e,t)}function an(e,t){if(t&&("object"===tn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sn(e)}function sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cn(e){return cn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cn(e)}function un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ln=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&on(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=cn(r);if(o){var n=cn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return an(this,e)});function a(){var e;nn(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return un(sn(e=i.call.apply(i,[this].concat(n))),"state",{open:!1}),un(sn(e),"handleClick",(function(t){var n=!e.state.open;e.setState({open:n}),e.props.onClick({isOpen:n,event:t})})),e}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.title,r=this.state.open?"fonticon-down-open":"fonticon-right-open",o=Zt()("faux--accordion__item-content","collapse",{in:this.state.open});return ae.createElement("li",{className:"faux--accordion__item",onClick:this.handleClick},ae.createElement("button",{type:"button",className:"faux--accordion__item-header",onClick:this.handleClick},ae.createElement("i",{className:r}),ae.createElement("span",null,n)),ae.createElement(en.UO,{in:this.state.open},ae.createElement("div",{className:o},t)))}}])&&rn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function pn(e){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pn(e)}function fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hn(e,t,n){return t&&dn(e.prototype,t),n&&dn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function yn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bn(e,t)}function bn(e,t){return bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bn(e,t)}function mn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vn(e);if(t){var o=vn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return gn(this,n)}}function gn(e,t){if(t&&("object"===pn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _n(e)}function _n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vn(e){return vn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vn(e)}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}un(ln,"propTypes",{title:Nt().string.isRequired}),un(ln,"defaultProps",{onClick:function(){}});var En=function(e){yn(n,e);var t=mn(n);function n(){var e;fn(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return wn(_n(e=t.call.apply(t,[this].concat(o))),"getBadges",(function(){return e.props.elements.map(function(e,t){return ae.createElement(On,{label:this.props.getLabel(e),key:t,id:e,remove:this.removeBadge})}.bind(_n(e)))})),wn(_n(e),"removeBadge",(function(t,n){e.props.removeBadge(t,n)})),e}return hn(n,[{key:"render",value:function(){return ae.createElement("ul",{className:"component-badgelist"},this.getBadges())}}]),n}(ae.Component);wn(En,"propTypes",{elements:Nt().array.isRequired,removeBadge:Nt().func.isRequired}),wn(En,"defaultProps",{getLabel:function(e){return e},getId:function(e){return e}});var On=function(e){yn(n,e);var t=mn(n);function n(){var e;fn(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return wn(_n(e=t.call.apply(t,[this].concat(o))),"remove",(function(t){t.preventDefault(),e.props.remove(e.props.label,e.props.id)})),e}return hn(n,[{key:"render",value:function(){return ae.createElement("li",{className:"component-badge"},ae.createElement("span",{className:"label label-info"},this.props.label),ae.createElement("a",{href:"#",className:"label label-info remove-filter",onClick:this.remove,"data-bypass":"true"},"×"))}}]),n}(ae.Component);function Sn(e){return Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(e)}function Dn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rn(e,t){return Rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rn(e,t)}function Pn(e,t){if(t&&("object"===Sn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Cn(e){return Cn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cn(e)}wn(On,"propTypes",{label:Nt().string.isRequired,remove:Nt().func.isRequired});var Tn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rn(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Cn(r);if(o){var n=Cn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Pn(this,e)});function a(){return Dn(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.iconDefaultClass,n=e.fonticon,r=e.innerClasses,o=e.selected,i=e.containerClasses,a=e.title,s=e.disabled,c=e.text,u=e.toggleCallback,l=e.active,p=o||l?"js-headerbar-togglebutton-selected":"";return ae.createElement("button",{title:a,disabled:s,onClick:u,className:"button ".concat(i," ").concat(p)},ae.createElement("i",{className:"".concat(t," ").concat(n," ").concat(r)}),ae.createElement("span",null,c))}}])&&Nn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function xn(e){return xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xn(e)}function kn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function In(e,t){return In=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},In(e,t)}function An(e,t){if(t&&("object"===xn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ln(e)}function Ln(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mn(e){return Mn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mn(e)}function Un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Tn,"defaultProps",{innerClasses:"",fonticon:"",containerClasses:"",selected:!1,title:"",disabled:!1,toggleCallback:null,text:"",iconDefaultClass:"icon"});var qn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&In(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mn(r);if(o){var n=Mn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return An(this,e)});function a(){var e;kn(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Un(Ln(e=i.call.apply(i,[this].concat(n))),"getMultiSelectOptions",(function(){return e.props.hasSelectedItem?ae.createElement("button",{onClick:e.props.removeItem,className:"fonticon "+e.props.bulkIcon,title:e.props.buttonTitle}):null})),Un(Ln(e),"getPopupContent",(function(){return ae.createElement("ul",{className:"bulk-action-component-popover-actions"},ae.createElement("li",{onClick:e.selectAll},ae.createElement("i",{className:"icon fonticon-cancel"})," ",e.props.dropdownContentText))})),Un(Ln(e),"selectAll",(function(){e.bulkActionPopover.hide(),e.props.selectAll()})),Un(Ln(e),"getOverlay",(function(){return ae.createElement(en.Ox,{ref:function(t){return e.bulkActionPopover=t},trigger:"click",placement:"bottom",rootClose:!0,overlay:ae.createElement(en.J2,{id:"bulk-action-component-popover",title:e.props.title},e.getPopupContent())},ae.createElement("div",{className:"arrow-button"},ae.createElement("i",{className:"fonticon fonticon-play"})))})),Un(Ln(e),"getMasterSelector",(function(){return ae.createElement("div",{className:"bulk-action-component-panel"},ae.createElement("input",{type:"checkbox",checked:e.props.isChecked,onChange:e.props.toggleSelect,disabled:e.props.disabled}),e.props.enableOverlay?ae.createElement("div",{className:"separator"}):null,e.props.enableOverlay?e.getOverlay():null)})),e}return t=a,(n=[{key:"render",value:function(){return ae.createElement("div",{className:"bulk-action-component"},ae.createElement("div",{className:"bulk-action-component-selector-group"},this.getMasterSelector(),this.getMultiSelectOptions()))}}])&&jn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Bn(e){return Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bn(e)}function Vn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kn(e,t){return Kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kn(e,t)}function zn(e,t){if(t&&("object"===Bn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Hn(e){return Hn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hn(e)}Un(qn,"propTypes",{hasSelectedItem:Nt().bool.isRequired,removeItem:Nt().func.isRequired,selectAll:Nt().func,toggleSelect:Nt().func.isRequired,isChecked:Nt().bool.isRequired,disabled:Nt().bool}),Un(qn,"defaultProps",{disabled:!1,title:"Select rows that can be...",bulkIcon:"fonticon-trash",buttonTitle:"Delete all selected",dropdownContentText:"Deleted",enableOverlay:!1});var Gn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kn(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Hn(r);if(o){var n=Hn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return zn(this,e)});function a(){return Vn(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){return ae.createElement("div",{className:"styled-select"},ae.createElement("label",{htmlFor:this.props.selectId},ae.createElement("i",{className:"fonticon-down-dir styled-select-icon"}),ae.createElement("i",{className:"fonticon-down-dir styled-select-hover-icon"}),ae.createElement("select",{value:this.props.selectValue,id:this.props.selectId,className:this.props.selectValue,onChange:this.props.selectChange},this.props.selectContent)))}}])&&Fn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Gn,"propTypes",{selectValue:Nt().string.isRequired,selectId:Nt().string.isRequired,selectChange:Nt().func.isRequired});var Wn=n(30225),Xn=n.n(Wn);const Qn="CMPNTS_DATABASES_SHOWDELETE_MODAL",$n={deleteDatabase:function(e,t){var n=this,r=re.urls("databaseBaseURL","server",e,"");w(r).then((function(r){if(!r.ok){var o=r.reason||"";throw new Error(o)}n.showDeleteDatabaseModal({showModal:!0}),re.addNotification({msg:"The database <code>"+_.escape(e)+"</code> has been deleted.",clear:!0,escape:!1}),Backbone.history.loadUrl(re.urls("allDBs","app")),t&&t()})).catch((function(e){re.addNotification({msg:"Could not delete the database. "+e.message,type:"error",clear:!0})}))},showDeleteDatabaseModal:function(e){re.dispatch({type:Qn,options:e})}};var Jn=function(e,t){var n="#"+re.urls("databaseBaseURL","app",re.url.encode(e))+(t?"/_partition/"+encodeURIComponent(t):"");return{title:ie.i18n.en_US["new-mango-index"],url:n+"/_index",icon:"fonticon-plus-circled"}},Yn=function(e){return"designDoc"===e.navItem&&"Views"===e.designDocSection&&e.indexName},Zn=function(e,t){var n=t;return t&&e.options&&!1===e.options.partitioned&&(n=!1),n};const er=function(e){return _.isArray(e)?e[1]:e},tr=function(e,t){var n=re.getExtensions("sidebar:links"),r="#"+re.urls("databaseBaseURL","app",re.url.encode(e)),o="",i="";return t&&(o="/_partition/"+encodeURIComponent(t),i="?partitionKey="+encodeURIComponent(t)),[{title:"Add New",links:n.reduce((function(e,t){return e.push({title:t.title,url:r+o+"/"+t.url,icon:"fonticon-plus-circled"}),e}),[{title:"New Doc",url:r+"/_new"+i,icon:"fonticon-plus-circled"},{title:"New View",url:r+o+"/new_view",icon:"fonticon-plus-circled"},Jn(e,t)])}]},nr=function(e){return[{title:"Replicate Database",icon:"fonticon-replicate",url:re.urls("replication","app",e)},{title:"Delete",icon:"fonticon-trash",onClick:$n.showDeleteDatabaseModal.bind(void 0,{showDeleteModal:!0,dbId:e})}]},rr=function(e,t){var n=encodeURIComponent(e),r=re.urls("new","newDocument",n);return t&&(r=r+"?partitionKey="+encodeURIComponent(t)),r},or=Zn,ir=function(e){return JSON.parse('"'+e+'"')},ar=function(e,t){var n=e.split("\n"),r=!1;return n.length>t&&(r=!0,e=(n=n.slice(0,t)).join("\n")),{isTruncated:r,content:e}},sr=function(e,t){if(!t)return!1;var n=!1;if(e&&Yn(t)){var r="_design/"+t.designDocName,o=e.find((function(e){return e._id===r}));n=void 0!==o&&o.views&&void 0!==o.views[t.indexName]&&void 0!==o.views[t.indexName].reduce}return n},cr=function(e,t,n){if(!t)return!1;var r=!1;if(e&&Yn(t)){var o="_design/"+t.designDocName,i=e.find((function(e){return e._id===o}));i&&(r=Zn(i,n))}return r},ur=Yn;function lr(e){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lr(e)}function pr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dr(e,t){return dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dr(e,t)}function hr(e,t){if(t&&("object"===lr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yr(e)}function yr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function br(e){return br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},br(e)}function mr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dr(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=br(r);if(o){var n=br(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return hr(this,e)});function a(){var e;pr(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return mr(yr(e=i.call.apply(i,[this].concat(n))),"state",{editorInitialized:!1}),mr(yr(e),"initAceEditor",(function(t){e.editor=Xn().edit(t),e.editor.setShowPrintMargin(!1),e.editor.setOption("highlightActiveLine",!0),e.editor.setTheme("ace/theme/idle_fingers");var n=ir(e.props.value);e.editor.setValue(n,-1),e.state.editorInitialized||e.setState({editorInitialized:!0})})),mr(yr(e),"closeModal",(function(){e.props.onClose()})),mr(yr(e),"save",(function(){e.props.onSave(e.editor.getValue())})),mr(yr(e),"getSaveBtn",(function(){return e.state.editorInitialized&&ae.createElement("button",{id:"string-edit-save-btn",onClick:e.save,className:"btn btn-primary save"},ae.createElement("i",{className:"fonticon-circle-check"})," Modify Text")})),e}return t=a,(n=[{key:"render",value:function(){var e=this;return ae.createElement(en.u_,{className:"string-editor-modal",show:this.props.visible,onHide:this.closeModal},ae.createElement(en.u_.Header,{closeButton:!0},ae.createElement(en.u_.Title,null,"Edit Value ",ae.createElement("span",{id:"string-edit-header"}))),ae.createElement(en.u_.Body,null,ae.createElement("div",{id:"modal-error",className:"hide alert alert-error"}),ae.createElement("div",{id:"string-editor-wrapper"},ae.createElement("div",{id:"string-editor-container",ref:function(t){return e.initAceEditor(t)},className:"doc-code"}))),ae.createElement(en.u_.Footer,null,ae.createElement("a",{className:"cancel-link",onClick:this.closeModal},"Cancel"),this.getSaveBtn()))}}])&&fr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);mr(gr,"propTypes",{value:Nt().string.isRequired,visible:Nt().bool.isRequired,onClose:Nt().func.isRequired,onSave:Nt().func.isRequired}),mr(gr,"defaultProps",{visible:!1,onClose:function(){},onSave:function(){}});var _r=n(58459);function vr(e){return vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vr(e)}function wr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Or(e,t){return Or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Or(e,t)}function Sr(e,t){if(t&&("object"===vr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Dr(e)}function Dr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nr(e){return Nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nr(e)}function Rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Xn().config.setModuleUrl("ace/theme/idle_fingers",n(34120)),Xn().config.setModuleUrl("ace/theme/dawn",n(49192)),Xn().config.setModuleUrl("ace/mode/json",n(60540)),Xn().config.setModuleUrl("ace/mode/json_worker",n(21761)),Xn().config.setModuleUrl("ace/mode/javascript",n(12050)),Xn().config.setModuleUrl("ace/mode/javascript_worker",n(76273)),Xn().config.setModuleUrl("ace/ext/static_highlight",n(17592)),Xn().config.setModuleUrl("ace/ext/searchbox",n(51341)),Xn().config.set("useStrictCSP",!0);var Pr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Or(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Nr(r);if(o){var n=Nr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Sr(this,e)});function a(){var e;wr(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Rr(Dr(e=i.call.apply(i,[this].concat(n))),"state",{originalCode:e.props.defaultCode,stringEditModalVisible:!1,stringEditIconVisible:!1,stringEditIconStyle:{},stringEditModalValue:""}),Rr(Dr(e),"hasChanged",(function(){return!_.isEqual(e.state.originalCode,e.getValue())})),Rr(Dr(e),"clearChanges",(function(){e.setState({originalCode:e.getValue()})})),Rr(Dr(e),"setupAce",(function(t,n){e.editor=Xn().edit(e.ace),e.editor.commands.bindKeys({"Ctrl-L|Command-L":null,"Ctrl-Shift-L|Command-Shift-L":"gotoline"}),n&&e.setValue(t.defaultCode),e.editor.autoScrollEditorIntoView=t.autoScrollEditorIntoView,e.props.setHeightToLineCount&&e.setHeightToLineCount(),e.props.ignorableErrors&&e.removeIgnorableAnnotations(),e.addCommands()})),Rr(Dr(e),"addCommands",(function(){_.each(e.props.editorCommands,(function(t){e.editor.commands.addCommand(t)}))})),Rr(Dr(e),"setupEvents",(function(){e.props.stringEditModalEnabled&&(e.editor.on("changeSelection",_.bind(e.showHideEditStringGutterIcon,Dr(e))),e.editor.getSession().on("changeBackMarker",_.bind(e.showHideEditStringGutterIcon,Dr(e))),e.editor.getSession().on("changeScrollTop",_.bind(e.updateEditStringGutterIconPosition,Dr(e)))),e.props.notifyUnsavedChanges&&(window.addEventListener("beforeunload",e.quitWarningMsg),re.beforeUnload("editor_"+e.props.id,e.quitWarningMsg))})),Rr(Dr(e),"onBlur",(function(){e.props.blur(e.getValue())})),Rr(Dr(e),"onContentChange",(function(){e.props.setHeightToLineCount&&e.setHeightToLineCount(),e.props.change(e.getValue())})),Rr(Dr(e),"quitWarningMsg",(function(){if(e.hasChanged())return"Your changes have not been saved. Click Cancel to return to the document, or OK to proceed."})),Rr(Dr(e),"removeEvents",(function(){e.props.notifyUnsavedChanges&&(window.removeEventListener("beforeunload",e.quitWarningMsg),re.removeBeforeUnload("editor_"+e.props.id))})),Rr(Dr(e),"setHeightToLineCount",(function(){var t=e.editor.getSession().getDocument().getLength(),n=t>e.props.maxLines?e.props.maxLines:t;e.editor.setOptions({maxLines:n,minLines:e.props.minLines})})),Rr(Dr(e),"getAnnotations",(function(){return e.editor.getSession().getAnnotations()})),Rr(Dr(e),"isIgnorableError",(function(t){return-1!==_.indexOf(e.props.ignorableErrors,t)})),Rr(Dr(e),"removeIgnorableAnnotations",(function(){var t=e.isIgnorableError;e.editor.getSession().on("changeAnnotation",function(){var e=this.editor.getSession().getAnnotations(),n=_.reduce(e,(function(e,n){return t(n.raw)||e.push(n),e}),[]);e.length!==n.length&&this.editor.getSession().setAnnotations(n)}.bind(Dr(e)))})),Rr(Dr(e),"showHideEditStringGutterIcon",(function(){return e.hasErrors()||!e.parseLineForStringMatch()?(e.setState({stringEditIconVisible:!1}),!1):(e.setState({stringEditIconVisible:!0,stringEditIconStyle:{top:e.getGutterIconPosition()}}),!0)})),Rr(Dr(e),"updateEditStringGutterIconPosition",(function(){e.state.stringEditIconVisible&&e.setState({stringEditIconStyle:{top:e.getGutterIconPosition()}})})),Rr(Dr(e),"getGutterIconPosition",(function(){var t=e.getRowHeight(),n=e.editor.session.getScrollTop();return t*e.documentToScreenRow(e.getSelectionStart().row)-n+"px"})),Rr(Dr(e),"parseLineForStringMatch",(function(){var t=e.getSelectionStart().row,n=e.getSelectionEnd().row;if(t>=0&&n>=0&&t===n&&e.isRowExpanded(t)){var r=e.getLine(t).match(/^([ \t]*)("[^"]*["][ \t]*:[ \t]*)?(["|'].*"[ \t]*,?[ \t]*)$/);if(r)return r}return!1})),Rr(Dr(e),"openStringEditModal",(function(){var t=e.parseLineForStringMatch()[3].trim();","===t.substring(t.length-1)&&(t=t.substring(0,t.length-1).trim()),t=t.substring(1,t.length-1),e.setState({stringEditModalVisible:!0,stringEditModalValue:t})})),Rr(Dr(e),"saveStringEditModal",(function(t){var n=e.parseLineForStringMatch(),r=n[1]||"",o=n[2]||"",i=n[3],a="";","===i.substring(i.length-1)&&(a=","),e.replaceCurrentLine(r+o+JSON.stringify(t)+a+"\n"),e.closeStringEditModal()})),Rr(Dr(e),"closeStringEditModal",(function(){e.setState({stringEditModalVisible:!1})})),Rr(Dr(e),"hasErrors",(function(){return!_.every(e.getAnnotations(),(function(t){return e.isIgnorableError(t.raw)}))})),Rr(Dr(e),"setReadOnly",(function(t){e.editor.setReadOnly(t)})),Rr(Dr(e),"setValue",(function(t,n){n=n||-1,e.editor.setValue(t,n)})),Rr(Dr(e),"getValue",(function(){return e.editor.getValue()})),Rr(Dr(e),"getEditor",(function(){return Dr(e)})),Rr(Dr(e),"getLine",(function(t){return e.editor.session.getLine(t)})),Rr(Dr(e),"getSelectionStart",(function(){return e.editor.getSelectionRange().start})),Rr(Dr(e),"getSelectionEnd",(function(){return e.editor.getSelectionRange().end})),Rr(Dr(e),"getRowHeight",(function(){return e.editor.renderer.layerConfig.lineHeight})),Rr(Dr(e),"isRowExpanded",(function(t){return!e.editor.getSession().isRowFolded(t)})),Rr(Dr(e),"documentToScreenRow",(function(t){return e.editor.getSession().documentToScreenRow(t,0)})),Rr(Dr(e),"replaceCurrentLine",(function(t){e.editor.getSelection().selectLine(),e.editor.insert(t),e.editor.getSelection().moveCursorUp()})),Rr(Dr(e),"onAceLoad",(function(t){e.ace=t})),e}return t=a,(n=[{key:"componentDidMount",value:function(){this.setupAce(this.props,!0),this.setupEvents()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),this.editor.destroy()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setupAce(e,!1)}},{key:"render",value:function(){var e=this;return ae.createElement("div",null,ae.createElement(_r.ZP,{name:this.props.id,className:"js-editor",mode:this.props.mode,theme:this.props.theme,onLoad:_.bind(this.onAceLoad,this),onBlur:_.bind(this.onBlur,this),onChange:_.bind(this.onContentChange,this),editorProps:{$blockScrolling:1/0,useSoftTabs:!0},readOnly:this.props.disabled,showPrintMargin:this.props.showPrintMargin,highlightActiveLine:this.props.highlightActiveLine,width:"100%",height:"100%",tabSize:2,fontSize:this.props.fontSize,focus:this.props.autoFocus,setOptions:{}}),ae.createElement("button",{ref:function(t){return e.stringEditIcon=t},className:"btn string-edit",title:"Edit string",disabled:!this.state.stringEditIconVisible||this.props.disabled,style:this.state.stringEditIconStyle,onClick:this.openStringEditModal},ae.createElement("i",{className:"icon icon-edit"})),ae.createElement(gr,{ref:function(t){return e.stringEditModal=t},visible:this.state.stringEditModalVisible,value:this.state.stringEditModalValue,onSave:this.saveStringEditModal,onClose:this.closeStringEditModal}))}}])&&Er(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);Rr(Pr,"defaultProps",{id:"code-editor",mode:"javascript",theme:"idle_fingers",fontSize:13,defaultCode:"",disabled:!1,showGutter:!0,highlightActiveLine:!0,showPrintMargin:!1,autoScrollEditorIntoView:!0,autoFocus:!1,stringEditModalEnabled:!1,setHeightToLineCount:!1,maxLines:10,minLines:11,editorCommands:[],notifyUnsavedChanges:!1,ignorableErrors:[],change:function(){},blur:function(){}});var Cr=n(4927),Tr=n.n(Cr);function xr(e){return xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xr(e)}function kr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ir(e,t){return Ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ir(e,t)}function Ar(e,t){if(t&&("object"===xr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Lr(e)}function Lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mr(e){return Mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mr(e)}function Ur(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qr=Tr().js_beautify?Tr().js_beautify:Tr(),Br=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ir(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mr(r);if(o){var n=Mr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ar(this,e)});function a(){var e;kr(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ur(Lr(e=i.call.apply(i,[this].concat(n))),"noOfLines",(function(){return e.props.code.split(/\r\n|\r|\n/).length})),Ur(Lr(e),"canBeautify",(function(){return 1===e.noOfLines()})),Ur(Lr(e),"beautify",(function(t){t.preventDefault();var n=qr(e.props.code);e.props.beautifiedCode(n)})),Ur(Lr(e),"getTooltip",(function(){return ae.createElement(en.u,{id:"tooltip"},"Switch to editable code format.")})),e}return t=a,(n=[{key:"render",value:function(){if(!this.canBeautify())return null;var e=this.getTooltip();return ae.createElement(en.Ox,{placement:"right",overlay:e},ae.createElement("button",{onClick:this.beautify,className:"beautify beautify_map btn btn-primary btn-small beautify-tooltip",type:"button"},"Format Code"))}}])&&jr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Vr(e){return Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vr(e)}function Fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zr(e,t){return zr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zr(e,t)}function Hr(e,t){if(t&&("object"===Vr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gr(e)}function Gr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wr(e){return Wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wr(e)}function Xr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qr={dark:"idle_fingers",light:"dawn"},$r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zr(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wr(r);if(o){var n=Wr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Hr(this,e)});function a(){var e;Fr(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Xr(Gr(e=i.call.apply(i,[this].concat(n))),"getStoreState",(function(){return{theme:e.getZenTheme(),code:e.props.defaultCode}})),Xr(Gr(e),"getZenTheme",(function(){var e=ie.utils.localStorageGet("zenTheme");return _.isUndefined(e)?"dark":e})),Xr(Gr(e),"onChange",(function(){e.setState(e.getStoreState())})),Xr(Gr(e),"exitZenMode",(function(){e.props.onExit(e.getValue())})),Xr(Gr(e),"getValue",(function(){return e.ace.getValue()})),Xr(Gr(e),"toggleTheme",(function(){var t="dark"===e.state.theme?"light":"dark";e.setState({theme:t,code:e.getValue()}),ie.utils.localStorageSet("zenTheme",t)})),Xr(Gr(e),"setValue",(function(t,n){n=n||-1,e.editor.setValue(t,n)})),Xr(Gr(e),"state",e.getStoreState()),e}return t=a,(n=[{key:"render",value:function(){var e=this,t="full-page-editor-modal-wrapper zen-theme-"+this.state.theme,n=[{name:"close",bindKey:{win:"ESC",mac:"ESC"},exec:this.exitZenMode}],r=ae.createElement(en.u,{id:"tooltip"},"Exit zen mode (`esc`)"),o=ae.createElement(en.u,{id:"tooltip"},"Switch zen theme");return ae.createElement("div",{className:t},ae.createElement("div",{className:"zen-mode-controls"},ae.createElement("ul",null,ae.createElement("li",null,ae.createElement(en.Ox,{placement:"left",overlay:r},ae.createElement("span",{className:"fonticon fonticon-resize-small js-exit-zen-mode","data-container":".zen-mode-controls .tooltips",onClick:this.exitZenMode}))),ae.createElement("li",null,ae.createElement(en.Ox,{placement:"left",overlay:o},ae.createElement("span",{className:"fonticon fonticon-picture js-toggle-theme","data-container":".zen-mode-controls .tooltips",title:"Switch zen theme",onClick:this.toggleTheme})))),ae.createElement("div",{className:"tooltips"})),ae.createElement(Pr,{ref:function(t){return e.ace=t},autoFocus:!0,theme:Qr[this.state.theme],defaultCode:this.props.defaultCode,editorCommands:n,ignorableErrors:this.props.ignorableErrors,highlightActiveLine:this.props.highlightActiveLine}))}}])&&Kr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Jr(e){return Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jr(e)}function Yr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eo(e,t){return eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},eo(e,t)}function to(e,t){if(t&&("object"===Jr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return no(e)}function no(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ro(e){return ro=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ro(e)}function oo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Xr($r,"defaultProps",{mode:"javascript",defaultCode:"",ignorableErrors:[],onExit:null,highlightActiveLine:!1});var io=["Missing name in function declaration.","['{a}'] is better written in dot notation."],ao=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eo(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ro(r);if(o){var n=ro(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return to(this,e)});function a(){var e;Yr(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return oo(no(e=i.call.apply(i,[this].concat(n))),"getStoreState",(function(){return{zenModeEnabled:!1,code:e.props.defaultCode}})),oo(no(e),"getZenModeIcon",(function(){if(e.props.allowZenMode)return ae.createElement("span",{className:"fonticon fonticon-resize-full zen-editor-icon",title:"Enter Zen mode",onClick:e.enterZenMode})})),oo(no(e),"getDocIcon",(function(){if(e.props.docLink)return ae.createElement("a",{className:"help-link","data-bypass":"true",href:e.props.docLink,target:"_blank",rel:"noopener noreferrer"},ae.createElement("i",{className:"icon-question-sign"}))})),oo(no(e),"getZenModeOverlay",(function(){if(e.state.zenModeEnabled)return ae.createElement($r,{defaultCode:e.state.code,mode:e.props.mode,ignorableErrors:io,onExit:e.exitZenMode})})),oo(no(e),"enterZenMode",(function(){e.setState({zenModeEnabled:!0,code:e.codeEditor.getValue()})})),oo(no(e),"exitZenMode",(function(t){e.setState({zenModeEnabled:!1}),e.getEditor().setValue(t)})),oo(no(e),"getEditor",(function(){return e.codeEditor})),oo(no(e),"getValue",(function(){return e.getEditor().getValue()})),oo(no(e),"beautify",(function(t){e.setState({code:t}),e.getEditor().setValue(t)})),oo(no(e),"update",(function(){e.getEditor().setValue(e.state.code)})),oo(no(e),"state",e.getStoreState()),e}return t=a,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.defaultCode!==this.props.defaultCode&&this.setState({code:e.defaultCode})}},{key:"render",value:function(){var e=this,t="control-group";return this.props.className&&(t+=" "+this.props.className),ae.createElement("div",{className:t},ae.createElement("label",null,ae.createElement("span",null,this.props.title),this.getDocIcon(),this.getZenModeIcon()),ae.createElement(Pr,{id:this.props.id,ref:function(t){return e.codeEditor=t},mode:"javascript",defaultCode:this.state.code,showGutter:!0,ignorableErrors:io,setHeightToLineCount:!0,maxLines:1e4,blur:this.props.blur}),ae.createElement(Br,{code:this.state.code,beautifiedCode:this.beautify}),this.getZenModeOverlay())}}])&&Zr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function so(e){return so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},so(e)}function co(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lo(e,t){return lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lo(e,t)}function po(e,t){if(t&&("object"===so(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function fo(e){return fo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fo(e)}oo(ao,"defaultProps",{id:"code-editor",className:"",defaultCode:"",title:"",docLink:"",allowZenMode:!0,blur:function(){}});var ho=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lo(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fo(r);if(o){var n=fo(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return po(this,e)});function a(){return co(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){return ae.createElement("div",{className:"bordered-box"},ae.createElement("div",{className:"padded-box"},this.props.children))}}])&&uo(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);const yo="LAYOUT_TABLE",bo="LAYOUT_METADATA",mo="LAYOUT_JSON",go="MangoIndex",_o="MangoQueryResult",vo="view",wo="truncated",Eo="full",Oo="small-font",So="large-font",Do="medium-font";function No(e){return No="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},No(e)}function Ro(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Po(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Co(e,t){return Co=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Co(e,t)}function To(e,t){if(t&&("object"===No(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xo(e)}function xo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ko(e){return ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ko(e)}function jo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Io=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Co(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ko(r);if(o){var n=ko(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return To(this,e)});function a(){var e;Ro(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return jo(xo(e=i.call.apply(i,[this].concat(n))),"onChange",(function(t){t.preventDefault(),e.props.docChecked(e.props.doc.id,e.props.doc._rev)})),jo(xo(e),"getUrlFragment",(function(){return e.props.children?ae.createElement("div",{className:"doc-edit-symbol pull-right",title:"Edit document"},e.props.children):""})),jo(xo(e),"getExtensionIcons",(function(){var t=re.getExtensions("DocList:icons");return _.map(t,(function(t,n){return ae.createElement(t,{doc:e.props.doc,key:n})}))})),jo(xo(e),"getDocumentTypeIcon",(function(){return e.props.docType===go?-1!==e.props.docContent.indexOf('"partitioned": true')?ae.createElement("i",{className:"fonticon-documents",title:"Partitioned index"}):ae.createElement("i",{className:"fonticon-document",title:"Global index"}):null})),jo(xo(e),"getCheckbox",(function(){return e.props.isDeletable?ae.createElement("div",{className:"checkbox inline"},ae.createElement("input",{id:"checkbox-"+e.props.docIdentifier,checked:e.props.checked,"data-checked":e.props.checked,type:"checkbox",onChange:e.onChange,className:"js-row-select"}),ae.createElement("label",{onClick:e.onChange,className:"label-checkbox-doclist",htmlFor:"checkbox-"+e.props.docIdentifier})):ae.createElement("div",{className:"checkbox-dummy"})})),jo(xo(e),"onClick",(function(t){e.props.onClick(e.props.docIdentifier,e.props.doc,t)})),jo(xo(e),"getDocContent",(function(){if(_.isEmpty(e.props.docContent))return null;var t=e.props.docContent,n=!1;if(e.props.truncate){var r=ar(e.props.docContent,e.props.maxRows);n=r.isTruncated,t=r.content}var o=e.props.resultsStyle.fontSize,i=Zt()("prettyprint",{"prettyprint--small":o===Oo,"prettyprint--large":o===So});return ae.createElement("div",{className:"doc-data"},ae.createElement("pre",{className:i},t),n?ae.createElement("div",{className:"doc-content-truncated"},"(truncated)"):null)})),e}return t=a,(n=[{key:"render",value:function(){return ae.createElement("div",{"data-id":this.props.docIdentifier,className:"doc-row"},ae.createElement("div",{className:"custom-inputs"},this.getCheckbox()),ae.createElement("div",{className:"doc-item"},ae.createElement("header",{onClick:this.onClick},ae.createElement("span",{className:"header-keylabel"},this.getDocumentTypeIcon(),this.props.keylabel),ae.createElement("span",{className:"header-doc-id"},this.props.header?'"'+this.props.header+'"':null),this.getUrlFragment(),ae.createElement("div",{className:"doc-item-extension-icons pull-right"},this.getExtensionIcons())),this.getDocContent()),ae.createElement("div",{className:"clearfix"}))}}])&&Po(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);jo(Io,"propTypes",{docIdentifier:Nt().string.isRequired,docType:Nt().string,docChecked:Nt().func.isRequired,truncate:Nt().bool,maxRows:Nt().number,resultsStyle:Nt().object}),jo(Io,"defaultProps",{truncate:!0,maxRows:500,resultsStyle:{fontSize:Do},docType:vo});var Ao=function(){return ae.createElement("div",{className:"loading-lines"},ae.createElement("div",{id:"line1"}," "),ae.createElement("div",{id:"line2"}," "),ae.createElement("div",{id:"line3"}," "),ae.createElement("div",{id:"line4"}," "))};function Lo(e){return Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lo(e)}function Mo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qo(e,t){return qo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qo(e,t)}function Bo(e,t){if(t&&("object"===Lo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vo(e)}function Vo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fo(e){return Fo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fo(e)}function Ko(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qo(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fo(r);if(o){var n=Fo(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Bo(this,e)});function a(){var e;Mo(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ko(Vo(e=i.call.apply(i,[this].concat(n))),"getIcon",(function(){return e.props.showIcon?ae.createElement("i",{className:"icon "+e.props.customIcon}):null})),e}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.buttonType,r=e.id,o=e.style,i=e.text,a=e.disabled;return ae.createElement("button",{onClick:t,type:"submit",disabled:a,"data-id":this.props["data-id"],className:"btn save "+n,id:r,style:o},this.getIcon(),i)}}])&&Uo(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);Ko(zo,"propTypes",{showIcon:Nt().bool,id:Nt().string,customIcon:Nt().string,style:Nt().object,buttonType:Nt().string,"data-id":Nt().string,onClick:Nt().func,disabled:Nt().bool}),Ko(zo,"defaultProps",{disabled:!1,showIcon:!0,customIcon:"fonticon-ok-circled",buttonType:"btn-primary",style:{},"data-id":null,onClick:function(){}});var Ho=n(71400),Go=n.n(Ho);function Wo(e){return Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wo(e)}function Xo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $o(e,t,n){return t&&Qo(e.prototype,t),n&&Qo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yo(e,t)}function Yo(e,t){return Yo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yo(e,t)}function Zo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ni(e);if(t){var o=ni(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ei(this,n)}}function ei(e,t){if(t&&("object"===Wo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ti(e)}function ti(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ni(e){return ni=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ni(e)}function ri(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oi=function(e){Jo(n,e);var t=Zo(n);function n(){var e;Xo(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return ri(ti(e=t.call.apply(t,[this].concat(o))),"createSectionLinks",(function(t){return t?t.map((function(t,n){return e.createEntry(t,n)})):null})),ri(ti(e),"createEntry",(function(e,t){return ae.createElement("li",{key:t},ae.createElement("a",{className:Zt()("icon",e.icon,{"fonticon-placeholder":!e.icon}),"data-bypass":e.external?"true":"",href:e.url,onClick:e.onClick,rel:"noreferrer noopener",target:e.external?"_blank":""},e.title))})),ri(ti(e),"createSectionTitle",(function(e,t){return e?ae.createElement("li",{key:t,className:"header-label"},e):null})),ri(ti(e),"createSection",(function(){return e.props.links.map((function(t,n){return t.title&&t.links?[e.createSectionTitle(t.title,"title_"+n),e.createSectionLinks(t.links)]:e.createEntry(t,"el"+n)}))})),e}return $o(n,[{key:"render",value:function(){var e=this.createSection(),t=this.props.hideArrow?"":"arrow",n="button"===this.props.toggleType?ii:ai;return ae.createElement(en.Lt,{id:"dropdown-menu"},ae.createElement(n,{bsRole:"toggle",icon:this.props.icon}),ae.createElement(si,{bsRole:"menu",className:t},e))}}]),n}(ae.Component);ri(oi,"defaultProps",{icon:"fonticon-plus-circled",hideArrow:!1,toggleType:"link"}),ri(oi,"propTypes",{icon:Nt().string,hideArrow:Nt().bool,links:Nt().array.isRequired,toggleType:Nt().string.isRequired});var ii=function(e){Jo(n,e);var t=Zo(n);function n(e,r){var o;return Xo(this,n),(o=t.call(this,e,r)).handleClick=o.handleClick.bind(ti(o)),o}return $o(n,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick(e)}},{key:"render",value:function(){return ae.createElement(en.zx,{onClick:this.handleClick},ae.createElement("i",{className:"dropdown-toggle "+this.props.icon,style:{fontSize:"1rem",boxShadow:"0px 0px 0px"}}),this.props.children)}}]),n}(ae.Component),ai=function(e){Jo(n,e);var t=Zo(n);function n(e,r){var o;return Xo(this,n),(o=t.call(this,e,r)).handleClick=o.handleClick.bind(ti(o)),o}return $o(n,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick(e)}},{key:"render",value:function(){return ae.createElement("a",{className:"dropdown-toggle icon "+this.props.icon,style:{fontSize:"1rem",boxShadow:"0px 0px 0px"},onClick:this.handleClick},this.props.children)}}]),n}(ae.Component),si=function(e){Jo(n,e);var t=Zo(n);function n(e,r){return Xo(this,n),t.call(this,e,r)}return $o(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.open,r=e.onClose,o=e.className;return ae.createElement(Go(),{disabled:!n,onRootClose:r},ae.createElement("ul",{className:Zt()("dropdown-menu",o),role:"menu","aria-labelledby":"dLabel"},t))}}]),n}(ae.Component),ci=n(90731);function ui(e){return ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ui(e)}function li(){return li=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},li.apply(this,arguments)}function pi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function di(e,t,n){return t&&fi(e.prototype,t),n&&fi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yi(e,t)}function yi(e,t){return yi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yi(e,t)}function bi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_i(e);if(t){var o=_i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mi(this,n)}}function mi(e,t){if(t&&("object"===ui(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gi(e)}function gi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _i(e){return _i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_i(e)}function vi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wi=function(e){hi(n,e);var t=bi(n);function n(e){var r;return pi(this,n),vi(gi(r=t.call(this,e)),"getChildren",(function(e){var t=e[0].style,n="tray show-tray "+r.props.className;return ae.createElement("div",{key:"1",id:r.props.id,style:{opacity:t.opacity,top:t.top+"px"},className:n},r.props.children)})),vi(gi(r),"willEnter",(function(){return{opacity:(0,ci.ST)(1),top:(0,ci.ST)(64)}})),vi(gi(r),"willLeave",(function(){return{opacity:(0,ci.ST)(0),top:(0,ci.ST)(30)}})),vi(gi(r),"getDefaultStyles",(function(){return[{key:"1",style:{opacity:0,top:30}}]})),vi(gi(r),"getStyles",(function(e){return e?e.map((function(e){return{key:"1",style:e.style}})):[{key:"1",style:r.willEnter()}]})),e.container||(r.container=gi(r)),r}return di(n,[{key:"render",value:function(){return ae.createElement(en.aV,{show:this.props.contentVisible,onHide:this.props.closeTray,placement:"bottom",container:this.props.container,rootClose:!0,onEnter:this.props.onEnter},ae.createElement(ci.bg,{defaultStyles:this.getDefaultStyles(),styles:this.getStyles(),willLeave:this.willLeave,willEnter:this.willEnter},this.getChildren))}}]),n}(ae.Component);vi(wi,"propTypes",{contentVisible:Nt().bool.isRequired,closeTray:Nt().func.isRequired,onEnter:Nt().func,container:Nt().object}),vi(wi,"defaultProps",{onEnter:function(){}});var Ei=function(e){hi(n,e);var t=bi(n);function n(){var e;pi(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return vi(gi(e=t.call.apply(t,[this].concat(o))),"renderChildren",(function(){return ae.Children.map(e.props.children,(function(t){var n={};return Object.keys(e.props).filter((function(t){return Object.prototype.hasOwnProperty.call(e.props,t)})).map((function(t){return n[t]=e.props[t]})),ae.cloneElement(t,n)}))})),e}return di(n,[{key:"render",value:function(){return ae.createElement("div",null,this.renderChildren())}}]),n}(ae.Component);function Oi(e){return Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oi(e)}function Si(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Di(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ni(e,t){return Ni=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ni(e,t)}function Ri(e,t){if(t&&("object"===Oi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pi(e)}function Pi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ci(e){return Ci=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ci(e)}function Ti(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}vi(Ei,"defaultProps",{className:""});var xi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ni(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ci(r);if(o){var n=Ci(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ri(this,e)});function a(){var e;Si(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ti(Pi(e=i.call.apply(i,[this].concat(n))),"state",{inputValue:"",disableSubmit:!0}),Ti(Pi(e),"close",(function(t){t&&t.preventDefault(),e.setState({inputValue:"",disableSubmit:!0}),e.props.showHide({showModal:!1})})),Ti(Pi(e),"open",(function(){e.props.showHide({showModal:!0})})),Ti(Pi(e),"getDatabaseName",(function(){return e.props.modalProps.dbId.trim()})),Ti(Pi(e),"onInputChange",(function(t){var n=t.target.value.trim();e.setState({inputValue:n}),e.setState({disableSubmit:n!==e.getDatabaseName()})})),Ti(Pi(e),"onDeleteClick",(function(t){t.preventDefault(),$n.deleteDatabase(e.getDatabaseName(),e.props.onSuccess)})),Ti(Pi(e),"onInputKeypress",(function(t){13===t.keyCode&&!0!==e.state.disableSubmit&&$n.deleteDatabase(e.getDatabaseName(),e.props.onSuccess)})),e}return t=a,(n=[{key:"render",value:function(){var e=this.props.modalProps.isSystemDatabase,t=this.props.modalProps.showDeleteModal,n=this.props.modalProps.dbId,r=e?ae.createElement("p",{style:{color:"#d14"},className:"warning"},ae.createElement("b",null,"You are about to delete a system database, be careful!")):null;return ae.createElement(en.u_,{dialogClassName:"delete-db-modal",show:t,onHide:this.close},ae.createElement(en.u_.Header,{closeButton:!0},ae.createElement(en.u_.Title,null,"Confirm Deletion")),ae.createElement(en.u_.Body,null,r,ae.createElement("p",null,"Warning: This action will permanently delete ",ae.createElement("code",null,n),". To confirm the deletion of the database and all of the database's documents, you must enter the database's name."),ae.createElement("input",{type:"text",className:"input-block-level",onKeyUp:this.onInputKeypress,onChange:this.onInputChange,autoFocus:!0})),ae.createElement(en.u_.Footer,null,ae.createElement("a",{href:"#",onClick:this.close,"data-bypass":"true",className:"cancel-link"},"Cancel"),ae.createElement("button",{disabled:this.state.disableSubmit,onClick:this.onDeleteClick,className:"btn btn-danger delete"},ae.createElement("i",{className:"icon icon-trash"})," Delete Database")))}}])&&Di(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);Ti(xi,"propTypes",{showHide:Nt().func.isRequired,modalProps:Nt().object,onSuccess:Nt().func});var ki=function(e){var t=e.selected,n=e.text,r=e.onChange,o=e.iconClass,i=e.badgeText,a=t?"tab-element-checked":"",s=null;return i&&(s=ae.createElement("span",{className:"tab-element-badge"},i)),ae.createElement("li",{className:"component-tab-element ".concat(a)},ae.createElement("label",null,ae.createElement("div",{className:"tab-element-indicator-wrapper"},ae.createElement("div",{className:"tab-element-indicator"})),ae.createElement("div",{className:"tab-element-content"},ae.createElement("i",{className:o}),ae.createElement("input",{type:"radio",value:n,checked:t,onChange:r}),n,s)))};ki.propTypes={selected:Nt().bool.isRequired,text:Nt().string.isRequired,onChange:Nt().func.isRequired,iconClass:Nt().string,badgeText:Nt().string};var ji,Ii=function(e){var t=e.children;return ae.createElement("ul",{className:"component-tab-element-wrapper"},t)},Ai=n(679);function Li(e){return Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Li(e)}function Mi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ui(e,t){return Ui=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ui(e,t)}function qi(e,t){if(t&&("object"===Li(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bi(e)}function Bi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vi(e){return Vi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vi(e)}var Fi=function(){ji&&window.clearInterval(ji)},Ki=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ui(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Vi(r);if(o){var n=Vi(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return qi(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={value:t.props.startValue},t.updatePollingFreq=t.updatePollingFreq.bind(Bi(t)),t}return t=a,n=[{key:"componentDidMount",value:function(){this.setPollingCounter(this.state.value)}},{key:"componentWillUnmount",value:function(){Fi()}},{key:"setPollingCounter",value:function(e){var t,n,r=this.props,o=r.min,i=r.max,a=r.onPoll;this.setState({value:e}),0===e||e<o||e>i?Fi():(t=1e3*e,n=function(){return a()},Fi(),ji=window.setInterval(n,t))}},{key:"updatePollingFreq",value:function(e){this.setPollingCounter(parseInt(e,10))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.startValue!==e.startValue&&this.setPollingCounter(e.startValue)}},{key:"render",value:function(){var e=this.props,t=e.stepSize,n=e.min,r=e.max,o=e.valueUnits,i=this.state.value,a=function(e,t,n,r){var o=parseInt(e,10);if(0===o||o>n||o<r)return"off";if(o<60&&"minute"===t)return"".concat(o," seconds");var i=o;return"minute"===t&&(i=Math.floor(o/60)),"".concat(i," ").concat(1===i?t:"".concat(t,"s"))}(i,o,r,n),s="off"===a?"faux__polling-info-value--off":"faux__polling-info-value--active";return ae.createElement("div",{className:"faux__polling"},ae.createElement("div",{className:"faux__polling-info"},ae.createElement("span",{className:"faux__polling-info-text"},"Polling Interval"),ae.createElement("span",{className:"faux__polling-info-value faux__polling-info-value ".concat(s)},a)),ae.createElement(Ai.Z,{className:"faux__polling-info-slider",min:n,max:r+t,step:t,defaultValue:i,onChange:this.updatePollingFreq}))}}],n&&Mi(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);Ki.defaultProps={startValue:0,min:0,valueUnits:"minute"},Ki.propTypes={startValue:Nt().number,valueUnits:Nt().string,min:Nt().number,max:Nt().number.isRequired,stepSize:Nt().number.isRequired,onPoll:Nt().func.isRequired};var zi=function(e){var t=e.refresh;return ae.createElement("div",{className:"faux__refresh-btn"},ae.createElement("a",{className:"faux__refresh-link",href:"#","data-bypass":"true",onClick:function(e){e.preventDefault(),t()}},ae.createElement("i",{className:"faux__refresh-icon fonticon-arrows-cw"}),"Refresh"))};zi.propTypes={refresh:Nt().func.isRequired};var Hi,Gi=n(73150),Wi=n.n(Gi);function Xi(e){return Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xi(e)}function Qi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ji(e,t){return Ji=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ji(e,t)}function Yi(e,t){if(t&&("object"===Xi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Zi(e){return Zi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zi(e)}var ea=function(e,t){(Hi=new(Wi())("#copy-"+e)).on("success",(function(){t()}))},ta=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ji(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Zi(r);if(o){var n=Zi(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Yi(this,e)});function a(){return Qi(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"componentDidMount",value:function(){ea(this.props.uniqueKey,this.props.onClipboardClick)}},{key:"componentWillUnmount",value:function(){Hi.destroy()}},{key:"componentDidUpdate",value:function(){ea(this.props.uniqueKey,this.props.onClipboardClick)}},{key:"getClipboardElement",value:function(){return"icon"===this.props.displayType?ae.createElement("i",{"aria-hidden":"true",className:"fontawesome icon-paste"}):this.props.textDisplay}},{key:"getClipboardButton",value:function(){var e="input"===this.props.displayType?"btn copy-button":"copy clipboard-copy-element";return ae.createElement("button",{"aria-label":"Copy to Clipboard",className:e,"data-clipboard-text":this.props.text,title:this.props.title,id:"copy-"+this.props.uniqueKey},this.getClipboardElement())}},{key:"render",value:function(){return"input"===this.props.displayType?ae.createElement("p",null,ae.createElement("input",{type:"text",className:"input-xxlarge text-field-to-copy",readOnly:!0,value:this.props.text}),this.getClipboardButton()):this.getClipboardButton()}}])&&$i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function na(e){return na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},na(e)}function ra(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oa(e,t){return oa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oa(e,t)}function ia(e,t){if(t&&("object"===na(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function aa(e){return aa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},aa(e)}ta.defaultProps={displayType:"icon",textDisplay:"Copy",title:"Copy to clipboard",onClipboardClick:function(){}},ta.propTypes={text:Nt().string.isRequired,displayType:Nt().oneOf(["icon","text","input"]),uniqueKey:Nt().string.isRequired,onClipboardClick:Nt().func.isRequired};var sa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oa(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=aa(r);if(o){var n=aa(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ia(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.selectedTab,n=e.tabs,r=n.map((function(e,n){return ae.createElement(ki,{key:n,selected:e.name===t,text:e.name,badgeText:e.badgeText,onChange:function(){re.navigate(e.route,{redirect:!0})},iconClass:""})})),o=n.reduce((function(e,n){return n.name===t?n:e}),{});return o.component?ae.createElement("div",{className:"tab__wrapper"},ae.createElement(Ii,null,r),ae.createElement("div",{className:"tab__container"},ae.createElement(o.component,null))):null}}])&&ra(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);sa.propTypes={tabs:Nt().array.isRequired,selectedTab:Nt().string.isRequired};var ca=n(46626);function ua(e){return ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ua(e)}function la(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?la(Object(n),!0).forEach((function(t){fa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function da(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ha(e,t){return ha=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ha(e,t)}function ya(e,t){if(t&&("object"===ua(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ba(e){return ba=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ba(e)}var ma=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ha(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ba(r);if(o){var n=ba(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ya(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).lastCall=void 0,t}return t=a,(n=[{key:"wrapThrottler",value:function(e){var t=this;return e?function(n,r){t.lastCall&&clearTimeout(t.lastCall),t.lastCall=setTimeout((function(){e(n,r)}),400)}:function(){}}},{key:"render",value:function(){var e=this.wrapThrottler(this.props.loadOptions).bind(this),t=pa(pa({},this.props),{},{loadOptions:e,onBlurResetsInput:!1});return ae.createElement(ca.ZP.Async,t)}}])&&da(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);const ga={Accordion:function(e){var t=e.children,n=e.className,r=e.style,o=Zt()("faux--accordion",n);return ae.createElement("ul",{className:o,style:r},t)},AccordionItem:ln,BadgeList:En,Badge:On,BulkActionComponent:qn,ConfirmButton:zo,ToggleHeaderButton:Tn,StyledSelect:Gn,CodeEditorPanel:ao,CodeEditor:Pr,StringEditModal:gr,ZenModeOverlay:$r,Beautify:Br,PaddedBorderedBox:ho,Polling:Ki,Document:Io,LoadLines:Ao,MenuDropDown:oi,TrayContents:wi,TrayWrapper:Ei,connectToStores:function(e,t,n){var r=function(r){hi(i,r);var o=bi(i);function i(){var e;pi(this,i);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return vi(gi(e=o.call.apply(o,[this].concat(r))),"state",n(e.props)),vi(gi(e),"onChange",(function(){e.setState(n(e.props))})),vi(gi(e),"handleStoresChanged",(function(){e.setState(n(e.props))})),e}return di(i,[{key:"componentDidMount",value:function(){var e=this;t.forEach((function(t){t.on("change",e.onChange,e)}))}},{key:"componentWillUnmount",value:function(){t.forEach(function(e){e.off("change",this.onChange)}.bind(this))}},{key:"render",value:function(){return ae.createElement(e,li({},this.state,this.props))}}]),i}(ae.Component);return r},DeleteDatabaseModal:xi,TabElement:ki,TabElementWrapper:Ii,RefreshBtn:zi,Copy:ta,TabWindowWrapper:sa,ThrottledReactSelectAsync:ma};var _a={};_a.DeleteDbModalStore=re.Store.extend({initialize:function(){this.reset()},reset:function(){this._deleteModal={showDeleteModal:!1,dbId:"",isSystemDatabase:!1}},setDeleteModal:function(e){e.isSystemDatabase=ie.utils.isSystemDatabase(e.dbId),this._deleteModal=e},getShowDeleteDatabaseModal:function(){return this._deleteModal},dispatch:function(e){e.type===Qn&&(this.setDeleteModal(e.options),this.triggerChange())}}),_a.deleteDbModalStore=new _a.DeleteDbModalStore,_a.deleteDbModalStore.dispatchToken=re.dispatcher.register(_a.deleteDbModalStore.dispatch.bind(_a.deleteDbModalStore));const va=_a;function wa(e){return wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wa(e)}function Ea(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oa(e,t){return Oa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Oa(e,t)}function Sa(e,t){if(t&&("object"===wa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Da(e){return Da=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Da(e)}var Na=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oa(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Da(r);if(o){var n=Da(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Sa(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"perPageChange",value:function(e){var t=parseInt(e.target.value,10);this.props.perPageChange(t)}},{key:"getOptions",value:function(){return _.map(this.props.options,(function(e){return ae.createElement("option",{value:e,key:e},e)}))}},{key:"render",value:function(){return ae.createElement("div",{id:"per-page"},ae.createElement("label",{htmlFor:"select-per-page",className:"drop-down inline"},this.props.label,"  ",ae.createElement("select",{id:"select-per-page",onChange:this.perPageChange.bind(this),value:this.props.perPage.toString(),className:"input-small"},this.getOptions())))}}])&&Ea(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Ra(e){return Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ra(e)}function Pa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ca(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ta(e,t,n){return t&&Ca(e.prototype,t),n&&Ca(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ka(e,t)}function ka(e,t){return ka=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ka(e,t)}function ja(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=La(e);if(t){var o=La(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ia(this,n)}}function Ia(e,t){if(t&&("object"===Ra(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Aa(e)}function Aa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function La(e){return La=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},La(e)}function Ma(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Na.defaultProps={label:"Documents per page: ",options:[5,10,20,30,50,100]},Na.propTypes={perPage:Nt().number.isRequired,perPageChange:Nt().func.isRequired,label:Nt().string,options:Nt().array};var Ua=function(e){xa(n,e);var t=ja(n);function n(){var e;Pa(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Ma(Aa(e=t.call.apply(t,[this].concat(o))),"getClasses",(function(){var t={js:"lang-js"},n="prettyprint";return _.has(t,e.props.lang)&&(n+=" "+t[e.props.lang]),n})),e}return Ta(n,[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"render",value:function(){var e=JSON.stringify(this.props.code,null," ");return ae.createElement("div",null,ae.createElement("pre",{className:this.getClasses()},e))}}]),n}(ae.Component);Ma(Ua,"defaultProps",{lang:"js"});var qa=function(e){xa(n,e);var t=ja(n);function n(){var e;Pa(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Ma(Aa(e=t.call.apply(t,[this].concat(o))),"getVisiblePages",(function(t,n){var r,o;if(n<e.props.maxNavPages)r=1,o=n+1;else{var i=Math.floor(e.props.maxNavPages/2);o=t+i,(r=t-i)<=1&&(r=1,o=e.props.maxNavPages+1),o>n+1&&(r=n-(e.props.maxNavPages-1),o=n+1)}return{from:r,to:o}})),Ma(Aa(e),"createItemsForPage",(function(t){return _.range(t.from,t.to).map((function(t){return ae.createElement("li",{key:t,className:e.props.page===t?"active":null},e.getLink(t,t))}))})),Ma(Aa(e),"getLink",(function(t,n){return e.props.onClick?ae.createElement("a",{onClick:e.getOnPageClick(t),dangerouslySetInnerHTML:{__html:n}}):ae.createElement("a",{href:e.props.urlPrefix+t+e.props.urlSuffix,dangerouslySetInnerHTML:{__html:n}})})),Ma(Aa(e),"getTotalPages",(function(){return 0===e.props.total?1:Math.ceil(e.props.total/e.props.perPage)})),e}return Ta(n,[{key:"getOnPageClick",value:function(e){var t=this;return function(n){n&&n.preventDefault(),t.props.onClick(e)}}},{key:"render",value:function(){var e=this.getTotalPages(),t=this.getVisiblePages(this.props.page,e),n=this.createItemsForPage(t),r=Math.max(this.props.page-1,1),o=Math.min(this.props.page+1,e);return ae.createElement("ul",{className:"pagination"},ae.createElement("li",{className:1===this.props.page?"disabled":null},this.getLink(r,"&laquo;")),n,ae.createElement("li",{className:this.props.page<e?null:"disabled"},this.getLink(o,"&raquo;")))}}]),n}(ae.Component);Ma(qa,"defaultProps",{perPage:re.constants.MISC.DEFAULT_PAGE_SIZE,onClick:null,page:1,total:0,urlPrefix:"",urlSuffix:"",maxNavPages:10});var Ba=function(e){xa(n,e);var t=ja(n);function n(){var e;Pa(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Ma(Aa(e=t.call.apply(t,[this].concat(o))),"close",(function(t){t&&t.preventDefault(),e.props.onClose()})),e}return Ta(n,[{key:"render",value:function(){var e=ae.createElement("p",null,this.props.text);_.isString(this.props.text)||(e=this.props.text);var t="btn "+this.props.buttonClass,n=this.props.onClose?ae.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.close},"Cancel"):null,r=this.props.onSubmit?ae.createElement("button",{className:t,onClick:this.props.onSubmit},ae.createElement("i",{className:"fonticon-ok-circled"})," ",this.props.successButtonLabel):null;return ae.createElement(en.u_,{dialogClassName:"confirmation-modal",show:this.props.visible,onHide:this.close},ae.createElement(en.u_.Header,{closeButton:!0},ae.createElement(en.u_.Title,null,this.props.title)),ae.createElement(en.u_.Body,null,e),ae.createElement(en.u_.Footer,null,n,r))}}]),n}(ae.Component);Ma(Ba,"propTypes",{visible:Nt().bool.isRequired,text:Nt().oneOfType([Nt().string,Nt().element]).isRequired,onClose:Nt().func.isRequired,onSubmit:Nt().func.isRequired}),Ma(Ba,"defaultProps",{visible:!1,title:"Please confirm",text:"",successButtonLabel:"Okay",buttonClass:"btn-primary"});const Va={CodeFormat:Ua,Pagination:qa,ConfirmationModal:Ba};function Fa(e){return Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fa(e)}function Ka(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function za(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ha(e,t,n){return t&&za(e.prototype,t),n&&za(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ga(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wa(e,t)}function Wa(e,t){return Wa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wa(e,t)}function Xa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ja(e);if(t){var o=Ja(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Qa(this,n)}}function Qa(e,t){if(t&&("object"===Fa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $a(e)}function $a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ja(e){return Ja=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ja(e)}function Ya(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Za=mt.databasesStore,es=va.deleteDbModalStore,ts=ga.Accordion,ns=ga.AccordionItem,rs=ga.DeleteDatabaseModal,os=ga.ToggleHeaderButton,is=ga.TrayContents,as=function(e){Ga(n,e);var t=Xa(n);function n(e){var r;return Ka(this,n),Ya($a(r=t.call(this,e)),"getStoreState",(function(){return{dbList:Za.getDbList(),loading:Za.isLoading(),showDeleteDatabaseModal:es.getShowDeleteDatabaseModal(),showPartitionedColumn:Za.isPartitionedDatabasesAvailable(),page:Za.getPage(),limit:Za.getLimit()}})),Ya($a(r),"onChange",(function(){r.setState(r.getStoreState())})),Ya($a(r),"state",r.getStoreState()),r.reloadAfterDatabaseDeleted=r.reloadAfterDatabaseDeleted.bind($a(r)),r}return Ha(n,[{key:"componentDidMount",value:function(){Za.on("change",this.onChange,this),es.on("change",this.onChange,this),this.loadData()}},{key:"componentDidUpdate",value:function(e,t){t.page===this.state.page&&t.limit===this.state.limit||this.loadData()}},{key:"loadData",value:function(){St.init({page:this.state.page,limit:this.state.limit})}},{key:"componentWillUnmount",value:function(){Za.off("change",this.onChange,this),es.off("change",this.onChange,this)}},{key:"reloadAfterDatabaseDeleted",value:function(){var e=this.state.page;e>1&&1===this.state.dbList.length&&(e-=1),St.init({page:e,limit:this.state.limit})}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.dbList;return ae.createElement(ss,{showDeleteDatabaseModal:this.state.showDeleteDatabaseModal,dbList:n,loading:t,showPartitionedColumn:this.state.showPartitionedColumn,onDatabaseDeleted:this.reloadAfterDatabaseDeleted})}}]),n}(ae.Component),ss=function(e){Ga(n,e);var t=Xa(n);function n(){var e;Ka(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Ya($a(e=t.call.apply(t,[this].concat(o))),"createRows",(function(t){return t.map((function(t,n){return ae.createElement(cs,{item:t,key:n,showPartitionedColumn:e.props.showPartitionedColumn})}))})),Ya($a(e),"getExtensionColumns",(function(){var e=re.getExtensions("DatabaseTable:head");return _.map(e,(function(e,t){return ae.createElement(e,{key:t})}))})),Ya($a(e),"showDeleteDatabaseModal",(function(){$n.showDeleteDatabaseModal({showDeleteModal:!e.props.showDeleteDatabaseModal.showDeleteModal})})),e}return Ha(n,[{key:"render",value:function(){if(this.props.loading)return ae.createElement("div",{className:"view"},ae.createElement(ga.LoadLines,null));var e=this.createRows(this.props.dbList);return ae.createElement("div",{className:"view"},ae.createElement(rs,{showHide:this.showDeleteDatabaseModal,modalProps:this.props.showDeleteDatabaseModal,onSuccess:this.props.onDatabaseDeleted}),ae.createElement("table",{className:"table table-striped fauxton-table-list databases"},ae.createElement("thead",null,ae.createElement("tr",null,ae.createElement("th",null,"Name"),ae.createElement("th",null,"Size"),ae.createElement("th",null,"# of Docs"),this.props.showPartitionedColumn?ae.createElement("th",null,"Partitioned"):null,this.getExtensionColumns(),ae.createElement("th",null,"Actions"))),ae.createElement("tbody",null,e)))}}]),n}(ae.Component);Ya(ss,"propTypes",{dbList:Nt().array.isRequired,showDeleteDatabaseModal:Nt().object.isRequired,loading:Nt().bool.isRequired,showPartitionedColumn:Nt().bool.isRequired,onDatabaseDeleted:Nt().func});var cs=function(e){Ga(n,e);var t=Xa(n);function n(){var e;Ka(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Ya($a(e=t.call.apply(t,[this].concat(o))),"getExtensionColumns",(function(e){var t=re.getExtensions("DatabaseTable:databaseRow");return _.map(t,(function(t,n){return ae.createElement(t,{row:e,key:n})}))})),Ya($a(e),"showDeleteDatabaseModal",(function(e){$n.showDeleteDatabaseModal({showDeleteModal:!0,dbId:e})})),e}return Ha(n,[{key:"render",value:function(){var e=this.props.item,t=e.encodedId,n=e.id,r=e.url,o=e.dataSize,i=e.docCount,a=e.docDelCount,s=e.showTombstoneWarning,c=e.failed,u=e.isPartitioned,l=s?ae.createElement(us,{docCount:i,docDelCount:a}):null;if(c)return ae.createElement("tr",null,ae.createElement("td",{"data-name":"database-load-fail-name"},n),ae.createElement("td",{colSpan:"4",className:"database-load-fail"},"This database failed to load."));var p=this.props.showPartitionedColumn?ae.createElement("td",null,u?"Yes":"No"):null;return ae.createElement("tr",null,ae.createElement("td",null,ae.createElement("a",{href:r},n)),ae.createElement("td",null,o),ae.createElement("td",null,i," ",l),p,this.getExtensionColumns(e),ae.createElement("td",{className:"database-actions"},ae.createElement("a",{className:"db-actions btn fonticon-replicate set-replication-start","aria-label":"Replicate ".concat(n),title:"Replicate "+name,href:"#/replication/_create/"+t}),ae.createElement("a",{"aria-label":"Set permissions for ".concat(n),className:"db-actions btn icon-lock set-permissions",title:"Set permissions for "+name,href:"#/database/"+t+"/permissions"}),ae.createElement("a",{"aria-label":"Delete ".concat(n),className:"db-actions btn icon-trash",onClick:this.showDeleteDatabaseModal.bind(this,n,t),title:"Delete "+n,"data-bypass":"true"})))}}]),n}(ae.Component);Ya(cs,"propTypes",{item:Nt().shape({id:Nt().string.isRequired,encodedId:Nt().string.isRequired,url:Nt().string.isRequired,failed:Nt().bool.isRequired,dataSize:Nt().string,docCount:Nt().number,docDelCount:Nt().number,isPartitioned:Nt().bool,showTombstoneWarning:Nt().bool}).isRequired,showPartitionedColumn:Nt().bool.isRequired});var us=function(e){var t=e.docCount,n=e.docDelCount,r="This database has just ".concat(t," docs and ").concat(n," deleted docs"),o=ae.createElement(en.u,{id:"graveyard-tooltip"},r);return ae.createElement(en.Ox,{placement:"top",overlay:o},ae.createElement("i",{className:"js-db-graveyard icon icon-exclamation-sign",title:r}))},ls=function(e){Ga(n,e);var t=Xa(n);function n(e){var r;return Ka(this,n),(r=t.call(this,e)).state=r.getStoreState(),r}return Ha(n,[{key:"getStoreState",value:function(){return{showPartitionedOption:Za.isPartitionedDatabasesAvailable()}}},{key:"componentDidMount",value:function(){Za.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){Za.off("change",this.onChange,this)}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"render",value:function(){return ae.createElement("div",{className:"header-right right-db-header flex-layout flex-row"},ae.createElement(fs,{loadOptions:St.fetchAllDbsWithKey}),ae.createElement(ps,{showPartitionedOption:this.state.showPartitionedOption,partitionedDbHelpText:this.props.partitionedDbHelpText}))}}]),n}(ae.Component),ps=function(e){Ga(n,e);var t=Xa(n);function n(e){var r;return Ka(this,n),(r=t.call(this,e)).state={isPromptVisible:!1,databaseName:"",partitionedSelected:!1},r.onTrayToggle=r.onTrayToggle.bind($a(r)),r.closeTray=r.closeTray.bind($a(r)),r.focusInput=r.focusInput.bind($a(r)),r.onKeyUpInInput=r.onKeyUpInInput.bind($a(r)),r.onChange=r.onChange.bind($a(r)),r.onAddDatabase=r.onAddDatabase.bind($a(r)),r.onTogglePartitioned=r.onTogglePartitioned.bind($a(r)),r}return Ha(n,[{key:"getI18nText",value:function(e){return this.props.i18n?this.props.i18n[e]:""}},{key:"onTrayToggle",value:function(){this.setState({isPromptVisible:!this.state.isPromptVisible})}},{key:"closeTray",value:function(){this.setState({isPromptVisible:!1})}},{key:"focusInput",value:function(){this.newDbName.focus()}},{key:"onKeyUpInInput",value:function(e){13===e.which&&this.onAddDatabase()}},{key:"onChange",value:function(e){this.setState({databaseName:e.target.value})}},{key:"onAddDatabase",value:function(){var e=this.props.showPartitionedOption?this.state.partitionedSelected:void 0;St.createNewDatabase(this.state.databaseName,e)}},{key:"onTogglePartitioned",value:function(){this.setState({partitionedSelected:!this.state.partitionedSelected})}},{key:"partitionedOption",value:function(){if(!this.props.showPartitionedOption)return null;var e=this.props.partitionedDbHelpText?ae.createElement(ts,{className:"partitioned-db-help"},ae.createElement(ns,{title:"Which should I choose?"},ae.createElement("p",{dangerouslySetInnerHTML:{__html:this.props.partitionedDbHelpText}}))):null;return ae.createElement("div",{className:"partitioned-db-section"},ae.createElement("label",{htmlFor:"partitioned-db",className:"partitioned-db-label"},"Partitioning"),ae.createElement("div",{className:"partitioned-db-options"},ae.createElement("form",null,ae.createElement("label",{htmlFor:"non-partitioned-option"},ae.createElement("input",{id:"non-partitioned-option",type:"radio",checked:!1===this.state.partitionedSelected,onChange:this.onTogglePartitioned}),"Non-partitioned - recommended for most workloads"),ae.createElement("label",{htmlFor:"partitioned-option"},ae.createElement("input",{id:"partitioned-option",type:"radio",checked:!0===this.state.partitionedSelected,onChange:this.onTogglePartitioned}),"Partitioned"))),e)}},{key:"render",value:function(){var e=this,t=Zt()("new-database-tray",{"new-database-tray--expanded":this.props.showPartitionedOption});return ae.createElement("div",null,ae.createElement(os,{selected:this.state.isPromptVisible,toggleCallback:this.onTrayToggle,containerClasses:"header-control-box add-new-database-btn",title:"Create Database",fonticon:"fonticon-new-database",text:"Create Database"}),ae.createElement(is,{className:t,contentVisible:this.state.isPromptVisible,closeTray:this.closeTray,onEnter:this.focusInput},ae.createElement("div",{className:"tray-contents"},ae.createElement("div",{className:"tray-header"},ae.createElement("h3",null,"Create Database")),ae.createElement("div",{className:"tray-body"},ae.createElement("label",{htmlFor:"js-new-database-name",className:"db-name-label"},"Database name"),ae.createElement("input",{id:"js-new-database-name",ref:function(t){return e.newDbName=t},type:"text",value:this.state.databaseName,onChange:this.onChange,onKeyUp:this.onKeyUpInInput,className:"input-xxlarge",placeholder:"database-name"}),this.partitionedOption()),ae.createElement("div",{className:"tray-footer"},ae.createElement("a",{className:"btn btn-cancel",id:"js-cancel-create-database",onClick:this.closeTray},"Cancel"),ae.createElement("a",{className:"btn btn-primary",id:"js-create-database",onClick:this.onAddDatabase},"Create")))))}}]),n}(ae.Component);Ya(ps,"defaultProps",{showPartitionedOption:!1}),Ya(ps,"propTypes",{showPartitionedOption:Nt().bool.isRequired,partitionedDbHelpText:Nt().string});var fs=function(e){var t=e.loadOptions;return ae.createElement("div",{"data-name":"jump-to-db",className:"faux-header__searchboxwrapper"},ae.createElement("div",{className:"faux-header__searchboxcontainer"},ae.createElement(ga.ThrottledReactSelectAsync,{placeholder:"Database name",loadOptions:t,clearable:!1,onChange:function(e){var t=e.value;St.jumpToDatabase(t)}})))};fs.propTypes={loadOptions:Nt().func.isRequired};var ds=function(e){Ga(n,e);var t=Xa(n);function n(){var e;Ka(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Ya($a(e=t.call.apply(t,[this].concat(o))),"getStoreState",(function(e){var t=e.store;return{totalAmountOfDatabases:t.getTotalAmountOfDatabases(),page:t.getPage(),limit:t.getLimit()}})),Ya($a(e),"onChange",(function(){e.setState(e.getStoreState(e.props))})),Ya($a(e),"state",e.getStoreState(e.props)),e}return Ha(n,[{key:"componentDidMount",value:function(){this.props.store.on("change",this.onChange,this)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState(this.getStoreState(e)),this.props.store&&this.props.store.off("change",this.onChange,this),e.store.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){this.props.store.off("change",this.onChange,this)}},{key:"onPageLinkClick",value:function(e){var t="#/".concat(this.props.linkPath,"?page=").concat(e,"&limit=").concat(this.state.limit);re.navigate(t)}},{key:"onPerPageSelected",value:function(e){var t="#/".concat(this.props.linkPath,"?page=").concat(this.state.page,"&limit=").concat(e);re.navigate(t)}},{key:"render",value:function(){var e=this.state,t=e.limit,n=e.page,r=e.totalAmountOfDatabases,o=1+(n-1)*t,i=Math.min(r,n*t);return ae.createElement("footer",{className:"all-db-footer pagination-footer"},ae.createElement("div",{id:"database-pagination"},ae.createElement(Va.Pagination,{page:n,total:r,perPage:t,onClick:this.onPageLinkClick.bind(this)})),ae.createElement(Na,{label:"Databases per page",perPage:t,perPageChange:this.onPerPageSelected.bind(this)}),ae.createElement("div",{className:"current-databases"},"Showing ",ae.createElement("span",{className:"all-db-footer__range"},o,"–",i)," of ",ae.createElement("span",{className:"all-db-footer__total-db-count"},r)," databases."))}}]),n}(ae.Component);Ya(ds,"defaultProps",{linkPath:"_all_dbs",store:Za});const hs={DatabasesController:as,DatabaseTable:ss,DatabaseRow:cs,RightDatabasesHeader:ls,GraveyardInfo:us,AddDatabaseWidget:ps,JumpToDatabaseWidget:fs,DatabasePagination:ds};var ys=hs.RightDatabasesHeader,bs=hs.DatabasesController,ms=hs.DatabasePagination;const gs=function(){return ae.createElement(Ht,null,ae.createElement(Gt,{crumbs:[{name:"Databases"}],endpoint:re.urls("allDBs","apiurl"),docURL:re.constants.DOC_URLS.ALL_DBS},ae.createElement(ys,{partitionedDbHelpText:ie.i18n.en_US["create-db-partitioned-help"]})),ae.createElement(Wt,null,ae.createElement(bs,null)),ae.createElement(Xt,null,ae.createElement(ms,null)))};var _s=re.RouteObject.extend({hideApiBar:!0,hideNotificationCenter:!0,routes:{"":"allDatabases","index.html":"allDatabases","_all_dbs(:extra)":"allDatabases"},roles:["fx_loggedIn"],selectedHeader:"Databases",allDatabases:function(e,t){var n=this.createParams(t),r=n.page,o=n.limit;return St.setPage(r),o&&St.setLimit(o),ae.createElement(gs,null)},createParams:function(e){var t=1,n=void 0;if(e){var r=ie.getParams(e);isFinite(parseInt(r.page))&&(t=parseInt(r.page)),isFinite(parseInt(r.limit))&&(n=parseInt(r.limit))}return{page:t,limit:n}}});ft.RouteObjects=[_s];const vs=ft;function ws(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Es(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ws(Object(n),!0).forEach((function(t){Os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ws(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Os(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ss={partitionedDatabasesAvailable:!1,isLoadingDbInfo:!0,dbInfo:void 0,isDbPartitioned:!1};function Ds(e){return!(!e||!e.props||!0!==e.props.partitioned)}function Ns(e){return e?"/_partition/".concat(e):""}vs.initialize=function(){re.addHeaderLink({href:"#/_all_dbs",title:"Databases",icon:"fonticon-database",className:"databases"}),St.checkPartitionedQueriesIsAvailable()},vs.PARTITONED_DB_CHECK_EXTENSION="Databases:PartitionedDbCheck",re.registerExtension(vs.PARTITONED_DB_CHECK_EXTENSION,(function(){return v(N.getServerUrl("/")).then((function(e){return!(!e.features||-1===e.features.indexOf("partitioned"))||!(!e.features_flags||-1===e.features_flags.indexOf("partitioned"))})).catch((function(){return!1}))})),re.addReducers({databases:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ss,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case tt:return Es(Es({},e),{},{partitionedDatabasesAvailable:t.options.available});case nt:return Es(Es({},e),{},{isLoadingDbInfo:!0,dbInfo:void 0,isDbPartitioned:!1});case rt:return Es(Es({},e),{},{isLoadingDbInfo:!1,dbInfo:t.options.metadata,isDbPartitioned:Ds(t.options.metadata)});default:return e}}}),vs.databaseUrl=function(e){var t=_.isObject(e)?e.id:e;return["/database/",ie.utils.safeURLName(t),"/_all_docs?limit="+vs.DocLimit].join("")},re.registerUrls("changes",{server:function(e,t){return N.getServerUrl("/"+e+"/_changes"+t)},app:function(e,t,n){return"/database/"+e+Ns(t)+"/_changes"+n},apiurl:function(e,t){return N.getApiUrl("/"+e+"/_changes"+t)}}),re.registerUrls("allDBs",{server:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return N.getServerUrl("/_all_dbs".concat(e))},app:function(){return"_all_dbs"},apiurl:function(){return N.getApiUrl("/_all_dbs")}}),re.registerUrls("databaseBaseURL",{server:function(e){return N.getServerUrl("/"+ie.utils.safeURLName(e))},apiurl:function(e){return N.getApiUrl("/"+ie.utils.safeURLName(e))},app:function(e){return"/database/"+e}}),re.registerUrls("permissions",{server:function(e){return N.getServerUrl("/"+e+"/_security")},app:function(e,t){return"/database/"+e+Ns(t)+"/permissions"},apiurl:function(e){return N.getApiUrl("/"+e+"/_security")}});const Rs=vs,Ps="SIDEBAR_EXPAND_SELECTED_ITEM",Cs="SIDEBAR_NEW_OPTIONS",Ts="SIDEBAR_TOGGLE_CONTENT",xs="SIDEBAR_FETCHING",ks="SIDEBAR_SHOW_DELETE_INDEX_MODAL",js="SIDEBAR_HIDE_DELETE_INDEX_MODAL",Is="SIDEBAR_SHOW_CLONE_INDEX_MODAL",As="SIDEBAR_HIDE_CLONE_INDEX_MODAL",Ls="SIDEBAR_CLONE_MODAL_DESIGN_DOC_CHANGE",Ms="SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_NAME_UPDATED",Us="SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_PARTITIONED_UPDATED",qs="SIDEBAR_CLONE_MODAL_UPDATE_INDEX_NAME",Bs="SIDEBAR_UPDATED_DESIGN_DOCS",Vs=function(e){e.database.safeID()!==function(e){var t=e.sidebar;return!t||t.loading?"":t.database.safeID()}(re.reduxState())&&re.reduxDispatch({type:xs}),e.designDocs.fetch().then((function(){re.reduxDispatch({type:Cs,options:e})}),(function(t){var n="Unable to update the sidebar.";if(t.responseJSON&&"not_found"===t.responseJSON.error){var r=e.designDocs.database.safeID();n="The ".concat(r," database does not exist."),re.navigate("/",{trigger:!0})}re.addNotification({msg:n,type:"error",clear:!0})}))},Fs=function(e){re.reduxDispatch({type:xs}),e.fetch().then((function(){re.reduxDispatch({type:Bs,options:{designDocs:e}})}))},Ks=function(){re.reduxDispatch({type:js})},zs=function(e){re.reduxDispatch({type:Ps,options:{selectedNavItem:e}})};var Hs=re.RouteObject.extend({selectedHeader:"Databases",createDesignDocsCollection:function(){this.designDocs=new ct.AllDocs(null,{database:this.database,paging:{pageSize:500},params:{startkey:"_design/",endkey:"_design0",include_docs:!0,limit:500}})},addSidebar:function(e){var t={designDocs:this.designDocs,database:this.database};e&&(t.selectedNavItem=e),Vs(t)},getCrumbs:function(e){return[{type:"back",link:re.urls("allDBs","app")},{name:e.id}]},createParams:function(e){var t=ie.getParams(e);return{urlParams:t,docParams:ct.QueryParams.parse(t)}}});const Gs=Hs;function Ws(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xs(e,t,n){return t&&Ws(e.prototype,t),n&&Ws(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Qs=Xs((function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.navItem=t,n){var r=n.designDocName,o=n.designDocSection,i=n.indexName;this.designDocName=r||"",this.designDocSection=o||"",this.indexName=i||""}}));function $s(e){return $s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$s(e)}function Js(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ys(e,t){return Ys=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ys(e,t)}function Zs(e,t){if(t&&("object"===$s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ec(e)}function ec(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tc(e){return tc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tc(e)}var nc=ga.StyledSelect,rc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ys(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tc(r);if(o){var n=tc(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Zs(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).onTogglePartitioned=t.onTogglePartitioned.bind(ec(t)),t}return t=a,(n=[{key:"validate",value:function(){return"new-doc"!==this.props.selectedDesignDocName||""!==this.props.newDesignDocName||(re.addNotification({msg:"Please name your design doc.",type:"error"}),this.newDesignDocInput.focus(),!1)}},{key:"getDocList",value:function(){return this.props.designDocList?this.props.designDocList.map((function(e){return ae.createElement("option",{key:e,value:e},e)})):[]}},{key:"selectDesignDoc",value:function(e){this.props.onSelectDesignDoc(e.target.value)}},{key:"updateDesignDocName",value:function(e){this.props.onChangeNewDesignDocName(e.target.value)}},{key:"getNewDDocField",value:function(){var e=this;if("new-doc"===this.props.selectedDesignDocName)return ae.createElement("div",{id:"new-ddoc-section",className:"span5"},ae.createElement("label",{className:"control-label",htmlFor:"new-ddoc"},"_design/"),ae.createElement("div",{className:"controls"},ae.createElement("input",{type:"text",id:"new-ddoc",placeholder:"newDesignDoc",ref:function(t){e.newDesignDocInput=t},onChange:this.updateDesignDocName.bind(this)})))}},{key:"getDocLink",value:function(){return this.props.docLink?ae.createElement("a",{className:"help-link","data-bypass":"true",href:this.props.docLink,target:"_blank",rel:"noopener noreferrer"},ae.createElement("i",{className:"icon-question-sign"})):null}},{key:"onTogglePartitioned",value:function(){this.props.onChangeNewDesignDocPartitioned(!this.props.newDesignDocPartitioned)}},{key:"getPartitionedCheckbox",value:function(){if(!this.props.isDbPartitioned)return null;var e="new-doc"!==this.props.selectedDesignDocName,t=e?this.props.selectedDesignDocPartitioned:this.props.newDesignDocPartitioned,n=e?"check--disabled":"",r=e?this.props.selectedDesignDocPartitioned?"Design document is partitioned":"Design document is not partitioned":this.props.newDesignDocPartitioned?"New document will be partitioned":"New document will not be partitioned";return ae.createElement("div",{className:"ddoc-selector-partitioned"},ae.createElement("label",{className:n,title:r},ae.createElement("input",{id:"js-ddoc-selector-partitioned",type:"checkbox",title:r,checked:t,onChange:this.onTogglePartitioned,style:{margin:"0px 10px 0px 0px"},disabled:e}),"Partitioned"))}},{key:"render",value:function(){var e=ae.createElement("optgroup",{label:"Select a document"},ae.createElement("option",{value:"new-doc"},"New document"),this.getDocList());return ae.createElement("div",{className:"design-doc-group control-group"},ae.createElement("div",{className:"span3"},ae.createElement("label",{htmlFor:"ddoc"},this.props.designDocLabel,this.getDocLink()),ae.createElement(nc,{selectChange:this.selectDesignDoc.bind(this),selectValue:this.props.selectedDesignDocName,selectId:"faux__edit-view__design-doc",selectContent:e})),this.getNewDDocField(),this.getPartitionedCheckbox())}}])&&Js(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function oc(e){return oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oc(e)}function ic(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ac(e,t){return ac=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ac(e,t)}function sc(e,t){if(t&&("object"===oc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function cc(e){return cc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cc(e)}rc.defaultProps={designDocLabel:"Design Document",selectedDesignDocName:"",newDesignDocName:""},rc.propTypes={designDocList:Nt().array.isRequired,onSelectDesignDoc:Nt().func.isRequired,onChangeNewDesignDocName:Nt().func.isRequired,selectedDesignDocName:Nt().string.isRequired,selectedDesignDocPartitioned:Nt().bool.isRequired,newDesignDocName:Nt().string.isRequired,newDesignDocPartitioned:Nt().bool.isRequired,designDocLabel:Nt().string,docURL:Nt().string};var uc=ie.helpers.getDocUrl,lc=ga.CodeEditorPanel,pc=ga.StyledSelect,fc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ac(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=cc(r);if(o){var n=cc(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return sc(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"getOptionsList",value:function(){return this.props.reduceOptions.map((function(e,t){return ae.createElement("option",{key:t,value:e},e)}))}},{key:"getReduceValue",value:function(){return this.props.hasReduce?this.props.hasCustomReduce?this.reduceEditor.getValue():this.props.reduce:null}},{key:"getEditor",value:function(){return this.reduceEditor.getEditor()}},{key:"updateReduceCode",value:function(e){this.props.updateReduceCode(e)}},{key:"selectChange",value:function(e){this.props.selectReduceChanged(e.target.value)}},{key:"render",value:function(){var e,t=this,n=this.getOptionsList();return this.props.hasCustomReduce&&this.props.customReducerSupported?e=ae.createElement(lc,{ref:function(e){return t.reduceEditor=e},id:"reduce-function",title:"Custom Reduce function",defaultCode:this.props.reduce,allowZenMode:!1,blur:this.updateReduceCode.bind(this)}):this.props.customReducerSupported||(e=ae.createElement("div",{className:"reduce-editor-warning"},ae.createElement("label",null,"Partitioned views do not support custom reduce functions."))),ae.createElement("div",null,ae.createElement("div",{className:"control-group"},ae.createElement("label",{htmlFor:"reduce-function-selector"},ae.createElement("span",null,"Reduce (optional)"),ae.createElement("a",{className:"help-link","data-bypass":"true",href:uc("REDUCE_FUNCS"),target:"_blank",rel:"noopener noreferrer"},ae.createElement("i",{className:"icon-question-sign"}))),ae.createElement(pc,{selectContent:n,selectChange:this.selectChange.bind(this),selectId:"reduce-function-selector",selectValue:this.props.reduceSelectedOption})),e)}}])&&ic(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function dc(e){return dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dc(e)}function hc(){return hc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hc.apply(this,arguments)}function yc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bc(e,t){return bc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bc(e,t)}function mc(e,t){if(t&&("object"===dc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gc(e)}function gc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _c(e){return _c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_c(e)}fc.defaultProps={customReducerSupported:!0},fc.propTypes={reduceOptions:Nt().array.isRequired,hasReduce:Nt().bool.isRequired,hasCustomReduce:Nt().bool.isRequired,customReducerSupported:Nt().bool,reduce:Nt().string,reduceSelectedOption:Nt().string.isRequired,updateReduceCode:Nt().func.isRequired,selectReduceChanged:Nt().func.isRequired};var vc=ie.helpers.getDocUrl,wc=ga.CodeEditorPanel,Ec=ga.ConfirmButton,Oc=ga.LoadLines,Sc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bc(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_c(r);if(o){var n=_c(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return mc(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).saveView=t.saveView.bind(gc(t)),t.viewChange=t.viewChange.bind(gc(t)),t.updateMapCode=t.updateMapCode.bind(gc(t)),t}return t=a,n=[{key:"componentDidUpdate",value:function(e){this.props.map!==e.map&&this.mapEditor&&this.mapEditor.update()}},{key:"isPartitionedView",value:function(){return"new-doc"===this.props.designDocId?this.props.newDesignDocPartitioned:this.props.designDocPartitioned}},{key:"isCustomReduceSupported",value:function(){return!(this.props.isDbPartitioned&&this.props.reduce&&!this.props.reduce.startsWith("_")&&("new-doc"===this.props.designDocId?this.props.newDesignDocPartitioned:this.props.designDocPartitioned))}},{key:"saveView",value:function(e){if(e.preventDefault(),this.designDocSelector.validate())if(this.isCustomReduceSupported()){var t=this.isPartitionedView()&&this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"",n=re.urls("view","showView",this.props.database.safeID(),t,this.props.saveDesignDoc.safeID(),encodeURIComponent(this.props.viewName));this.props.saveView({database:this.props.database,isNewView:this.props.isNewView,viewName:this.props.viewName,designDoc:this.props.saveDesignDoc,designDocId:this.props.designDocId,isNewDesignDoc:this.props.isNewDesignDoc,originalViewName:this.props.originalViewName,originalDesignDocName:this.props.originalDesignDocName,map:this.mapEditor.getValue(),reduce:this.reduceEditor.getReduceValue(),designDocs:this.props.designDocs},n)}else re.addNotification({msg:"Partitioned views do not support custom reduce functions.",type:"error",clear:!0})}},{key:"viewChange",value:function(e){this.props.changeViewName(e.target.value)}},{key:"updateMapCode",value:function(e){this.props.updateMapCode(e)}},{key:"getCancelLink",value:function(){var e=encodeURIComponent(this.props.database.id),t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"";if("new-doc"===this.props.designDocId||this.props.isNewView)return"#"+re.urls("allDocs","app",e,t);var n=ie.utils.getSafeIdForDoc(this.props.designDocId),r=encodeURIComponent(this.props.viewName);return"#"+re.urls("view","showView",e,t,n,r)}},{key:"render",value:function(){var e=this;if(this.props.isLoading)return ae.createElement("div",{className:"define-view"},ae.createElement(Oc,null));var t=this.props.isNewView?"New View":"Edit View",n=this.props.isNewView?"Create Document and then Build Index":"Save Document and then Build Index";return ae.createElement("div",{className:"define-view"},ae.createElement("form",{className:"form-horizontal view-query-save",onSubmit:this.saveView},ae.createElement("h3",{className:"simple-header"},t),ae.createElement("div",{className:"new-ddoc-section"},ae.createElement(rc,{ref:function(t){e.designDocSelector=t},designDocList:this.props.designDocList,isDbPartitioned:this.props.isDbPartitioned,selectedDesignDocName:this.props.designDocId,selectedDesignDocPartitioned:this.props.designDocPartitioned,newDesignDocName:this.props.newDesignDocName,newDesignDocPartitioned:this.props.newDesignDocPartitioned,onSelectDesignDoc:this.props.selectDesignDoc,onChangeNewDesignDocName:this.props.updateNewDesignDocName,onChangeNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned,docLink:vc("DESIGN_DOCS")})),ae.createElement("div",{className:"control-group"},ae.createElement("label",{htmlFor:"index-name"},ae.createElement("span",null,"Index name"),ae.createElement("a",{className:"help-link","data-bypass":"true",href:vc("VIEW_FUNCS"),target:"_blank",rel:"noopener noreferrer"},ae.createElement("i",{className:"icon-question-sign"}))),ae.createElement("input",{type:"text",id:"index-name",value:this.props.viewName,onChange:this.viewChange,placeholder:"Index name"})),ae.createElement(wc,{id:"map-function",ref:function(t){e.mapEditor=t},title:"Map function",docLink:vc("MAP_FUNCS"),blur:this.updateMapCode,allowZenMode:!1,defaultCode:this.props.map}),ae.createElement(fc,hc({ref:function(t){e.reduceEditor=t},customReducerSupported:this.isCustomReduceSupported()},this.props)),ae.createElement("div",{className:"padded-box"},ae.createElement("div",{className:"control-group"},ae.createElement(Ec,{id:"save-view",text:n}),ae.createElement("a",{href:this.getCancelLink(),className:"index-cancel-link"},"Cancel")))))}}],n&&yc(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);Sc.propTypes={isLoading:Nt().bool.isRequired,isNewView:Nt().bool.isRequired,database:Nt().object.isRequired,isDbPartitioned:Nt().bool.isRequired,designDocId:Nt().string.isRequired,newDesignDocName:Nt().string.isRequired,viewName:Nt().string.isRequired,isNewDesignDoc:Nt().bool.isRequired,originalViewName:Nt().string,originalDesignDocName:Nt().string,designDocs:Nt().object,saveDesignDoc:Nt().object,partitionKey:Nt().string,updateNewDesignDocName:Nt().func.isRequired,changeViewName:Nt().func.isRequired,updateMapCode:Nt().func.isRequired};const Dc="CLEAR_INDEX",Nc="EDIT_INDEX",Rc="EDIT_NEW_INDEX",Pc="SELECT_REDUCE_CHANGE",Cc="VIEW_SAVED",Tc="VIEW_CREATED",xc="DESIGN_DOC_CHANGE",kc="DESIGN_DOC_NEW_NAME_UPDATED",jc="DESIGN_DOC_NEW_PARTITIONED_UPDATED",Ic="VIEW_NAME_CHANGE",Ac="VIEW_ADD_DESIGN_DOC",Lc="VIEW_UPDATE_MAP_CODE",Mc="VIEW_UPDATE_REDUCE_CODE";var Uc=function(e){return function(t){t({type:Nc,options:e})}},qc=function(e){return!e.isNewView&&e.originalDesignDocName===e.designDocId&&e.originalViewName!==e.viewName},Bc=function(e){return function(t){t({type:Ac,designDoc:e.toJSON()})}},Vc=function(e,t,n,r,o){var i=_.extend({onSuccess:function(){},onError:function(e){var t=JSON.parse(e.responseText).reason;re.addNotification({msg:"Delete failed: "+t,type:"error",clear:!0})}},o),a=e.get(n)||{};delete a[r];var s={};s[n]=a,e.set(s);var c,u=re.getIndexTypePropNames(),l=_.some(u,(function(t){return e.get(t)&&_.keys(e.get(t)).length>0})),p=!1;return l?c=e.save():(c=e.destroy(),p=!0),c.then((function(){p&&t.remove(e.id),i.onSuccess()}),i.onError)},Fc=function(e,t){return e.find((function(e){return e.id===t})).dDocModel()},Kc=function(e,t,n,r,o,i){if("new-doc"===t){var a={_id:"_design/"+n,views:{},language:"javascript"},s=new lt.Doc(a,{database:o});return i&&s.setDDocPartitionedOption(r),s}var c=e.find((function(e){return e.id===t}));return c?c.dDocModel():null};const zc={helpers:{findDesignDoc:Fc,getDesignDoc:Kc},safeDeleteIndex:Vc,selectReduceChanged:function(e){return function(t){t({type:Pc,reduceSelectedOption:e})}},changeViewName:function(e){return function(t){t({type:Ic,name:e})}},editIndex:Uc,dispatchClearIndex:function(){re.reduxDispatch({type:Dc})},dispatchFetchDesignDocsBeforeEdit:function(e){e.designDocs.fetch({reset:!0}).then((function(){Uc(e)(re.reduxDispatch)}),(function(t){var n="Error";if(t.responseJSON&&"not_found"===t.responseJSON.error){var r=e.designDocs.database.safeID();n="The ".concat(r," database does not exist"),re.navigate("/",{trigger:!0})}re.addNotification({msg:n,type:"error",clear:!0})}))},shouldRemoveDdocView:qc,saveView:function(e,t){return function(n){var r=e.designDoc;r.setDdocView(e.viewName,e.map,e.reduce),re.addNotification({msg:"Saving View...",type:"info",clear:!0}),qc(e)&&r.removeDdocView(e.originalViewName),r.save().then((function(){if(re.addNotification({msg:"View Saved.",type:"success",clear:!0}),!e.isNewView&&e.originalDesignDocName!==e.designDocId){var o=Fc(e.designDocs,e.originalDesignDocName);Vc(o,e.designDocs,"views",e.originalViewName,{onSuccess:function(){Fs(e.designDocs)}})}"new-doc"===e.designDocId&&Bc(r),Fs(e.designDocs),n({type:Cc}),re.navigate(t,{trigger:!0})}),(function(e){re.addNotification({msg:"Save failed. "+(e.responseJSON?"Reason: ".concat(e.responseJSON.reason):""),type:"error",clear:!0})}))}},addDesignDoc:Bc,deleteView:function(e){return Vc(e.designDoc,e.designDocs,"views",e.indexName,{onSuccess:function(){if(e.isOnIndex){var t=re.urls("allDocs","app",e.database.safeID());re.navigate(t)}Fs(e.designDocs),re.addNotification({msg:"The <code>"+_.escape(e.indexName)+"</code> view has been deleted.",type:"info",escape:!1,clear:!0}),Ks()}})},cloneView:function(e){var t=Kc(e.designDocs,e.targetDesignDocName,e.newDesignDocName,e.newDesignDocPartitioned,e.database,e.isDbPartitioned),n=t.get("views");if(n&&_.has(n,e.newIndexName))re.addNotification({msg:"That index name is already used in this design doc. Please enter a new name.",type:"error",clear:!0});else{n||(n={});var r=Fc(e.designDocs,"_design/"+e.sourceDesignDocName).toJSON();n[e.newIndexName]=r.views[e.sourceIndexName],t.set({views:n}),t.save().then((function(){e.onComplete(),re.addNotification({msg:"The index has been cloned.",type:"success",clear:!0}),Fs(e.designDocs)}),(function(t){e.onComplete();var n=JSON.parse(t.responseText).reason;re.addNotification({msg:"Clone failed: "+n,type:"error",clear:!0})}))}},gotoEditViewPage:function(e,t,n,r){re.navigate("#"+re.urls("view","edit",encodeURIComponent(e),t?encodeURIComponent(t):"",encodeURIComponent(n),encodeURIComponent(r)))},updateMapCode:function(e){return function(t){t({type:Lc,code:e})}},updateReduceCode:function(e){return function(t){t({type:Mc,code:e})}},selectDesignDoc:function(e){return function(t){t({type:xc,options:{value:e}})}},updateNewDesignDocName:function(e){return function(t){t({type:kc,options:{value:e}})}},updateNewDesignDocPartitioned:function(e){return function(t){t({type:jc,options:{value:e}})}}};function Hc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hc(Object(n),!0).forEach((function(t){Wc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xc="function (doc) {\n  emit(doc._id, 1);\n}",Qc="function (keys, values, rereduce) {\n  if (rereduce) {\n    return sum(values);\n  } else {\n    return values.length;\n  }\n}",$c=["_sum","_count","_stats","_approx_count_distinct"],Jc=$c.concat(["CUSTOM","NONE"]),Yc={designDocs:new Backbone.Collection,isLoading:!0,view:{reduce:"",map:Xc},database:{id:"0"},designDocId:"",isNewDesignDoc:!1,newDesignDocName:"",newDesignDocPartitioned:!0,isNewView:!1,viewName:"",originalViewName:"",originalDesignDocName:"",reduceOptions:Jc};function Zc(e,t){var n=Gc(Gc({},e),{},{isLoading:!1,newDesignDocName:"",isNewView:t.isNewView,viewName:t.viewName||"viewName",isNewDesignDoc:t.isNewDesignDoc||!1,designDocs:t.designDocs,designDocId:t.designDocId,originalDesignDocName:t.designDocId,database:t.database});return n.originalViewName=n.viewName,n.view=function(e){return e.isNewView||e.isNewDesignDoc?{reduce:"",map:Xc}:e.designDocs.find((function(t){return e.designDocId==t.id})).dDocModel().get("views")[e.viewName]}(n),n}function eu(e){return e.view.reduce?tu(e)?"CUSTOM":e.view.reduce:"NONE"}function tu(e){return!(!e.view.reduce||-1!==$c.indexOf(e.view.reduce))}function nu(e,t){if("new-doc"===e.designDocId){var n={_id:"_design/"+e.newDesignDocName,views:{},language:"javascript"},r=new lt.Doc(n,{database:e.database});return t&&r.setDDocPartitionedOption(e.newDesignDocPartitioned),r}if(!e.designDocs)return null;var o=e.designDocs.find((function(t){return t.id===e.designDocId}));return o?o.dDocModel():null}function ru(e){return e.designDocs?e.designDocs.filter((function(e){return!e.isMangoDoc()})).map((function(e){return e.id})):[]}var ou=(0,Rt.$j)((function(e,t){var n,r,o,i=e.indexEditor,a=e.databases,s=(n=i,r=a.isDbPartitioned,!!(o=n.designDocs.find((function(e){return n.designDocId===e.id})))&&or(o.get("doc"),r));return{database:i.database,isNewView:i.isNewView,viewName:i.viewName,designDocs:i.designDocs,designDocList:ru(i),originalViewName:i.originalViewName,originalDesignDocName:i.originalDesignDocName,isNewDesignDoc:i.isNewDesignDoc,designDocId:i.designDocId,designDocPartitioned:s,newDesignDocName:i.newDesignDocName,newDesignDocPartitioned:i.newDesignDocPartitioned,saveDesignDoc:nu(i,a.isDbPartitioned),map:i.view.map,isLoading:i.isLoading,reduce:i.view.reduce,reduceOptions:i.reduceOptions,reduceSelectedOption:eu(i),hasCustomReduce:tu(i),hasReduce:!!i.view.reduce,isDbPartitioned:a.isDbPartitioned,partitionKey:t.partitionKey}}),(function(e){return{saveView:function(t,n){e(zc.saveView(t,n))},changeViewName:function(t){e(zc.changeViewName(t))},updateMapCode:function(t){e(zc.updateMapCode(t))},selectDesignDoc:function(t){e(zc.selectDesignDoc(t))},updateNewDesignDocName:function(t){e(zc.updateNewDesignDocName(t))},updateNewDesignDocPartitioned:function(t){e(zc.updateNewDesignDocPartitioned(t))},updateReduceCode:function(t){e(zc.updateReduceCode(t))},selectReduceChanged:function(t){e(zc.selectReduceChanged(t))}}}))(Sc);const iu={IndexEditorContainer:ou,IndexEditor:Sc,ReduceEditor:fc,DesignDocSelector:rc,StyledSelect:ga.StyledSelect};function au(e){return au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},au(e)}function su(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cu(e,t){return cu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cu(e,t)}function uu(e,t){if(t&&("object"===au(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return lu(e)}function lu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pu(e){return pu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pu(e)}function fu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var du=iu.DesignDocSelector,hu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cu(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pu(r);if(o){var n=pu(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return uu(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),fu(lu(t=i.call(this,e)),"submit",(function(){t.designDocSelector.validate()&&(""!==t.props.newIndexName?t.props.submit():re.addNotification({msg:"Please enter the new index name.",type:"error",clear:!0}))})),fu(lu(t),"close",(function(e){e&&e.preventDefault(),t.props.close()})),fu(lu(t),"setNewIndexName",(function(e){t.props.setNewCloneIndexName(e.target.value)})),t.props.setNewCloneIndexName(""),t}return t=a,(n=[{key:"render",value:function(){var e=this;return ae.createElement(en.u_,{dialogClassName:"clone-index-modal",show:this.props.visible,onHide:this.close},ae.createElement(en.u_.Header,{closeButton:!0},ae.createElement(en.u_.Title,null,this.props.title)),ae.createElement(en.u_.Body,null,ae.createElement("form",{className:"form",method:"post",onSubmit:this.submit},ae.createElement("p",null,"Select the design document where the cloned ",this.props.indexLabel," will be created, and then enter a name for the cloned ",this.props.indexLabel,"."),ae.createElement("div",{className:"row"},ae.createElement(du,{ref:function(t){return e.designDocSelector=t},designDocList:this.props.designDocArray,isDbPartitioned:this.props.isDbPartitioned,selectedDesignDocName:this.props.selectedDesignDoc,selectedDesignDocPartitioned:this.props.selectedDesignDocPartitioned,newDesignDocName:this.props.newDesignDocName,newDesignDocPartitioned:this.props.newDesignDocPartitioned,onSelectDesignDoc:this.props.selectDesignDoc,onChangeNewDesignDocName:this.props.updateNewDesignDocName,onChangeNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned})),ae.createElement("div",{className:"clone-index-name-row"},ae.createElement("label",{className:"new-index-title-label",htmlFor:"new-index-name"},this.props.indexLabel," Name"),ae.createElement("input",{type:"text",id:"new-index-name",value:this.props.newIndexName,onChange:this.setNewIndexName,placeholder:"New view name"})))),ae.createElement(en.u_.Footer,null,ae.createElement("a",{href:"#",className:"cancel-link",onClick:this.close,"data-bypass":"true"},"Cancel"),ae.createElement("button",{onClick:this.submit,"data-bypass":"true",className:"btn btn-primary save"},ae.createElement("i",{className:"icon fonticon-ok-circled"})," Clone ",this.props.indexLabel)))}}])&&su(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function yu(e){return yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yu(e)}function bu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gu(e,t){return gu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gu(e,t)}function _u(e,t){if(t&&("object"===yu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vu(e)}function vu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wu(e){return wu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wu(e)}function Eu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}fu(hu,"propTypes",{visible:Nt().bool.isRequired,title:Nt().string,close:Nt().func.isRequired,submit:Nt().func.isRequired,designDocArray:Nt().array.isRequired,selectedDesignDoc:Nt().string.isRequired,newDesignDocName:Nt().string.isRequired,newIndexName:Nt().string.isRequired,indexLabel:Nt().string.isRequired,selectDesignDoc:Nt().func.isRequired,updateNewDesignDocName:Nt().func.isRequired,setNewCloneIndexName:Nt().func.isRequired}),fu(hu,"defaultProps",{title:"Clone Index",visible:!1});var Ou=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gu(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wu(r);if(o){var n=wu(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _u(this,e)});function a(){var e;bu(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Eu(vu(e=i.call.apply(i,[this].concat(n))),"state",{placement:"bottom"}),Eu(vu(e),"setPlacement",(function(t){var n=document.getElementById(t).getBoundingClientRect().top+150>window.innerHeight?"top":"bottom";e.setState({placement:n})})),Eu(vu(e),"createItems",(function(){var t=e.props.items.sort();return _.map(t,(function(t,n){var r=re.urls(e.props.urlNamespace,"app",encodeURIComponent(e.props.database.id),encodeURIComponent(e.props.designDocName));e.props.selectedPartitionKey&&(r=re.urls("partitioned_"+e.props.urlNamespace,"app",encodeURIComponent(e.props.database.id),encodeURIComponent(e.props.selectedPartitionKey),encodeURIComponent(e.props.designDocName)));var o=e.props.selectedIndex===t?"active":"";return ae.createElement("li",{className:o,key:n},ae.createElement("a",{id:e.props.designDocName+"_"+t,href:"#/"+r+encodeURIComponent(t),className:"toggle-view"},t),ae.createElement(en.Ox,{trigger:"click",onEnter:e.setPlacement.bind(vu(e),e.props.designDocName+"_"+t),placement:e.state.placement,rootClose:!0,ref:function(t){return e.itemOverlay=t},overlay:ae.createElement(en.J2,{id:"index-menu-component-popover"},ae.createElement("ul",null,ae.createElement("li",{onClick:e.indexAction.bind(vu(e),"edit",{indexName:t,onEdit:e.props.onEdit})},ae.createElement("span",{className:"fonticon fonticon-file-code-o"}),"Edit"),ae.createElement("li",{onClick:e.indexAction.bind(vu(e),"clone",{indexName:t,onClone:e.props.onClone})},ae.createElement("span",{className:"fonticon fonticon-files-o"}),"Clone"),ae.createElement("li",{onClick:e.indexAction.bind(vu(e),"delete",{indexName:t,onDelete:e.props.onDelete})},ae.createElement("span",{className:"fonticon fonticon-trash"}),"Delete")))},ae.createElement("span",{className:"index-menu-toggle fonticon fonticon-wrench2"})))}))})),Eu(vu(e),"indexAction",(function(t,n,r){switch(r.preventDefault(),e.itemOverlay.hide(),t){case"delete":e.props.showDeleteIndexModal(n.indexName,e.props.designDocName,e.props.indexLabel,n.onDelete);break;case"clone":e.props.showCloneIndexModal(n.indexName,e.props.designDocName,e.props.indexLabel,n.onClone);break;case"edit":n.onEdit(e.props.database.id,e.props.selectedPartitionKey,e.props.designDocName,n.indexName)}})),Eu(vu(e),"toggle",(function(t){t.preventDefault(),e.props.toggle(e.props.designDocName,e.props.title)})),e}return t=a,(n=[{key:"render",value:function(){if(0===this.props.items.length)return null;var e="accordion-header index-group-header",t="index-list accordion-body collapse";this.props.isExpanded&&(e+=" down",t+=" in");var n=this.props.title,r="nav-design-function-"+this.props.designDocName+this.props.selector;return ae.createElement("li",{id:r},ae.createElement("a",{className:e,"data-toggle":"collapse",onClick:this.toggle},ae.createElement("div",{className:"fonticon-play"}),n),ae.createElement(en.UO,{in:this.props.isExpanded},ae.createElement("ul",{className:t},this.createItems())))}}])&&mu(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Su(e){return Su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Su(e)}function Du(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nu(e,t){return Nu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nu(e,t)}function Ru(e,t){if(t&&("object"===Su(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pu(e)}function Pu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cu(e){return Cu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cu(e)}function Tu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Eu(Ou,"propTypes",{urlNamespace:Nt().string.isRequired,indexLabel:Nt().string.isRequired,database:Nt().object.isRequired,designDocName:Nt().string.isRequired,items:Nt().array.isRequired,isExpanded:Nt().bool.isRequired,selectedIndex:Nt().string.isRequired,onDelete:Nt().func.isRequired,onClone:Nt().func.isRequired,showDeleteIndexModal:Nt().func.isRequired,showCloneIndexModal:Nt().func.isRequired,isPartitioned:Nt().bool.isRequired,selectedPartitionKey:Nt().string});var xu=ga.MenuDropDown,ku=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nu(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Cu(r);if(o){var n=Cu(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ru(this,e)});function a(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Tu(Pu(t=i.call(this,e)),"indexList",(function(){return _.map(t.state.updatedSidebarListTypes,(function(e,n){var r=_.has(t.props.toggledSections,e.name)&&t.props.toggledSections[e.name],o="";return t.props.selectedNavInfo.designDocSection===e.name&&(o=t.props.selectedNavInfo.indexName),ae.createElement(Ou,{icon:e.icon,isExpanded:r,urlNamespace:e.urlNamespace,indexLabel:e.indexLabel,onEdit:e.onEdit,onDelete:e.onDelete,onClone:e.onClone,selectedIndex:o,toggle:t.props.toggle,database:t.props.database,designDocName:t.props.designDocName,key:n,title:e.name,selector:e.selector,items:_.keys(t.props.designDoc[e.selector]),isPartitioned:t.props.isPartitioned,selectedPartitionKey:t.props.selectedPartitionKey,showDeleteIndexModal:t.props.showDeleteIndexModal,showCloneIndexModal:t.props.showCloneIndexModal})}))})),Tu(Pu(t),"toggle",(function(e){e.preventDefault(),t.props.toggle(t.props.designDocName)})),Tu(Pu(t),"getNewButtonLinks",(function(){var e=t.props.selectedPartitionKey?encodeURIComponent(t.props.selectedPartitionKey):"",n=re.urls("databaseBaseURL","app",encodeURIComponent(t.props.database.id))+(e?"/_partition/"+e:""),r=t.props.designDocName;return[{title:"Add New",links:re.getExtensions("sidebar:links").reduce((function(e,o){return t.props.isPartitioned&&!o.showForPartitionedDDocs||e.push({title:o.title,url:"#"+n+"/"+o.url+"/"+encodeURIComponent(r),icon:"fonticon-plus-circled"}),e}),[{title:"New View",url:"#"+re.urls("new","addView",encodeURIComponent(t.props.database.id),e,encodeURIComponent(r)),icon:"fonticon-plus-circled"}])}]})),t.state={updatedSidebarListTypes:t.props.sidebarListTypes},_.isEmpty(t.state.updatedSidebarListTypes)||_.has(t.state.updatedSidebarListTypes[0],"selector")&&"views"!==t.state.updatedSidebarListTypes[0].selector){var n=t.state.updatedSidebarListTypes;n.unshift({selector:"views",name:"Views",urlNamespace:"view",indexLabel:"view",onDelete:zc.deleteView,onClone:zc.cloneView,onEdit:zc.gotoEditViewPage}),t.state={updatedSidebarListTypes:n}}return t}return t=a,(n=[{key:"render",value:function(){var e=this.getNewButtonLinks(),t="design-doc-section accordion-header",n="design-doc-body accordion-body collapse";this.props.isExpanded&&(t+=" down",n+=" in");var r=this.props.designDocName,o=this.props.selectedPartitionKey?encodeURIComponent(this.props.selectedPartitionKey):"",i=re.urls("designDocs","app",encodeURIComponent(this.props.database.id),o,r),a="metadata"===this.props.selectedNavInfo.designDocSection?"active":"",s=this.props.isPartitioned?"Partitioned design document":"Global design document",c=this.props.isPartitioned?"fonticon-documents":"fonticon-document";return ae.createElement("li",{className:"nav-header"},ae.createElement("div",{id:"sidebar-tab-"+r,className:t},ae.createElement("div",{id:"nav-header-"+r,onClick:this.toggle,className:"accordion-list-item"},ae.createElement("div",{className:"fonticon-play"}),ae.createElement("p",{className:"design-doc-name"},ae.createElement("span",{title:"_design/"+r},ae.createElement("i",{className:c,title:s}),r))),ae.createElement("div",{className:"new-button add-dropdown"},ae.createElement(xu,{links:e}))),ae.createElement(en.UO,{in:this.props.isExpanded},ae.createElement("ul",{className:n,id:"design-doc-menu-".concat(this.props.designDocName)},ae.createElement("li",{className:a},ae.createElement("a",{href:"#/"+i,className:"toggle-view accordion-header"},"Metadata")),this.indexList())))}}])&&Du(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function ju(e){return ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ju(e)}function Iu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Au(e,t){return Au=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Au(e,t)}function Lu(e,t){if(t&&("object"===ju(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Mu(e)}function Mu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uu(e){return Uu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Uu(e)}function qu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Tu(ku,"propTypes",{database:Nt().object.isRequired,sidebarListTypes:Nt().array.isRequired,isExpanded:Nt().bool.isRequired,isPartitioned:Nt().bool.isRequired,selectedPartitionKey:Nt().string,selectedNavInfo:Nt().object.isRequired,toggledSections:Nt().object.isRequired,designDocName:Nt().string.isRequired,showDeleteIndexModal:Nt().func.isRequired,showCloneIndexModal:Nt().func.isRequired});var Bu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Au(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Uu(r);if(o){var n=Uu(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Lu(this,e)});function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),qu(Mu(t=i.call(this,e)),"designDocList",(function(){return _.map(t.props.designDocs,(function(e,n){var r=decodeURIComponent(e.safeId),o=or(e,t.props.isDbPartitioned),i=!1,a={};_.has(t.props.toggledSections,r)&&(i=t.props.toggledSections[r].visible,a=t.props.toggledSections[r].indexGroups);var s={};return"designDoc"===t.props.selectedNav.navItem&&t.props.selectedNav.designDocName===r&&(s=t.props.selectedNav),ae.createElement(ku,{toggle:t.props.toggle,sidebarListTypes:t.sidebarListTypes,isExpanded:i,toggledSections:a,selectedNavInfo:s,selectedPartitionKey:t.props.selectedPartitionKey,isPartitioned:o,key:n,designDoc:e,designDocName:r,database:t.props.database,showDeleteIndexModal:t.props.showDeleteIndexModal,showCloneIndexModal:t.props.showCloneIndexModal})}))}));var n=re.getExtensions("sidebar:list");return t.sidebarListTypes=_.isUndefined(n)?[]:n,t}return t=a,(n=[{key:"render",value:function(){return ae.createElement("ul",{className:"nav nav-list"},this.designDocList())}}])&&Iu(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Vu(e){return Vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vu(e)}function Fu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ku(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zu(e,t){return zu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zu(e,t)}function Hu(e,t){if(t&&("object"===Vu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gu(e)}function Gu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wu(e){return Wu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wu(e)}function Xu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}qu(Bu,"propTypes",{database:Nt().object.isRequired,toggle:Nt().func.isRequired,designDocs:Nt().array,toggledSections:Nt().object,selectedNav:Nt().shape({designDocName:Nt().string,designDocSection:Nt().string,indexName:Nt().string,navItem:Nt().string}).isRequired,isDbPartitioned:Nt().bool.isRequired,selectedPartitionKey:Nt().string,showDeleteIndexModal:Nt().func.isRequired,showCloneIndexModal:Nt().func.isRequired});var Qu=ga.MenuDropDown,$u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zu(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wu(r);if(o){var n=Wu(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Hu(this,e)});function a(){var e;Fu(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Xu(Gu(e=i.call.apply(i,[this].concat(n))),"getNewButtonLinks",(function(){return tr(e.props.databaseName,e.props.selectedPartitionKey)})),Xu(Gu(e),"buildDocLinks",(function(){var t=re.urls("base","app",e.props.databaseName);return re.getExtensions("docLinks").map((function(n){return ae.createElement("li",{key:n.url,className:e.getNavItemClass(n.url)},ae.createElement("a",{id:n.url,href:t+n.url},n.title))}))})),Xu(Gu(e),"getNavItemClass",(function(t){return t===e.props.selectedNavItem?"active":""})),e}return t=a,n=[{key:"render",value:function(){var e=this.buildDocLinks(),t=re.url.encode(this.props.databaseName),n=this.props.selectedPartitionKey?encodeURIComponent(this.props.selectedPartitionKey):"",r="#"+re.urls("changes","app",t,n,""),o="#"+re.urls("permissions","app",t,n),i=re.urls("allDocs","app",t,n,""),a=re.urls("mango","query-app",t,n),s=ie.i18n.en_US["run-query-with-mango"],c=this.getNewButtonLinks();return ae.createElement("ul",{className:"nav nav-list"},ae.createElement("li",{className:this.getNavItemClass("all-docs")},ae.createElement("a",{id:"all-docs",href:"#/"+i,className:"toggle-view"},"All Documents"),ae.createElement("div",{id:"new-all-docs-button",className:"add-dropdown"},ae.createElement(Qu,{links:c}))),ae.createElement("li",{className:this.getNavItemClass("mango-query")},ae.createElement("a",{id:"mango-query",href:"#"+a,className:"toggle-view"},s)),ae.createElement("li",{className:this.getNavItemClass("permissions")},ae.createElement("a",{id:"permissions",href:o},"Permissions")),ae.createElement("li",{className:this.getNavItemClass("changes")},ae.createElement("a",{id:"changes",href:r},"Changes")),e,ae.createElement("li",{className:this.getNavItemClass("design-docs")},ae.createElement("a",{id:"design-docs",href:"#/"+i+'?startkey="_design"&endkey="_design0"',className:"toggle-view"},"Design Documents"),ae.createElement("div",{id:"new-design-docs-button",className:"add-dropdown"},ae.createElement(Qu,{links:c}))))}}],n&&Ku(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Ju(e){return Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ju(e)}function Yu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zu(e,t){return Zu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zu(e,t)}function el(e,t){if(t&&("object"===Ju(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return tl(e)}function tl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nl(e){return nl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nl(e)}function rl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Xu($u,"propTypes",{databaseName:Nt().string.isRequired,selectedNavItem:Nt().string.isRequired,selectedPartitionKey:Nt().string});var ol=ga.DeleteDatabaseModal,il=ga.LoadLines,al=Va.ConfirmationModal,sl=va.deleteDbModalStore,cl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zu(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=nl(r);if(o){var n=nl(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return el(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),rl(tl(t=i.call(this,e)),"onChange",(function(){var e=t.getDeleteDbStoreState();t.setState(e)})),rl(tl(t),"showDeleteDatabaseModal",(function(e){$n.showDeleteDatabaseModal(e)})),rl(tl(t),"deleteIndex",(function(){var e="designDoc"===t.props.selectedNav.navItem&&"_design/"+t.props.selectedNav.designDocName===t.props.deleteIndexModalDesignDoc.id&&t.props.selectedNav.indexName===t.props.deleteIndexModalIndexName;t.props.deleteIndexModalOnSubmit({isOnIndex:e,indexName:t.props.deleteIndexModalIndexName,designDoc:t.props.deleteIndexModalDesignDoc,designDocs:t.props.designDocs,database:t.props.database})})),rl(tl(t),"cloneIndex",(function(){t.props.cloneIndexModalOnSubmit({sourceIndexName:t.props.cloneIndexSourceIndexName,sourceDesignDocName:t.props.cloneIndexSourceDesignDocName,targetDesignDocName:t.props.cloneIndexModalSelectedDesignDoc,newDesignDocName:t.props.cloneIndexModalNewDesignDocName,newDesignDocPartitioned:t.props.cloneIndexModalNewDesignDocPartitioned,isDbPartitioned:t.props.isDbPartitioned,newIndexName:t.props.cloneIndexModalNewIndexName,designDocs:t.props.designDocs,database:t.props.database,onComplete:t.props.hideCloneIndexModal})})),t.state=t.getDeleteDbStoreState(),t.deleteIndex=t.deleteIndex.bind(tl(t)),t.cloneIndex=t.cloneIndex.bind(tl(t)),t}return t=a,(n=[{key:"componentDidMount",value:function(){sl.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){sl.off("change",this.onChange,this)}},{key:"getDeleteDbStoreState",value:function(){return{deleteDbModalProperties:sl.getShowDeleteDatabaseModal()}}},{key:"render",value:function(){return this.props.isLoading?ae.createElement(il,null):ae.createElement("nav",{className:"sidenav"},ae.createElement($u,{selectedNavItem:this.props.selectedNav.navItem,databaseName:this.props.database.id,selectedPartitionKey:this.props.selectedPartitionKey}),ae.createElement(Bu,{selectedNav:this.props.selectedNav,selectedPartitionKey:this.props.selectedPartitionKey,isDbPartitioned:this.props.isDbPartitioned,toggle:this.props.toggleContent,toggledSections:this.props.toggledSections,designDocs:this.props.designDocList,database:this.props.database,showDeleteIndexModal:this.props.showDeleteIndexModal,showCloneIndexModal:this.props.showCloneIndexModal}),ae.createElement(ol,{showHide:this.showDeleteDatabaseModal,modalProps:this.state.deleteDbModalProperties}),ae.createElement(al,{title:"Confirm Deletion",visible:this.props.deleteIndexModalVisible,text:this.props.deleteIndexModalText,onClose:this.props.hideDeleteIndexModal,onSubmit:this.deleteIndex}),ae.createElement(hu,{visible:this.props.cloneIndexModalVisible,title:this.props.cloneIndexModalTitle,close:this.props.hideCloneIndexModal,submit:this.cloneIndex,designDocArray:this.props.availableDesignDocIds,selectedDesignDoc:this.props.cloneIndexModalSelectedDesignDoc,selectedDesignDocPartitioned:this.props.cloneIndexModalSelectedDesignDocPartitioned,newDesignDocName:this.props.cloneIndexModalNewDesignDocName,newDesignDocPartitioned:this.props.cloneIndexModalNewDesignDocPartitioned,newIndexName:this.props.cloneIndexModalNewIndexName,indexLabel:this.props.cloneIndexModalIndexLabel,selectDesignDoc:this.props.selectDesignDoc,updateNewDesignDocName:this.props.updateNewDesignDocName,updateNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned,setNewCloneIndexName:this.props.setNewCloneIndexName,isDbPartitioned:this.props.isDbPartitioned}))}}])&&Yu(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);rl(cl,"propTypes",{selectedNav:Nt().shape({designDocName:Nt().string,designDocSection:Nt().string,indexName:Nt().string,navItem:Nt().string}).isRequired});const ul={SidebarController:cl,DesignDoc:ku,CloneIndexModal:hu};function ll(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ll(Object(n),!0).forEach((function(t){fl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ll(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dl={designDocs:new Backbone.Collection,designDocList:[],selected:{navItem:"all-docs",designDocName:"",designDocSection:"",indexName:""},loading:!0,toggledSections:{},deleteIndexModalVisible:!1,deleteIndexModalDesignDocName:"",deleteIndexModalText:"",deleteIndexModalIndexName:"",deleteIndexModalOnSubmit:function(){},cloneIndexModalVisible:!1,cloneIndexDesignDocProp:"",cloneIndexModalTitle:"",cloneIndexModalSelectedDesignDoc:"",cloneIndexModalNewDesignDocName:"",cloneIndexModalNewDesignDocPartitioned:!0,cloneIndexModalNewIndexName:"",cloneIndexModalSourceIndexName:"",cloneIndexModalSourceDesignDocName:"",cloneIndexModalIndexLabel:"",cloneIndexModalOnSubmit:function(){}};function hl(e,t){var n=pl(pl({},e),{},{database:t.database,designDocs:t.designDocs,designDocList:ml(t.designDocs),loading:!1});return t.selectedNavItem&&(n.selected={navItem:t.selectedNavItem,designDocName:"",designDocSection:"",indexName:""}),n}function yl(e,t,n){var r=pl({},e);if(!e.toggledSections[t])return r.toggledSections[t]={visible:!0,indexGroups:{}},r;if(n){var o=e.toggledSections[t].indexGroups[n];return _.isUndefined(o)?r.toggledSections[t].indexGroups[n]=!0:r.toggledSections[t].indexGroups[n]=!o,r}return r.toggledSections[t].visible=!e.toggledSections[t].visible,r}function bl(e,t){var n=t.selectedNavItem,r=pl({},e);return n.designDocName&&(_.has(e.toggledSections,n.designDocName)||(r.toggledSections[n.designDocName]={visible:!0,indexGroups:{}}),r.toggledSections[n.designDocName].visible=!0,n.designDocSection&&(r.toggledSections[n.designDocName].indexGroups[n.designDocSection]=!0)),r}function ml(e){if(!e)return[];var t=e.toJSON();t=_.filter(t,(function(e){return!_.has(e.doc,"language")||"query"!==e.doc.language}));var n=t.map((function(e){return e.safeId=ie.utils.safeURLName(e._id.replace(/^_design\//,"")),_.extend(e,e.doc)}));return n}function gl(e,t){var n=e.designDocs.find((function(t){return e.cloneIndexModalSelectedDesignDoc==t.id}));return!!n&&or(n.get("doc"),t)}function _l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wl=function(e){var t=e.designDocs.filter((function(e){return!e.isMangoDoc()}));return _.map(t,(function(e){return e.id}))},El=function(e){var t=e.designDocs.find((function(t){return"_design/"+e.deleteIndexModalDesignDocName===t.id}));return t?t.dDocModel():null},Ol=(0,Rt.$j)((function(e,t){var n,r,o,i=e.sidebar,a=e.databases;return{database:(n=i,n.loading?{}:n.database),selectedNav:(r=t.selectedNavItem,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_l(Object(n),!0).forEach((function(t){vl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({designDocName:"",designDocSection:"",indexName:"",navItem:""},r),o),designDocs:i.designDocs,designDocList:i.designDocList,availableDesignDocIds:wl(i),toggledSections:i.toggledSections,isLoading:i.loading||a.isLoadingDbInfo,selectedPartitionKey:t.selectedPartitionKey,isDbPartitioned:a.isDbPartitioned,deleteIndexModalVisible:i.deleteIndexModalVisible,deleteIndexModalText:i.deleteIndexModalText,deleteIndexModalOnSubmit:i.deleteIndexModalOnSubmit,deleteIndexModalIndexName:i.deleteIndexModalIndexName,deleteIndexModalDesignDoc:El(i),cloneIndexModalVisible:i.cloneIndexModalVisible,cloneIndexModalTitle:i.cloneIndexModalTitle,cloneIndexModalSelectedDesignDoc:i.cloneIndexModalSelectedDesignDoc,cloneIndexModalSelectedDesignDocPartitioned:gl(i,a.isDbPartitioned),cloneIndexModalNewDesignDocName:i.cloneIndexModalNewDesignDocName,cloneIndexModalNewDesignDocPartitioned:i.cloneIndexModalNewDesignDocPartitioned,cloneIndexModalOnSubmit:i.cloneIndexModalOnSubmit,cloneIndexDesignDocProp:i.cloneIndexDesignDocProp,cloneIndexModalNewIndexName:i.cloneIndexModalNewIndexName,cloneIndexSourceIndexName:i.cloneIndexModalSourceIndexName,cloneIndexSourceDesignDocName:i.cloneIndexModalSourceDesignDocName,cloneIndexModalIndexLabel:i.cloneIndexModalIndexLabel}}),(function(e){return{toggleContent:function(t,n){e(function(e,t){return function(n){n({type:Ts,designDoc:e,indexGroup:t})}}(t,n))},hideCloneIndexModal:function(){e((function(e){e({type:As})}))},hideDeleteIndexModal:function(){e((function(e){e({type:js})}))},showDeleteIndexModal:function(t,n,r,o){e(function(e,t,n,r){return function(o){o({type:ks,options:{indexName:e,indexLabel:n,designDocName:t,onDelete:r}})}}(t,n,r,o))},showCloneIndexModal:function(t,n,r,o){e(function(e,t,n,r){return function(o){o({type:Is,options:{sourceIndexName:e,sourceDesignDocName:t,onSubmit:r,indexLabel:n,cloneIndexModalTitle:"Clone "+n}})}}(t,n,r,o))},selectDesignDoc:function(t){e(function(e){return function(t){t({type:Ls,options:{value:e}})}}(t))},updateNewDesignDocName:function(t){e(function(e){return function(t){t({type:Ms,options:{value:e}})}}(t))},updateNewDesignDocPartitioned:function(t){e(function(e){return function(t){t({type:Us,options:{value:e}})}}(t))},setNewCloneIndexName:function(t){e(function(e){return function(t){t({type:qs,options:{value:e}})}}(t))}}}))(ul.SidebarController);const Sl=Ol;var Dl=function(e){var t=e.url,n=e.icon,r=e.onClick,o=e.children;return ae.createElement("li",{role:"presentation"},ae.createElement("a",{className:"faux-header__doc-header-dropdown-item",onClick:r,href:t},ae.createElement("i",{className:n})," ",o))},Nl=function(e){var t,n=e.dbName,r=(t=function(e,t){var n=tr(e,t);return function(e){return nr(e)}(e).concat(n)}(n,e.partitionKey),t.map((function(e,t){if(e.title&&e.links){var n=e.links.map((function(e){return ae.createElement(Dl,{key:e.title,onClick:e.onClick,icon:e.icon,url:e.url},e.title)}));return[ae.createElement("li",{key:e.title,className:"header-label"},e.title),n]}return ae.createElement(Dl,{icon:e.icon,url:e.url,onClick:e.onClick,key:t},e.title)})));return ae.createElement("div",{className:"faux-header__doc-header-left"},ae.createElement("button",{type:"button",className:"faux-header__doc-header-backlink",onClick:function(){re.navigate("#/_all_dbs")}},ae.createElement("i",{className:"faux-header__doc-header-backlink__icon fonticon fonticon-left-open"})),ae.createElement("div",{className:"faux-header__doc-header-title flex-fill",title:n},n),ae.createElement(en.Lt,{id:"faux-header__doc-header-left-1"},ae.createElement(en.Lt.Toggle,{noCaret:!0,className:"faux-header__doc-header-dropdown-toggle"},ae.createElement("i",{className:"faux-header__doc-header-dropdown-toggle-icon fonticon-vertical-ellipsis"})),ae.createElement(en.Lt.Menu,{className:"faux-header__doc-header-dropdown-itemwrapper"},r)))};Nl.propTypes={dbName:Nt().string.isRequired,partitionKey:Nt().string};const Rl=Nl;var Pl=n(75185);function Cl(e){return Cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cl(e)}function Tl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kl(e,t){return kl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kl(e,t)}function jl(e,t){if(t&&("object"===Cl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Il(e){return Il=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Il(e)}n(70488);var Al=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kl(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Il(r);if(o){var n=Il(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return jl(this,e)});function a(){return Tl(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"willEnter",value:function(){return{opacity:(0,ci.ST)(1,ci.um.gentle),height:(0,ci.ST)(160,ci.um.gentle)}}},{key:"willLeave",value:function(){return{opacity:(0,ci.ST)(0,ci.um.gentle),height:(0,ci.ST)(0,ci.um.gentle)}}},{key:"getStyles",value:function(e){return!e&&this.props.codeVisible?[{key:"1",style:this.willEnter()}]:e||this.props.codeVisible?e.map((function(e){return{key:"1",style:e.style}})):[{key:"1",style:this.willLeave()}]}},{key:"getChildren",value:function(e){var t=this,n=e.map((function(e){var n=e.style;return!1===t.props.codeVisible&&0===n.opacity?null:ae.createElement("div",{key:"1",style:{opacity:n.opacity,height:n.height+"px"}},ae.createElement(Va.CodeFormat,{code:t.props.code}))}));return ae.createElement("span",null,n)}},{key:"render",value:function(){return ae.createElement(ci.bg,{styles:this.getStyles(),willLeave:this.willLeave,willEnter:this.willEnter},this.getChildren.bind(this))}}])&&xl(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Ll(e){return Ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ll(e)}function Ml(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ul(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ql(e,t){return ql=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ql(e,t)}function Bl(e,t){if(t&&("object"===Ll(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Vl(e){return Vl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vl(e)}Al.propTypes={code:Nt().object.isRequired,codeVisible:Nt().bool.isRequired};var Fl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ql(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Vl(r);if(o){var n=Vl(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Bl(this,e)});function a(){return Ml(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.deleted,n=e.id,r=e.databaseName;if(t)return ae.createElement("span",{className:"js-doc-id"},n);var o="#"+re.urls("document","app",encodeURIComponent(r),encodeURIComponent(n));return ae.createElement("a",{href:o,className:"js-doc-link"},n)}}])&&Ul(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Kl(e){return Kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kl(e)}function zl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hl(e,t){return Hl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hl(e,t)}function Gl(e,t){if(t&&("object"===Kl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Wl(e){return Wl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wl(e)}var Xl=ga.Copy,Ql=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hl(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wl(r);if(o){var n=Wl(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Gl(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={codeVisible:!1},t}return t=a,(n=[{key:"toggleJSON",value:function(e){e.preventDefault(),this.setState({codeVisible:!this.state.codeVisible})}},{key:"getChangesCode",value:function(){return this.state.codeVisible?ae.createElement(Va.CodeFormat,{key:"changesCodeSection",code:this.getChangeCode()}):null}},{key:"getChangeCode",value:function(){return{changes:this.props.change.changes,doc:this.props.change.doc}}},{key:"showCopiedMessage",value:function(e){var t="The document ID has been copied to your clipboard.";"seq"===e&&(t="The document seq number has been copied to your clipboard."),re.addNotification({msg:t,type:"info",clear:!0})}},{key:"render",value:function(){var e=this,t=this.state.codeVisible,n=this.props,r=n.change,o=n.databaseName,i="change-wrapper"+(r.isNew?" new-change-row":"");return ae.createElement("div",{className:i},ae.createElement("div",{className:"change-box","data-id":r.id},ae.createElement("div",{className:"row-fluid"},ae.createElement("div",{className:"span2"},"seq"),ae.createElement("div",{className:"span8 change-sequence"},r.seq),ae.createElement("div",{className:"span2 text-right"},ae.createElement(Xl,{uniqueKey:(0,Pl.Z)(),text:r.seq.toString(),onClipboardClick:function(){return e.showCopiedMessage("seq")}}))),ae.createElement("div",{className:"row-fluid"},ae.createElement("div",{className:"span2"},"id"),ae.createElement("div",{className:"span8"},ae.createElement(Fl,{id:r.id,deleted:r.deleted,databaseName:o})),ae.createElement("div",{className:"span2 text-right"},ae.createElement(Xl,{uniqueKey:(0,Pl.Z)(),text:r.id,onClipboardClick:function(){return e.showCopiedMessage("id")}}))),ae.createElement("div",{className:"row-fluid"},ae.createElement("div",{className:"span2"},"deleted"),ae.createElement("div",{className:"span10"},r.deleted?"True":"False")),ae.createElement("div",{className:"row-fluid"},ae.createElement("div",{className:"span2"},"changes"),ae.createElement("div",{className:"span10"},ae.createElement("button",{type:"button",className:"btn btn-small btn-secondary",onClick:this.toggleJSON.bind(this)},t?"Close JSON":"View JSON"))),ae.createElement(Al,{codeVisible:this.state.codeVisible,code:this.getChangeCode()})))}}])&&zl(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function $l(e){return $l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$l(e)}function Jl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yl(e,t){return Yl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yl(e,t)}function Zl(e,t){if(t&&("object"===$l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ep(e){return ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ep(e)}Ql.propTypes={change:Nt().object,databaseName:Nt().string.isRequired};var tp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yl(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ep(r);if(o){var n=ep(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Zl(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).props.loadChanges(t.props.databaseName),t}return t=a,(n=[{key:"showingSubsetMsg",value:function(){var e=this.props,t=e.isShowingSubset,n=e.changes,r="";if(t){var o=n.length;r=ae.createElement("p",{className:"changes-result-limit"},"Limiting results to latest ",ae.createElement("b",null,o)," changes.")}return r}},{key:"getRows",value:function(){var e=this.props,t=e.changes,n=e.loaded,r=e.databaseName;return!t.length&&n?ae.createElement("p",{className:"no-doc-changes"},"There are no document changes to display."):t.map((function(e,t){return ae.createElement(Ql,{change:e,key:t,databaseName:r})}))}},{key:"render",value:function(){return ae.createElement("div",null,ae.createElement("div",{className:"js-changes-view"},this.showingSubsetMsg(),this.getRows()))}}])&&Jl(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);tp.propTypes={changes:Nt().array.isRequired,loaded:Nt().bool.isRequired,databaseName:Nt().string.isRequired,isShowingSubset:Nt().bool.isRequired,loadChanges:Nt().func.isRequired};const np="UPDATE_CHANGES",rp="ADD_CHANGES_FILTER_ITEM",op="REMOVE_CHANGES_FILTER_ITEM";var ip,ap=function(e,t){var n=er(e.last_seq);t({type:np,changes:e.results,seqNum:n})};const sp=function(e){return function(t){ip=null,function(e,t,n){var r={limit:100};ip&&(r.since=n,r.timeout=6e4,r.feed="longpoll");var o=ie.utils.queryParams(r),i=ie.utils.safeURLName(t),a=re.urls("changes","server",i,"?"+o);v(a).then((function(t){if(t.error)throw new Error(t.reason||t.error);ap(t,e)})).catch((function(e){re.addNotification({msg:"Error loading list of changes. Reason: "+e.message,type:"error",clear:!0})}))}(t,e)}};const cp=(0,Rt.$j)((function(e,t){var n=e.changes;return{changes:n.filteredChanges,loaded:n.isLoaded,databaseName:t.databaseName,isShowingSubset:n.showingSubset}}),(function(e){return{loadChanges:function(t){e(sp(t))}}}))(tp);function up(e){return up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},up(e)}function lp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pp(e,t){return pp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pp(e,t)}function fp(e,t){if(t&&("object"===up(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dp(e)}function dp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hp(e){return hp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hp(e)}var yp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pp(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=hp(r);if(o){var n=hp(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return fp(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={filter:"",error:!1},t.submitForm=t.submitForm.bind(dp(t)),t}return t=a,(n=[{key:"submitForm",value:function(e){if(e.preventDefault(),e.stopPropagation(),this.props.hasFilter(this.state.filter)){this.setState({error:!0});var t=this;setTimeout((function(){t.setState({error:!1})}),1e3)}else this.props.addFilter(this.state.filter),this.setState({filter:"",error:!1})}},{key:"componentDidMount",value:function(){this.focusFilterField()}},{key:"componentDidUpdate",value:function(){this.focusFilterField()}},{key:"focusFilterField",value:function(){this.addItem.focus()}},{key:"inputClassNames",value:function(){var e="js-changes-filter-field";return this.state.error&&(e+=" errorHighlight"),e}},{key:"render",value:function(){var e=this;return ae.createElement("form",{className:"form-inline js-filter-form",onSubmit:this.submitForm},ae.createElement("fieldset",null,ae.createElement("i",{className:"fonticon-filter"}),ae.createElement("input",{type:"text",ref:function(t){return e.addItem=t},className:this.inputClassNames(),placeholder:"Sequence or ID",onChange:function(t){return e.setState({filter:t.target.value})},value:this.state.filter}),ae.createElement("button",{type:"submit",className:"btn btn-secondary"},"Filter"),ae.createElement("div",{className:"help-block"})))}}])&&lp(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function bp(e){return bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bp(e)}function mp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gp(e,t){return gp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gp(e,t)}function _p(e,t){if(t&&("object"===bp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vp(e)}function vp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wp(e){return wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wp(e)}yp.propTypes={addFilter:Nt().func.isRequired,hasFilter:Nt().func.isRequired,tooltips:Nt().string},yp.defaultProps={tooltip:""};var Ep=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gp(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wp(r);if(o){var n=wp(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _p(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).addFilter=t.addFilter.bind(vp(t)),t.hasFilter=t.hasFilter.bind(vp(t)),t}return t=a,(n=[{key:"addFilter",value:function(e){_.isEmpty(e)||this.props.addFilter(e)}},{key:"hasFilter",value:function(e){return-1!==this.props.filters.indexOf(e)}},{key:"render",value:function(){var e=this;return ae.createElement("div",{className:"changes-header"},ae.createElement(yp,{filter:function(t){return e.props.removeFilter(t)},addFilter:this.addFilter,hasFilter:this.hasFilter}),ae.createElement(ga.BadgeList,{elements:this.props.filters,removeBadge:function(t){return e.props.removeFilter(t)}}))}}])&&mp(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);Ep.propTypes={filters:Nt().array.isRequired,addFilter:Nt().func.isRequired,removeFilter:Nt().func.isRequired};const Op=(0,Rt.$j)((function(e){return{filters:e.changes.filters}}),(function(e){return{addFilter:function(t){e(function(e){return function(t){t({type:rp,filter:e})}}(t))},removeFilter:function(t){e(function(e){return function(t){t({type:op,filter:e})}}(t))}}}))(Ep);function Sp(e){return Sp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sp(e)}function Dp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Np(e,t){return Np=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Np(e,t)}function Rp(e,t){if(t&&("object"===Sp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pp(e)}function Pp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cp(e){return Cp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cp(e)}var Tp=ga.LoadLines,xp=ga.Copy,kp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Np(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Cp(r);if(o){var n=Cp(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Rp(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Pp(t=i.call(this,e)),"showCopiedMessage",(function(){re.addNotification({type:"success",msg:"The MD5 sha has been copied to your clipboard.",clear:!0})})),t.fetchDDocInfo(),t}return t=a,(n=[{key:"componentDidUpdate",value:function(e){this.props.designDocInfo!==e.designDocInfo&&this.fetchDDocInfo()}},{key:"componentWillUnmount",value:function(){this.props.stopRefresh()}},{key:"fetchDDocInfo",value:function(){this.props.fetchDesignDocInfo({designDocName:this.props.designDocName,designDocInfo:this.props.designDocInfo})}},{key:"render",value:function(){if(this.props.isLoading)return ae.createElement(Tp,null);if(this.props.showLoadError)return ae.createElement("div",{className:"metadata-page"},ae.createElement("header",null,ae.createElement("h2",null,"_design/",this.props.designDocName," Metadata")),ae.createElement("section",{className:"container"},"Error retrieving metadata. Try reloading the page."));var e=this.props.viewIndex,t=e.sizes,n=t.active?t.active.toLocaleString("en"):0,r=t.external?t.external.toLocaleString("en"):0;return ae.createElement("div",{className:"metadata-page"},ae.createElement("header",null,ae.createElement("h2",null,"_design/",this.props.designDocName," Metadata")),ae.createElement("section",{className:"container"},ae.createElement("h3",null,"Index Information"),ae.createElement("ul",null,ae.createElement("li",null,ae.createElement("span",{className:"item-title"},"Language:"),ae.createElement("span",{className:"capitalize"},e.language)),ae.createElement("li",null,ae.createElement("span",{className:"item-title"},"Currently being updated?"),e.updater_running?"Yes":"No"),ae.createElement("li",null,ae.createElement("span",{className:"item-title"},"Currently running compaction?"),e.compact_running?"Yes":"No"),ae.createElement("li",null,ae.createElement("span",{className:"item-title"},"Waiting for a commit?"),e.waiting_commit?"Yes":"No")),ae.createElement("ul",null,ae.createElement("li",null,ae.createElement("span",{className:"item-title"},"Clients waiting for the index:"),e.waiting_clients),ae.createElement("li",null,ae.createElement("span",{className:"item-title"},"Update sequence on DB:"),e.update_seq),ae.createElement("li",null,ae.createElement("span",{className:"item-title"},"Processed purge sequence:"),e.purge_seq),ae.createElement("li",null,ae.createElement("span",{className:"item-title"},"Actual data size (bytes):"),n),ae.createElement("li",null,ae.createElement("span",{className:"item-title"},"Data size on disk (bytes):"),r)),ae.createElement("ul",null,ae.createElement("li",null,ae.createElement("span",{className:"item-title"},"MD5 Signature:"),ae.createElement(xp,{uniqueKey:(0,Pl.Z)(),text:e.signature,onClipboardClick:this.showCopiedMessage})))))}}])&&Dp(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);kp.propTypes={isLoading:Nt().bool.isRequired,showLoadError:Nt().bool.isRequired,viewIndex:Nt().object,designDocName:Nt().string.isRequired,stopRefresh:Nt().func.isRequired,fetchDesignDocInfo:Nt().func.isRequired};const jp={DESIGN_DOC_MONITOR:"DESIGN_DOC_MONITOR",DESIGN_FETCHING:"DESIGN_FETCHING",DESIGN_FETCHING_FAILED:"DESIGN_FETCHING_FAILED",DESIGN_REFRESH:"DESIGN_REFRESH"};var Ip,Ap=function(e,t){e.fetch().then((function(){t({type:jp.DESIGN_REFRESH,designDocInfo:e})}))},Lp=function(){Ip&&(window.clearInterval(Ip),Ip=void 0)};const Mp={fetchDesignDocInfo:function(e){var t=e.designDocName,n=e.designDocInfo;return function(e){return e({type:jp.DESIGN_FETCHING}),n.fetch().then((function(){!function(e,t){Lp(),Ip=window.setInterval((function(){Ap(e.designDocInfo,t)}),5e3),t({type:jp.DESIGN_DOC_MONITOR,options:e})}({designDocName:t,designDocInfo:n},e)})).catch((function(){e({type:jp.DESIGN_FETCHING_FAILED}),re.addNotification({msg:"Error loading design document metadata.",type:"error",clear:!0})}))}},stopRefresh:Lp};const Up=(0,Rt.$j)((function(e,t){var n=e.designDocInfo;return{isLoading:n.isLoading,showLoadError:n.showLoadError,viewIndex:n.viewIndex,designDocInfo:t.designDocInfo,designDocName:t.designDocName}}),(function(e){return{fetchDesignDocInfo:function(t){e(Mp.fetchDesignDocInfo(t))},stopRefresh:function(){Mp.stopRefresh()}}}))(kp);function qp(e){return qp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qp(e)}function Bp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vp(e,t){return Vp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vp(e,t)}function Fp(e,t){if(t&&("object"===qp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Kp(e)}function Kp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zp(e){return zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zp(e)}var Hp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vp(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=zp(r);if(o){var n=zp(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Fp(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).toggleStable=t.toggleStable.bind(Kp(t)),t.onUpdateChange=t.onUpdateChange.bind(Kp(t)),t.toggleIncludeDocs=t.toggleIncludeDocs.bind(Kp(t)),t.updateOptions=[{value:"true",label:"true"},{value:"lazy",label:"lazy"},{value:"false",label:"false"}],t}return t=a,n=[{key:"toggleIncludeDocs",value:function(){this.props.toggleIncludeDocs(this.props.includeDocs)}},{key:"onUpdateChange",value:function(e){this.props.changeUpdateField(e.target.value)}},{key:"groupLevelChange",value:function(e){this.props.updateGroupLevel(e.target.value)}},{key:"groupLevel",value:function(){return this.props.reduce?ae.createElement("label",{className:"drop-down inline",id:"qoGroupLevelGroup"},"Group Level",ae.createElement("select",{onChange:this.groupLevelChange.bind(this),id:"qoGroupLevel",value:this.props.groupLevel,name:"group_level",className:"input-small"},ae.createElement("option",{value:"0"},"None"),ae.createElement("option",{value:"1"},"1"),ae.createElement("option",{value:"2"},"2"),ae.createElement("option",{value:"3"},"3"),ae.createElement("option",{value:"4"},"4"),ae.createElement("option",{value:"5"},"5"),ae.createElement("option",{value:"6"},"6"),ae.createElement("option",{value:"7"},"7"),ae.createElement("option",{value:"8"},"8"),ae.createElement("option",{value:"9"},"9"),ae.createElement("option",{value:"exact"},"Exact"))):null}},{key:"toggleReduce",value:function(){this.props.toggleReduce(this.props.reduce)}},{key:"toggleStable",value:function(){this.props.toggleStable(this.props.stable)}},{key:"includeDocsOption",value:function(){var e=this.props,t=e.includeDocs,n=e.reduce;return ae.createElement("div",{className:"checkbox inline"},ae.createElement("input",{disabled:n,onChange:this.toggleIncludeDocs,id:"qoIncludeDocs",name:"include_docs",type:"checkbox",checked:t}),ae.createElement("label",{className:n?"disabled":"",htmlFor:"qoIncludeDocs",id:"qoIncludeDocsLabel"},"Include Docs"))}},{key:"reduceOption",value:function(){var e=this.props,t=e.showReduce,n=e.reduce;return t?ae.createElement("span",null,ae.createElement("div",{className:"checkbox inline"},ae.createElement("input",{id:"qoReduce",name:"reduce",onChange:this.toggleReduce.bind(this),type:"checkbox",checked:n}),ae.createElement("label",{htmlFor:"qoReduce"},"Reduce")),this.groupLevel()):null}},{key:"stableOption",value:function(){var e=this.props,t=e.enableStable,n=e.stable;return t||(n=!1),ae.createElement("div",{className:"checkbox inline"},ae.createElement("input",{onChange:this.toggleStable,id:"qoStable",name:"stable",type:"checkbox",checked:n,disabled:!t}),ae.createElement("label",{className:t?"":"disabled",htmlFor:"qoStable",id:"qoStableLabel"},"Stable"))}},{key:"updateOption",value:function(){var e=this.props.update,t=this.updateOptions.map((function(e){return ae.createElement("option",{key:e.value,value:e.value},e.label)}));return ae.createElement("div",{className:"dropdown inline"},ae.createElement("label",{className:"drop-down"},"Update",ae.createElement("select",{className:"input-small",id:"qoUpdate",value:e,onChange:this.onUpdateChange},t)))}},{key:"render",value:function(){return ae.createElement("div",{className:"query-group",id:"query-options-main-fields"},ae.createElement("span",{className:"add-on"},"Query Options",ae.createElement("a",{className:"help-link",href:this.props.docURL,target:"_blank",rel:"noopener noreferrer","data-bypass":"true"},ae.createElement("i",{className:"icon-question-sign"}))),ae.createElement("div",{className:"row-fluid fieldsets"},this.includeDocsOption(),this.reduceOption()),ae.createElement("div",{className:"row-fluid fieldsets"},this.stableOption(),this.updateOption()))}}],n&&Bp(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Gp(e){return Gp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gp(e)}function Wp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xp(e,t){return Xp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xp(e,t)}function Qp(e,t){if(t&&("object"===Gp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function $p(e){return $p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$p(e)}Hp.propTypes={toggleIncludeDocs:Nt().func.isRequired,includeDocs:Nt().bool.isRequired,reduce:Nt().bool.isRequired,toggleReduce:Nt().func,updateGroupLevel:Nt().func,docURL:Nt().string.isRequired,stable:Nt().bool.isRequired,toggleStable:Nt().func.isRequired,update:Nt().string.isRequired,changeUpdateField:Nt().func.isRequired,showReduce:Nt().bool.isRequired,enableStable:Nt().bool.isRequired};var Jp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xp(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$p(r);if(o){var n=$p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Qp(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"toggleByKeys",value:function(){this.props.toggleByKeys()}},{key:"toggleBetweenKeys",value:function(){this.props.toggleBetweenKeys()}},{key:"updateBetweenKeys",value:function(){this.props.updateBetweenKeys({startkey:this.startkey.value,endkey:this.endkey.value,include:this.props.betweenKeys.include})}},{key:"updateInclusiveEnd",value:function(){this.props.updateBetweenKeys({include:!this.props.betweenKeys.include,startkey:this.props.betweenKeys.startkey,endkey:this.props.betweenKeys.endkey})}},{key:"updateByKeys",value:function(e){this.props.updateByKeys(e.target.value)}},{key:"render",value:function(){var e=this,t="controls-group well js-query-keys-wrapper ",n="row-fluid js-keys-section ",r=n,o="drop-down btn ",i=o;return this.props.showByKeys||this.props.showBetweenKeys||(t+="hide"),this.props.showByKeys?o+="active":n+="hide",this.props.showBetweenKeys?i+="active":r+="hide",ae.createElement("div",{className:"query-group",id:"query-options-key-search"},ae.createElement("div",{className:"add-on"},"Keys"),ae.createElement("div",{className:"btn-group toggle-btns row-fluid"},ae.createElement("label",{style:{width:"101px"},id:"byKeys",onClick:this.toggleByKeys.bind(this),className:o},"By Key(s)"),ae.createElement("label",{style:{width:"101px"},id:"betweenKeys",onClick:this.toggleBetweenKeys.bind(this),className:i},"Between Keys")),ae.createElement("div",{className:t},ae.createElement("div",{className:n,id:"js-showKeys"},ae.createElement("div",{className:"controls controls-row"},ae.createElement("label",{htmlFor:"keys-input",className:"drop-down"},"A key, or an array of keys."),ae.createElement("textarea",{value:this.props.byKeys,onChange:this.updateByKeys.bind(this),id:"keys-input",className:"input-xxlarge",rows:"5",type:"text",placeholder:'Enter either a single key ["123"] or an array of keys ["123", "456"]. A key value is the first parameter emitted in a map function. For example emit("123", 1) the key is "123".'}),ae.createElement("div",{id:"keys-error",className:"inline-block js-keys-error"}))),ae.createElement("div",{className:r,id:"js-showStartEnd"},ae.createElement("div",{className:"controls controls-row"},ae.createElement("div",null,ae.createElement("label",{htmlFor:"startkey",className:"drop-down"},"Start key"),ae.createElement("input",{id:"startkey",ref:function(t){return e.startkey=t},type:"text",onChange:this.updateBetweenKeys.bind(this),value:this.props.betweenKeys.startkey,placeholder:'e.g., "1234"'})),ae.createElement("div",null,ae.createElement("label",{htmlFor:"endkey",className:"drop-down"},"End key"),ae.createElement("input",{id:"endkey",ref:function(t){return e.endkey=t},onChange:this.updateBetweenKeys.bind(this),value:this.props.betweenKeys.endkey,type:"text",placeholder:'e.g., "1234"'}),ae.createElement("div",{className:"controls include-end-key-row checkbox controls-row inline"},ae.createElement("input",{id:"qoIncludeEndKeyInResults",type:"checkbox",onChange:this.updateInclusiveEnd.bind(this),checked:this.props.betweenKeys.include}),ae.createElement("label",{htmlFor:"qoIncludeEndKeyInResults"},"Include End Key in results")))))))}}])&&Wp(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Yp(e){return Yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yp(e)}function Zp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ef(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tf(e,t){return tf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tf(e,t)}function nf(e,t){if(t&&("object"===Yp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function rf(e){return rf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rf(e)}var of=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tf(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=rf(r);if(o){var n=rf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return nf(this,e)});function a(){return Zp(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"updateSkip",value:function(e){e.preventDefault();var t=e.target.value;/^\d*$/.test(t)||(re.addNotification({msg:"Skip can only be a number",type:"error"}),t=this.props.skip),this.props.updateSkip(t)}},{key:"updateLimit",value:function(e){e.preventDefault(),this.props.updateLimit(e.target.value)}},{key:"toggleDescending",value:function(){this.props.toggleDescending(this.props.descending)}},{key:"render",value:function(){return ae.createElement("div",{className:"query-group",id:"query-options-additional-params"},ae.createElement("div",{className:"add-on additionalParams"},"Additional Parameters"),ae.createElement("div",{className:"row-fluid fieldsets"},ae.createElement("div",{className:"dropdown inline"},ae.createElement("label",{className:"drop-down"},"Limit",ae.createElement("select",{id:"qoLimit",onChange:this.updateLimit.bind(this),name:"limit",value:this.props.limit,className:"input-small"},ae.createElement("option",{value:"none"},"None"),ae.createElement("option",{value:5},"5"),ae.createElement("option",{value:10},"10"),ae.createElement("option",{value:20},"20"),ae.createElement("option",{value:30},"30"),ae.createElement("option",{value:50},"50"),ae.createElement("option",{value:100},"100"),ae.createElement("option",{value:500},"500"))))),ae.createElement("div",{className:"row-fluid fieldsets"},ae.createElement("div",{className:"checkbox inline"},ae.createElement("input",{id:"qoDescending",type:"checkbox",onChange:this.toggleDescending.bind(this),checked:this.props.descending}),ae.createElement("label",{htmlFor:"qoDescending"},"Descending")),ae.createElement("div",{className:"dropdown inline"},ae.createElement("label",{htmlFor:"qoSkip",className:"drop-down"},"Skip",ae.createElement("input",{value:this.props.skip,onChange:this.updateSkip.bind(this),className:"input-small",type:"number",id:"qoSkip",placeholder:"# of rows"})))))}}])&&ef(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function af(e){return af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},af(e)}function sf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cf(e,t){return cf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cf(e,t)}function uf(e,t){if(t&&("object"===af(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function lf(e){return lf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lf(e)}var pf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cf(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=lf(r);if(o){var n=lf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return uf(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"hideTray",value:function(){this.props.onCancel()}},{key:"render",value:function(){return ae.createElement("div",{className:"controls-group query-group"},ae.createElement("div",{id:"button-options",className:"controls controls-row"},ae.createElement("button",{type:"submit",className:"btn btn-secondary"},"Run Query"),ae.createElement("a",{onClick:this.hideTray.bind(this),className:"btn btn-cancelDark"},"Cancel")))}}])&&sf(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function ff(e){return ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(e)}function df(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hf(e,t){return hf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hf(e,t)}function yf(e,t){if(t&&("object"===ff(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function bf(e){return bf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bf(e)}pf.propTypes={onCancel:Nt().func.isRequired};var mf=ga.ToggleHeaderButton,gf=ga.TrayContents,_f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hf(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=bf(r);if(o){var n=bf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return yf(this,e)});function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e);var n=e.ddocsOnly,r=e.queryOptionsApplyFilterOnlyDdocs;return n&&r(),t}return t=a,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.ddocsOnly,r=t.queryOptionsApplyFilterOnlyDdocs,o=t.queryOptionsRemoveFilterOnlyDdocs;!n&&e.ddocsOnly?r():n&&!e.ddocsOnly&&o()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.ddocsOnly,n=e.queryOptionsRemoveFilterOnlyDdocs;t&&n()}},{key:"executeQuery",value:function(e){e&&e.preventDefault(),this.closeTray();var t=this.props,n=t.queryOptionsExecute,r=t.queryOptionsParams,o=t.perPage,i=t.resetPagination,a=t.selectedLayout,s=t.changeLayout;i(o);var c=a===bo;c&&r.include_docs?s(yo):c||r.include_docs||s(bo),n(r,o)}},{key:"toggleTrayVisibility",value:function(){this.props.queryOptionsToggleVisibility(!this.props.contentVisible)}},{key:"closeTray",value:function(){this.props.queryOptionsToggleVisibility(!1)}},{key:"getTray",value:function(){return ae.createElement(gf,{closeTray:this.closeTray.bind(this),contentVisible:this.props.contentVisible,className:"query-options",id:"query-options-tray",container:this},ae.createElement("form",{onSubmit:this.executeQuery.bind(this),className:"js-view-query-update custom-inputs"},ae.createElement(Hp,{includeDocs:this.props.includeDocs,toggleIncludeDocs:this.props.queryOptionsToggleIncludeDocs,showReduce:this.props.showReduce,reduce:this.props.reduce,toggleReduce:this.props.queryOptionsToggleReduce,groupLevel:this.props.groupLevel,updateGroupLevel:this.props.queryOptionsUpdateGroupLevel,docURL:re.constants.DOC_URLS.GENERAL,enableStable:this.props.enableStable,stable:this.props.stable,toggleStable:this.props.queryOptionsToggleStable,update:this.props.update,changeUpdateField:this.props.queryOptionsChangeUpdate}),ae.createElement(Jp,{key:1,showByKeys:this.props.showByKeys,showBetweenKeys:this.props.showBetweenKeys,toggleByKeys:this.props.queryOptionsToggleByKeys,toggleBetweenKeys:this.props.queryOptionsToggleBetweenKeys,betweenKeys:this.props.betweenKeys,updateBetweenKeys:this.props.queryOptionsUpdateBetweenKeys,byKeys:this.props.byKeys,updateByKeys:this.props.queryOptionsUpdateByKeys}),ae.createElement(of,{descending:this.props.descending,toggleDescending:this.props.queryOptionsToggleDescending,skip:this.props.skip,updateSkip:this.props.queryOptionsUpdateSkip,updateLimit:this.props.queryOptionsUpdateLimit,limit:this.props.limit}),ae.createElement(pf,{onCancel:this.closeTray.bind(this)})))}},{key:"showAsActive",value:function(){var e=this.props,t=e.reduce,n=e.betweenKeys,r=e.byKeys,o=e.descending,i=e.skip,a=e.limit,s=e.stable,c=e.update;return!!(n&&n.startkey||r||a&&"none"!=a||i||t||o||s||"true"!==c)}},{key:"render",value:function(){return ae.createElement("div",{id:"header-query-options"},ae.createElement("div",{id:"query-options"},ae.createElement("div",null,ae.createElement(mf,{toggleCallback:this.toggleTrayVisibility.bind(this),containerClasses:"header-control-box control-toggle-queryoptions",title:"Query Options",fonticon:"fonticon-gears",text:"Options",active:this.showAsActive()}),this.getTray())))}}])&&df(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);_f.propTypes={contentVisible:Nt().bool.isRequired,queryOptionsApplyFilterOnlyDdocs:Nt().func.isRequired,queryOptionsRemoveFilterOnlyDdocs:Nt().func.isRequired,queryOptionsExecute:Nt().func.isRequired,queryOptionsParams:Nt().object.isRequired,perPage:Nt().number.isRequired,resetPagination:Nt().func.isRequired,selectedLayout:Nt().string.isRequired,changeLayout:Nt().func.isRequired,queryOptionsToggleVisibility:Nt().func.isRequired,queryOptionsToggleStable:Nt().func.isRequired,queryOptionsChangeUpdate:Nt().func.isRequired,stable:Nt().bool.isRequired,update:Nt().string.isRequired};const vf="INDEX_RESULTS_REDUX_NEW_RESULTS",wf="INDEX_RESULTS_REDUX_IS_LOADING",Ef="INDEX_RESULTS_REDUX_CHANGE_LAYOUT",Of="INDEX_RESULTS_REDUX_TOGGLE_SHOW_ALL_COLUMNS",Sf="INDEX_RESULTS_REDUX_SET_PER_PAGE",Df="INDEX_RESULTS_REDUX_PAGINATE_NEXT",Nf="INDEX_RESULTS_REDUX_PAGINATE_PREVIOUS",Rf="INDEX_RESULTS_REDUX_NEW_SELECTED_DOCS",Pf="INDEX_RESULTS_REDUX_CHANGE_TABLE_HEADER_ATTRIBUTE",Cf="INDEX_RESULTS_REDUX_RESET_STATE",Tf="INDEX_RESULTS_REDUX_NEW_QUERY_OPTIONS",xf="INDEX_RESULTS_REDUX_PARTITION_PARAM_NOT_SUPPORTED",kf="INDEX_RESULTS_REDUX_PARTITION_PARAM_MANDATORY",jf="INDEX_RESULTS_SET_STYLE";var If=function(e,t,n){void 0===e&&(e="server");var r=ie.utils.getSafeIdForDoc(t);r||(r="");var o=encodeURIComponent(n);return re.urls("document",e,o,r,"?conflicts=true")},Af=function(e,t){if(e)return t!==go&&!!Object.keys(e).length&&!!e._id},Lf=function(e,t){return t===go?"special"!==e.type:!(!e._id&&!e.id||!(e._rev||e.value&&e.value.rev))},Mf=function(e,t){return!!e.find((function(e){return Lf(e,t)}))},Uf=function(){if(window.localStorage){var e=ie.utils.localStorageGet("fauxton:perpageredux");if(e)return parseInt(e,10)}return re.constants.MISC.DEFAULT_PAGE_SIZE},qf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vo;return t===vo?e.id||e._id:t===go?"special"===e.type?"_all_docs":e.ddoc:t===_o?e._id:e.id||e._id},Bf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vo;return t===vo?e.value?e.value.rev:e._rev:t!==go&&t===_o?e._rev:void 0},Vf=function(e){return"Reason: "+(e&&e.message||"n/a")},Ff=function(){return{type:Cf}},Kf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:Rf,selectedDocs:e}},zf=function(e){return{type:Ef,layout:e}};function Hf(){return Hf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hf.apply(this,arguments)}function Gf(){return Gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gf.apply(this,arguments)}n(93554);var Wf=function(e,t,n){var r=function(e,t){var n={},r=(t.skip||0)+t.limit;n.skip=Math.max(e.skip,t.skip||0),n.limit=e.limit,e.conflicts&&(n.conflicts=!0);var o=r-n.skip;return{params:Gf({},t,n),totalDocsRemaining:o}}(t,n),o=r.params,i=r.totalDocsRemaining;return o.limit=Math.min(o.limit,1e4),function(t){return t({type:wf}),e(o).then((function(e){var n=e.docs,r=e.docType,a=e.executionStats,s=e.warning,c=e.layout,u=function(e,t,n){var r=!1;return t&&e.length>t?e.splice(t):e.length===n&&(e.splice(n-1),r=!0),{finalDocList:e,canShowNext:r}}(n,i,o.limit),l=u.finalDocList,p=u.canShowNext;c&&t(zf(c)),t(function(e,t,n,r,o,i){return{type:vf,docs:e,params:t,canShowNext:n,docType:r,executionStats:o,warning:i}}(l,o,p,r,a,s))})).catch((function(e){e&&-1!==e.message.indexOf("`partition` parameter is not supported")?t({type:xf}):e&&-1!==e.message.indexOf("`partition` parameter is mandatory")?t({type:kf}):re.addNotification({msg:"Error running query. "+Vf(e),type:"error",clear:!0}),t(Ff())}))}},Xf=function(e){var t="Failed to delete your document!";e&&(t="Failed to delete: "+e.join(", ")),re.addNotification({msg:t,type:"error",clear:!0})},Qf=function(e,t,n,r){re.addNotification({msg:"Successfully deleted your docs",clear:!0});var o=[];r===go?e.fail&&(o=e.fail.map((function(e){return e.id}))):o=e.filter((function(e){return!!e.error})).map((function(e){return e.id}));var i=!!t.map((function(e){return e._id})).find((function(e){return/_design/.test(e)}));o.length>0&&Xf(o),n&&i&&Fs(n)};function $f(){return $f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$f.apply(this,arguments)}var Jf=function(e){return{type:Sf,perPage:e}},Yf=function(e){return{type:Tf,options:e}},Zf=function(e){return Yf({includeDocs:!e})};function ed(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function td(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const nd=function(e){var t,n=e.def,r=e.type,o=[];return(o=n.fields.reduce((function(e,t,n){return 0===n?e.push(r+": "+Object.keys(t)[0]):e.push(Object.keys(t)[0]),e}),[])).length||(o=(t=re.getExtensions("mango:additionalIndexes")[0])?t.createHeader({def:n,type:r}):[r+": "+(n.selector?JSON.stringify(n.selector):"{}")]),o.join(", ")},rd=function(e){return JSON.stringify(e,null,3)},od=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ed(Object(n),!0).forEach((function(t){td(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ed(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete t.ddoc,delete t.name,JSON.stringify(t,null," ")};var id=function(e,t){var n=t.databaseName,r=t.docType,o=t.deleteEnabled,i=void 0===o||o,a=e.map((function(e){if("MangoIndex"===r)return{header:nd(e),content:od(e),id:"special"===e.type?"_all_docs":e.ddoc,keylabel:"",url:e.id?If("app",e.id,n):null,isDeletable:!!i&&"special"!==e.type,isEditable:!1};var t=qf(e,r);return{header:t,content:JSON.stringify(e,null," "),id:t||e.key&&e.key.toString(),_rev:Bf(e,r),keylabel:"id",url:t?If("app",t,n):null,isDeletable:i,isEditable:!0}}));return{displayedFields:null,hasBulkDeletableDoc:Mf(e,r),results:a}},ad=void 0,sd=function(e){var t=[];e.forEach((function(e){Object.keys(e).forEach((function(e){t.push(e)}))}));var n=(t=_.uniq(t)).indexOf("_id");return-1!==n&&(t.splice(n,1),t.unshift("_id")),t},cd=function(e,t){var n=bo===t.selectedLayout,r=n?function(e){var t=sd(e);return{schema:t,normalizedDocs:e,selectedFieldsTableView:t,notSelectedFieldsTableView:null}}(e):function(e,t){var n,r=null,o=t.selectedFieldsTableView,i=t.showAllFieldsTableView,a=e.map((function(e){return e.doc||e}));n=sd(a),o&&0===o.length&&(o=function(e,t){var n,r,o=e.reduce((function(e,t){return e.concat(Object.keys(t))}),[]);return delete(o=_.countBy(o,(function(e){return e}))).id,delete o._rev,(o=(n=o=Object.keys(o).reduce((function(e,t){return e.push([o[t],t]),e}),[]),r=function e(t,n,r){return t[r]===n[r]?r<2?e(t,n,r+1):0:1===r?t[r]<n[r]?-1:1:t[r]<n[r]?1:-1},o=n.sort((function(e,t){return r(e,t,0)}))).slice(0,5)).reduce((function(e,t){return e.push(t[1]),e}),[])}(a));var s,c,u=_.without(n,"_attachments");return s=o,c=u,r=_.without.bind(ad,c).apply(ad,s),i&&(r=null,o=u),{schema:n,normalizedDocs:a,selectedFieldsTableView:o,notSelectedFieldsTableView:r}}(e,t),o=r.schema,i=r.normalizedDocs,a=r.selectedFieldsTableView,s=r.notSelectedFieldsTableView,c=i.map((function(e){return{content:e,id:qf(e,t.docType),_rev:Bf(e,t.docType),header:"",keylabel:"",url:e._id||e.id?If("app",e._id||e.id,t.databaseName):null,isDeletable:!!t.deleteEnabled&&Lf(e,t.docType),isEditable:Af(e,t.docType)}}));return{notSelectedFields:s,selectedFields:a,hasBulkDeletableDoc:!!t.deleteEnabled&&Mf(i,t.docType),schema:o,results:c,displayedFields:n?null:{shown:_.uniq(a).length,allFieldCount:_.without(o,"_attachments").length}}};function ud(e){return ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ud(e)}function ld(){return ld=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ld.apply(this,arguments)}function pd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pd(Object(n),!0).forEach((function(t){dd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hd,yd={noResultsWarning:"",docs:[],selectedDocs:[],isLoading:!1,tableView:{selectedFieldsTableView:[],showAllFieldsTableView:!1},isEditable:!0,selectedLayout:bo,textEmptyIndex:"No Documents Found",docType:vo,resultsStyle:(hd=ie.utils.localStorageGet("fauxton:results_style"),hd||(hd={textOverflow:wo,fontSize:Do}),hd),fetchParams:{limit:Uf()+1,skip:0},pagination:{pageStart:1,currentPage:1,perPage:Uf(),canShowNext:!1},queryOptionsPanel:{isVisible:!1,showByKeys:!1,showBetweenKeys:!1,includeDocs:!1,betweenKeys:{include:!0,startkey:"",endkey:""},byKeys:"",descending:!1,skip:"",limit:"none",reduce:!1,groupLevel:"exact",showReduce:!1,stable:!1,update:"true"}};function bd(e){ie.utils.localStorageSet("fauxton:results_style",e)}var md=function(e){return"query"!==e.language},gd=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.docs,o={databaseName:t,selectedLayout:e.selectedLayout,selectedFieldsTableView:e.tableView.selectedFieldsTableView,showAllFieldsTableView:e.tableView.showAllFieldsTableView,docType:e.docType,deleteEnabled:n},i=r.filter(md);return mo===o.selectedLayout?id(i,o):cd(i,o)},_d=function(e){return e.selectedLayout===yo},vd=function(e){return!!wd(e)&&e.pagination.pageStart+e.docs.length-1},wd=function(e){return!e.isLoading&&e.docs.length>0},Ed=function(e){if(0===e.docs.length||0===e.selectedDocs.length)return!1;for(var t=function(t){var n=e.docs[t];return Lf(n,e.docType)?e.selectedDocs.some((function(t){return qf(n,e.docType)===t._id}))?void 0:{v:!1}:"continue"},n=0;n<e.docs.length;n++){var r=t(n);if("continue"!==r&&"object"===ud(r))return r.v}return!0},Od=function(e){return e.selectedDocs.length>0},Sd=function(e){return e.selectedDocs.length},Dd=function(e){return e.pagination.currentPage>1},Nd=function(e,t){return gd(e,t).displayedFields||{}},Rd=function(e){var t=e.queryOptionsPanel,n={};if(t.includeDocs&&(n.include_docs=t.includeDocs),t.showBetweenKeys){var r=t.betweenKeys;n.inclusive_end=r.include,r.startkey&&""!=r.startkey&&(n.start_key=r.startkey),r.endkey&&""!=r.endkey&&(n.end_key=r.endkey)}else t.showByKeys&&t.byKeys.trim()&&(n.keys=t.byKeys.replace(/\r?\n/g,""));return"none"!==t.limit&&(n.limit=parseInt(t.limit,10)),t.skip&&(n.skip=parseInt(t.skip,10)),t.descending&&(n.descending=t.descending),t.reduce&&(n.reduce=!0,"exact"===t.groupLevel?n.group=!0:n.group_level=t.groupLevel),void 0!==t.update&&"true"!==t.update&&(n.update=t.update),!0===t.stable&&(n.stable=t.stable),n},Pd=function(e){return e.docs},Cd=function(e){return e.selectedDocs},Td=function(e){return e.isEditable},xd=function(e){return e.selectedLayout},kd=function(e){return e.textEmptyIndex},jd=function(e){return e.docType},Id=function(e){return e.tableView.showAllFieldsTableView},Ad=function(e){return e.pagination.canShowNext},Ld=function(e){return e.pagination.perPage},Md=function(e){return e.fetchParams},Ud=function(e){return e.resultsStyle},qd=function(e,t){return sr(e,t)},Bd=function(e,t,n){return!ur(t)||!cr(e,t,n)},Vd=(0,Rt.$j)((function(e,t){var n=e.indexResults,r=e.sidebar,o=e.databases,i=n.queryOptionsPanel;return{contentVisible:i.isVisible,includeDocs:i.includeDocs,showReduce:qd(r.designDocList,t.selectedNavItem),reduce:i.reduce,groupLevel:i.groupLevel,showByKeys:i.showByKeys,showBetweenKeys:i.showBetweenKeys,betweenKeys:i.betweenKeys,byKeys:i.byKeys,descending:i.descending,skip:i.skip,limit:i.limit,enableStable:Bd(r.designDocList,t.selectedNavItem,o.isDbPartitioned),stable:i.stable,update:i.update,fetchParams:Md(n),queryOptionsParams:Rd(n),perPage:Ld(n),selectedLayout:xd(n),ddocsOnly:t.ddocsOnly}}),(function(e,t){return{resetPagination:function(t){e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re.constants.MISC.DEFAULT_PAGE_SIZE;return Jf(e)}(t))},queryOptionsToggleReduce:function(t){e(function(e){return Yf(e?{reduce:!e}:{reduce:!e,includeDocs:!1})}(t))},queryOptionsUpdateGroupLevel:function(t){e(function(e){return Yf({groupLevel:e})}(t))},queryOptionsToggleByKeys:function(t){e(function(e){return Yf({showByKeys:!e,showBetweenKeys:!!e})}(t))},queryOptionsToggleBetweenKeys:function(t){e(function(e){return Yf({showBetweenKeys:!e,showByKeys:!!e})}(t))},queryOptionsUpdateBetweenKeys:function(t){e(function(e){return Yf({betweenKeys:e})}(t))},queryOptionsUpdateByKeys:function(t){e(function(e){return Yf({byKeys:e})}(t))},queryOptionsToggleDescending:function(t){e(function(e){return Yf({descending:!e})}(t))},queryOptionsUpdateSkip:function(t){e(function(e){return Yf({skip:e})}(t))},queryOptionsUpdateLimit:function(t){e(function(e){return Yf({limit:e})}(t))},queryOptionsToggleIncludeDocs:function(t){e(Zf(t))},queryOptionsToggleVisibility:function(t){e(function(e){return Yf({isVisible:e})}(t))},queryOptionsExecute:function(n,r){e(function(e,t,n){var r=function(e){return{limit:e+1,skip:0}}(n);return Wf(e,r,t)}(t.queryDocs,n,r))},queryOptionsApplyFilterOnlyDdocs:function(){e(Yf({betweenKeys:{include:!1,startkey:'"_design"',endkey:'"_design0"'},showBetweenKeys:!0,showByKeys:!1}))},queryOptionsRemoveFilterOnlyDdocs:function(){e(Yf({betweenKeys:{},showBetweenKeys:!1,showByKeys:!1}))},queryOptionsToggleStable:function(t){e(function(e){return Yf({stable:!e})}(t))},queryOptionsChangeUpdate:function(t){e(function(e){return Yf({update:e.toString()})}(t))},changeLayout:function(t){e(zf(t))},resetState:function(){e(Ff())}}}))(_f);const Fd=Vd;Vd.propTypes={queryDocs:Nt().func.isRequired};var Kd=function(e){var t=e.database,n=e.loadOptions;return ae.createElement("div",null,ae.createElement(ga.ThrottledReactSelectAsync,{className:"jump-to-doc",name:"jump-to-doc",placeholder:"Document ID",loadOptions:n,clearable:!1,ignoreCase:!1,ignoreAccents:!1,cache:!1,onChange:function(e){var n=e.value,r=re.urls("document","app",ie.utils.safeURLName(t.id),ie.utils.safeURLName(n));setTimeout((function(){return re.navigate(r,{trigger:!0})}))}}))};Kd.propTypes={database:Nt().object.isRequired,loadOptions:Nt().func.isRequired};const zd=Kd,Hd=function(e,t){return function(n,r){var o="?"+ie.utils.queryParams({startkey:JSON.stringify(n),endkey:JSON.stringify(n+"香"),limit:30}),i=t?re.urls("partitioned_allDocs","server",e.safeID(),encodeURIComponent(t),o):re.urls("allDocs","server",e.safeID(),o);v(i).then((function(e){var t=[];e.error||(t=e.rows.map((function(e){return{value:e.id,label:e.id}}))),r(null,{options:t})}))}};var Gd=function(e){var t=e.database,n=e.hideQueryOptions,r=e.hideJumpToDoc,o=e.queryDocs,i=e.ddocsOnly,a=e.selectedNavItem,s=e.partitionKey;return ae.createElement("div",{className:"header-right right-db-header flex-layout flex-row"},ae.createElement("div",{className:"faux-header__searchboxwrapper"},ae.createElement("div",{className:"faux-header__searchboxcontainer"},r?null:ae.createElement(zd,{key:JSON.stringify(t+s),cache:!1,loadOptions:Hd(t,s),database:t}))),n?null:ae.createElement(Fd,{ddocsOnly:i,queryDocs:o,selectedNavItem:a}))};Gd.propTypes={database:Nt().object.isRequired,hideQueryOptions:Nt().bool,isRedux:Nt().bool,queryDocs:Nt().func,selectedNavItem:Nt().object,partitionKey:Nt().string},Gd.defaultProps={hideQueryOptions:!1};const Wd=Gd;function Xd(e){return Xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xd(e)}function Qd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $d(e,t){return $d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$d(e,t)}function Jd(e,t){if(t&&("object"===Xd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Yd(e){return Yd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yd(e)}var Zd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$d(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Yd(r);if(o){var n=Yd(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Jd(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,n=[{key:"render",value:function(){var e,t,n,r=this.props,o=r.selectedLayout,i=r.docType,a=r.queryOptionsParams,s=r.fetchUrl;if(i===vo)e=ae.createElement(en.zx,{className:o===bo?"active":"",onClick:this.toggleLayout.bind(this,bo)},"Metadata");else if(i===go)return null;return(s&&-1!==s.indexOf("/_all_docs")||i===_o||!a.reduce)&&(n=ae.createElement(en.zx,{className:o===yo?"active":"",onClick:this.toggleLayout.bind(this,yo)},ae.createElement("i",{className:"fonticon-table"})," Table"),t=ae.createElement(en.zx,{className:o===mo?"active":"",onClick:this.toggleLayout.bind(this,mo)},ae.createElement("i",{className:"fonticon-json"})," JSON")),ae.createElement("div",{className:"alternative-header"},ae.createElement(en.hE,{className:"two-sides-toggle-button"},n,e,t))}},{key:"toggleLayout",value:function(e){var t=this.props,n=t.changeLayout,r=t.selectedLayout,o=t.fetchDocs,i=t.fetchParams,a=t.queryOptionsParams,s=t.queryOptionsToggleIncludeDocs;if(e!==r)return n(e),a.include_docs=e!==bo,e===yo?i.conflicts=!0:delete i.conflicts,s(!a.include_docs),void o(i,a)}}],n&&Qd(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function eh(e){return eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eh(e)}function th(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nh(e,t){return nh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nh(e,t)}function rh(e,t){if(t&&("object"===eh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oh(e)}function oh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ih(e){return ih=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ih(e)}function ah(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sh=ga.MenuDropDown,ch=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nh(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ih(r);if(o){var n=ih(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return rh(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).toggleTextOverflow=t.toggleTextOverflow.bind(oh(t)),t.setFontSize=t.setFontSize.bind(oh(t)),t}return t=a,(n=[{key:"toggleTextOverflow",value:function(){this.props.resultsStyle.textOverflow===Eo?this.props.updateStyle({textOverflow:wo}):this.props.updateStyle({textOverflow:Eo})}},{key:"setFontSize",value:function(e){this.props.updateStyle({fontSize:e})}},{key:"getDensitySection",value:function(){var e="Show full values";return this.props.resultsStyle.textOverflow===Eo&&(e="Truncate values"),{title:"Display density",links:[{title:e,onClick:this.toggleTextOverflow}]}}},{key:"getFontSizeSection",value:function(){var e=this;return{title:"Font size",links:[{title:"Small",onClick:function(){e.setFontSize(Oo)},icon:this.props.resultsStyle.fontSize===Oo?"fonticon-ok":""},{title:"Medium",onClick:function(){e.setFontSize(Do)},icon:this.props.resultsStyle.fontSize===Do?"fonticon-ok":""},{title:"Large",onClick:function(){e.setFontSize(So)},icon:this.props.resultsStyle.fontSize===So?"fonticon-ok":""}]}}},{key:"render",value:function(){var e=[];return this.props.showDensity&&e.push(this.getDensitySection()),this.props.showFontSize&&e.push(this.getFontSizeSection()),ae.createElement("div",{className:"toolbar-dropdown"},ae.createElement(sh,{id:"result-style-menu",links:e,icon:"fonticon-mixer",hideArrow:!0,toggleType:"button"}))}}])&&th(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function uh(e){return uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uh(e)}function lh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ph(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fh(e,t){return fh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fh(e,t)}function dh(e,t){if(t&&("object"===uh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function hh(e){return hh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hh(e)}ah(ch,"defaultProps",{showDensity:!0,showFontSize:!0}),ah(ch,"propTypes",{resultsStyle:Nt().object.isRequired,updateStyle:Nt().func.isRequired,showDensity:Nt().bool,showFontSize:Nt().bool});var yh=ga.BulkActionComponent,bh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fh(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=hh(r);if(o){var n=hh(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return dh(this,e)});function a(){return lh(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"shouldComponentUpdate",value:function(e){return null!=e.isListDeletable}},{key:"render",value:function(){var e=this.props,t=e.hasResults,n=e.isListDeletable,r=e.removeItem,o=e.allDocumentsSelected,i=e.hasSelectedItem,a=e.toggleSelectAll,s=e.isLoading,c=e.databaseName,u=e.partitionKey,l=null;(n&&t||s)&&(l=ae.createElement(yh,{removeItem:r,isChecked:o,hasSelectedItem:i,toggleSelect:a,disabled:s,title:"Select all docs that can be..."}));var p=null,f=this.props.selectedLayout!==mo,d=null;(t||s)&&(p=ae.createElement(Zd,this.props),d=ae.createElement(ch,{updateStyle:this.props.updateResultsStyle,resultsStyle:this.props.resultsStyle,showDensity:f}));var h=null;return c&&(h=ae.createElement("div",{className:"document-result-screen__toolbar-flex-container"},ae.createElement("a",{href:rr(c,u),className:"btn save document-result-screen__toolbar-create-btn btn-primary"},"Create Document"))),ae.createElement("div",{className:"document-result-screen__toolbar"},l,p,d,h)}}])&&ph(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function mh(e){var t=e.text,n=e.isWarning,r=ae.createElement("div",{className:"no-results-screen-warning"},ae.createElement("i",{className:"fonticon-attention-circled"}),t);return ae.createElement("div",{className:"no-results-screen"},n?r:null,ae.createElement("div",{className:"watermark-logo"}),n?null:ae.createElement("h3",null,t))}function gh(e){return gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gh(e)}function _h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vh(e,t){return vh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vh(e,t)}function wh(e,t){if(t&&("object"===gh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Eh(e){return Eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Eh(e)}bh.propTypes={removeItem:Nt().func.isRequired,allDocumentsSelected:Nt().bool.isRequired,hasSelectedItem:Nt().bool.isRequired,toggleSelectAll:Nt().func.isRequired,isLoading:Nt().bool.isRequired,hasResults:Nt().bool.isRequired,isListDeletable:Nt().bool,partitionKey:Nt().string,docType:Nt().string,resultsStyle:Nt().object.isRequired,updateResultsStyle:Nt().func.isRequired},mh.propTypes={text:Nt().string.isRequired};var Oh=ga.Copy,Sh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vh(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Eh(r);if(o){var n=Eh(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return wh(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={checked:t.props.isSelected},t}return t=a,n=[{key:"onChange",value:function(){this.props.docChecked(this.props.el.id,this.props.el._rev)}},{key:"getRowContents",value:function(e,t){var n=e.content,r=this.props.data.selectedFields.map(function(e,r){var o="tableview-data-cell-"+t+e+r+n[e],i=-1!==["object","boolean"].indexOf(gh(n[e]))?JSON.stringify(n[e],null,"  "):n[e],a=Zt()({showall:this.props.textOverflow===Eo,"small-font":this.props.fontSize===Oo,"large-font":this.props.fontSize===So});return ae.createElement("td",{key:o,title:i,className:a,onClick:this.onClick.bind(this)},i)}.bind(this));return r}},{key:"maybeGetCheckboxCell",value:function(e,t){return ae.createElement("td",{className:"tableview-checkbox-cell",key:"tableview-checkbox-cell-"+t},e.isDeletable?ae.createElement("input",{id:"checkbox-"+this.props.docIdentifier,checked:this.props.isSelected,type:"checkbox",onChange:this.onChange.bind(this)}):null)}},{key:"getAdditionalInfoRow",value:function(e){var t=Object.keys(e._attachments||{}).length,n=null,r=null,o=Object.keys(e._conflicts||{}).length,i=null,a=null;return t&&(r=1===t?t+" Attachment":t+" Attachments",n=ae.createElement("div",{style:{display:"inline",marginLeft:"5px"},title:r},ae.createElement("i",{className:"icon fonticon-paperclip"}),t)),o&&(a=1===o?o+" Conflict":o+" Conflicts",i=ae.createElement("div",{className:"tableview-conflict","data-conflicts-indicator":!0,style:{display:"inline"},title:a},ae.createElement("i",{style:{fontSize:"17px"},className:"icon icon-code-fork"}),o)),ae.createElement("td",{className:"tableview-el-last",onClick:this.onClick.bind(this)},i,n)}},{key:"getCopyButton",value:function(e){var t=JSON.stringify(e,null,"  ");return ae.createElement("td",{title:t,className:"tableview-el-copy"},ae.createElement(Oh,{title:t,text:t,uniqueKey:(0,Pl.Z)(),onClipboardClick:this.showCopiedMessage}))}},{key:"showCopiedMessage",value:function(){re.addNotification({msg:"The document content has been copied to the clipboard.",type:"success",clear:!0})}},{key:"onClick",value:function(e){this.props.onClick(this.props.el._id,this.props.el,e)}},{key:"render",value:function(){var e=this.props.index,t=this.props.el.content,n=this.props.el;return ae.createElement("tr",{key:"tableview-content-row-"+e},this.maybeGetCheckboxCell(n,e),this.getCopyButton(t),this.getRowContents(n,e),this.getAdditionalInfoRow(t))}}],n&&_h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Dh(e){var t=e.selectedField,n=e.notSelectedFields,r=e.index,o=e.changeField,i=e.selectedFields,a=n.map((function(e){return{value:e,label:e}}));return ae.createElement("div",{className:"table-container-autocomplete"},ae.createElement("div",{className:"table-select-wrapper"},ae.createElement(ca.ZP,{value:t,options:a,clearable:!1,onChange:function(e){o({newSelectedRow:e.value,index:r},i)}})))}function Nh(e){return Nh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nh(e)}function Rh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ph(e,t){return Ph=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ph(e,t)}function Ch(e,t){if(t&&("object"===Nh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Th(e){return Th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Th(e)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Sh,"defaultProps",{textOverflow:wo}),Sh.propTypes={docIdentifier:Nt().string.isRequired,docChecked:Nt().func.isRequired,isSelected:Nt().bool.isRequired,index:Nt().number.isRequired,data:Nt().object.isRequired,onClick:Nt().func.isRequired,textOverflow:Nt().string};var xh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ph(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Th(r);if(o){var n=Th(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ch(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"getContentRows",value:function(){var e=this.props.data.results,t=this.props.resultsStyle,n=t.textOverflow,r=t.fontSize;return e.map(function(e,t){return ae.createElement(Sh,{onClick:this.props.onClick,key:"tableview-row-component-"+t,index:t,el:e,docIdentifier:e.id||"tableview-row-component-"+t,docChecked:this.props.docChecked,isSelected:this.props.isSelected(e.id),data:this.props.data,textOverflow:n,fontSize:r})}.bind(this))}},{key:"getOptionFieldRows",value:function(e){return this.props.data.notSelectedFields?e.map(function(e,t){return ae.createElement("th",{key:"header-el-"+t},this.getDropdown(e,this.props.data.schema,t,this.props.changeField,this.props.data.selectedFields))}.bind(this)):e.map((function(e,t){return ae.createElement("th",{key:"header-el-"+t},e)}))}},{key:"getDropdown",value:function(e,t,n,r,o){return ae.createElement(Dh,{selectedField:e,notSelectedFields:t,index:n,changeField:r,selectedFields:o})}},{key:"getHeader",value:function(){var e=this.props.data.selectedFields,t=this.getOptionFieldRows(e);return ae.createElement("tr",{key:"tableview-content-row-header"},ae.createElement("th",{className:"tableview-header-el-checkbox"}),ae.createElement("th",{className:"tableview-el-copy"}),t,ae.createElement("th",{className:"tableview-el-last"}))}},{key:"render",value:function(){return ae.createElement("div",{className:"table-view-docs"},ae.createElement("table",{className:"table table-striped"},ae.createElement("thead",null,this.getHeader()),ae.createElement("tbody",null,this.getContentRows())))}}])&&Rh(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function kh(e){return kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kh(e)}function jh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ih(e,t){return Ih=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ih(e,t)}function Ah(e,t){if(t&&("object"===kh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Lh(e){return Lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lh(e)}var Mh=ga.LoadLines,Uh=ga.Document,qh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ih(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Lh(r);if(o){var n=Lh(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ah(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,n=[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"onClick",value:function(e,t){t.url&&re.navigate(t.url)}},{key:"getUrlFragment",value:function(e){return this.props.isEditable?ae.createElement("a",{href:e},ae.createElement("i",{className:"fonticon-pencil"})):null}},{key:"getDocumentList",value:function(){var e=this,t=function(){},n=this.props.results.results;return _.map(n,(function(n,r){return ae.createElement(Uh,{key:n.id+r,doc:n,onClick:e.props.isEditable?e.onClick:t,keylabel:n.keylabel,docContent:n.content,docType:e.props.docType,checked:e.props.isSelected(n.id),header:n.header,docChecked:e.props.docChecked,isDeletable:n.isDeletable,docIdentifier:n.id,resultsStyle:e.props.resultsStyle},n.url?e.getUrlFragment("#".concat(n.url)):n.url)}))}},{key:"getDocumentStyleView",value:function(){var e="view";return this.props.isListDeletable&&(e="".concat(e," show-select")),ae.createElement("div",{className:e},ae.createElement("div",{id:"doc-list"},this.getDocumentList()))}},{key:"getTableStyleView",value:function(){return ae.createElement("div",null,ae.createElement(xh,{onClick:this.onClick,docChecked:this.props.docChecked,isSelected:this.props.isSelected,isListDeletable:this.props.isListDeletable,data:this.props.results,isLoading:this.props.isLoading,removeItem:this.props.removeItem,isChecked:this.props.allDocumentsSelected,hasSelectedItem:this.props.hasSelectedItem,toggleSelect:this.toggleSelectAll,changeField:this.props.changeTableHeaderAttribute,resultsStyle:this.props.resultsStyle,title:"Select all docs that can be..."}))}},{key:"getMainView",value:function(){return this.props.isLoading?ae.createElement("div",{className:"loading-lines-wrapper"},ae.createElement(Mh,null)):!this.props.noResultsWarning&&this.props.hasResults?this.props.selectedLayout===mo?this.getDocumentStyleView():this.getTableStyleView():void 0}},{key:"getNoResultScreen",value:function(){if(!this.props.isLoading){if(this.props.noResultsWarning)return ae.createElement(mh,{text:this.props.noResultsWarning,isWarning:!0});if(!this.props.hasResults)return ae.createElement(mh,{text:this.props.textEmptyIndex})}}},{key:"render",value:function(){return ae.createElement("div",{className:"document-result-screen"},this.getNoResultScreen(),ae.createElement(bh,this.props),this.getMainView())}}],n&&jh(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Bh(e){return Bh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bh(e)}function Vh(){return Vh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vh.apply(this,arguments)}function Fh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fh(Object(n),!0).forEach((function(t){zh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gh(e,t){return Gh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gh(e,t)}function Wh(e,t){if(t&&("object"===Bh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Xh(e){return Xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xh(e)}var Qh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gh(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Xh(r);if(o){var n=Xh(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Wh(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchDocs,n=e.fetchParams,r=e.queryOptionsParams;e.fetchAtStartup&&t(n,r)}},{key:"UNSAFE_componentWillUpdate",value:function(e){var t=e.fetchDocs,n=e.fetchParams,r=e.queryOptionsParams,o=e.ddocsOnly,i=e.fetchUrl,a=e.resetState,s=e.partitionKey;this.props.ddocsOnly===o&&this.props.fetchUrl===i&&this.props.partitionKey===s||(a(),t(Kh(Kh({},n),{},{skip:0}),Kh(Kh({},r),{},{reduce:void 0,group:void 0,group_level:void 0})))}},{key:"componentWillUnmount",value:function(){(0,this.props.resetState)()}},{key:"deleteSelectedDocs",value:function(){var e=this.props,t=e.bulkDeleteDocs,n=e.fetchParams;t(e.selectedDocs,n,e.queryOptionsParams)}},{key:"isSelected",value:function(e){return this.props.selectedDocs.findIndex((function(t){return e===t._id}))>-1}},{key:"docChecked",value:function(e,t){if(e){var n=this.props;(0,n.selectDoc)({_id:e,_rev:t},n.selectedDocs)}}},{key:"toggleSelectAll",value:function(){var e=this.props,t=e.docs,n=e.selectedDocs,r=e.allDocumentsSelected;(0,e.bulkCheckOrUncheck)(t,n,r)}},{key:"render",value:function(){var e=this.props.results;return ae.createElement(qh,Vh({removeItem:this.deleteSelectedDocs.bind(this),isSelected:this.isSelected.bind(this),docChecked:this.docChecked.bind(this),isListDeletable:e.hasBulkDeletableDoc,toggleSelectAll:this.toggleSelectAll.bind(this)},this.props))}}],n&&Hh(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);Qh.propTypes={fetchAtStartup:Nt().bool.isRequired,fetchDocs:Nt().func.isRequired};var $h=(0,Rt.$j)((function(e,t){var n,r=e.indexResults;return{noResultsWarning:r.noResultsWarning,docs:Pd(r),selectedDocs:Cd(r),isLoading:(n=r,n.isLoading),hasResults:wd(r),results:gd(r,t.databaseName,t.deleteEnabled),isEditable:Td(r),selectedLayout:xd(r),allDocumentsSelected:Ed(r),hasSelectedItem:Od(r),numDocsSelected:Sd(r),textEmptyIndex:kd(r),docType:jd(r),fetchParams:Md(r),queryOptionsParams:Rd(r),partitionKey:t.partitionKey,resultsStyle:Ud(r)}}),(function(e,t){return{fetchDocs:function(n,r){e(Wf(t.queryDocs,n,r))},selectDoc:function(t,n){e(function(e,t){var n=t.findIndex((function(t){return t._id===e._id}));return n>-1?t.splice(n,1):(e._deleted=!0,t.push(e)),Kf(t)}(t,n))},bulkDeleteDocs:function(n,r,o){e(function(e,t,n,r,o,i,a){return!!function(e){var t=e.length,n=1===t?"Are you sure you want to delete this doc?":"Are you sure you want to delete these "+t+" docs?";return 0===t?(window.alert("Please select the document rows you want to delete."),!1):!!window.confirm(n)}(n)&&function(s){var c,u;if(a===go)u={docids:n.map((function(e){return e._id}))},c=function(e,t){var n=re.urls("mango","index-server-bulk-delete",encodeURIComponent(e));return E(n,t)}(e,u);else{if(a!==vo&&a!==_o)throw new Error("Invalid document type: "+a);c=function(e,t){var n=re.urls("bulk_docs","server",e);return E(n,t)}(e,u={docs:n})}return c.then((function(e){e.error?Xf():(Qf(e,n,r,a),s(Kf()),s(Wf(t,o,i)))}))}}(t.databaseName,t.queryDocs,n,t.designDocs,r,o,t.docType))},changeLayout:function(t){e(zf(t))},bulkCheckOrUncheck:function(n,r,o){e(function(e,t,n,r){return e.forEach((function(e){if(Lf(e,r)){var o=t.findIndex((function(t){return qf(e,r)===t._id}));n?t.splice(o,1):-1===o&&t.push({_id:qf(e,r),_rev:Bf(e,r),_deleted:!0})}})),Kf(t)}(n,r,o,t.docType))},changeTableHeaderAttribute:function(t,n){e(function(e,t){return t[e.index]=e.newSelectedRow,{type:Pf,selectedFieldsTableView:t}}(t,n))},resetState:function(){e(Ff())},queryOptionsToggleIncludeDocs:function(t){e(Zf(t))},updateResultsStyle:function(t){e(function(e){return{type:jf,resultsStyle:e}}(t))}}}))(Qh);const Jh=$h;function Yh(e){var t=e.nextClicked,n=e.previousClicked,r="",o="";return e.canShowPrevious||(r="disabled"),e.canShowNext||(o="disabled"),ae.createElement("div",{className:"documents-pagination"},ae.createElement("ul",{className:"pagination"},ae.createElement("li",{className:r},ae.createElement("a",{id:"previous",onClick:n,className:"icon fonticon-left-open",href:"#","data-bypass":"true"})),ae.createElement("li",{className:o},ae.createElement("a",{id:"next",onClick:t,className:"icon fonticon-right-open",href:"#","data-bypass":"true"}))))}function Zh(e){return Zh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zh(e)}function ey(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ty(e,t){return ty=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ty(e,t)}function ny(e,t){if(t&&("object"===Zh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ry(e){return ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ry(e)}$h.propTypes={queryDocs:Nt().func.isRequired,docType:Nt().string.isRequired},Yh.propTypes={nextClicked:Nt().func.isRequired,previousClicked:Nt().func.isRequired,canShowPrevious:Nt().bool.isRequired,canShowNext:Nt().bool.isRequired};var oy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ty(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ry(r);if(o){var n=ry(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ny(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"getAmountShownFields",value:function(){var e=this.props.displayedFields;return e.shown===e.allFieldCount?ae.createElement("div",{className:"pull-left shown-fields"},"Showing ",e.shown," columns."):ae.createElement("div",{className:"pull-left shown-fields"},"Showing ",e.shown," of ",e.allFieldCount," columns.")}},{key:"render",value:function(){var e=this.props,t=e.prioritizedEnabled,n=e.toggleShowAllColumns;return ae.createElement("div",{className:"footer-table-control"},this.getAmountShownFields(),ae.createElement("div",{className:"footer-doc-control-prioritized-wrapper pull-left"},ae.createElement("label",{htmlFor:"footer-doc-control-prioritized"},ae.createElement("input",{id:"footer-doc-control-prioritized",checked:t,onChange:n,type:"checkbox"}),"Show all columns.")))}}])&&ey(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function iy(e){return iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iy(e)}function ay(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sy(e,t){return sy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sy(e,t)}function cy(e,t){if(t&&("object"===iy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function uy(e){return uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},uy(e)}oy.propTypes={prioritizedEnabled:Nt().bool.isRequired,displayedFields:Nt().object.isRequired,toggleShowAllColumns:Nt().func.isRequired};var ly=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sy(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=uy(r);if(o){var n=uy(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return cy(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"getPageNumberText",value:function(){var e=this.props,t=e.docs,n=e.pageStart,r=e.pageEnd;return 0===t.length?ae.createElement("span",null,"Showing 0 documents."):ae.createElement("span",null,"Showing document ",n," - ",r,".")}},{key:"perPageChange",value:function(e){var t=this.props;(0,t.updatePerPageResults)(e,t.fetchParams,t.queryOptionsParams)}},{key:"nextClicked",value:function(e){e.preventDefault();var t=this.props,n=t.canShowNext,r=t.fetchParams,o=t.queryOptionsParams,i=t.paginateNext,a=t.perPage;n&&i(r,o,a)}},{key:"previousClicked",value:function(e){e.preventDefault();var t=this.props,n=t.canShowPrevious,r=t.fetchParams,o=t.queryOptionsParams,i=t.paginatePrevious,a=t.perPage;n&&i(r,o,a)}},{key:"render",value:function(){var e=this.props,t=e.showPrioritizedEnabled,n=e.hasResults,r=e.prioritizedEnabled,o=e.displayedFields,i=e.perPage,a=e.canShowNext,s=e.canShowPrevious,c=e.toggleShowAllColumns;return ae.createElement("footer",{className:"index-pagination pagination-footer"},ae.createElement(Yh,{nextClicked:this.nextClicked.bind(this),previousClicked:this.previousClicked.bind(this),canShowNext:a,canShowPrevious:s}),ae.createElement("div",{className:"footer-controls"},ae.createElement("div",{className:"page-controls"},t&&n?ae.createElement(oy,{prioritizedEnabled:r,displayedFields:o,toggleShowAllColumns:c}):null),ae.createElement(Na,{perPageChange:this.perPageChange.bind(this),perPage:i}),ae.createElement("div",{className:"current-docs"},this.getPageNumberText())))}}])&&ay(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component),py=(0,Rt.$j)((function(e,t){var n,r=e.indexResults;return{docs:Pd(r),selectedDocs:Cd(r),hasResults:wd(r),pageStart:(n=r,n.pagination.pageStart),pageEnd:vd(r),perPage:Ld(r),prioritizedEnabled:Id(r),showPrioritizedEnabled:_d(r),displayedFields:Nd(r,t.databaseName),canShowNext:Ad(r),canShowPrevious:Dd(r),fetchParams:Md(r),queryOptionsParams:Rd(r)}}),(function(e,t){return{toggleShowAllColumns:function(){e({type:Of})},updatePerPageResults:function(n,r,o){e(function(e,t,n,r){return t=function(e,t,n){return $f({},e,{limit:n+1,skip:t.skip||0})}(t,n,r),function(o){o(Jf(r)),o(Wf(e,t,n))}}(t.queryDocs,r,o,n))},paginateNext:function(n,r,o){e(function(e,t,n,r){return t=function(e,t){return $f({},e,{skip:e.skip+t})}(t,r),function(r){r({type:Df}),r(Wf(e,t,n))}}(t.queryDocs,n,r,o))},paginatePrevious:function(n,r,o){e(function(e,t,n,r){return t=function(e,t){return $f({},e,{skip:Math.max(e.skip-t,0)})}(t,r),function(r){r({type:Nf}),r(Wf(e,t,n))}}(t.queryDocs,n,r,o))}}}))(ly);const fy=py;py.propTypes={queryDocs:Nt().func.isRequired};var dy=(0,Rt.$j)((function(e,t){var n=e.indexResults,r=t.docUrl,o=t.endpoint,i=t.endpointAddQueryOptions;if(r||(r=re.constants.DOC_URLS.GENERAL),o&&i){var a=ie.utils.queryString(Rd(n));a&&(o=-1==o.indexOf("?")?"".concat(o,"?").concat(a):"".concat(o,"&").concat(a))}return{docUrl:r,endpoint:o}}))(zt);const hy=dy;function yy(e){return yy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yy(e)}function by(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function my(e,t){return my=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},my(e,t)}function gy(e,t){if(t&&("object"===yy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _y(e)}function _y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vy(e){return vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vy(e)}dy.propTypes={databaseName:Nt().string,docUrl:Nt().string,endpoint:Nt().string,endpointAddQueryOptions:Nt().bool};var wy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&my(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=vy(r);if(o){var n=vy(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return gy(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={editorValue:"",editMode:!1},t.onModeSwitchClick=t.onModeSwitchClick.bind(_y(t)),t.onBlur=t.onBlur.bind(_y(t)),t.startEdit=t.startEdit.bind(_y(t)),t.onKeyPress=t.onKeyPress.bind(_y(t)),t.onChange=t.onChange.bind(_y(t)),t.props.checkDbPartitioned(t.props.databaseName),t}return t=a,(n=[{key:"onModeSwitchClick",value:function(e){e&&e.preventDefault&&e.preventDefault(),!this.props.globalMode&&this.props.onGlobalModeSelected?this.props.onGlobalModeSelected():this.props.partitionKey?this.props.onPartitionKeySelected(this.state.editorValue):this.startEdit()}},{key:"startEdit",value:function(){var e=this;this.setState({editMode:!0,editorValue:this.props.partitionKey}),setTimeout((function(){return e.textInput.focus()}))}},{key:"updatePartitionKey",value:function(){this.setState({editMode:!1});var e=this.state.editorValue.trim();e?this.props.onPartitionKeySelected(e):this.props.onGlobalModeSelected()}},{key:"onBlur",value:function(e){e&&e.preventDefault&&e.preventDefault(),this.updatePartitionKey()}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.updatePartitionKey()}},{key:"onChange",value:function(e){this.setState({editorValue:e.target.value})}},{key:"globalHeader",value:function(){return ae.createElement("button",{onClick:this.onModeSwitchClick,title:"Partition Key Selector",className:"button partition-selector__switch"},ae.createElement("i",{className:"fonticon-filter"}),"No partition selected")}},{key:"partitionHeader",value:function(){var e=this,t=ae.createElement("input",{type:"text",style:{padding:2,fontSize:16,margin:0,display:this.state.editMode?"block":"none"},onKeyPress:this.onKeyPress,onChange:this.onChange,onBlur:this.onBlur,value:this.state.editorValue,ref:function(t){e.textInput=t}}),n="Click to select a partition",r="partition-selector__key";return""!==this.props.partitionKey&&(n=this.props.partitionKey,r+=" partition-selector__key--active"),ae.createElement(ae.Fragment,null,ae.createElement("button",{onClick:this.onModeSwitchClick,title:"Partition Key Selector",className:"button partition-selector__switch button partition-selector__switch--active"},ae.createElement("i",{className:"fonticon-filter"})),ae.createElement("div",{className:r},ae.createElement("span",{onClick:this.startEdit,style:{display:this.state.editMode?"none":"block"}},n),t))}},{key:"render",value:function(){if(!this.props.selectorVisible)return null;var e=this.props.globalMode&&!this.state.editMode;return ae.createElement("div",{className:"partition-selector"},e?this.globalHeader():this.partitionHeader())}}])&&by(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);wy.defaultProps={partitionKey:"",globalMode:!0},wy.propTypes={selectorVisible:Nt().bool.isRequired,partitionKey:Nt().string.isRequired,checkDbPartitioned:Nt().func.isRequired,onPartitionKeySelected:Nt().func.isRequired,onGlobalModeSelected:Nt().func,globalMode:Nt().bool};const Ey="PARTITON_KEY_SHOW_SELECTOR",Oy="PARTITON_KEY_HIDE_SELECTOR";var Sy=(0,Rt.$j)((function(e,t){return{selectorVisible:e.partitionKey.selectorVisible,databaseName:t.databaseName,partitionKey:t.partitionKey,onPartitionKeySelected:t.onPartitionKeySelected,globalMode:t.globalMode}}),(function(e){return{checkDbPartitioned:function(t){e(function(e){return function(t){t({type:Oy}),gt(e).then((function(e){e.props&&!0===e.props.partitioned&&t({type:Ey})}))}}(t))}}}))(wy);const Dy=Sy;Sy.propTypes={databaseName:Nt().string.isRequired,partitionKey:Nt().string.isRequired,onPartitionKeySelected:Nt().func.isRequired,onGlobalModeSelected:Nt().func.isRequired,globalMode:Nt().bool};var Ny=function(e){var t=e.hideQueryOptions,n=e.hideJumpToDoc,r=e.database,o=e.dbName,i=e.dropDownLinks,a=e.docURL,s=e.endpoint,c=e.endpointAddQueryOptions,u=e.fetchUrl,l=e.ddocsOnly,p=e.queryDocs,f=e.selectedNavItem,d=e.showPartitionKeySelector,h=e.partitionKey,y=e.onPartitionKeySelected,b=e.onGlobalModeSelected,m=e.globalMode,g=null;return d&&(g=ae.createElement(Dy,{databaseName:o,partitionKey:h,onPartitionKeySelected:y,onGlobalModeSelected:b,globalMode:m})),ae.createElement("header",{className:"two-panel-header"},ae.createElement("div",{className:"flex-layout flex-row"},ae.createElement("div",{id:"header-docs-left"},ae.createElement(Rl,{dbName:o,partitionKey:h,dropDownLinks:i})),ae.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},ae.createElement("div",{style:{flex:1,padding:"18px 6px 12px 12px"}},g),ae.createElement("div",{id:"right-header",className:"flex-fill"},ae.createElement(Wd,{hideQueryOptions:t,hideJumpToDoc:n,database:r,fetchUrl:u,ddocsOnly:l,queryDocs:p,partitionKey:h,selectedNavItem:f})),ae.createElement(hy,{docURL:a,endpoint:s,endpointAddQueryOptions:c}),ae.createElement("div",{id:"notification-center-btn",className:"flex-fill"},ae.createElement(Ut,null)))))};Ny.propTypes={dbName:Nt().string.isRequired,dropDownLinks:Nt().array.isRequired,docURL:Nt().string,endpoint:Nt().string,showIncludeAllDocs:Nt().bool,hideQueryOptions:Nt().bool,hideJumpToDoc:Nt().bool,database:Nt().object.isRequired,queryDocs:Nt().func,selectedNavItem:Nt().object,showPartitionKeySelector:Nt().bool.isRequired,partitionKey:Nt().string,onPartitionKeySelected:Nt().func,onGlobalModeSelected:Nt().func,globalMode:Nt().bool},Ny.defaultProps={hideHeaderBar:!1,showPartitionKeySelector:!1};var Ry=function(e){var t=e.hideFooter,n=e.lowerContent,r=e.upperContent,o=e.fetchUrl,i=e.databaseName,a=e.queryDocs,s=e.selectedNavItem,c=e.partitionKey;return ae.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},ae.createElement("aside",{id:"sidebar-content",className:"scrollable"},ae.createElement(Sl,{selectedNavItem:s,selectedPartitionKey:c})),ae.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},ae.createElement("div",{id:"dashboard-upper-content"},r),ae.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},n),ae.createElement("div",{id:"footer"},t?null:ae.createElement(fy,{databaseName:i,fetchUrl:o,queryDocs:a}))))};Ry.defaultProps={hideFooter:!1},Ry.propTypes={hideFooter:Nt().bool,lowerContent:Nt().object,upperContent:Nt().object,selectedNavItem:Nt().object};var Py=function(e){var t=e.database,n=e.designDocs,r=e.docURL,o=e.endpoint,i=e.dbName,a=e.dropDownLinks,s=e.fetchUrl,c=e.ddocsOnly,u=e.deleteEnabled,l=void 0===u||u,p=e.selectedNavItem,f=e.partitionKey,d=e.onPartitionKeySelected,h=e.onGlobalModeSelected,y=e.globalMode,b=(p.navItem,function(e){return function(e,t,n){Hf(n,{reduce:void 0,group:void 0,group_level:void 0});var r=ie.utils.queryString(n),o="".concat(e).concat(-1!==e.indexOf("?")?"&":"?").concat(r);return v(o).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.rows,docType:vo}}))}(s,0,e)});ur(p)&&(b=function(e){return function(e,t){void 0===t.reduce&&(t.reduce=!1),t.include_docs&&t.reduce&&(t.reduce=!1,t.group=void 0,t.group_level=void 0),-1!==e.indexOf("/_partition/")&&(t.stable=void 0,t.conflicts=void 0);var n=ie.utils.queryString(t),r="".concat(e).concat(-1!==e.indexOf("?")?"&":"?").concat(n);return v(r).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.rows,docType:vo,layout:void 0}}))}(s,e)});var m=ae.createElement(Jh,{fetchUrl:s,designDocs:n,ddocsOnly:c,databaseName:i,fetchAtStartup:!0,queryDocs:b,docType:vo,deleteEnabled:l,partitionKey:f});return ae.createElement("div",{id:"dashboard",className:"with-sidebar"},ae.createElement(Ny,{docURL:r,endpoint:o,endpointAddQueryOptions:!0,dbName:i,dropDownLinks:a,database:t,fetchUrl:s,ddocsOnly:c,queryDocs:b,selectedNavItem:p,showPartitionKeySelector:!c,partitionKey:f,onPartitionKeySelected:d,onGlobalModeSelected:h,globalMode:y}),ae.createElement(Ry,{lowerContent:m,fetchUrl:s,databaseName:i,queryDocs:b,selectedNavItem:p,partitionKey:f}))},Cy=function(e){var t=e.docURL,n=e.database,r=e.endpoint,o=e.dbName,i=e.dropDownLinks,a=e.selectedNavItem,s=e.partitionKey;return ae.createElement("div",{id:"dashboard",className:"with-sidebar"},ae.createElement(Ny,{docURL:t,endpoint:r,dbName:o,dropDownLinks:i,database:n,hideQueryOptions:!0}),ae.createElement(Ry,{upperContent:ae.createElement(Op,null),lowerContent:ae.createElement(cp,{databaseName:o}),hideFooter:!0,selectedNavItem:a,partitionKey:s}))},Ty=function(e){var t=e.showEditView,n=e.database,r=e.docURL,o=e.endpoint,i=e.dbName,a=e.dropDownLinks,s=e.selectedNavItem,c=e.designDocInfo,u=e.partitionKey,l=t?ae.createElement(iu.IndexEditorContainer,{partitionKey:u}):ae.createElement(Up,{designDocInfo:c,designDocName:s.designDocName});return ae.createElement("div",{id:"dashboard",className:"with-sidebar"},ae.createElement(Ny,{endpoint:o,docURL:r,dbName:i,dropDownLinks:a,database:n,partitionKey:u,queryDocs:function(){},hideQueryOptions:!0,hideJumpToDoc:!0}),ae.createElement(Ry,{lowerContent:l,hideFooter:!0,selectedNavItem:s,partitionKey:u}))};Ty.defaultProps={showEditView:!0},Ty.propTypes={showEditView:Nt().bool,docURL:Nt().string.isRequired,endpoint:Nt().string,dbName:Nt().string.isRequired,dropDownLinks:Nt().array.isRequired,designDocInfo:Nt().object};var xy=Gs.extend({routes:{"database/:database/_partition/:partitionkey/_all_docs":{route:"partitionedAllDocs",roles:["fx_loggedIn"]},"database/:database/_all_docs(:extra)":{route:"globalAllDocs",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_info":{route:"designDocMetadata",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_info":{route:"designDocMetadataNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionKey/_changes":{route:"changes",roles:["fx_loggedIn"]},"database/:database/_changes":{route:"changes",roles:["fx_loggedIn"]}},initialize:function(e,t){this.initViews(t[0])},initViews:function(e){this.databaseName=e,this.database=new Rs.Model({id:this.databaseName}),this.createDesignDocsCollection(),this.addSidebar()},designDocMetadataNoPartition:function(e,t){return this.designDocMetadata(e,"",t)},designDocMetadata:function(e,t,n){var r=new lt.DdocInfo({_id:"_design/"+n},{database:this.database}),o=new Qs("designDoc",{designDocName:n,designDocSection:"metadata"});St.fetchSelectedDatabaseInfo(e);var i=this.getCrumbs(this.database);return ae.createElement(Ty,{showEditView:!1,docURL:r.documentation(),endpoint:r.url("apiurl"),dbName:this.database.id,dropDownLinks:i,database:this.database,selectedNavItem:o,designDocInfo:r,partitionKey:t})},globalAllDocs:function(e,t){return this.allDocs(e,"",t)},partitionedAllDocs:function(e,t){return this.allDocs(e,t)},allDocs:function(e,t,n){var r=this.createParams(n).docParams,o=t?re.urls("partitioned_allDocs","server",encodeURIComponent(e),encodeURIComponent(t)):re.urls("allDocsSanitized","server",e);this.database.buildAllDocs(r);var i=!!(r.startkey&&r.startkey.indexOf("_design")>-1),a="all-docs";i&&(a="design-docs");var s=new Qs(a);$n.showDeleteDatabaseModal({showDeleteModal:!1,dbId:""});var c=t?re.urls("partitioned_allDocs","apiurl",encodeURIComponent(e),encodeURIComponent(t)):this.database.allDocs.urlRef("apiurl",{}),u=re.constants.DOC_URLS.GENERAL,l=this.getCrumbs(this.database);return St.fetchSelectedDatabaseInfo(e),ae.createElement(Py,{docURL:u,endpoint:c,dbName:this.database.id,dropDownLinks:l,database:this.database,designDocs:this.designDocs,fetchUrl:o,ddocsOnly:i,selectedNavItem:s,partitionKey:t,onPartitionKeySelected:function(t){var n=re.urls("partitioned_allDocs","app",encodeURIComponent(e),encodeURIComponent(t));re.navigate("#/"+n)},onGlobalModeSelected:function(){var t=re.urls("allDocs","app",encodeURIComponent(e));re.navigate("#/"+t)},globalMode:""===t})},changes:function(e,t){var n=new Qs("changes");return St.fetchSelectedDatabaseInfo(e),ae.createElement(Cy,{endpoint:re.urls("changes","apiurl",this.database.id,""),docURL:this.database.documentation(),dbName:this.database.id,dropDownLinks:this.getCrumbs(this.database),database:this.database,selectedNavItem:n,partitionKey:t})}});const ky=xy,jy="RESET_DOC",Iy="DOC_LOADED",Ay="SHOW_CLONE_DOC_MODAL",Ly="HIDE_CLONE_DOC_MODAL",My="SHOW_DELETE_DOC_CONFIRMATION_MODAL",Uy="HIDE_DELETE_DOC_CONFIRMATION_MODAL",qy="SHOW_UPLOAD_MODAL",By="HIDE_UPLOAD_MODAL",Vy="RESET_UPLOAD_MODAL",Fy="FILE_UPLOAD_SUCCESS",Ky="FILE_UPLOAD_ERROR",zy="START_FILE_UPLOAD",Hy="SET_FILE_UPLOAD_PERCENTAGE",Gy="SAVING_DOCUMENT",Wy="SAVING_DOCUMENT_COMPLETED";var Xy,Qy=function(e){return function(t){var n=e.doc;t({type:jy}),n.fetch().then((function(){t({type:Iy,options:{doc:n}}),e.onLoaded&&e.onLoaded()}),(function(t){404===t.status&&Jy("The ".concat(n.id," document does not exist.")),re.navigate(re.urls("allDocs","app",e.database.id,""))}))}},$y=function(){return function(e){e({type:Ly})}};function Jy(e){re.addNotification({msg:e,type:"error",clear:!0})}const Yy=$y;function Zy(e){return Zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zy(e)}function eb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nb(e,t){return nb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nb(e,t)}function rb(e,t){if(t&&("object"===Zy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ob(e)}function ob(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ib(e){return ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ib(e)}function ab(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nb(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ib(r);if(o){var n=ib(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return rb(this,e)});function a(){var e;eb(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ab(ob(e=i.call.apply(i,[this].concat(n))),"getAttachmentList",(function(){var t=encodeURIComponent(e.props.doc.database.get("id")),n=encodeURIComponent(e.props.doc.get("_id"));return _.map(e.props.doc.get("_attachments"),(function(e,r){var o=re.urls("document","attachment",t,n,encodeURIComponent(r));return ae.createElement(en.sN,{key:r,href:o,target:"_blank","data-bypass":"true"},ae.createElement("strong",null,r),ae.createElement("span",{className:"attachment-delimiter"},"-"),ae.createElement("span",null,e.content_type,e.content_type?", ":"",N.formatSize(e.length)))}))})),e}return t=a,(n=[{key:"render",value:function(){return!(this.props.isLoading||!this.props.doc.get("_attachments"))&&ae.createElement("div",{className:"panel-section view-attachments-section btn-group"},ae.createElement(en.Lt,{id:"view-attachments-menu",disabled:this.props.disabled},ae.createElement(en.Lt.Toggle,{noCaret:!0,className:"panel-button dropdown-toggle btn","data-bypass":"true"},ae.createElement("i",{className:"icon icon-paper-clip"}),ae.createElement("span",{className:"button-text"},"View Attachments"),ae.createElement("span",{className:"caret"})),ae.createElement(en.Lt.Menu,null,this.getAttachmentList())))}}])&&tb(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function cb(e){return cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cb(e)}function ub(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pb(e,t){return pb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pb(e,t)}function fb(e,t){if(t&&("object"===cb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return db(e)}function db(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hb(e){return hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hb(e)}function yb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ab(sb,"propTypes",{isLoading:Nt().bool.isRequired,disabled:Nt().bool,doc:Nt().object}),ab(sb,"defaultProps",{isLoading:!0,disabled:!1,doc:{}});var bb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pb(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=hb(r);if(o){var n=hb(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return fb(this,e)});function a(){var e;ub(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yb(db(e=i.call.apply(i,[this].concat(n))),"state",{uuid:null}),yb(db(e),"cloneDoc",(function(){e.props.onSubmit&&e.props.onSubmit(),e.props.cloneDoc(e.props.database,e.props.doc,e.state.uuid)})),yb(db(e),"closeModal",(function(t){t&&t.preventDefault(),e.props.hideCloneDocModal()})),yb(db(e),"docIDChange",(function(t){e.setState({uuid:t.target.value})})),e}return t=a,(n=[{key:"componentDidUpdate",value:function(){var e=this;null===this.state.uuid&&N.getUUID().then((function(t){if(t.uuids){var n={uuid:t.uuids[0]},r=e.props.doc?e.props.doc.attributes._id.indexOf(":"):-1;if(r>=0){var o=e.props.doc.attributes._id.substring(0,r);n.uuid=o+":"+n.uuid}e.setState(n)}})).catch((function(){}))}},{key:"render",value:function(){var e=this;return null!==this.state.uuid&&ae.createElement(en.u_,{dialogClassName:"clone-doc-modal",show:this.props.visible,onHide:this.closeModal},ae.createElement(en.u_.Header,{closeButton:!0},ae.createElement(en.u_.Title,null,"Clone Document")),ae.createElement(en.u_.Body,null,ae.createElement("form",{className:"form",onSubmit:function(t){t.preventDefault(),e.cloneDoc()}},ae.createElement("p",null,"Document cloning copies the saved version of the document. Unsaved document changes will be discarded."),ae.createElement("p",null,"You can modify the following generated ID for your new document."),ae.createElement("input",{ref:function(t){return e.newDocId=t},type:"text",autoFocus:!0,className:"input-block-level",onChange:this.docIDChange,value:this.state.uuid}))),ae.createElement(en.u_.Footer,null,ae.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.closeModal},"Cancel"),ae.createElement("button",{className:"btn btn-primary save",onClick:this.cloneDoc},ae.createElement("i",{className:"icon-repeat"})," Clone Document")))}}])&&lb(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function mb(e){return mb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mb(e)}function gb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vb(e,t){return vb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vb(e,t)}function wb(e,t){if(t&&("object"===mb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Eb(e){return Eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Eb(e)}function Ob(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}yb(bb,"propTypes",{visible:Nt().bool.isRequired,doc:Nt().object,database:Nt().object.isRequired,onSubmit:Nt().func.isRequired,hideCloneDocModal:Nt().func.isRequired,cloneDoc:Nt().func.isRequired});var Sb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vb(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Eb(r);if(o){var n=Eb(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return wb(this,e)});function a(){return gb(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e="icon "+this.props.iconClass;return ae.createElement("div",{className:"panel-section"},ae.createElement("button",{className:"panel-button ".concat(this.props.className),title:this.props.title,onClick:this.props.onClick,disabled:this.props.disabled},ae.createElement("i",{className:e}),ae.createElement("span",null,this.props.title)))}}])&&_b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Db(e){return Db="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Db(e)}function Nb(){return Nb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nb.apply(this,arguments)}function Rb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cb(e,t){return Cb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Cb(e,t)}function Tb(e,t){if(t&&("object"===Db(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xb(e)}function xb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kb(e){return kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kb(e)}function jb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ob(Sb,"propTypes",{title:Nt().string.isRequired,onClick:Nt().func.isRequired,className:Nt().string,disabled:Nt().bool}),Ob(Sb,"defaultProps",{title:"",iconClass:"",onClick:function(){},className:"",disabled:!1});var Ib=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cb(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=kb(r);if(o){var n=kb(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Tb(this,e)});function a(){var e;Rb(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return jb(xb(e=i.call.apply(i,[this].concat(n))),"closeModal",(function(t){t&&t.preventDefault(),e.props.inProgress&&e.props.cancelUpload(),e.props.hideUploadModal(),e.props.resetUploadModal()})),jb(xb(e),"upload",(function(){e.props.uploadAttachment({doc:e.props.doc,rev:e.props.doc.get("_rev"),files:e.attachments.files})})),e}return t=a,(n=[{key:"render",value:function(){var e=this,t="alert alert-error";""===this.props.errorMessage&&(t+=" hide");var n="progress progress-info",r={disabled:"disabled"};return this.props.inProgress||(n+=" hide",r={}),ae.createElement(en.u_,{dialogClassName:"upload-file-modal",show:this.props.visible,onHide:this.closeModal},ae.createElement(en.u_.Header,{closeButton:!0},ae.createElement(en.u_.Title,null,"Upload Attachment")),ae.createElement(en.u_.Body,null,ae.createElement("div",{className:t},this.props.errorMessage),ae.createElement("div",null,ae.createElement("form",{ref:function(t){return e.uploadForm=t},className:"form"},ae.createElement("p",null,"Select a file to upload as an attachment to this document. Uploading a file saves the document as a new revision."),ae.createElement("input",Nb({ref:function(t){return e.attachments=t},type:"file",name:"_attachments"},r)),ae.createElement("br",null)),ae.createElement("div",{className:n},ae.createElement("div",{className:"bar",style:{width:this.props.uploadPercentage+"%"}})))),ae.createElement(en.u_.Footer,null,ae.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.closeModal},"Cancel"),ae.createElement("button",Nb({href:"#",id:"upload-btn","data-bypass":"true",className:"btn btn-primary save",onClick:this.upload},r),ae.createElement("i",{className:"icon icon-upload"})," Upload Attachment")))}}])&&Pb(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Ab(e){return Ab="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ab(e)}function Lb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ub(e,t){return Ub=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ub(e,t)}function qb(e,t){if(t&&("object"===Ab(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bb(e)}function Bb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vb(e){return Vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vb(e)}function Fb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}jb(Ib,"propTypes",{visible:Nt().bool.isRequired,doc:Nt().object,inProgress:Nt().bool.isRequired,uploadPercentage:Nt().number.isRequired,errorMessage:Nt().string,cancelUpload:Nt().func.isRequired,hideUploadModal:Nt().func.isRequired,resetUploadModal:Nt().func.isRequired,uploadAttachment:Nt().func.isRequired});var Kb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ub(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Vb(r);if(o){var n=Vb(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return qb(this,e)});function a(){var e;Lb(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Fb(Bb(e=i.call.apply(i,[this].concat(n))),"getCodeEditor",(function(){if(e.props.isLoading)return ae.createElement(ga.LoadLines,null);var t=e.props.doc.attributes;e.props.isDbPartitioned&&(-1!==t._id.indexOf(":")||t._id.startsWith("_design")||(t._id=":"+t._id));var n=JSON.stringify(t,null,"  "),r=[{name:"save",bindKey:{win:"Ctrl-S",mac:"Ctrl-S"},exec:e.saveDoc}];return ae.createElement(ga.CodeEditor,{id:"doc-editor",ref:function(t){return e.docEditor=t},defaultCode:n,disabled:e.props.isSaving,mode:"json",autoFocus:!0,editorCommands:r,notifyUnsavedChanges:!0,stringEditModalEnabled:!0})})),Fb(Bb(e),"saveDoc",(function(){e.props.saveDoc(e.props.doc,e.checkDocIsValid(),e.onSaveComplete,e.props.previousUrl)})),Fb(Bb(e),"onSaveComplete",(function(){e.getEditor()&&e.getEditor().clearChanges()})),Fb(Bb(e),"hideDeleteDocModal",(function(){e.props.hideDeleteDocModal()})),Fb(Bb(e),"deleteDoc",(function(){e.props.hideDeleteDocModal(),e.props.deleteDoc(e.props.doc)})),Fb(Bb(e),"getEditor",(function(){return e.docEditor?e.docEditor.getEditor():null})),Fb(Bb(e),"checkDocIsValid",(function(){if(e.getEditor().hasErrors())return!1;var t=JSON.parse(e.getEditor().getValue());return e.props.doc.clear().set(t,{validate:!0}),!e.props.doc.validationError})),Fb(Bb(e),"clearChanges",(function(){e.docEditor&&e.docEditor.clearChanges()})),Fb(Bb(e),"getExtensionIcons",(function(){var t=re.getExtensions("DocEditor:icons");return _.map(t,(function(t,n){return ae.createElement(t,{doc:e.props.doc,key:n,database:e.props.database})}))})),Fb(Bb(e),"getButtonRow",(function(){return!e.props.isNewDoc&&null!==e.props.doc&&ae.createElement("div",null,ae.createElement(sb,{doc:e.props.doc,isLoading:e.props.isLoading,disabled:e.props.isSaving}),ae.createElement("div",{className:"doc-editor-extension-icons"},e.getExtensionIcons()),e.props.conflictCount?ae.createElement(Sb,{title:"Conflicts (".concat(e.props.conflictCount,")"),iconClass:"icon-columns",className:"conflicts",disabled:e.props.isSaving,onClick:function(){re.navigate(re.urls("revision-browser","app",e.props.database.safeID(),e.props.doc.id))}}):null,ae.createElement(Sb,{className:"upload",title:"Upload Attachment",iconClass:"icon-circle-arrow-up",disabled:e.props.isSaving,onClick:e.props.showUploadModal}),ae.createElement(Sb,{title:"Clone Document",iconClass:"icon-repeat",disabled:e.props.isSaving,onClick:e.props.showCloneDocModal}),ae.createElement(Sb,{title:"Delete",iconClass:"icon-trash",disabled:e.props.isSaving,onClick:e.props.showDeleteDocModal}))})),e}return t=a,(n=[{key:"UNSAFE_componentWillUpdate",value:function(e){(this.props.numFilesUploaded!==e.numFilesUploaded||this.props.doc&&this.props.doc.hasChanged()||this.props.doc&&e.doc&&this.props.doc.id!==e.doc.id)&&(this.getEditor()&&this.getEditor().setValue(JSON.stringify(e.doc.attributes,null,"  ")),this.onSaveComplete())}},{key:"render",value:function(){var e=this,t=this.props.isSaving?"Saving...":this.props.isNewDoc?"Create Document":"Save Changes",n=this.props.previousUrl?this.props.previousUrl:re.urls("allDocs","app",re.url.encode(this.props.database.id)),r="js-back cancel-button ".concat(this.props.isSaving?"cancel-button--disabled":"");return ae.createElement("div",null,ae.createElement("div",{id:"doc-editor-actions-panel"},ae.createElement("div",{className:"doc-actions-left"},ae.createElement("button",{disabled:this.props.isSaving,className:"save-doc btn btn-primary save",type:"button",onClick:this.saveDoc},ae.createElement("i",{className:"icon fonticon-ok-circled"})," ",t),ae.createElement("div",null,ae.createElement("a",{href:this.props.isSaving?void 0:"#/".concat(n),className:r},"Cancel"))),ae.createElement("div",{className:"alignRight"},this.getButtonRow())),ae.createElement("div",{className:"code-region"},ae.createElement("div",{className:"bgEditorGutter"}),ae.createElement("div",{id:"editor-container",className:"doc-code"},this.getCodeEditor())),ae.createElement(Ib,{ref:function(t){return e.uploadModal=t},visible:this.props.isUploadModalVisible,doc:this.props.doc,inProgress:this.props.uploadInProgress,uploadPercentage:this.props.uploadPercentage,errorMessage:this.props.uploadErrorMessage,cancelUpload:this.props.cancelUpload,hideUploadModal:this.props.hideUploadModal,resetUploadModal:this.props.resetUploadModal,uploadAttachment:this.props.uploadAttachment}),ae.createElement(bb,{doc:this.props.doc,database:this.props.database,visible:this.props.isCloneDocModalVisible,onSubmit:this.clearChanges,hideCloneDocModal:this.props.hideCloneDocModal,cloneDoc:this.props.cloneDoc}),ae.createElement("span",{id:"hey"},"bb"),ae.createElement(Va.ConfirmationModal,{title:"Confirm Deletion",visible:this.props.isDeleteDocModalVisible,text:"Are you sure you want to delete this document?",onClose:this.hideDeleteDocModal,onSubmit:this.deleteDoc,successButtonLabel:"Delete Document"}))}}])&&Mb(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);Fb(Kb,"defaultProps",{database:{},isNewDoc:!1}),Fb(Kb,"propTypes",{isLoading:Nt().bool.isRequired,isSaving:Nt().bool.isRequired,isNewDoc:Nt().bool.isRequired,isDbPartitioned:Nt().bool.isRequired,doc:Nt().object,conflictCount:Nt().number.isRequired,previousUrl:Nt().string,saveDoc:Nt().func.isRequired,isCloneDocModalVisible:Nt().bool.isRequired,database:Nt().object,showCloneDocModal:Nt().func.isRequired,hideCloneDocModal:Nt().func.isRequired,cloneDoc:Nt().func.isRequired,isDeleteDocModalVisible:Nt().bool.isRequired,showDeleteDocModal:Nt().func.isRequired,hideDeleteDocModal:Nt().func.isRequired,deleteDoc:Nt().func.isRequired,isUploadModalVisible:Nt().bool.isRequired,uploadInProgress:Nt().bool.isRequired,uploadPercentage:Nt().number.isRequired,uploadErrorMessage:Nt().string,numFilesUploaded:Nt().number.isRequired,showUploadModal:Nt().func.isRequired,hideUploadModal:Nt().func.isRequired,cancelUpload:Nt().func.isRequired,resetUploadModal:Nt().func.isRequired,uploadAttachment:Nt().func.isRequired});var zb=(0,Rt.$j)((function(e,t){var n=e.docEditor,r=e.databases;return{isLoading:n.isLoading||r.isLoadingDbInfo,isSaving:n.isSaving,isNewDoc:t.isNewDoc,isDbPartitioned:r.isDbPartitioned,doc:n.doc,database:t.database,conflictCount:n.docConflictCount,previousUrl:t.previousUrl,isCloneDocModalVisible:n.cloneDocModalVisible,isDeleteDocModalVisible:n.deleteDocModalVisible,isUploadModalVisible:n.uploadModalVisible,uploadInProgress:n.uploadInProgress,uploadPercentage:n.uploadPercentage,uploadErrorMessage:n.uploadErrorMessage,numFilesUploaded:n.numFilesUploaded}}),(function(e){return{saveDoc:function(t,n,r,o){e(function(e,t,n,r){return function(o){t?(o({type:Gy}),e.save().then((function(){n(e.prettyJSON()),o({type:Wy}),re.addNotification({msg:"Document saved successfully.",type:"success",clear:!0}),r?re.navigate(r,{trigger:!0}):re.navigate("#/"+re.urls("allDocs","app",re.url.encode(e.database.id)),{trigger:!0})})).fail((function(e){o({type:Wy}),re.addNotification({msg:"Save failed: "+JSON.parse(e.responseText).reason,type:"error",fade:!1,clear:!0})}))):e.validationError&&"Cannot change a documents id."===e.validationError?(Jy("You cannot edit the _id of an existing document. Try this: Click 'Clone Document', then change the _id on the clone before saving."),delete e.validationError):Jy("Please fix the JSON errors and try saving again.")}}(t,n,r,o))},showCloneDocModal:function(){e((function(e){e({type:Ay})}))},hideCloneDocModal:function(){e(Yy())},cloneDoc:function(e,t,n){!function(e,t,n){$y(),t.copy(n).then((function(){var t=re.urls("document","app",e.safeID(),encodeURIComponent(n));re.navigate(t,{trigger:!0}),re.addNotification({msg:"Document has been duplicated."})}),(function(e){var t="Could not duplicate document, reason: ".concat(e.responseText,".");re.addNotification({msg:t,type:"error"})}))}(e,t,n)},showDeleteDocModal:function(){e((function(e){e({type:My})}))},hideDeleteDocModal:function(){e((function(e){e({type:Uy})}))},deleteDoc:function(e){!function(e){var t=e.database.safeID(),n="?rev="+e.get("_rev"),r=re.urls("document","server",t,e.safeID(),n);w(r).then((function(e){if(e.error)throw new Error(e.reason||e.error);re.addNotification({msg:"Your document has been successfully deleted.",type:"success",clear:!0}),re.navigate(re.urls("allDocs","app",t,""))})).catch((function(e){re.addNotification({msg:"Failed to delete your document. Reason: "+e.message,type:"error",clear:!0})}))}(e)},showUploadModal:function(){e((function(e){e({type:qy})}))},hideUploadModal:function(){e((function(e){e({type:By})}))},cancelUpload:function(){Xy&&Xy.abort()},resetUploadModal:function(){e((function(e){e({type:Vy})}))},uploadAttachment:function(t){e(function(e){return function(t){if(0!==e.files.length){t({type:zy});var n="?rev="+e.rev,r=e.doc.getDatabase().safeID(),o=e.doc.safeID(),i=e.files[0],a=re.urls("document","attachment",r,o,encodeURIComponent(i.name),n),s=function(e){t({type:Ky,options:{error:e}})},c=new XMLHttpRequest;Xy=c,c.withCredentials=!0,c.upload&&(c.upload.onprogress=function(e){if(e.lengthComputable){var n=e.loaded/e.total*100;t({type:Hy,options:{percent:n}})}}),c.onloadend=function(){Xy=void 0},c.onerror=function(){s("Error uploading file")},c.onload=function(){if(c.status>=200&&c.status<300)!function(e){t(Qy({doc:e,onLoaded:function(){t({type:Fy}),re.addNotification({msg:"Document saved successfully.",type:"success",clear:!0})}}))}(e.doc);else{var n="Error uploading file. ";try{if(c.responseText){var r=JSON.parse(c.responseText);r.error&&(n+="Reason: "+(r.reason||r.error))}}catch(e){}s(n)}},c.open("PUT",a),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.setRequestHeader("Content-Type",i.type||"application/octet-stream"),c.setRequestHeader("Accept","application/json"),c.send(i)}else t({type:Ky,options:{error:"Please select a file to be uploaded."}})}}(t))}}}))(Kb);const Hb=zb;var Gb=function(e){var t=e.onClick,n=e.forward?"fonticon-right-open":"fonticon-left-open";return ae.createElement("div",{style:{height:"20px",width:"11px",marginTop:"7px"},className:n,onClick:t})};Gb.propTypes={onClick:Nt().func.isRequired};var Wb=function(e){var t=e.options,n=e.selected,r=e.onRevisionClick,o=e.onBackwardClick,i=e.onForwardClick;return ae.createElement("div",{className:"conflicting-revs-dropdown"},ae.createElement(Gb,{backward:!0,onClick:o}),ae.createElement("div",{style:{width:"345px",margin:"0 5px"}},ae.createElement(ca.ZP,{name:"form-field-name",value:n,options:t,clearable:!1,onChange:r})),ae.createElement(Gb,{forward:!0,onClick:i}))};Wb.propTypes={options:Nt().array.isRequired,selected:Nt().string.isRequired,onRevisionClick:Nt().func.isRequired,onBackwardClick:Nt().func.isRequired,onForwardClick:Nt().func.isRequired};const Xb=Wb;function Qb(e){return Qb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qb(e)}function $b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jb(e,t){return Jb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jb(e,t)}function Yb(e,t){if(t&&("object"===Qb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Zb(e)}function Zb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function em(e){return em=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},em(e)}var tm=ga.ConfirmButton,nm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jb(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=em(r);if(o){var n=em(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Yb(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={checked:!1},t.close=t.close.bind(Zb(t)),t.onDeleteConflicts=t.onDeleteConflicts.bind(Zb(t)),t}return t=a,(n=[{key:"close",value:function(){this.props.toggleConfirmModal(!1,null)}},{key:"onDeleteConflicts",value:function(){var e=this.state.checked;this.props.onConfirm(this.props.docToWin,e)}},{key:"render",value:function(){var e=this;return ae.createElement(en.u_,{dialogClassName:"delete-conflicts-modal",show:this.props.show,onHide:this.close},ae.createElement(en.u_.Header,{closeButton:!1},ae.createElement(en.u_.Title,null,"Solve Conflicts")),ae.createElement(en.u_.Body,null,ae.createElement("p",null,ae.createElement("i",{className:"icon-warning-sign"})," Do you want to delete all conflicting revisions for this document?")),ae.createElement(en.u_.Footer,null,ae.createElement("div",{style:{float:"left",marginTop:"10px"}},ae.createElement("label",null,ae.createElement("input",{style:{margin:"0 5px 3px 0"},onChange:function(){e.setState({checked:!e.state.checked})},type:"checkbox"}),"Do not show this warning message again")),ae.createElement("a",{style:{marginRight:"10px",cursor:"pointer"},onClick:this.close,"data-bypass":"true"},"Cancel"),ae.createElement(tm,{onClick:this.onDeleteConflicts,text:"Delete Revisions",buttonType:"btn-danger"})))}}])&&$b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function rm(e){return rm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rm(e)}function om(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function im(e,t){return im=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},im(e,t)}function am(e,t){if(t&&("object"===rm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sm(e)}function sm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cm(e){return cm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cm(e)}nm.propTypes={onConfirm:Nt().func.isRequired,toggleConfirmModal:Nt().func.isRequired};var um=ga.ConfirmButton,lm="deleteConflictsHideModal",pm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&im(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=cm(r);if(o){var n=cm(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return am(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={showModal:!1},t.selectAsWinner=t.selectAsWinner.bind(sm(t)),t.onSelectAsWinnerClickOurs=t.onSelectAsWinnerClick.bind(sm(t),t.props.ours),t.onSelectAsWinnerClickTheirs=t.onSelectAsWinnerClick.bind(sm(t),t.props.theirs),t.onRevisionClick=t.onRevisionClick.bind(sm(t)),t.onForwardClick=t.onForwardClick.bind(sm(t)),t.onBackwardClick=t.onBackwardClick.bind(sm(t)),t}return t=a,(n=[{key:"onRevisionClick",value:function(e){this.props.chooseLeaves(this.props.ours,e.value)}},{key:"onForwardClick",value:function(){var e=this.props.conflictingRevs,t=e.indexOf(this.props.theirs._rev),n=e[t+1];n&&this.props.chooseLeaves(this.props.ours,n)}},{key:"onBackwardClick",value:function(){var e=this.props.conflictingRevs,t=e.indexOf(this.props.theirs._rev),n=e[t-1];n&&this.props.chooseLeaves(this.props.ours,n)}},{key:"selectAsWinner",value:function(e,t){t&&ie.utils.localStorageSet(lm,!0),this.props.selectRevAsWinner(e._id,e._rev,this.props.tree)}},{key:"onSelectAsWinnerClick",value:function(e){!0===ie.utils.localStorageGet(lm)?this.selectAsWinner(e):this.props.toggleConfirmModal(!0,e)}},{key:"render",value:function(){var e=this.props.tree,t={paddingRight:"30px"};return ae.createElement("div",{className:"revision-browser-controls"},ae.createElement(nm,{toggleConfirmModal:this.props.toggleConfirmModal,onConfirm:this.selectAsWinner,docToWin:this.props.docToWin,show:this.props.showConfirmModal}),ae.createElement("table",{style:{margin:"10px 60px",width:"100%"}},ae.createElement("tbody",null,ae.createElement("tr",{style:{height:"60px"}},ae.createElement("td",{style:t},"Server-Selected Rev: "),ae.createElement("td",{style:t},ae.createElement("div",{style:{lineHeight:"36px",height:"36px",width:"337px",color:"#000",backgroundColor:"#ffbbbb"}},ae.createElement("b",{style:{paddingLeft:"10px"}},e.winner))),ae.createElement("td",null,ae.createElement(um,{onClick:this.onSelectAsWinnerClickOurs,style:{marginRight:"10px",width:"220px"},text:"Delete Other Conflicts",buttonType:"btn-secondary",customIcon:"icon-trophy"}))),ae.createElement("tr",{style:{height:"60px"}},ae.createElement("td",{style:t},"Conflicting Revisions: "),ae.createElement("td",{style:t},ae.createElement(Xb,{onRevisionClick:this.onRevisionClick,onForwardClick:this.onForwardClick,onBackwardClick:this.onBackwardClick,options:this.props.dropdownData,selected:this.props.theirs._rev})),ae.createElement("td",null,ae.createElement(um,{"data-id":"button-select-theirs",onClick:this.onSelectAsWinnerClickTheirs,style:{marginRight:"10px",width:"220px"},text:"Select as Winner",buttonType:"btn-secondary",customIcon:"icon-trophy"}))))))}}])&&om(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function fm(e){return fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fm(e)}function dm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hm(e,t){return hm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hm(e,t)}function ym(e,t){if(t&&("object"===fm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function bm(e){return bm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bm(e)}pm.propTypes={tree:Nt().object.isRequired,ours:Nt().object.isRequired,conflictingRevs:Nt().array.isRequired};var mm=n(83534),gm=n(24617).Mode,_m=n(66976),vm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hm(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=bm(r);if(o){var n=bm(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ym(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"componentDidUpdate",value:function(){this.hightlightAfterRender()}},{key:"componentDidMount",value:function(){this.hightlightAfterRender()}},{key:"hightlightAfterRender",value:function(){var e=function(e){return JSON.stringify(e,null,"  ")},t=new gm,n=this.revLeftOurs,r=this.revRightTheirs;if(n){var o=mm.render(e(this.props.ours),t,_m,0,!0);n.innerHTML=o.html}if(r){var i=mm.render(e(this.props.theirs),t,_m,0,!0);r.innerHTML=i.html}}},{key:"render",value:function(){var e=this,t=this.props,n=t.ours,r=t.theirs;return n&&r?ae.createElement("div",{className:"revision-split-area"},ae.createElement("div",{"data-id":"ours",style:{width:"50%"}},ae.createElement("div",{style:{marginBottom:"20px"}},n._rev," (Server-Selected Rev)"),ae.createElement("pre",{ref:function(t){return e.revLeftOurs=t}})),ae.createElement("div",{"data-id":"theirs",style:{width:"50%"}},ae.createElement("div",{style:{marginBottom:"20px"}},r._rev),ae.createElement("pre",{ref:function(t){return e.revRightTheirs=t}}))):ae.createElement("div",null)}}])&&dm(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component),wm=n(3202),Em=function(e){var t=e.ours,n=e.theirs;if(!t||!n)return ae.createElement("div",null);var r=wm.diff(t,n),o=wm.formatters.html.format(r,t);return ae.createElement("div",{className:"revision-diff-area"},ae.createElement("div",{style:{marginTop:"30px"},dangerouslySetInnerHTML:{__html:o}}))};Em.propTypes={ours:Nt().object,theirs:Nt().object,currentRev:Nt().string};const Om=Em;function Sm(e){return Sm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sm(e)}function Dm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nm(e,t){return Nm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nm(e,t)}function Rm(e,t){if(t&&("object"===Sm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pm(e)}function Pm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cm(e){return Cm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cm(e)}var Tm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nm(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Cm(r);if(o){var n=Cm(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Rm(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).toggleDiffViewFalse=t.toggleDiffView.bind(Pm(t),!1),t.toggleDiffViewTrue=t.toggleDiffView.bind(Pm(t),!0),t}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.toggleConfirmModal(!1,null),this.props.initDiffEditor()}},{key:"toggleDiffView",value:function(e){this.props.toggleDiffView(e)}},{key:"render",value:function(){var e=this.props,t=e.tree,n=e.ours,r=e.theirs,o=e.conflictingRevs,i=e.isDiffViewEnabled;return t.length||r?r&&o.length?ae.createElement("div",{className:"revision-wrapper scrollable"},ae.createElement(pm,this.props),ae.createElement("div",{className:"revision-view-controls"},ae.createElement(en.hE,{className:"two-sides-toggle-button"},ae.createElement(en.zx,{style:{width:"120px"},className:i?"active":"",onClick:this.toggleDiffViewTrue},ae.createElement("i",{className:"icon-columns"})," Diff"),ae.createElement(en.zx,{style:{width:"120px"},className:i?"":"active",onClick:this.toggleDiffViewFalse},ae.createElement("i",{className:"icon-file-text"})," Document"))),i?ae.createElement(Om,{ours:n,theirs:r}):ae.createElement(vm,{ours:n,theirs:r})):ae.createElement("div",{style:{textAlign:"center",color:"#fff"}},ae.createElement("h2",null,"No conflicts")):ae.createElement(Ao,null)}}])&&Dm(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component),xm="REV_TREE_LOADED",km="REV_BROWSER_DIFF_DOCS_READY",jm="REV_BROWSER_DIFF_ENABLE_DIFF_VIEW",Im="REV_BROWSER_SHOW_CONFIRM_MODAL";function Am(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Am(Object(n),!0).forEach((function(t){Mm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Am(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Um={tree:[],doc:{},conflictDoc:!1,conflictingRevs:[],databaseName:"",ours:null,theirs:null,isDiffViewEnabled:!0,showConfirmModal:!1,docToWin:null};var qm=function(e){return e.doc},Bm=function(e){return e.conflictDoc},Vm=function(e){return e.conflictingRevs},Fm=function(e){return e.databaseName},Km=function(e){return e.ours},zm=function(e){return e.theirs},Hm=function(e){return e.showConfirmModal},Gm=function(e){return e.conflictingRevs.map((function(e){return{value:e,label:e}}))},Wm=function(e){return e.isDiffViewEnabled},Xm=function(e){return e.docToWin};const Qm=function(e,t){var n=t._rev;return e.getDoc(t._id,{revs:!0,open_revs:"all"}).then((function(e){var t={};return{paths:e.map((function(e){(e=e.ok)._deleted&&(t[e._rev]=!0);var n=e._revisions;return n.ids.map((function(e,t){return n.start-t+"-"+e}))})),deleted:t,winner:n}}))};function $m(e){return $m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$m(e)}function Jm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ym;function Zm(e,t,n){return e.reduce((function(e,n){return n[0]!==t&&e.push(n[0]),e}),[]).filter((function(e){return-1===n.indexOf(e)}))}var eg=function(e,t,n,r,o){return{type:"REV_TREE_LOADED",options:{tree:e,doc:t,conflictDoc:r,conflictingRevs:n,databaseName:o}}},tg=function(e,t){return{type:"REV_BROWSER_SHOW_CONFIRM_MODAL",options:{show:e,docToWin:t}}},ng=(0,Rt.$j)((function(e,t){var n,r=e.revisionBrowser;return{docId:t.docId,tree:(n=r,n.tree),doc:qm(r),conflictDoc:Bm(r),conflictingRevs:Vm(r),databaseName:Fm(r),ours:Km(r),theirs:zm(r),showConfirmModal:Hm(r),dropdownData:Gm(r),isDiffViewEnabled:Wm(r),docToWin:Xm(r)}}),(function(e,t){return{toggleConfirmModal:function(t,n){e(tg(t,n))},initDiffEditor:function(){var n,r;e((n=t.databaseName,r=t.docId,function(e){var t=re.urls("databaseBaseURL","apiurl",n);(Ym=function(e){try{new URL(e)}catch(t){throw new Error("Invalid database URL: ".concat(e))}return{getDoc:function(t,n){return function(e,t,n){if(!t)return Promise.reject(new Error("Invalid document ID"));var r="";n&&"object"===$m(n)&&(r="?"+ie.utils.queryParams(n));var o="";if(t.startsWith("_design/")){var i=t.substring(8);o="_design/"+encodeURIComponent(i)}else o=encodeURIComponent(t);var a="".concat(e,"/").concat(o).concat(r);return v(a).then((function(e){if(e.error){var t=new Error(e.error);throw t.reason=e.reason,t.error=e.error,t}return e}))}(e,t,n)}}}(t)).getDoc(r).then((function(e){return Promise.all([Promise.resolve(e),Qm(Ym,e)])})).then((function(t){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Jm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jm(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),o=r[0],i=r[1],a=Zm(i.paths,i.winner,Object.keys(i.deleted)),s=a[0];if(!s)return e(eg(i,o,a,null,n));Ym.getDoc(o._id,{rev:s}).then((function(t){e(eg(i,o,a,t,n))}))}))}))},chooseLeaves:function(t,n){e(function(e,t){return function(n){Ym.getDoc(e._id,{rev:t}).then((function(t){n(function(e,t){return{type:"REV_BROWSER_DIFF_DOCS_READY",options:{theirs:t,ours:e}}}(e,t))}))}}(t,n))},selectRevAsWinner:function(n,r,o){var i,a,s,c;e((i=t.databaseName,a=n,s=o.paths,c=r,function(e){var t=Zm(s,c,[]),n=function(e,t){return{docs:t.map((function(t){return{_id:e,_rev:t,_deleted:!0}}))}}(a,t);E(re.urls("bulk_docs","server",i,""),n).then((function(t){if(t.error)return re.addNotification({msg:"Failed to delete clean up conflicts!",type:"error",clear:!0});re.addNotification({msg:"Conflicts successfully solved.",clear:!0}),e(tg(!1,null)),re.navigate(re.urls("allDocs","app",i,""))}))}))},toggleDiffView:function(t){e(function(e){return{type:"REV_BROWSER_DIFF_ENABLE_DIFF_VIEW",options:{enableDiff:e}}}(t))}}}))(Tm);const rg=ng;var og=re.RouteObject.extend({selectedHeader:"Databases",roles:["fx_loggedIn"],initialize:function(e,t){this.databaseName=t[0],this.docId=t[1],this.database=this.database||new Rs.Model({id:this.databaseName}),this.doc=new lt.NewDoc(null,{database:this.database})},routes:{"database/:database/:doc/conflicts":"revisionBrowser","database/:database/:doc/code_editor":"codeEditor","database/:database/_design/:ddoc/conflicts":"revBrowserForDesignDoc","database/:database/_design/:ddoc":"showDesignDoc","database/:database/_local/:doc":"showLocalDoc","database/:database/:doc":"codeEditor","database/:database/_new":"codeEditorNewDoc","database/:database/_new?(:extra)":"codeEditorNewDoc"},revisionBrowser:function(e,t){var n=re.urls("allDocs","app",re.url.encode(this.database.safeID())),r=re.urls("document","app",this.database.safeID(),this.docId),o=[{name:this.database.safeID(),link:n},{name:this.docId+" > Conflicts"}];return ae.createElement(Jt,{crumbs:o,endpoint:this.doc.url("apiurl"),docURL:r,component:ae.createElement(rg,{docId:t,databaseName:e})})},revBrowserForDesignDoc:function(e,t){return this.revisionBrowser(e,"_design/"+t)},codeEditorNewDoc:function(e,t){return this.codeEditor(e,null,t)},codeEditor:function(e,t,n){var r,o=ie.getParams(n),i=[{name:e,link:re.urls("allDocs","app",re.url.encode(e))},{name:t||"New Document"}];if(this.database=new Rs.Model({id:e}),t)this.doc=new lt.Doc({_id:t},{database:this.database,fetchConflicts:!0});else{var a=o?o.partitionKey:void 0;this.doc=new lt.NewDoc(null,{database:this.database,partitionKey:a})}St.fetchSelectedDatabaseInfo(e),r={doc:this.doc,database:this.database},re.reduxDispatch(Qy(r));var s=void 0,c=re.router.lastPages.filter((function(e){return-1!==e.indexOf("/_all_docs")||e.match(/_design\/(\S)*\/_/)||-1!==e.indexOf("/_find")}));return c.length>0&&(s=c[c.length-1]),ae.createElement(Jt,{crumbs:i,endpoint:this.doc.url("apiurl"),docURL:this.doc.documentation(),partitionKey:o.partitionKey,component:ae.createElement(Hb,{database:this.database,isNewDoc:!t,previousUrl:s})})},showLocalDoc:function(e,t){return this.codeEditor(e,"_local/"+t)},showDesignDoc:function(e,t){return this.codeEditor(e,"_design/"+t)}});const ig={DocEditorRouteObject:og};var ag=Gs.extend({routes:{"database/:database/_partition/:partitionkey/new_view":{route:"createView",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/new_view/:designDoc":{route:"createView",roles:["fx_loggedIn"]},"database/:database/new_view":{route:"createViewNoPartition",roles:["fx_loggedIn"]},"database/:database/new_view/:designDoc":{route:"createViewNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_view/:view":{route:"showPartitionedView",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_view/:view":{route:"showGlobalView",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_view/:view/edit":{route:"editView",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_view/:view/edit":{route:"editViewNoPartition",roles:["fx_loggedIn"]}},initialize:function(e,t){var n=t[0];this.databaseName=n,this.database=new Rs.Model({id:n}),this.createDesignDocsCollection(),this.addSidebar()},showGlobalView:function(e,t,n){return this.showView(e,"",t,n)},showPartitionedView:function(e,t,n,r){return this.showView(e,t,n,r)},showView:function(e,t,n,r){r=r.replace(/\?.*$/,""),zc.dispatchClearIndex(),zc.dispatchFetchDesignDocsBeforeEdit({viewName:r,isNewView:!1,database:this.database,designDocs:this.designDocs,designDocId:"_design/"+n}),St.fetchSelectedDatabaseInfo(e);var o=new Qs("designDoc",{designDocName:n,designDocSection:"Views",indexName:r});zs(o);var i=t?encodeURIComponent(t):"",a=re.urls("view","server",encodeURIComponent(e),i,encodeURIComponent(n),encodeURIComponent(r)),s=re.urls("view","apiurl",encodeURIComponent(e),i,encodeURIComponent(n),encodeURIComponent(r)),c=re.constants.DOC_URLS.GENERAL,u=this.getCrumbs(this.database);return ae.createElement(Py,{docURL:c,endpoint:s,dbName:this.database.id,dropDownLinks:u,database:this.database,fetchUrl:a,ddocsOnly:!1,deleteEnabled:!1,selectedNavItem:o,partitionKey:t,onPartitionKeySelected:function(t){var o=re.urls("partitioned_view","app",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n));re.navigate("#/"+o+encodeURIComponent(r))},onGlobalModeSelected:function(){var t=re.urls("view","app",encodeURIComponent(e),encodeURIComponent(n));re.navigate("#/"+t+encodeURIComponent(r))},globalMode:""===t})},createViewNoPartition:function(e,t){return this.createView(e,"",t)},createView:function(e,t,n){var r=!0,o="new-doc";n&&(o="_design/"+n,r=!1),zc.dispatchFetchDesignDocsBeforeEdit({viewName:"new-view",isNewView:!0,database:this.database,designDocs:this.designDocs,designDocId:o,isNewDesignDoc:r}),St.fetchSelectedDatabaseInfo(e);var i=new Qs(""),a=this.getCrumbs(this.database);return ae.createElement(Ty,{showIncludeAllDocs:!0,docURL:re.constants.DOC_URLS.GENERAL,dbName:this.database.id,dropDownLinks:a,database:this.database,selectedNavItem:i,partitionKey:t})},editViewNoPartition:function(e,t,n){return this.editView(e,"",t,n)},editView:function(e,t,n,r){zc.dispatchFetchDesignDocsBeforeEdit({viewName:r,isNewView:!1,database:this.database,designDocs:this.designDocs,designDocId:"_design/"+n}),St.fetchSelectedDatabaseInfo(e);var o=new Qs("designDoc",{designDocName:n,designDocSection:"Views",indexName:r});zs(o);var i=re.constants.DOC_URLS.GENERAL,a=re.urls("view","apiurl",e,n,r),s=this.getCrumbs(this.database);return ae.createElement(Ty,{showIncludeAllDocs:!0,docURL:i,endpoint:a,dbName:this.database.id,dropDownLinks:s,database:this.database,selectedNavItem:o,partitionKey:t})}});const sg=ag;function cg(e){return cg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cg(e)}function ug(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lg(e,t){return lg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lg(e,t)}function pg(e,t){if(t&&("object"===cg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function fg(e){return fg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fg(e)}var dg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lg(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fg(r);if(o){var n=fg(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return pg(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,n=[{key:"humanizeDuration",value:function(e){if(e<1e3)return Math.round(e)+" ms";var t=e/1e3;if(t<60)return Math.floor(t)+" seconds";var n=Math.floor(t/60);return[n," ",n>1?"minutes":"minute",", ",t=Math.floor(t-60*n)," ",t>1?"seconds":"second"].join("")}},{key:"getWarning",value:function(e){if(e){var t=e.split("\n").map((function(e,t){return ae.createElement(ae.Fragment,{key:t},e,ae.createElement("br",null))}));return ae.createElement("span",null,t)}}},{key:"warningPopupComponent",value:function(e){if(e)return ae.createElement("div",{className:"warning"},ae.createElement("i",{className:"fonticon-attention-circled"})," ",e)}},{key:"executionStatsLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if("number"==typeof t){var o=0!==t||n?"true":"false";return ae.createElement("div",{"data-status":o},e+": ",ae.createElement("span",{className:"value"},t.toLocaleString()," ",r))}return null}},{key:"executionStatsPopupComponent",value:function(e){return e?ae.createElement("div",{className:"execution-stats-popup-component"},this.executionStatsLine("documents examined",e.total_docs_examined),this.executionStatsLine("documents examined (quorum)",e.total_quorum_docs_examined),this.executionStatsLine("results returned",e.results_returned,!0),this.executionStatsLine("execution time",Math.round(e.execution_time_ms),!1,"ms")):null}},{key:"popup",value:function(e,t){return ae.createElement(en.J2,{id:"popover-execution-stats",title:"Execution Statistics"},ae.createElement("div",{className:"execution-stats-popup"},this.executionStatsPopupComponent(e),this.warningPopupComponent(t)))}},{key:"render",value:function(){var e=this.props,t=e.executionStats,n=e.warning,r=this.getWarning(n),o=null;r&&(o=ae.createElement("i",{className:"fonticon-attention-circled"}));var i=null;t?i=ae.createElement("span",{className:"execution-stats-component"},"Executed in ",this.humanizeDuration(t.execution_time_ms)):r&&(i=ae.createElement("span",{className:"execution-stats-component"},"Warning"));var a=this.popup(t,r);return ae.createElement(en.Ox,{trigger:["hover","focus","click"],placement:"right",overlay:a},ae.createElement("span",{className:"execution-stats"},o,i))}}],n&&ug(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function hg(e){return hg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hg(e)}function yg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yg(Object(n),!0).forEach((function(t){mg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _g(e,t){return _g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_g(e,t)}function vg(e,t){if(t&&("object"===hg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function wg(e){return wg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wg(e)}dg.propTypes={executionStats:Nt().object,warning:Nt().string};var Eg=ga.PaddedBorderedBox,Og=ga.CodeEditorPanel,Sg=ie.helpers.getDocUrl,Dg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_g(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wg(r);if(o){var n=wg(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return vg(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,n=[{key:"componentDidMount",value:function(){var e=this;prettyPrint(),this.props.loadQueryHistory({databaseName:this.props.databaseName}),this.props.clearResults();var t=this.codeEditor.codeEditor.editor;t.commands.byName.runQuery||t.commands.addCommand({name:"runQuery",bindKey:{win:"Ctrl-Enter",mac:"Command-Option-Enter"},exec:function(){e.runQuery({preventDefault:function(){}})},readOnly:!0})}},{key:"componentDidUpdate",value:function(e){prettyPrint(),e.history!=this.props.history&&this.setEditorValue(this.props.history[0].value)}},{key:"setEditorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.codeEditor.getEditor().setValue(e)}},{key:"getEditorValue",value:function(){return this.codeEditor.getValue()}},{key:"editorHasErrors",value:function(){return this.codeEditor.getEditor().hasErrors()}},{key:"onHistorySelected",value:function(e){this.setEditorValue(e.value)}},{key:"editor",value:function(){var e=this;return ae.createElement("div",{className:"mango-editor-wrapper"},ae.createElement("form",{className:"form-horizontal",onSubmit:function(t){e.runQuery(t)}},ae.createElement("div",{className:"padded-box"},ae.createElement(ca.ZP,{className:"mango-select",options:this.props.history,ref:function(t){return e.history=t},placeholder:"Query history",searchable:!1,clearable:!1,autosize:!1,onChange:function(t){e.onHistorySelected(t)}})),ae.createElement(Eg,null,ae.createElement(Og,{id:"query-field",ref:function(t){return e.codeEditor=t},title:this.props.editorTitle,docLink:Sg("MANGO_SEARCH"),defaultCode:this.props.queryFindCode})),ae.createElement("div",{className:"padded-box"},ae.createElement("div",{className:"control-group"},ae.createElement("button",{type:"submit",id:"create-index-btn",className:"btn btn-primary btn-space"},"Run Query"),ae.createElement("button",{type:"button",id:"explain-btn",className:"btn btn-secondary btn-space",onClick:function(t){e.runExplain(t)}},"Explain"),ae.createElement("a",{className:"edit-link",style:{},onClick:function(t){e.manageIndexes(t)}},"manage indexes")),ae.createElement("div",null,ae.createElement(dg,this.props)))))}},{key:"render",value:function(){return this.props.isLoading?ae.createElement("div",{className:"mango-editor-wrapper"},ae.createElement(ga.LoadLines,null)):this.editor()}},{key:"notifyOnQueryError",value:function(){return!!this.editorHasErrors()&&(re.addNotification({msg:"Please fix the Javascript errors and try again.",type:"error",clear:!0}),!0)}},{key:"manageIndexes",value:function(e){e.preventDefault(),this.props.manageIndexes();var t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"",n="#"+re.urls("mango","index-app",encodeURIComponent(this.props.databaseName),t);re.navigate(n)}},{key:"runExplain",value:function(e){e.preventDefault(),this.notifyOnQueryError()||this.props.runExplainQuery({databaseName:this.props.databaseName,partitionKey:this.props.partitionKey,queryCode:this.getEditorValue()})}},{key:"runQuery",value:function(e){e.preventDefault(),this.notifyOnQueryError()||(this.props.clearResults(),this.props.runQuery({databaseName:this.props.databaseName,partitionKey:this.props.partitionKey,queryCode:JSON.parse(this.getEditorValue()),fetchParams:bg(bg({},this.props.fetchParams),{},{skip:0})}))}}],n&&gg(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);Dg.propTypes={description:Nt().string.isRequired,editorTitle:Nt().string.isRequired,queryFindCode:Nt().string.isRequired,queryFindCodeChanged:Nt().bool,databaseName:Nt().string.isRequired,partitionKey:Nt().string,runExplainQuery:Nt().func.isRequired,runQuery:Nt().func.isRequired,manageIndexes:Nt().func.isRequired,loadQueryHistory:Nt().func.isRequired,clearResults:Nt().func.isRequired};const Ng={MANGO_NEW_QUERY_FIND_CODE:"MANGO_NEW_QUERY_FIND_CODE",MANGO_LOAD_QUERY_HISTORY:"MANGO_LOAD_QUERY_HISTORY",MANGO_LOAD_INDEX_TEMPLATES:"MANGO_LOAD_INDEX_TEMPLATES",MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE:"MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE",MANGO_SAVE_INDEX_REQUEST:"MANGO_SAVE_INDEX_REQUEST",MANGO_SHOW_EXPLAIN_RESULTS:"MANGO_SHOW_EXPLAIN_RESULTS",MANGO_HIDE_EXPLAIN_RESULTS:"MANGO_HIDE_EXPLAIN_RESULTS"};function Rg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rg(Object(n),!0).forEach((function(t){Cg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tg=function(e,t){var n=ie.utils.queryString(t),r=re.urls("mango","index-server",ie.utils.safeURLName(e));return r="".concat(r).concat(-1!==r.indexOf("?")?"&":"?").concat(n),v(r).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.indexes,docType:go,layout:mo}}))},xg=null,kg=function(e,t,n,r){var o=t?encodeURIComponent(t):"",i=re.urls("mango","query-server",encodeURIComponent(e),o),a=function(e,t){var n=t.limit,r=t.limit-1,o=(Math.floor(t.skip/r)+1)*r-e.limit;return o>=0&&(n=r-o),Pg(Pg({},e),{},{limit:n,skip:e.skip?t.skip+e.skip:t.skip})}(n,r);return E(i,a,{raw:!0})},jg=function(e,t,n,r){return function(e){return null===xg?new re.Promise((function(t){kg(e,"",{selector:{_id:{$gt:"a"}},execution_stats:!0},{limit:1}).then((function(e){xg=200==e.status,t(xg)}))})):Promise.resolve(xg)}(e).then((function(o){return o&&(n.execution_stats=!0),kg(e,t,n,r).then((function(e){return e.json()})).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.docs,docType:_o,executionStats:e.execution_stats,warning:e.warning}}))}))};const Ig={loadQueryHistory:function(e){return{type:Ng.MANGO_LOAD_QUERY_HISTORY,options:e}},newQueryFindCode:function(e){return{type:Ng.MANGO_NEW_QUERY_FIND_CODE,options:e}},showQueryExplain:function(e){return{type:Ng.MANGO_SHOW_EXPLAIN_RESULTS,options:e}},hideQueryExplain:function(){return{type:Ng.MANGO_HIDE_EXPLAIN_RESULTS}},newQueryCreateIndexTemplate:function(e){return{type:Ng.MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE,options:e}},loadIndexTemplates:function(e){return{type:Ng.MANGO_LOAD_INDEX_TEMPLATES,options:e}},requestSaveIndex:function(){return{type:Ng.MANGO_SAVE_INDEX_REQUEST}},saveIndex:function(e){var t=this,n=e.databaseName,r=e.indexCode,o=e.fetchParams;return re.addNotification({msg:"Saving index for query...",type:"info",clear:!0}),function(e){return e(t.requestSaveIndex()),function(e,t){var n=re.urls("mango","index-server",ie.utils.safeURLName(e));return E(n,t,{rawBody:!0}).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return e}))}(n,r).then((function(){var t="#"+re.urls("mango","query-app",ie.utils.safeURLName(n),"");e(Wf((function(e){return Tg(n,e)}),o,{})),re.addNotification({msg:'Index is ready for querying. <a href="'+t+'">Run a Query.</a>',type:"success",clear:!0,escape:!1})})).catch((function(e){re.addNotification({msg:"Failed to create index. "+t.errorReason(e),type:"error",clear:!0})}))}},errorReason:function(e){return"Reason: "+(e&&e.message||"n/a")},runExplainQuery:function(e){var t=this,n=e.databaseName,r=e.partitionKey,o=e.queryCode;return function(e){return function(e,t,n){var r=t?encodeURIComponent(t):"",o=re.urls("mango","explain-server",encodeURIComponent(e),r);return E(o,n,{rawBody:!0}).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return e}))}(n,r,o).then((function(n){e(t.showQueryExplain({explainPlan:n}))})).catch((function(){re.addNotification({msg:"There was an error fetching the query plan.",type:"error",clear:!0})}))}}};var Ag=function(e){var t=e.additionalIndexes;if(!t)return[];var n=re.getExtensions("mango:additionalIndexes")[0];return n?t.filter((function(e){return-1!==e.get("type").indexOf(n.type)})):void 0},Lg=(0,Rt.$j)((function(e,t){var n,r,o=e.mangoQuery,i=e.indexResults;return{databaseName:t.databaseName,queryFindCode:rd(o.queryFindCode),queryFindCodeChanged:o.queryFindCodeChanged,availableIndexes:(n=o,r=n.availableIndexes,r?r.filter((function(e){var t=e.type;return-1!==["json","special"].indexOf(t)})):[]),additionalIndexes:Ag(o),isLoading:o.isLoading,history:o.history,description:t.description,editorTitle:t.editorTitle,additionalIndexesText:t.additionalIndexesText,fetchParams:i.fetchParams,executionStats:i.executionStats,warning:i.warning,partitionKey:t.partitionKey}}),(function(e){return{loadQueryHistory:function(t){e(Ig.loadQueryHistory(t))},runExplainQuery:function(t){e(Ig.runExplainQuery(t))},runQuery:function(t){e(Ig.hideQueryExplain()),e(Ig.newQueryFindCode(t)),e(Wf((function(e){return jg(t.databaseName,t.partitionKey,t.queryCode,e)}),t.fetchParams,{}))},clearResults:function(){e(Ff())},manageIndexes:function(){e(Ig.hideQueryExplain())}}}))(Dg);const Mg=Lg;function Ug(e){return Ug="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ug(e)}function qg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qg(Object(n),!0).forEach((function(t){Vg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kg(e,t){return Kg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kg(e,t)}function zg(e,t){if(t&&("object"===Ug(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hg(e)}function Hg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gg(e){return Gg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gg(e)}var Wg=ga.PaddedBorderedBox,Xg=ga.CodeEditorPanel,Qg=ga.ConfirmButton,$g=ga.LoadLines,Jg=ie.helpers.getDocUrl,Yg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kg(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Gg(r);if(o){var n=Gg(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return zg(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={partitionedSelected:!0},t.onTemplateSelected=t.onTemplateSelected.bind(Hg(t)),t.onTogglePartitioned=t.onTogglePartitioned.bind(Hg(t)),t.saveIndex=t.saveIndex.bind(Hg(t)),t}return t=a,n=[{key:"componentDidMount",value:function(){prettyPrint(),this.props.loadIndexTemplates(),this.props.clearResults(),this.props.loadIndexList({fetchParams:Bg(Bg({},this.props.fetchParams),{},{skip:0})})}},{key:"componentDidUpdate",value:function(e){prettyPrint(),e.templates!=this.props.templates&&this.setEditorValue(this.props.templates[0].value)}},{key:"setEditorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.codeEditor)return this.codeEditor.getEditor().setValue(e)}},{key:"getEditorValue",value:function(){return this.codeEditor.getValue()}},{key:"editorHasErrors",value:function(){return this.codeEditor.getEditor().hasErrors()}},{key:"onTemplateSelected",value:function(e){this.setEditorValue(e.value)}},{key:"onTogglePartitioned",value:function(){this.setState({partitionedSelected:!this.state.partitionedSelected})}},{key:"partitionedCheckobx",value:function(){return this.props.isDbPartitioned?ae.createElement("label",null,ae.createElement("input",{id:"js-partitioned-index",type:"checkbox",checked:this.state.partitionedSelected,onChange:this.onTogglePartitioned,style:{margin:"0px 10px 0px 0px"}}),"Partitioned"):null}},{key:"editor",value:function(){var e=this,t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"",n="#"+re.urls("mango","query-app",encodeURIComponent(this.props.databaseName),t);return ae.createElement("div",{className:"mango-editor-wrapper"},ae.createElement("form",{className:"form-horizontal",onSubmit:this.saveIndex},ae.createElement("div",{className:"padded-box"},ae.createElement(ca.ZP,{className:"mango-select",options:this.props.templates,ref:function(t){return e.templates=t},placeholder:"Examples",searchable:!1,clearable:!1,autosize:!1,onChange:this.onTemplateSelected})),ae.createElement(Wg,null,ae.createElement(Xg,{id:"query-field",ref:function(t){return e.codeEditor=t},title:"Index",docLink:Jg("MANGO_INDEX"),defaultCode:this.props.queryIndexCode}),this.partitionedCheckobx()),ae.createElement("div",{className:"padded-box"},ae.createElement("div",{className:"control-group"},ae.createElement(Qg,{text:"Create index",id:"create-index-btn",showIcon:!1}),ae.createElement("a",{className:"edit-link",href:n},"edit query")))))}},{key:"render",value:function(){return this.props.isLoading?ae.createElement($g,null):this.editor()}},{key:"saveIndex",value:function(e){e.preventDefault();var t=function(){re.addNotification({msg:"Please fix the Javascript errors and try again.",type:"error",clear:!0})};if(this.editorHasErrors())t();else{var n=this.getEditorValue();if(this.props.isDbPartitioned)try{var r=JSON.parse(n);!0!==r.partitioned&&!1!==r.partitioned&&(r.partitioned=this.state.partitionedSelected),n=JSON.stringify(r)}catch(e){t()}this.props.saveIndex({databaseName:this.props.databaseName,indexCode:n,fetchParams:this.props.fetchParams})}}}],n&&Fg(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);Yg.propTypes={isLoading:Nt().bool.isRequired,databaseName:Nt().string.isRequired,isDbPartitioned:Nt().bool.isRequired,saveIndex:Nt().func.isRequired,queryIndexCode:Nt().string.isRequired,partitionKey:Nt().string,loadIndexTemplates:Nt().func.isRequired,clearResults:Nt().func.isRequired,loadIndexList:Nt().func.isRequired},Yg.defaultProps={isLoading:!0,isDbPartitioned:!1};var Zg=(0,Rt.$j)((function(e,t){var n=e.mangoQuery,r=e.indexResults,o=e.databases;return{description:t.description,databaseName:t.databaseName,queryIndexCode:rd(n.queryIndexCode),templates:n.queryIndexTemplates,fetchParams:r.fetchParams,partitionKey:t.partitionKey,isLoading:o.isLoadingDbInfo,isDbPartitioned:o.isDbPartitioned}}),(function(e,t){return{saveIndex:function(t){e(Ig.saveIndex(t))},loadIndexList:function(n){e(Wf((function(e){return Tg(t.databaseName,e)}),n.fetchParams,{}))},clearResults:function(){e(Ff())},loadIndexTemplates:function(){e(Ig.loadIndexTemplates())}}}))(Yg);const e_=Zg;function t_(e){return t_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t_(e)}function n_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o_(e,t){return o_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o_(e,t)}function i_(e,t){if(t&&("object"===t_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function a_(e){return a_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a_(e)}var s_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o_(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a_(r);if(o){var n=a_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return i_(this,e)});function a(){return n_(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"render",value:function(){return ae.createElement("div",null,ae.createElement("pre",{className:"prettyprint"},JSON.stringify(this.props.explainPlan,null," ")))}}])&&r_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);s_.propTypes={explainPlan:Nt().object.isRequired};const c_={MangoIndexEditorContainer:e_,MangoQueryEditorContainer:Mg,ExplainPage:s_};function u_(e){return u_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u_(e)}function l_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p_(e,t){return p_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p_(e,t)}function f_(e,t){if(t&&("object"===u_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d_(e){return d_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d_(e)}var h_=function(e){var t=e.docURL,n=e.endpoint,r=e.databaseName,o=e.showPartitionKeySelector,i=e.partitionKey,a=e.onPartitionKeySelected,s=e.onGlobalModeSelected,c=e.globalMode,u=ae.createElement(hy,{docURL:t,endpoint:n,includeQueryOptionsParams:!1}),l=null;return o&&(l=ae.createElement(Dy,{databaseName:r,partitionKey:i,onPartitionKeySelected:a,onGlobalModeSelected:s,globalMode:c})),ae.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},ae.createElement("div",{style:{flex:1,padding:"18px 6px 12px 12px"}},l),ae.createElement("div",{id:"right-header",className:"flex-body"}),u,ae.createElement("div",{id:"notification-center-btn"},ae.createElement(Ut,null)))},y_=function(e){var t=e.databaseName,n=e.fetchUrl,r=e.queryDocs;return ae.createElement("div",{id:"footer"},ae.createElement(fy,{databaseName:t,fetchUrl:n,queryDocs:r}))},b_=function(e){var t=e.crumbs,n=e.docURL,r=e.endpoint,o=e.databaseName,i=e.partitionKey,a=e.showPartitionKeySelector,s=e.onPartitionKeySelected,c=e.onGlobalModeSelected,u=e.globalMode;return ae.createElement("div",{className:"header-wrapper flex-layout flex-row"},ae.createElement("div",{className:"flex-body faux__breadcrumbs-mango-header"},ae.createElement(Vt,{crumbs:t})),ae.createElement(h_,{docURL:n,endpoint:r,databaseName:o,showPartitionKeySelector:a,partitionKey:i,onPartitionKeySelected:s,onGlobalModeSelected:c,globalMode:u}))};b_.defaultProps={crumbs:[]};var m_=function(e){var t=e.edit,n=e.designDocs,r=e.explainPlan,o=e.databaseName,i=e.fetchUrl,a=e.queryDocs,s=e.docType,c=e.partitionKey,u=t?ae.createElement(c_.MangoIndexEditorContainer,{description:ie.i18n.en_US["mango-descripton-index-editor"],databaseName:o,partitionKey:c}):ae.createElement(c_.MangoQueryEditorContainer,{description:ie.i18n.en_US["mango-descripton"],editorTitle:ie.i18n.en_US["mango-title-editor"],additionalIndexesText:ie.i18n.en_US["mango-additional-indexes-heading"],databaseName:o,partitionKey:c}),l=ae.createElement(Jh,{fetchUrl:i,designDocs:n,ddocsOnly:!1,databaseName:o,fetchAtStartup:!1,queryDocs:a,docType:s,partitionKey:c}),p=ae.createElement(y_,{databaseName:o,fetchUrl:i,queryDocs:a});return r&&(l=ae.createElement(c_.ExplainPage,{explainPlan:r}),p=null),ae.createElement("div",{id:"two-pane-content",className:"flex-layout flex-row flex-body"},ae.createElement("div",{id:"left-content",className:"flex-body"},u),ae.createElement("div",{id:"right-content",className:"flex-body flex-layout flex-col"},ae.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},l),p))},g_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p_(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d_(r);if(o){var n=d_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f_(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,n=[{key:"render",value:function(){var e=this.props,t=e.database,n=e.edit,r=e.docURL,o=e.crumbs,i=e.designDocs,a=e.fetchUrl,s=e.databaseName,c=e.queryFindCode,u=e.partitionKey,l=e.onPartitionKeySelected,p=e.onGlobalModeSelected,f=e.globalMode,d=this.props.endpoint;if(this.props.explainPlan){var h=u?encodeURIComponent(u):"";d=re.urls("mango","explain-apiurl",encodeURIComponent(t),h)}var y=function(e){return jg(s,u,c,e)},b=_o;return n&&(y=function(e){return Tg(s,e)},b=go),ae.createElement("div",{id:"dashboard",className:"two-pane flex-layout flex-col"},ae.createElement(b_,{docURL:r,endpoint:d,crumbs:o,databaseName:s,partitionKey:u,showPartitionKeySelector:!n,onPartitionKeySelected:l,onGlobalModeSelected:p,globalMode:f}),ae.createElement(m_,{edit:n,designDocs:i,explainPlan:this.props.explainPlan,databaseName:s,fetchUrl:a,queryDocs:y,docType:b,partitionKey:u}))}}],n&&l_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component),__=(0,Rt.$j)((function(e,t){var n=e.mangoQuery;return{explainPlan:n.explainPlan,queryFindCode:n.queryFindCode,partitionKey:t.partitionKey,databaseName:t.databaseName,onPartitionKeySelected:t.onPartitionKeySelected,onGlobalModeSelected:t.onGlobalModeSelected,globalMode:t.globalMode}}))(g_),v_=re.RouteObject.extend({selectedHeader:"Databases",hideApiBar:!0,hideNotificationCenter:!0,routes:{"database/:database/_partition/:partitionkey/_index":{route:"createIndex",roles:["fx_loggedIn"]},"database/:database/_index":{route:"createIndexNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_find":{route:"findUsingIndex",roles:["fx_loggedIn"]},"database/:database/_find":{route:"findUsingIndexNoPartition",roles:["fx_loggedIn"]}},initialize:function(e,t){var n=t[0];this.databaseName=n,this.database=new ft.Model({id:n})},findUsingIndexNoPartition:function(e){return this.findUsingIndex(e,"")},findUsingIndex:function(e,t){var n=t?encodeURIComponent(t):"",r=re.urls("allDocs","app",encodeURIComponent(this.databaseName),n),o=t?"/".concat(n):"",i="/"+encodeURIComponent(this.databaseName)+o+"/_find",a=[{name:e,link:r},{name:ie.i18n.en_US["mango-title-editor"]}],s=re.urls("mango","query-apiurl",encodeURIComponent(this.databaseName),n);return ae.createElement(__,{database:e,crumbs:a,docURL:re.constants.DOC_URLS.MANGO_SEARCH,endpoint:s,edit:!1,databaseName:this.databaseName,fetchUrl:i,partitionKey:t,onPartitionKeySelected:function(t){var n=re.urls("mango","query-app",encodeURIComponent(e),encodeURIComponent(t));re.navigate("#/"+n)},onGlobalModeSelected:function(){var t=re.urls("mango","query-app",encodeURIComponent(e));re.navigate("#/"+t)},globalMode:""===t})},createIndexNoPartition:function(e){return this.createIndex(e,"")},createIndex:function(e,t){var n=new ct.AllDocs(null,{database:this.database,paging:{pageSize:500},params:{startkey:"_design/",endkey:"_design0",include_docs:!0,limit:500}}),r=t?encodeURIComponent(t):"",o=re.urls("allDocs","app",encodeURIComponent(this.databaseName),r),i=re.urls("mango","index-apiurl",encodeURIComponent(this.databaseName),r),a=[{name:e,link:o},{name:ie.i18n.en_US["mango-indexeditor-title"]}];return St.fetchSelectedDatabaseInfo(e),ae.createElement(__,{showIncludeAllDocs:!1,crumbs:a,docURL:re.constants.DOC_URLS.MANGO_INDEX,endpoint:i,edit:!0,designDocs:n,databaseName:this.databaseName,partitionKey:t})}});const w_={MangoIndexEditorAndQueryEditor:v_};ct.RouteObjects=[ig.DocEditorRouteObject,ky,sg,w_.MangoIndexEditorAndQueryEditor];const E_=ct;function O_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O_(Object(n),!0).forEach((function(t){D_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N_={isLoading:!0,showLoadError:!1,viewIndex:void 0};const R_={INDEX_TEMPLATES:[{label:"Single field (json)",code:{index:{fields:["foo"]},name:"foo-json-index",type:"json"}},{label:"Multiple fields (json)",code:{index:{fields:["foo","bar"]},name:"foo-bar-json-index",type:"json"}}]};function P_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P_(Object(n),!0).forEach((function(t){T_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x_={selector:{_id:{$gt:null}}},k_=function(e){var t="string"==typeof e?JSON.parse(e):e;return{label:JSON.stringify(t),value:rd(t),className:"mango-select-entry"}},j_=function(){return[k_(x_)]},I_=function(){return R_.INDEX_TEMPLATES.map((function(e){var t=k_(e.code);return t.label=e.label||t.label,t}))},A_=function(){var e=re.getExtensions("mango:indexTemplates")[0];return e?e.filter((function(e){return!!e.code})).map((function(e){var t=k_(e.code);return t.label=e.label||t.label,t})):I_()},L_={queryFindCode:x_,queryIndexCode:{index:{fields:["_id"]},type:"json"},queryFindCodeChanged:!1,explainPlan:void 0,history:j_(),historyKey:"default",queryIndexTemplates:I_()},M_=function(e){var t=e+"_queryhistory",n=ie.utils.localStorageGet(t);return n||((n=re.getExtensions("mango:queryHistory")[0])?n.filter((function(e){return!!e.code})).map((function(e){var t=k_(e.code);return t.label=e.label||t.label,t})):j_())},U_=function(e,t,n){var r=e.historyKey,o=e.history.slice(),i=k_(t);i.label=n||i.label;var a=o.findIndex((function(e){return e.value===i.value}));return a>-1&&o.splice(a,1),o.unshift(i),o.length>5&&o.splice(5,1),ie.utils.localStorageSet(r,o),o},q_=function(e,t,n){var r=e.queryIndexTemplates.slice(),o=k_(t);o.label=n||o.label,r.find((function(e){return e.value===o.value}))||r.push(o)};function B_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B_(Object(n),!0).forEach((function(t){F_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K_={selectorVisible:!1};function z_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z_(Object(n),!0).forEach((function(t){G_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W_={doc:null,isLoading:!0,isSaving:!1,cloneDocModalVisible:!1,deleteDocModalVisible:!1,uploadModalVisible:!1,numFilesUploaded:0,uploadErrorMessage:"",uploadInProgress:!1,uploadPercentage:0,docConflictCount:0};function X_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X_(Object(n),!0).forEach((function(t){$_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J_={isLoaded:!1,filters:[],changes:[],filteredChanges:[],maxChangesListed:100,showingSubset:!1,lastSequenceNum:null};function Y_(e,t,n){var r=Q_(Q_({},e),{},{lastSequenceNum:t,isLoaded:!0}),o=0===r.changes.length;r.changes.forEach((function(e){e.isNew=!1}));var i=n.map((function(e){var t=er(e.seq);return{id:e.id,seq:t,deleted:!!_.has(e,"deleted")&&e.deleted,changes:e.changes,doc:e.doc,isNew:!o}}));return r.changes=i.concat(r.changes),tv(r),r}function Z_(e,t){var n=e.filters.slice();n.push(t);var r=Q_(Q_({},e),{},{filters:n});return tv(r),r}function ev(e,t){var n=e.filters.slice(),r=n.indexOf(t);r>=0&&n.splice(r,1);var o=Q_(Q_({},e),{},{filters:n});return tv(o),o}function tv(e){e.showingSubset=!1;var t=0;e.filteredChanges=e.changes.filter((function(n){if(t>=e.maxChangesListed)return e.showingSubset=!0,!1;var r=JSON.stringify(n),o=e.filters.every((function(e){return new RegExp(e,"i").test(r)}));return o&&t++,o}))}function nv(e){return e||(e=""),e}function rv(e){return e?"/_partition/".concat(e):""}re.addReducers({indexResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yd,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case jf:var n=fd(fd({},e.resultsStyle),t.resultsStyle);return bd(n),fd(fd({},e),{},{resultsStyle:n});case Cf:return fd(fd({},yd),{},{noResultsWarning:e.noResultsWarning,selectedLayout:e.selectedLayout,selectedDocs:[],fetchParams:{limit:Uf()+1,skip:0},pagination:ld({},yd.pagination,{perPage:e.pagination.perPage}),queryOptionsPanel:ld({},yd.queryOptionsPanel,e.queryOptionsPanel,{reduce:!1,groupLevel:"exact",showReduce:!1}),isLoading:!1,resultsStyle:e.resultsStyle});case wf:return fd(fd({},e),{},{isLoading:!0});case xf:return ld({},e,{noResultsWarning:"The selected index does not support partitions. Switch back to global mode."});case kf:return ld({},e,{noResultsWarning:"The selected index requires a partition key. Use the selector at the top to enter a partition key."});case Rf:return fd(fd({},e),{},{selectedDocs:t.selectedDocs});case vf:var r=e.selectedLayout;return t.docType===_o&&e.selectedLayout===bo&&(r=yo),fd(fd({},e),{},{docs:t.docs,isLoading:!1,noResultsWarning:"",isEditable:!0,fetchParams:ld({},e.fetchParams,t.params),pagination:ld({},e.pagination,{canShowNext:t.canShowNext}),docType:t.docType,selectedLayout:r,executionStats:t.executionStats,warning:t.warning});case Ef:return fd(fd({},e),{},{selectedLayout:t.layout});case Of:return fd(fd({},e),{},{tableView:ld({},e.tableView,{showAllFieldsTableView:!e.tableView.showAllFieldsTableView,cachedFieldsTableView:e.tableView.selectedFieldsTableView})});case Pf:return fd(fd({},e),{},{tableView:ld({},e.tableView,{selectedFieldsTableView:t.selectedFieldsTableView})});case Sf:return ie.utils.localStorageSet("fauxton:perpageredux",t.perPage),fd(fd({},e),{},{pagination:ld({},yd.pagination,{perPage:t.perPage})});case Df:return fd(fd({},e),{},{pagination:ld({},e.pagination,{pageStart:e.pagination.pageStart+e.pagination.perPage,currentPage:e.pagination.currentPage+1})});case Nf:return fd(fd({},e),{},{pagination:ld({},e.pagination,{pageStart:e.pagination.pageStart-e.pagination.perPage,currentPage:e.pagination.currentPage-1})});case Tf:return t.options.includeDocs&&t.options.reduce||t.options.includeDocs&&e.queryOptionsPanel.reduce?t.options.reduce=!1:t.options.reduce&&e.queryOptionsPanel.includeDocs&&(t.options.includeDocs=!1),fd(fd({},e),{},{queryOptionsPanel:ld({},e.queryOptionsPanel,t.options)});default:return e}},mangoQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L_,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case Ng.MANGO_SET_DB:return C_(C_({},e),{},{database:n.database,historyKey:n.database?n.database.id:"default"});case Ng.MANGO_LOAD_QUERY_HISTORY:var r=M_(n.databaseName);return C_(C_({},e),{},{history:r,historyKey:n.databaseName+"_queryhistory",queryFindCode:JSON.parse(r[0].value)});case Ng.MANGO_NEW_QUERY_FIND_CODE:return C_(C_({},e),{},{queryFindCode:n.queryCode,history:U_(e,n.queryCode)});case Ng.MANGO_RESET:return C_(C_({},e),{},{getLoadingIndexes:n.isLoading});case Ng.MANGO_LOAD_INDEX_TEMPLATES:var o=A_();return C_(C_({},e),{},{queryIndexTemplates:o,queryIndexCode:JSON.parse(o[0].value)});case Ng.MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE:return C_(C_({},e),{},{queryIndexCode:n.code,queryIndexTemplates:q_(e,n.code,n.label)});case Ng.MANGO_SHOW_EXPLAIN_RESULTS:return C_(C_({},e),{},{explainPlan:n.explainPlan});case Ng.MANGO_HIDE_EXPLAIN_RESULTS:return C_(C_({},e),{},{explainPlan:!1});default:return e}},sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dl,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case Ps:return bl(e,n);case Cs:return hl(e,n);case Ts:return yl(e,t.designDoc,t.indexGroup);case xs:return pl(pl({},e),{},{loading:!0});case ks:return pl(pl({},e),{},{deleteIndexModalIndexName:n.indexName,deleteIndexModalDesignDocName:n.designDocName,deleteIndexModalVisible:!0,deleteIndexModalText:ae.createElement("div",null,"Are you sure you want to delete the ",ae.createElement("code",null,n.indexName)," ",n.indexLabel,"?"),deleteIndexModalOnSubmit:n.onDelete});case js:return pl(pl({},e),{},{deleteIndexModalVisible:!1});case Is:return pl(pl({},e),{},{cloneIndexModalIndexLabel:n.indexLabel,cloneIndexModalTitle:n.cloneIndexModalTitle,cloneIndexModalSourceIndexName:n.sourceIndexName,cloneIndexModalSourceDesignDocName:n.sourceDesignDocName,cloneIndexModalSelectedDesignDoc:"_design/"+n.sourceDesignDocName,cloneIndexDesignDocProp:"",cloneIndexModalVisible:!0,cloneIndexModalOnSubmit:n.onSubmit});case As:return pl(pl({},e),{},{cloneIndexModalVisible:!1});case Ls:return pl(pl({},e),{},{cloneIndexModalSelectedDesignDoc:n.value});case Ms:return pl(pl({},e),{},{cloneIndexModalNewDesignDocName:n.value});case Us:return pl(pl({},e),{},{cloneIndexModalNewDesignDocPartitioned:n.value});case qs:return pl(pl({},e),{},{cloneIndexModalNewIndexName:n.value});case Bs:return pl(pl({},e),{},{designDocs:n.designDocs,designDocList:ml(n.designDocs),loading:!1});default:return e}},revisionBrowser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Um,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case xm:var o=r.tree,i=r.doc,a=r.conflictDoc,s=r.conflictingRevs,c=r.databaseName;return Lm(Lm({},e),{},{tree:o,doc:i,conflictDoc:a,conflictingRevs:s,databaseName:c,theirs:a,ours:i});case km:return Lm(Lm({},e),{},{theirs:r.theirs});case jm:return Lm(Lm({},e),{},{isDiffViewEnabled:r.enableDiff});case Im:return Lm(Lm({},e),{},{showConfirmModal:r.show,docToWin:r.docToWin});default:return e}},partitionKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ey:return V_(V_({},e),{},{selectorVisible:!0});case Oy:return V_(V_({},e),{},{selectorVisible:!1});default:return e}},docEditor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W_,t=arguments.length>1?arguments[1]:void 0,n=t.options,r=t.type;switch(r){case jy:return H_({},W_);case Iy:var o=n.doc.get("_conflicts")?n.doc.get("_conflicts").length:0;return n.doc.unset("_conflicts"),H_(H_({},e),{},{isLoading:!1,doc:n.doc,docConflictCount:o});case Ay:return H_(H_({},e),{},{cloneDocModalVisible:!0});case Ly:return H_(H_({},e),{},{cloneDocModalVisible:!1});case My:return H_(H_({},e),{},{deleteDocModalVisible:!0});case Uy:return H_(H_({},e),{},{deleteDocModalVisible:!1});case qy:return H_(H_({},e),{},{uploadModalVisible:!0});case By:return H_(H_({},e),{},{uploadModalVisible:!1});case Fy:return H_(H_({},e),{},{numFilesUploaded:e.numFilesUploaded+1});case Ky:return H_(H_({},e),{},{uploadInProgress:!1,uploadPercentage:0,uploadErrorMessage:n.error});case Vy:return H_(H_({},e),{},{uploadInProgress:!1,uploadPercentage:0,uploadErrorMessage:""});case zy:return H_(H_({},e),{},{uploadInProgress:!0,uploadPercentage:0,fileUploadErrorMsg:""});case Hy:return H_(H_({},e),{},{uploadPercentage:n.percent});case Gy:return H_(H_({},e),{},{isSaving:!0});case Wy:return H_(H_({},e),{},{isSaving:!1});default:return e}},changes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case np:return e.lastSequenceNum!==t.seqNum?Y_(e,t.seqNum,t.changes):e;case rp:return Z_(e,t.filter);case op:return ev(e,t.filter);default:return e}},designDocInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N_,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case jp.DESIGN_FETCHING:return S_(S_({},e),{},{isLoading:!0});case jp.DESIGN_FETCHING_FAILED:return S_(S_({},e),{},{isLoading:!1,showLoadError:!0});case jp.DESIGN_DOC_MONITOR:return S_(S_({},e),{},{isLoading:!1,showLoadError:!1,viewIndex:n.designDocInfo.get("view_index")});case jp.DESIGN_DOC_REFRESH:return S_(S_({},e),{},{showLoadError:!1,viewIndex:n.designDocInfo.get("view_index")});default:return e}},indexEditor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yc,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case Dc:return Gc({},Yc);case Nc:case Rc:return Zc(e,n);case Ic:return Gc(Gc({},e),{},{viewName:t.name});case Pc:var r=t.reduceSelectedOption;return"NONE"===r&&(r=""),"CUSTOM"===r&&(r=Qc),Gc(Gc({},e),{},{view:Gc(Gc({},e.view),{},{reduce:r})});case xc:return Gc(Gc({},e),{},{designDocId:n.value});case Cc:case Tc:return e;case Ac:return Gc(Gc({},e),{},{designDocId:t.designDoc._id});case Lc:return Gc(Gc({},e),{},{view:Gc(Gc({},e.view),{},{map:t.code})});case Mc:return Gc(Gc({},e),{},{view:Gc(Gc({},e.view),{},{reduce:t.code})});case kc:return Gc(Gc({},e),{},{newDesignDocName:n.value});case jc:return Gc(Gc({},e),{},{newDesignDocPartitioned:n.value});default:return e}}}),re.registerUrls("allDocs",{server:function(e,t){return N.getServerUrl("/"+e+"/_all_docs"+nv(t))},app:function(e,t,n){return"database/"+e+rv(t)+"/_all_docs"+nv(n)},apiurl:function(e,t){return N.getApiUrl("/"+e+"/_all_docs"+nv(t))}}),re.registerUrls("partitioned_allDocs",{app:function(e,t,n){return"database/"+e+"/_partition/"+t+"/_all_docs"+nv(n)},apiurl:function(e,t,n){return N.getApiUrl("/"+e+"/_partition/"+t+"/_all_docs"+nv(n))},server:function(e,t,n){return N.getServerUrl("/"+e+"/_partition/"+t+"/_all_docs"+nv(n))}}),re.registerUrls("allDocsSanitized",{server:function(e,t){return e=encodeURIComponent(e),N.getServerUrl("/"+e+"/_all_docs"+nv(t))},app:function(e,t){return"database/"+(e=encodeURIComponent(e))+"/_all_docs"+nv(t)},apiurl:function(e,t){return e=encodeURIComponent(e),N.getApiUrl("/"+e+"/_all_docs"+nv(t))}}),re.registerUrls("bulk_docs",{server:function(e,t){return N.getServerUrl("/"+encodeURIComponent(e)+"/_bulk_docs"+nv(t))},app:function(e,t){return"database/"+e+"/_bulk_docs"+nv(t)},apiurl:function(e,t){return N.getApiUrl("/"+e+"/_bulk_docs"+nv(t))}}),re.registerUrls("revision-browser",{app:function(e,t){return"database/"+e+"/"+encodeURIComponent(t)+"/conflicts"}}),re.registerUrls("designDocs",{server:function(e,t){return N.getServerUrl("/"+e+"/"+t+"/_info")},app:function(e,t,n){return"database/"+e+rv(t)+"/_design/"+ie.utils.safeURLName(n)+"/_info"},apiurl:function(e,t){return N.getApiUrl("/"+e+"/"+t+"/_info")}}),re.registerUrls("view",{server:function(e,t,n,r){return N.getServerUrl("/"+e+rv(t)+"/_design/"+n+"/_view/"+r)},app:function(e,t){return"database/"+e+"/_design/"+t+"/_view/"},apiurl:function(e,t,n,r){return N.getApiUrl("/"+e+rv(t)+"/_design/"+n+"/_view/"+r)},edit:function(e,t,n,r){return"database/"+e+rv(t)+"/_design/"+n+"/_view/"+r+"/edit"},showView:function(e,t,n,r){return"/database/"+e+rv(t)+"/"+n+"/_view/"+r},fragment:function(e,t,n){return"database/"+e+t+"/_view/"+n}}),re.registerUrls("partitioned_view",{server:function(e,t,n,r){return N.getServerUrl("/"+e+"/_partition/"+t+"/_design/"+n+"/_view/"+r)},app:function(e,t,n){return"database/"+e+"/_partition/"+t+"/_design/"+n+"/_view/"},apiurl:function(e,t,n,r){return N.getApiUrl("/"+e+"/_partition/"+t+"/_design/"+n+"/_view/"+r)}}),re.registerUrls("document",{server:function(e,t,n){return _.isUndefined(n)&&(n=""),N.getServerUrl("/"+e+"/"+t+n)},attachment:function(e,t,n,r){return _.isUndefined(r)&&(r=""),N.getServerUrl("/"+e+"/"+t+"/"+n+r)},app:function(e,t){return"/database/"+e+"/"+t},apiurl:function(e,t){return t?N.getApiUrl("/"+e+"/"+t):N.getApiUrl("/"+e)},"web-index":function(e,t){return"/database/"+e+"/"+t}}),re.registerUrls("new",{newDocument:function(e){return"/database/"+e+"/_new"},newView:function(e,t){return"/database/"+e+rv(t)+"/new_view"},addView:function(e,t,n){return"/database/"+e+rv(t)+"/new_view/"+n}}),re.registerUrls("base",{server:function(e){return N.getServerUrl("/"+e+"/")},app:function(e){return"/database/"+e+"/"}}),re.registerUrls("mango",{"index-server":function(e,t){return t||(t=""),N.getServerUrl("/"+e+"/_index"+t)},"index-apiurl":function(e,t,n){return n||(n=""),N.getApiUrl("/"+e+rv(t)+"/_index"+n)},"index-app":function(e,t,n){return n||(n=""),"database/"+e+rv(t)+"/_index"+n},"index-server-bulk-delete":function(e){return N.getServerUrl("/"+e+"/_index/_bulk_delete")},"query-server":function(e,t,n){return n||(n=""),N.getServerUrl("/"+e+rv(t)+"/_find"+n)},"query-apiurl":function(e,t,n){return n||(n=""),N.getApiUrl("/"+e+rv(t)+"/_find"+n)},"query-app":function(e,t,n){return n||(n=""),"database/"+e+rv(t)+"/_find"+n},"explain-server":function(e,t){return N.getServerUrl("/"+e+rv(t)+"/_explain")},"explain-apiurl":function(e,t){return N.getApiUrl("/"+e+rv(t)+"/_explain")}});const ov=E_,iv=function(){return v(N.getServerUrl("/_membership")).then((function(e){if(!e.all_nodes){var t=e.reason?e.reason:"";throw new Error("Failed to load list of nodes."+t)}var n=e.all_nodes.reduce((function(t,n){var r=-1!==e.cluster_nodes.indexOf(n);return t.push({node:n,isInCluster:r}),t}),[]);return e.nodes_mapped=n,e}))},av="CLUSTER_FETCH_NODES",sv={fetchNodes:function(){var e=this;iv().then((function(t){e.updateNodes({nodes:t.nodes_mapped})})).catch((function(e){re.addNotification({type:"error",msg:e.message,clear:!0})}))},updateNodes:function(e){re.reduxDispatch({type:av,options:e})},navigateToNodeBasedOnNodeCount:function(e){iv().then((function(t){var n=t.all_nodes;return 1===n.length?re.navigate(e+n[0]):re.navigate("/cluster/disabled",{trigger:!0})})).catch((function(e){re.addNotification({type:"error",msg:e.message,clear:!0})}))}};function cv(e){return cv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cv(e)}function uv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pv(e,t){return pv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pv(e,t)}function fv(e,t){if(t&&("object"===cv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dv(e)}function dv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hv(e){return hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hv(e)}function yv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pv(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=hv(r);if(o){var n=hv(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return fv(this,e)});function a(){var e;uv(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yv(dv(e=i.call.apply(i,[this].concat(n))),"getNodeType",(function(){var t=e.props.clusterState;return"cluster_finished"===t?"clustered":"single_node_enabled"===t?"single":"unknown state"})),e}return t=a,(n=[{key:"render",value:function(){var e=this.getNodeType();return ae.createElement("div",{className:"setup-screen"},ie.i18n.en_US["couchdb-productname"]," is configured for production usage as a ",e," node!",ae.createElement("br",null),ae.createElement("br",null),"Do you want to ",ae.createElement("a",{href:"#replication"},"replicate data"),"?")}}])&&lv(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);bv.propTypes={clusterState:Nt().string};var mv="SETUP_SET_CLUSTERSTATUS",gv="SETUP_SET_USERNAME",_v="SETUP_SET_PASSWORD",vv="SETUP_BIND_ADDRESS_FOR_SINGLE_NODE",wv="SETUP_PORT_FOR_SINGLE_NODE",Ev="SETUP_PORT_ADDITIONAL_NODE",Ov="SETUP_BIND_ADDRESS_ADDITIONAL_NODE",Sv="SETUP_REMOTE_ADDRESS_ADDITIONAL_NODE",Dv="SETUP_RESET_ADDITIONAL_NODE",Nv="SETUP_ADD_NODE_TO_LIST",Rv="SETUP_NODE_COUNT";function Pv(){return Pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pv.apply(this,arguments)}function Cv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cv(Object(n),!0).forEach((function(t){xv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kv={clusterState:"",username:"",password:"",setupNode:{bindAddress:"0.0.0.0",port:5984,nodeCount:3},nodeList:[],additionalNode:{bindAddress:"0.0.0.0",port:5984,remoteAddress:"127.0.0.1"}},jv=function(e){return Tv(Tv({},e),{},{setupNode:Tv({},e.setupNode),additionalNode:Tv({},e.additionalNode)})},Iv=function(e,t,n){var r=jv(e);return s().isNaN(n)?r:s().set(r,t,n)},Av=function(e,t,n){var r=jv(e);return s().set(r,t,n)},Lv=function(e){return e.additionalNode=Pv({},kv.additionalNode),e},Mv=function(e){return e.clusterState},Uv=function(e){return e.nodeList},qv=function(){return re.session.isAdminParty()},Bv=function(e){return e.username},Vv=function(e){return e.password},Fv=function(e){return e.setupNode},Kv=function(e){return e.setupNode.bindAddress};const zv=(0,Rt.$j)((function(e){var t=e.setup;return{clusterState:Mv(t)}}))(bv);function Hv(e){return Hv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hv(e)}function Gv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xv(e,t){return Xv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xv(e,t)}function Qv(e,t){if(t&&("object"===Hv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $v(e)}function $v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jv(e){return Jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jv(e)}function Yv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zv,ew=ga.ConfirmButton,tw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xv(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Jv(r);if(o){var n=Jv(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Qv(this,e)});function a(){var e;Gv(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Yv($v(e=i.call.apply(i,[this].concat(n))),"redirectToSingleNodeSetup",(function(e){e.preventDefault(),re.navigate("#setup/singlenode")})),Yv($v(e),"redirectToMultiNodeSetup",(function(e){e.preventDefault(),re.navigate("#setup/multinode")})),e}return t=a,(n=[{key:"UNSAFE_componentWillMount",value:function(){this.props.getClusterState()}},{key:"render",value:function(){return"cluster_finished"===this.props.clusterState||"single_node_enabled"===this.props.clusterState?ae.createElement(bv,this.props):ae.createElement("div",{className:"setup-screen"},ae.createElement("h2",null,"Welcome to ",ie.i18n.en_US["couchdb-productname"],"!"),ae.createElement("p",null,"This wizard should be run directly on the node, rather than through a load-balancer."),ae.createElement("p",null,"You can configure a single node, or a multi-node CouchDB installation."),ae.createElement("div",null,ae.createElement(ew,{onClick:this.redirectToMultiNodeSetup,showIcon:!1,text:"Configure a Cluster"}),ae.createElement(ew,{onClick:this.redirectToSingleNodeSetup,showIcon:!1,id:"setup-btn-no-thanks",text:"Configure a Single Node"})))}}])&&Wv(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function nw(e){return s().isEmpty(e.username)?"Admin name is required":s().isEmpty(e.password)?"Admin password is required":e.bind_address&&"127.0.0.1"===e.bind_address&&!e.singlenode?"Bind address can not be 127.0.0.1":e.port&&s().isNaN(+e.port)?"Bind port must be a number":e.nodeCount&&s().isNaN(+e.nodeCount)?"Node count must be a number":!!(0===e.nodeCount||e.nodeCount&&e.nodeCount<1)&&"Node count must be >= 1"}tw.propTypes={clusterState:Nt().string};const rw=function(e){var t=e.name,n=e.password,r=e.node,o=N.getServerUrl("/_node/".concat(r,"/_config/admins/").concat(t));return O(o,n)},ow=function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(n.body=t),S(e,"POST",n)}(N.getServerUrl("/_session"),ie.utils.queryParams(e))},iw=function(){return Zv=null,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(n.body=t),S(e,"DELETE",n)}(N.getServerUrl("/_session"),ie.utils.queryParams({username:"_",password:"_"}))},aw=function(){if(Zv)return Zv;var e=N.getServerUrl("/_session"),t=v(e).then((function(e){return e.userCtx.name&&(Zv=t),e.userCtx}));return t};function sw(e){return sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sw(e)}function cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cw(Object(n),!0).forEach((function(t){lw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pw(){pw=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=v(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l={};function p(){}function f(){}function d(){}var h={};s(h,o,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(S([])));b&&b!==t&&n.call(b,o)&&(h=b);var m=d.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(o,i,a,s){var c=u(e[o],e,i);if("throw"!==c.type){var l=c.arg,p=l.value;return p&&"object"==sw(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function v(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,v(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function S(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:D}}function D(){return{value:void 0,done:!0}}return f.prototype=d,s(m,"constructor",d),s(d,"constructor",f),f.displayName=s(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(_.prototype),s(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new _(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(m),s(m,a,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function fw(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function dw(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){fw(i,r,o,a,s,"next",e)}function s(e){fw(i,r,o,a,s,"throw",e)}a(void 0)}))}}var hw=function(e,t){var n=t?" Error:"+t:"";re.addNotification({msg:e+n,type:"error",fade:!1,clear:!0})},yw=function(e){return{type:gv,options:{value:e}}},bw=function(e){return{type:_v,options:{value:e}}},mw=function(e){return{type:wv,options:{value:e}}},gw=function(e){return{type:vv,options:{value:e}}};const _w=(0,Rt.$j)((function(e){var t=e.setup;return{clusterState:Mv(t)}}),(function(e){return{getClusterState:function(){e(function(){var e=dw(pw().mark((function e(t){var n,r;return pw().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=re.urls("cluster_setup","server"),e.next=3,v(n);case 3:r=e.sent,t({type:mv,options:{state:r.state}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))(tw);function vw(e){return vw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vw(e)}function ww(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ew(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ow(e,t){return Ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ow(e,t)}function Sw(e,t){if(t&&("object"===vw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Dw(e){return Dw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dw(e)}var Nw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ow(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Dw(r);if(o){var n=Dw(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Sw(this,e)});function a(){return ww(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e="Specify your Admin credentials";return this.props.isAdminParty&&(e="Create Admin credentials."),ae.createElement("div",{className:"setup-creds"},ae.createElement("div",null,ae.createElement("p",null,e)),ae.createElement("input",{className:"setup-username",onChange:this.props.onAlterUsername,placeholder:"Username",value:this.props.username,type:"text"}),ae.createElement("input",{className:"setup-password",onChange:this.props.onAlterPassword,placeholder:"Password",value:this.props.password,type:"password"}))}}])&&Ew(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Rw(e){return Rw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rw(e)}function Pw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tw(e,t){return Tw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tw(e,t)}function xw(e,t){if(t&&("object"===Rw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kw(e)}function kw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jw(e){return jw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jw(e)}function Iw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Nw.propTypes={onAlterUsername:Nt().func.isRequired,onAlterPassword:Nt().func.isRequired,username:Nt().string.isRequired,password:Nt().string.isRequired,isAdminParty:Nt().bool};var Aw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tw(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=jw(r);if(o){var n=jw(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return xw(this,e)});function a(){var e;Pw(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Iw(kw(e=i.call.apply(i,[this].concat(n))),"handleIpChange",(function(t){e.props.onAlterBindAddress(t)})),Iw(kw(e),"handlePortChange",(function(t){e.props.onAlterPort(t)})),e}return t=a,(n=[{key:"render",value:function(){return ae.createElement("div",{className:"setup-opt-settings"},ae.createElement("p",null,"Bind address the node will listen on"),ae.createElement("input",{className:"setup-input-ip",value:this.props.ip,onChange:this.handleIpChange,placeholder:"IP Address",type:"text"}),ae.createElement("div",{className:"setup-port"},ae.createElement("p",null,"Port that the node will use"),ae.createElement("input",{className:"setup-input-port",value:this.props.port,onChange:this.handlePortChange,type:"text"})))}}])&&Cw(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Lw(e){return Lw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lw(e)}function Mw(){return Mw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mw.apply(this,arguments)}function Uw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qw(e,t){return qw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qw(e,t)}function Bw(e,t){if(t&&("object"===Lw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vw(e)}function Vw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fw(e){return Fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fw(e)}function Kw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Aw.propTypes={ip:Nt().string.isRequired,port:Nt().number.isRequired,onAlterBindAddress:Nt().func.isRequired,onAlterPort:Nt().func.isRequired};var zw=ga.ConfirmButton,Hw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qw(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fw(r);if(o){var n=Fw(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Bw(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Kw(Vw(e=i.call(this)),"onChangeUsername",(function(t){return e.props.alterUsername(t.target.value)})),Kw(Vw(e),"onChangePassword",(function(t){return e.props.alterPassword(t.target.value)})),Kw(Vw(e),"onChangeBindAddress",(function(t){return e.props.alterBindAddress(t.target.value)})),Kw(Vw(e),"onChangePort",(function(t){return e.props.alterPort(t.target.value)})),Kw(Vw(e),"finishSingleNode",(function(t){t.preventDefault();var n=e.props,r={username:n.username,password:n.password},o={port:n.port,bindAddress:n.bindAddress};e.props.setupSingleNode(r,o)})),e.finishSingleNode=e.finishSingleNode.bind(Vw(e)),e.onChangeUsername=e.onChangeUsername.bind(Vw(e)),e.onChangePassword=e.onChangePassword.bind(Vw(e)),e.onChangeBindAddress=e.onChangeBindAddress.bind(Vw(e)),e.onChangePort=e.onChangePort.bind(Vw(e)),e}return t=a,(n=[{key:"render",value:function(){return ae.createElement("div",{className:"setup-nodes"},ae.createElement("div",{className:"setup-setupnode-section"},ae.createElement(Nw,Mw({},this.props,{onAlterUsername:this.onChangeUsername,onAlterPassword:this.onChangePassword})),ae.createElement(Aw,Mw({},this.props,{onAlterPort:this.onChangePort,onAlterBindAddress:this.onChangeBindAddress,ip:this.props.bindAddress,port:this.props.port})),ae.createElement(zw,Mw({},this.props,{onClick:this.finishSingleNode,text:"Configure Node"}))))}}])&&Uw(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);Hw.propTypes={username:Nt().string.isRequired,password:Nt().string.isRequired,port:Nt().number.isRequired,bindAddress:Nt().string.isRequired,isAdminParty:Nt().bool.isRequired};const Gw=(0,Rt.$j)((function(e){var t,n=e.setup;return{nodeList:Uv(n),isAdminParty:qv(),setupNode:Fv(n),username:Bv(n),password:Vv(n),port:(t=n,t.setupNode.port),bindAddress:Kv(n)}}),(function(e){return{alterUsername:function(t){e(yw(t))},alterPassword:function(t){e(bw(t))},alterBindAddress:function(t){e(gw(t))},alterPort:function(t){e(mw(t))},setupSingleNode:function(t,n){e(function(e,t){return dw(pw().mark((function n(){var r,o,i,a,s,c;return pw().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=re.urls("cluster_setup","server"),o={action:"enable_single_node",username:e.username,password:e.password,bind_address:t.bindAddress,port:t.port,singlenode:!0},!(i=nw(o))){n.next=5;break}return n.abrupt("return",hw(i));case 5:return n.prev=5,n.next=8,E(r,o,{raw:!0});case 8:if((a=n.sent).ok){n.next=15;break}return n.next=12,a.json();case 12:return s=n.sent,c=s.reason?s.reason:s.error,n.abrupt("return",hw(c));case 15:return n.next=17,ow({name:e.username,password:e.password});case 17:re.addNotification({msg:"Single node setup successful.",type:"success",fade:!1,clear:!0}),re.navigate("#setup/finish"),n.next=24;break;case 21:n.prev=21,n.t0=n.catch(5),hw("The cluster has not been setuped successfully.",n.t0);case 24:case"end":return n.stop()}}),n,null,[[5,21]])})))}(t,n))}}}))(Hw);function Ww(e){return Ww="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ww(e)}function Xw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $w(e,t){return $w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$w(e,t)}function Jw(e,t){if(t&&("object"===Ww(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Yw(e)}function Yw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zw(e){return Zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zw(e)}function eE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$w(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Zw(r);if(o){var n=Zw(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Jw(this,e)});function a(){var e;Xw(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return eE(Yw(e=i.call.apply(i,[this].concat(n))),"handleNodeCountChange",(function(t){e.props.onAlterNodeCount(t)})),e}return t=a,(n=[{key:"render",value:function(){return ae.createElement("div",{className:"setup-node-count"},ae.createElement("p",null,"Number of nodes to be added to the cluster (including this one)"),ae.createElement("input",{className:"setup-input-nodecount",value:this.props.nodeCount,onChange:this.handleNodeCountChange,placeholder:"Value of cluster n",type:"text"}))}}])&&Qw(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function nE(e){return nE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nE(e)}function rE(){return rE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rE.apply(this,arguments)}function oE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aE(e,t){return aE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},aE(e,t)}function sE(e,t){if(t&&("object"===nE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cE(e)}function cE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uE(e){return uE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},uE(e)}function lE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}tE.propTypes={onAlterNodeCount:Nt().func.isRequired,nodeCount:Nt().number.isRequired};var pE=ga.ConfirmButton,fE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aE(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=uE(r);if(o){var n=uE(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return sE(this,e)});function a(){var e;oE(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return lE(cE(e=i.call.apply(i,[this].concat(n))),"getNodeList",(function(){return e.props.nodeList.map((function(e,t){return ae.createElement("div",{key:t,className:"node-item"},e.remoteAddress,":",e.port)}))})),lE(cE(e),"_addNode",(function(){var t=e.props,n=t.username,r=t.password,o=t.setupNode,i=t.additionalNode;e.props.addNode(e.isAdminParty,{username:n,password:r},o,i)})),lE(cE(e),"_alterPortAdditionalNode",(function(t){e.props.alterPortAdditionalNode(t.target.value)})),lE(cE(e),"_alterBindAddressAdditionalNode",(function(t){e.props.alterBindAddressAdditionalNode(t.target.value)})),lE(cE(e),"_alterRemoteAddressAdditionalNode",(function(t){e.props.alterRemoteAddressAdditionalNode(t.target.value)})),lE(cE(e),"_alterUsername",(function(t){e.props.alterUsername(t.target.value)})),lE(cE(e),"_alterPassword",(function(t){e.props.alterPassword(t.target.value)})),lE(cE(e),"_alterBindAddressSetupNode",(function(t){e.props.alterBindAddressForSetupNode(t.target.value)})),lE(cE(e),"_alterPortSetupNode",(function(t){e.props.alterPortForSetupNode(t.target.value)})),lE(cE(e),"_alterNodeCount",(function(t){e.props.alterNodeCount(t.target.value)})),lE(cE(e),"_finishClusterSetup",(function(){e.props.finishClusterSetup("CouchDB Cluster set up!")})),e}return t=a,(n=[{key:"componentDidMount",value:function(){this.isAdminParty=qv()}},{key:"render",value:function(){var e=this.props,t=e.setupNode,n=e.additionalNode;return ae.createElement("div",{className:"setup-nodes"},"Setup your initial base-node, afterwards add the other nodes that you want to add",ae.createElement("div",{className:"setup-setupnode-section"},ae.createElement(Nw,rE({},this.props,{onAlterUsername:this._alterUsername,onAlterPassword:this._alterPassword})),ae.createElement(Aw,rE({},this.props,{onAlterPort:this._alterPortSetupNode,onAlterBindAddress:this._alterBindAddressSetupNode,ip:t.bindAddress,port:t.port})),ae.createElement(tE,rE({},this.props,{onAlterNodeCount:this._alterNodeCount,nodeCount:t.nodeCount}))),ae.createElement("hr",null),ae.createElement("div",{className:"setup-add-nodes-section"},ae.createElement("h2",null,"Add Nodes to the Cluster"),ae.createElement("p",null,"Remote host"),ae.createElement("input",{value:n.remoteAddress,onChange:this._alterRemoteAddressAdditionalNode,className:"input-remote-node",type:"text",placeholder:"IP Address"}),ae.createElement(Aw,rE({},this.props,{onAlterPort:this._alterPortAdditionalNode,onAlterBindAddress:this._alterBindAddressAdditionalNode,ip:n.bindAddress,port:n.port})),ae.createElement("div",{className:"setup-add-button"},ae.createElement(pE,{onClick:this._addNode,showIcon:!1,id:"setup-btn-no-thanks",text:"Add Node"}))),ae.createElement("div",{className:"setup-nodelist"},this.getNodeList()),ae.createElement("div",{className:"centered setup-finish"},ae.createElement(pE,{onClick:this._finishClusterSetup,showIcon:!1,text:"Configure Cluster"})))}}])&&iE(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);fE.propTypes={username:Nt().string.isRequired,password:Nt().string.isRequired,nodeList:Nt().array.isRequired,isAdminParty:Nt().bool.isRequired,setupNode:Nt().shape({bindAddress:Nt().string.isRequired,port:Nt().number.isRequired,nodeCount:Nt().number.isRequired}).isRequired,additionalNode:Nt().shape({bindAddress:Nt().string.isRequired,port:Nt().number.isRequired,remoteAddress:Nt().string.isRequired}).isRequired};const dE=(0,Rt.$j)((function(e){var t,n=e.setup;return{nodeList:Uv(n),isAdminParty:qv(),setupNode:Fv(n),username:Bv(n),password:Vv(n),additionalNode:(t=n,t.additionalNode)}}),(function(e){return{addNode:function(t,n,r,o){e(function(e,t,n,r){return function(){var o=dw(pw().mark((function o(i){var a,s,c,u,l,p;return pw().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=re.urls("cluster_setup","server"),s={action:"enable_cluster",username:t.username,password:t.password,bind_address:n.bindAddress,port:n.port,node_count:n.nodeCount,singlenode:!1},!(c=nw(uw({username:t.username,password:t.password},n)))){o.next=5;break}return o.abrupt("return",hw(c));case 5:if(u={action:"enable_cluster",username:t.username,password:t.password,bind_address:r.bindAddress,port:r.port,node_count:n.nodeCount,remote_node:r.remoteAddress,remote_current_user:t.username,remote_current_password:t.password},e&&(delete u.remote_current_user,delete u.remote_current_password),!(l=nw(u))){o.next=10;break}return o.abrupt("return",hw(l));case 10:return p=function(){var e=dw(pw().mark((function e(){var n,o,s,c,l,p,f;return pw().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={action:"add_node",username:t.username,password:t.password,host:r.remoteAddress,port:r.port,singlenode:!1},e.next=3,E(a,u,{raw:!0});case 3:if((o=e.sent).ok){e.next=10;break}return e.next=7,o.json();case 7:return s=e.sent,c=s.reason?s.reason:s.error,e.abrupt("return",hw(c));case 10:return e.next=12,E(a,n,{raw:!0});case 12:if((l=e.sent).ok){e.next=19;break}return e.next=16,l.json();case 16:return p=e.sent,f=p.reason?p.reason:p.error,e.abrupt("return",hw(f));case 19:i({type:Nv,options:{value:{port:r.port,remoteAddress:r.remoteAddress}}}),re.addNotification({msg:"Added node",type:"success",fade:!1,clear:!0});case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o.prev=11,o.next=14,E(a,s,{raw:!0});case 14:return o.next=16,ow({name:t.username,password:t.password});case 16:return o.next=18,p();case 18:o.next=23;break;case 20:o.prev=20,o.t0=o.catch(11),hw("An error occured while adding the node.",o.t0);case 23:case"end":return o.stop()}}),o,null,[[11,20]])})));return function(e){return o.apply(this,arguments)}}()}(t,n,r,o))},alterPortAdditionalNode:function(t){e(function(e){return{type:Ev,options:{value:e}}}(t))},alterBindAddressAdditionalNode:function(t){e(function(e){return{type:Ov,options:{value:e}}}(t))},alterRemoteAddressAdditionalNode:function(t){e(function(e){return{type:Sv,options:{value:e}}}(t))},alterUsername:function(t){e(yw(t))},alterPassword:function(t){e(bw(t))},alterBindAddressForSetupNode:function(t){e(gw(t))},alterPortForSetupNode:function(t){e(mw(t))},finishClusterSetup:function(t){var n;e((n=t,dw(pw().mark((function e(){var t,r,o,i;return pw().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=re.urls("cluster_setup","server"),r={action:"finish_cluster"},e.prev=2,e.next=5,E(t,r,{raw:!0});case 5:if(!(o=e.sent).ok){e.next=11;break}re.addNotification({msg:n,type:"success",fade:!1,clear:!0}),re.navigate("#setup/finish"),e.next=15;break;case 11:return e.next=13,o.json();case 13:i=e.sent,hw("The cluster is already finished",i.reason);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),hw("There was an error. Please check your setup and try again.",e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,17]])})))))},alterNodeCount:function(t){e(function(e){return{type:Rv,options:{value:e}}}(t))}}}))(fE);var hE=re.RouteObject.extend({roles:["_admin"],selectedHeader:"Setup",routes:{setup:"setupInitView","setup/finish":"finishView","setup/singlenode":"setupSingleNode","setup/multinode":"setupMultiNode"},setupInitView:function(){var e=re.urls("cluster_setup","apiurl");return sv.fetchNodes(),ae.createElement(Qt,{component:ae.createElement(_w,null),endpoint:e,docURL:re.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+ie.i18n.en_US["couchdb-productname"]}]})},setupSingleNode:function(){var e=re.urls("cluster_setup","apiurl");return sv.fetchNodes(),ae.createElement(Qt,{component:ae.createElement(Gw,null),endpoint:e,docURL:re.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+ie.i18n.en_US["couchdb-productname"]}]})},setupMultiNode:function(){var e=re.urls("cluster_setup","apiurl");return sv.fetchNodes(),ae.createElement(Qt,{component:ae.createElement(dE,null),endpoint:e,docURL:re.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+ie.i18n.en_US["couchdb-productname"]}]})},finishView:function(){var e=re.urls("cluster_setup","apiurl");return ae.createElement(Qt,{component:ae.createElement(zv,null),endpoint:e,docURL:re.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+ie.i18n.en_US["couchdb-productname"]}]})}});const yE={RouteObjects:[hE],initialize:function(){re.addHeaderLink({title:"Setup",href:"#/setup",icon:"fonticon-wrench"})}};re.addReducers({setup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kv,t=arguments.length>1?arguments[1]:void 0,n=t.options,r=t.type;switch(r){case mv:return Av(e,"clusterState",n.state);case gv:return Av(e,"username",n.value);case _v:return Av(e,"password",n.value);case vv:return Av(e,"setupNode.bindAddress",n.value);case wv:return Iv(e,"setupNode.port",parseInt(n.value));case Ev:return Iv(e,"additionalNode.port",parseInt(n.value));case Ov:return Av(e,"additionalNode.bindAddress",n.value);case Sv:return Av(e,"additionalNode.remoteAddress",n.value);case Nv:var o=jv(e);return o.nodeList.push(n.value),Lv(o),o;case Dv:return Lv(jv(e));case Rv:return Iv(e,"setupNode.nodeCount",parseInt(n.value));default:return e}}}),re.registerUrls("cluster_setup",{server:function(){return ie.host+"/_cluster_setup"},app:function(){return"/_cluster_setup"},apiurl:function(){return window.location.origin+"/_cluster_setup"}});const bE=yE;function mE(e){return mE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mE(e)}function gE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vE(e,t){return vE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vE(e,t)}function wE(e,t){if(t&&("object"===mE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return EE(e)}function EE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OE(e){return OE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},OE(e)}function SE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var DE=ga.TabElement,NE=ga.TabElementWrapper,RE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vE(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=OE(r);if(o){var n=OE(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return wE(this,e)});function a(){var e;gE(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return SE(EE(e=i.call.apply(i,[this].concat(n))),"checked",(function(t){return e.props.selectedRadio===t})),SE(EE(e),"onRadioClick",(function(t){var n=t.target.value;e.props.onRadioClick(n)})),SE(EE(e),"createFilterTabs",(function(){return e.props.radioNames.map((function(t,n){var r=e.checked(t);return ae.createElement(DE,{key:n,selected:r,text:t,onChange:e.onRadioClick})}))})),SE(EE(e),"searchTermChange",(function(t){var n=t.target.value;e.props.onSearch(n)})),e}return t=a,(n=[{key:"render",value:function(){var e=this.createFilterTabs();return ae.createElement(NE,null,e,ae.createElement("li",{className:"component-tab-list-element"},ae.createElement("input",{id:"active-tasks-search-box",className:"searchbox",type:"text",name:"search",placeholder:"Search for databases...",value:this.props.searchTerm,onChange:this.searchTermChange})))}}])&&_E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function PE(e){return PE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PE(e)}function CE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xE(e,t){return xE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xE(e,t)}function kE(e,t){if(t&&("object"===PE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jE(e)}function jE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IE(e){return IE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},IE(e)}function AE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}SE(RE,"defaultProps",{radioNames:["All Tasks","Replication","Database Compaction","Indexer","View Compaction"]});var LE=function(e){return[ie.helpers.formatDate(e),ie.helpers.getDateFromNow(e)]},ME=function(e){var t=e.type,n=[];return"replication"===t?(n.push("From: "+e.source),n.push("To: "+e.target)):"indexer"===t?(n.push(e.database),n.push("(View: "+e.design_document+")")):n.push(e.database),n},UE=function(e){var t=[],n=e.type;return _.has(e,"progress")&&t.push("Progress: "+e.progress+"%"),"indexer"===n?t.push("Processed "+e.changes_done+" of "+e.total_changes+" changes."):"replication"===n&&(t.push(e.docs_written+" docs written."),_.has(e,"changes_pending")&&t.push(e.changes_pending+" pending changes.")),_.has(e,"changes_done")&&t.push(e.changes_done+" Changes done."),t},qE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xE(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=IE(r);if(o){var n=IE(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return kE(this,e)});function a(){var e;CE(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return AE(jE(e=i.call.apply(i,[this].concat(n))),"getInfo",(function(e){return{type:e.type,objectField:ME(e),started_on:LE(e.started_on),updated_on:LE(e.updated_on),pid:e.pid.replace(/[<>]/g,""),progress:UE(e)}})),AE(jE(e),"multilineMessage",(function(e,t){t||(t="");var n="multiline-active-tasks-message "+t;return e.map((function(e,t){return ae.createElement("p",{key:t,className:n},e)}))})),e}return t=a,(n=[{key:"render",value:function(){var e=this.getInfo(this.props.item),t=this.multilineMessage(e.objectField,"to-from-database"),n=this.multilineMessage(e.started_on,"time"),r=this.multilineMessage(e.updated_on,"time"),o=this.multilineMessage(e.progress);return ae.createElement("tr",null,ae.createElement("td",null,e.type),ae.createElement("td",null,t),ae.createElement("td",null,n),ae.createElement("td",null,r),ae.createElement("td",null,e.pid),ae.createElement("td",null,o))}}])&&TE(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function BE(e){return BE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BE(e)}function VE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KE(e,t){return KE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},KE(e,t)}function zE(e,t){if(t&&("object"===BE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return HE(e)}function HE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GE(e){return GE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},GE(e)}function WE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var XE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KE(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=GE(r);if(o){var n=GE(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return zE(this,e)});function a(){var e;VE(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return WE(HE(e=i.call.apply(i,[this].concat(n))),"createRows",(function(){var t=""===e.props.searchTerm.trim();return 0===e.props.tasks.length||e.props.isLoading?t?e.noActiveTasks():e.noActiveTasksMatchFilter():e.props.tasks.map((function(e,t){return ae.createElement(qE,{key:t,item:e})}))})),WE(HE(e),"getType",(function(){var t=e.props.selectedRadio;return"All Tasks"===t?"":t})),WE(HE(e),"noActiveTasks",(function(){var t=e.getType(),n=ae.createElement("td",{colSpan:"6"},"No active ",t," tasks.");return e.props.isLoading&&(n=ae.createElement("td",{colSpan:"6"},"Loading tasks.")),ae.createElement("tr",{className:"no-matching-database-on-search"},n)})),WE(HE(e),"noActiveTasksMatchFilter",(function(){var t=e.getType();return ae.createElement("tr",{className:"no-matching-database-on-search"},ae.createElement("td",{colSpan:"6"},"No active ",t,' tasks match with filter: "',e.props.searchTerm,'"'))})),e}return t=a,(n=[{key:"render",value:function(){return ae.createElement("tbody",{className:"js-tasks-go-here"},this.createRows())}}])&&FE(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function QE(e){return QE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QE(e)}function $E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function YE(e,t,n){return t&&JE(e.prototype,t),n&&JE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZE(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eO(e,t)}function eO(e,t){return eO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},eO(e,t)}function tO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oO(e);if(t){var o=oO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return nO(this,n)}}function nO(e,t){if(t&&("object"===QE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rO(e)}function rO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oO(e){return oO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oO(e)}function iO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aO=function(e){ZE(n,e);var t=tO(n);function n(e){var r;return $E(this,n),iO(rO(r=t.call(this,e)),"arrow",(function(){var e=r.props.sortByHeader,t=r.props.headerName,n=r.props.headerIsAscending?"icon icon-caret-up":"icon icon-caret-down";if(e===t)return ae.createElement("i",{className:n})})),iO(rO(r),"onTableHeaderClick",(function(){r.props.onTableHeaderClick(r.props.headerName)})),r.onTableHeaderClick=r.onTableHeaderClick.bind(rO(r)),r}return YE(n,[{key:"render",value:function(){return ae.createElement("td",{className:"header-field ".concat(this.props.headerName," tableheader"),onClick:this.onTableHeaderClick},ae.createElement("label",{className:"header-field label-text active-tasks-header noselect"},this.props.displayName," ",this.arrow()))}}]),n}(ae.Component),sO=function(e){ZE(n,e);var t=tO(n);function n(){var e;$E(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return iO(rO(e=t.call.apply(t,[this].concat(o))),"createTableHeadingFields",(function(){var t=e.props,n=t.onTableHeaderClick,r=t.sortByHeader,o=t.headerIsAscending;return e.props.headerNames.map((function(e){return ae.createElement(aO,{headerName:e[0],displayName:e[1],key:e[0],onTableHeaderClick:n,sortByHeader:r,headerIsAscending:o})}))})),e}return YE(n,[{key:"render",value:function(){return ae.createElement("thead",null,ae.createElement("tr",null,this.createTableHeadingFields()))}}]),n}(ae.Component);function cO(e){return cO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cO(e)}function uO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pO(e,t){return pO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pO(e,t)}function fO(e,t){if(t&&("object"===cO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function dO(e){return dO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dO(e)}iO(sO,"defaultProps",{headerNames:[["type","Type"],["database","Database"],["started-on","Started on"],["updated-on","Updated on"],["pid","PID"],["progress","Status"]]});var hO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pO(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=dO(r);if(o){var n=dO(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return fO(this,e)});function a(){return uO(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.tasks,n=e.selectedRadio,r=e.searchTerm,o=e.sortByHeader,i=e.onTableHeaderClick,a=e.headerIsAscending,s=e.isLoading;return ae.createElement("div",{id:"dashboard-lower-content"},ae.createElement("table",{id:"active-tasks-table",className:"table table-bordered table-striped active-tasks"},ae.createElement(sO,{onTableHeaderClick:i,sortByHeader:o,headerIsAscending:a}),ae.createElement(XE,{tasks:t,selectedRadio:n,isLoading:s,searchTerm:r})))}}])&&lO(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function yO(e){return yO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yO(e)}function bO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gO(e,t){return gO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gO(e,t)}function _O(e,t){if(t&&("object"===yO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vO(e)}function vO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wO(e){return wO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wO(e)}function EO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var OO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gO(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wO(r);if(o){var n=wO(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _O(this,e)});function a(){var e;bO(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return EO(vO(e=i.call.apply(i,[this].concat(n))),"setNewSearchTerm",(function(t){e.props.setSearchTerm(t)})),EO(vO(e),"switchTab",(function(t){e.props.switchTab(t)})),EO(vO(e),"tableHeaderOnClick",(function(t){e.props.sortByColumnHeader(t)})),e}return t=a,n=[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.tasks,r=e.searchTerm,o=e.selectedRadio,i=e.sortByHeader,a=e.headerIsAscending,s=this.setNewSearchTerm,c=this.tableHeaderOnClick;return ae.createElement("div",{id:"active-tasks-page",className:"scrollable"},ae.createElement("div",{className:"inner"},ae.createElement(RE,{searchTerm:r,selectedRadio:o,onSearch:s,onRadioClick:this.switchTab}),ae.createElement(hO,{isLoading:t,tasks:n,searchTerm:r,selectedRadio:o,onTableHeaderClick:c,sortByHeader:i,headerIsAscending:a})))}}],n&&mO(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function SO(e){return SO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SO(e)}function DO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function RO(e,t){return RO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},RO(e,t)}function PO(e,t){if(t&&("object"===SO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return CO(e)}function CO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TO(e){return TO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},TO(e)}function xO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kO=ga.Polling,jO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RO(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=TO(r);if(o){var n=TO(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return PO(this,e)});function a(){var e;DO(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return xO(CO(e=i.call.apply(i,[this].concat(n))),"runPollingUpdate",(function(){e.props.runPollingUpdate()})),xO(CO(e),"getPluralForLabel",(function(){return"1"===e.state.pollingInterval?"":"s"})),e}return t=a,(n=[{key:"render",value:function(){var e="active-tasks__polling-wrapper";return N.isIE1X()&&(e+=" "+e+"--ie1X"),ae.createElement("div",{className:e},ae.createElement(kO,{min:1,max:30,stepSize:1,startValue:15,valueUnits:"second",onPoll:this.runPollingUpdate}))}}])&&NO(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component),IO=[{name:"Active Tasks"}];const AO={ACTIVE_TASKS_SWITCH_TAB:"ACTIVE_TASKS_SWITCH_TAB",ACTIVE_TASKS_SET_COLLECTION:"ACTIVE_TASKS_SET_COLLECTION",ACTIVE_TASKS_SET_SEARCH_TERM:"ACTIVE_TASKS_SET_SEARCH_TERM",ACTIVE_TASKS_SORT_BY_COLUMN_HEADER:"ACTIVE_TASKS_SORT_BY_COLUMN_HEADER",ACTIVE_TASKS_FETCH_AND_SET:"ACTIVE_TASKS_FETCH_AND_SET",ACTIVE_TASKS_SET_IS_LOADING:"ACTIVE_TASKS_SET_IS_LOADING",ACTIVE_TASKS_POLLING_COLLECTION:"ACTIVE_TASKS_POLLING_COLLECTION"},LO=function(){return v(N.getServerUrl("/_active_tasks")).then((function(e){if(e.error)throw new Error(e.reason);return e}))};var MO=function(e){return{type:AO.ACTIVE_TASKS_SET_IS_LOADING,options:e}},UO=function(e){return{type:AO.ACTIVE_TASKS_FETCH_AND_SET,options:e}};function qO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qO(Object(n),!0).forEach((function(t){VO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function VO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var FO={isLoading:!1,sortByHeader:"started-on",headerIsAscending:!0,selectedRadio:"All Tasks",searchTerm:"",tasks:[],filteredTasks:[]},KO=function(e,t){var n=zO(t,e.selectedRadio,e.sortbyHeader,e.tasks,e.headerIsAscending);return BO(BO({},e),{},{filteredTasks:n,searchTerm:t})},zO=function(e,t,n,r,o){var i=r.filter((function(n){return function(e,t){var n=t.toLowerCase().replace(" ","_");return e.type===n||"all_tasks"===n}(n,t)&&function(e,t){var n=new RegExp(t,"g"),r="";return(0,a.has)(e,"database")&&(r+=e.database),(0,a.has)(e,"source")&&(r+=e.source),(0,a.has)(e,"target")&&(r+=e.target),n.test(r)}(n,e)}));return function(e,t,n){var r=(0,a.sortBy)(t,(function(t){var n=e;return(0,a.isUndefined)(t[n])&&(n="source"),t[n]}));return n?r:r.reverse()}(n,i,o)},HO=function(e,t,n){return e!==t||!n},GO=function(e){return e.headerIsAscending},WO=function(e){return e.isLoading},XO=function(e){return e.selectedRadio},QO=function(e){return e.sortByHeader},$O=function(e){return e.searchTerm};const JO=(0,Rt.$j)((function(e){var t,n=e.activetasks;return{tasks:(t=n,t.filteredTasks),headerIsAscending:GO(n),selectedRadio:XO(n),sortByHeader:QO(n),searchTerm:$O(n),isLoading:WO(n)}}),(function(e){return{init:function(){return e((function(e){e(MO(!0)),LO().then((function(t){e(MO(!1)),e(UO(t))})).catch((function(e){re.addNotification({msg:"Fetching active tasks failed: ".concat(e),type:"error"})}))}))},setSearchTerm:function(t){return e({type:AO.ACTIVE_TASKS_SET_SEARCH_TERM,options:t})},sortByColumnHeader:function(t){return e({type:AO.ACTIVE_TASKS_SORT_BY_COLUMN_HEADER,options:t})},switchTab:function(t){return e(function(e){return{type:AO.ACTIVE_TASKS_SWITCH_TAB,options:e}}(t))},runPollingUpdate:function(){return e((function(e){LO().then((function(t){e(UO(t))})).catch((function(e){re.addNotification({msg:"Fetching active tasks failed: ".concat(e),type:"error"})}))}))}}}))((function(e){return ae.createElement(Ht,null,ae.createElement(Gt,{crumbs:IO,docURL:re.constants.DOC_URLS.ACTIVE_TASKS,endpoint:N.getApiUrl("/_active_tasks")},ae.createElement(jO,e)),ae.createElement(Wt,null,ae.createElement(OO,e)))})),YO={RouteObjects:[re.RouteObject.extend({selectedHeader:"Active Tasks",routes:{"activetasks/:id":"showActiveTasks",activetasks:"showActiveTasks"},roles:["_admin"],showActiveTasks:function(){return ae.createElement(JO,null)}})],initialize:function(){re.addHeaderLink({title:"Active Tasks",icon:"fonticon-activetasks",href:"#/activetasks"})}};re.addReducers({activetasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:FO,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case AO.ACTIVE_TASKS_FETCH_AND_SET:return BO(BO({},e),{},{tasks:r,filteredTasks:zO(e.searchTerm,e.selectedRadio,e.sortByHeader,r,e.headerIsAscending)});case AO.ACTIVE_TASKS_SWITCH_TAB:var o=zO(e.searchTerm,r,e.sortByHeader,e.tasks,s);return BO(BO({},e),{},{selectedRadio:r,filteredTasks:o});case AO.ACTIVE_TASKS_CHANGE_POLLING_INTERVAL:return BO(BO({},e),{},{pollingIntervalSeconds:r});case AO.ACTIVE_TASKS_SET_SEARCH_TERM:return KO(e,r);case AO.ACTIVE_TASKS_SORT_BY_COLUMN_HEADER:var i=e.sortByHeader,a=r,s=HO(i,a,e.headerIsAscending),c=zO(e.searchTerm,e.selectedRadio,a,e.tasks,s);return BO(BO({},e),{},{sortByHeader:a,headerIsAscending:s,filteredTasks:c});case AO.ACTIVE_TASKS_SET_IS_LOADING:return BO(BO({},e),{},{isLoading:r})}return e}});const ZO=YO;function eS(e){return eS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eS(e)}function tS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rS(e,t){return rS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rS(e,t)}function oS(e,t){if(t&&("object"===eS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function iS(e){return iS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},iS(e)}var aS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rS(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=iS(r);if(o){var n=iS(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return oS(this,e)});function a(){return tS(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){return ae.createElement("div",{className:"config-warning-cluster-wrapper"},ae.createElement("div",{className:"config-warning-cluster-container"},ae.createElement("div",null,ae.createElement("div",{className:"config-warning-icon-container pull-left"},ae.createElement("i",{className:"fonticon-attention-circled"})),"It seems that you are running a cluster with ",this.props.nodes.length," nodes. For CouchDB 2.0 or greater we recommend using a configuration management tools like Chef, Ansible, Puppet or Salt (in no particular order) to configure your nodes in a cluster.",ae.createElement("br",null),ae.createElement("br",null),ae.createElement("div",{className:"config-warning-other-text"},"We highly recommend against configuring nodes in your cluster using the HTTP API and suggest using a configuration management tool for all configurations."))))}}])&&nS(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);const sS=(0,Rt.$j)((function(e){return{nodes:e.clusters.nodes}}),null)(aS),cS={RouteObjects:[re.RouteObject.extend({selectedHeader:"Configuration",routes:{"cluster/disabled":"showDisabledFeatureScreen"},showDisabledFeatureScreen:function(){return sv.fetchNodes(),ae.createElement(Qt,{component:ae.createElement(sS,null),endpoint:N.getServerUrl("/_membership"),docURL:re.constants.DOC_URLS.MEMBERSHIP,crumbs:[{name:"Config disabled"}]})}})]};function uS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uS(Object(n),!0).forEach((function(t){pS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fS={nodes:[]};cS.initialize=function(){},re.addReducers({clusters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fS,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;return n===av?lS(lS({},e),{},{nodes:r.nodes}):e}});const dS=cS;var hS=function(e){return N.getServerUrl("/_node/"+e+"/_config")},yS=function(e,t,n){var r="/_node/"+e+"/_config/"+encodeURIComponent(t)+"/"+encodeURIComponent(n);return N.getServerUrl(r)},bS=function(e,t,n,r){var o=yS(e,t,n);return O(o,r).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))};const mS="EDIT_CONFIG",gS="LOADING_CONFIG",_S="EDIT_OPTION",vS="CANCEL_EDIT",wS="SAVING_OPTION",ES="OPTION_SAVE_SUCCESS",OS="OPTION_SAVE_FAILURE",SS="OPTION_DELETE_SUCCESS",DS="OPTION_ADD_SUCCESS",NS="OPTION_ADD_FAILURE";var RS=function(e,t){t({type:SS,options:e}),re.addNotification({msg:"Option ".concat(e.optionName," deleted"),type:"success"})},PS=function(e,t,n){n({type:"OPTION_DELETE_FAILURE",options:e}),re.addNotification({msg:"Option delete failed: ".concat(t),type:"error"})};function CS(e){return CS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CS(e)}function TS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xS(e,t){return xS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xS(e,t)}function kS(e,t){if(t&&("object"===CS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function jS(e){return jS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jS(e)}var IS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xS(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=jS(r);if(o){var n=jS(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return kS(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state=t.getInitialState(),t}return t=a,(n=[{key:"getInitialState",value:function(){return{sectionName:"",optionName:"",value:"",show:!1}}},{key:"isInputValid",value:function(){return""!==this.state.sectionName&&""!==this.state.optionName&&""!==this.state.value}},{key:"updateSectionName",value:function(e){this.setState({sectionName:e.target.value})}},{key:"updateOptionName",value:function(e){this.setState({optionName:e.target.value})}},{key:"updateValue",value:function(e){this.setState({value:e.target.value})}},{key:"reset",value:function(){this.setState(this.getInitialState())}},{key:"onAdd",value:function(){if(this.isInputValid()){var e={sectionName:this.state.sectionName,optionName:this.state.optionName,value:this.state.value};this.setState({show:!1}),this.props.onAdd(e)}}},{key:"togglePopover",value:function(){this.setState({show:!this.state.show})}},{key:"hidePopover",value:function(){this.setState({show:!1})}},{key:"getPopover",value:function(){return ae.createElement(en.J2,{className:"tray",id:"add-option-popover",title:"Add Option"},ae.createElement("input",{className:"input-section-name",onChange:this.updateSectionName.bind(this),type:"text",name:"section",placeholder:"Section",autoComplete:"off",autoFocus:!0}),ae.createElement("input",{className:"input-option-name",onChange:this.updateOptionName.bind(this),type:"text",name:"name",placeholder:"Name"}),ae.createElement("input",{className:"input-value",onChange:this.updateValue.bind(this),type:"text",name:"value",placeholder:"Value"}),ae.createElement("a",{className:"btn btn-create",onClick:this.onAdd.bind(this)},"Create"))}},{key:"render",value:function(){var e=this;return ae.createElement("div",{id:"add-option-panel"},ae.createElement(en.zx,{id:"add-option-button",onClick:this.togglePopover.bind(this),ref:function(t){return e.target=t}},ae.createElement("i",{className:"icon icon-plus header-icon"}),"Add Option"),ae.createElement(en.aV,{show:this.state.show,onHide:this.hidePopover.bind(this),placement:"bottom",rootClose:!0,target:function(){return e.target}},this.getPopover()))}}])&&TS(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(IS,"propTypes",{onAdd:Nt().func.isRequired});var AS=(0,Rt.$j)((function(){return{}}),(function(e,t){return{onAdd:function(n){e(function(e,t){return function(n){n({type:"ADDING_OPTION"});var r=t.sectionName,o=t.optionName,i=t.value;return bS(e,r,o,i).then((function(){return function(e,t){t({type:DS,options:e}),re.addNotification({msg:"Option ".concat(e.optionName," added"),type:"success"})}(t,n)})).catch((function(e){return function(e,t,n){n({type:NS,options:e}),re.addNotification({msg:"Option add failed: ".concat(t),type:"error"})}(t,e.message,n)}))}}(t.node,n))}}}))(IS);const LS=AS;function MS(e){return MS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MS(e)}function US(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function BS(e,t){return BS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},BS(e,t)}function VS(e,t){if(t&&("object"===MS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return FS(e)}function FS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KS(e){return KS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},KS(e)}function zS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var HS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BS(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=KS(r);if(o){var n=KS(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return VS(this,e)});function a(){var e;US(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return zS(FS(e=i.call.apply(i,[this].concat(n))),"state",{value:e.props.value}),zS(FS(e),"onChange",(function(t){e.setState({value:t.target.value})})),zS(FS(e),"onSave",(function(){e.state.value!==e.props.value?e.props.onSave(e.state.value):e.props.onCancelEdit()})),zS(FS(e),"getButtons",(function(){return e.props.saving?null:ae.createElement("span",null,ae.createElement("button",{className:"btn btn-primary fonticon-ok-circled btn-small btn-config-save",onClick:e.onSave.bind(FS(e))}),ae.createElement("button",{className:"btn fonticon-cancel-circled btn-small btn-config-cancel",onClick:e.props.onCancelEdit}))})),e}return t=a,(n=[{key:"render",value:function(){return this.props.editing?ae.createElement("td",null,ae.createElement("div",{className:"config-value-form"},ae.createElement("input",{onChange:this.onChange.bind(this),defaultValue:this.props.value,disabled:this.props.saving,autoFocus:!0,type:"text",className:"config-value-input"}),this.getButtons())):ae.createElement("td",{className:"config-show-value",onClick:this.props.onEdit},this.props.value)}}])&&qS(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function GS(e){return GS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GS(e)}function WS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XS(e,t){return XS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},XS(e,t)}function QS(e,t){if(t&&("object"===GS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $S(e)}function $S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JS(e){return JS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},JS(e)}function YS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}zS(HS,"propTypes",{value:Nt().string.isRequired,editing:Nt().bool.isRequired,onEdit:Nt().func.isRequired,onCancelEdit:Nt().func.isRequired,onSave:Nt().func.isRequired});var ZS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XS(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=JS(r);if(o){var n=JS(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return QS(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),YS($S(t=i.call(this,e)),"onDelete",(function(){t.props.onDelete()})),YS($S(t),"showModal",(function(){t.setState({show:!0})})),YS($S(t),"hideModal",(function(){t.setState({show:!1})})),t.onDelete=t.onDelete.bind($S(t)),t.showModal=t.showModal.bind($S(t)),t.hideModal=t.hideModal.bind($S(t)),t.state={show:!1},t}return t=a,(n=[{key:"render",value:function(){return ae.createElement("td",{className:"text-center config-item-trash config-delete-value"},ae.createElement("i",{className:"icon icon-trash",onClick:this.showModal}),ae.createElement(Va.ConfirmationModal,{text:"Are you sure you want to delete ".concat(this.props.sectionName,"/").concat(this.props.optionName,"?"),onClose:this.hideModal,onSubmit:this.onDelete,visible:this.state.show}))}}])&&WS(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function eD(e){return eD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eD(e)}function tD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rD(e,t){return rD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rD(e,t)}function oD(e,t){if(t&&("object"===eD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return iD(e)}function iD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aD(e){return aD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},aD(e)}function sD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}YS(ZS,"propTypes",{sectionName:Nt().string.isRequired,optionName:Nt().string.isRequired,onDelete:Nt().func.isRequired});var cD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rD(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=aD(r);if(o){var n=aD(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return oD(this,e)});function a(){var e;tD(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return sD(iD(e=i.call.apply(i,[this].concat(n))),"onSave",(function(t){var n=e.props.option;n.value=t,e.props.onSave(n)})),sD(iD(e),"onDelete",(function(){e.props.onDelete(e.props.option)})),sD(iD(e),"onEdit",(function(){e.props.onEdit(e.props.option)})),e}return t=a,(n=[{key:"render",value:function(){return ae.createElement("tr",{className:"config-item"},ae.createElement("th",null,this.props.option.header&&this.props.option.sectionName),ae.createElement("td",null,this.props.option.optionName),ae.createElement(HS,{value:this.props.option.value,editing:this.props.option.editing,saving:this.props.saving,onSave:this.onSave,onEdit:this.onEdit,onCancelEdit:this.props.onCancelEdit}),ae.createElement(ZS,{optionName:this.props.option.optionName,sectionName:this.props.option.sectionName,onDelete:this.onDelete}))}}])&&nD(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function uD(e){return uD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uD(e)}function lD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fD(e,t){return fD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fD(e,t)}function dD(e,t){if(t&&("object"===uD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hD(e)}function hD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yD(e){return yD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yD(e)}function bD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}sD(cD,"propTypes",{option:Nt().object.isRequired,saving:Nt().bool.isRequired,onSave:Nt().func.isRequired,onDelete:Nt().func.isRequired,onEdit:Nt().func.isRequired,onCancelEdit:Nt().func.isRequired});var mD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fD(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=yD(r);if(o){var n=yD(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return dD(this,e)});function a(){var e;lD(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bD(hD(e=i.call.apply(i,[this].concat(n))),"createOptions",(function(){return _.map(e.props.options,(function(t){return ae.createElement(cD,{option:t,saving:e.props.saving,onDelete:e.props.onDeleteOption,onSave:e.props.onSaveOption,onEdit:e.props.onEditOption,onCancelEdit:e.props.onCancelEdit,key:"".concat(t.sectionName,"/").concat(t.optionName)})}))})),e}return t=a,(n=[{key:"render",value:function(){var e=this.createOptions();return ae.createElement("table",{className:"config table table-striped table-bordered"},ae.createElement("thead",null,ae.createElement("tr",null,ae.createElement("th",{id:"config-section",width:"22%"},"Section"),ae.createElement("th",{id:"config-option",width:"22%"},"Option"),ae.createElement("th",{id:"config-value"},"Value"),ae.createElement("th",{id:"config-trash"}))),ae.createElement("tbody",null,e))}}])&&pD(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function gD(e){return gD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gD(e)}function _D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vD(e,t){return vD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vD(e,t)}function wD(e,t){if(t&&("object"===gD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ED(e)}function ED(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OD(e){return OD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},OD(e)}function SD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}bD(mD,"propTypes",{options:Nt().arrayOf(Nt().shape({editing:Nt().bool.isRequired,header:Nt().bool,optionName:Nt().string.isRequired,sectionName:Nt().string.isRequired,value:Nt().string})).isRequired,saving:Nt().bool.isRequired,onDeleteOption:Nt().func.isRequired,onEditOption:Nt().func.isRequired,onSaveOption:Nt().func.isRequired,onCancelEdit:Nt().func.isRequired});var DD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vD(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=OD(r);if(o){var n=OD(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return wD(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),SD(ED(t=i.call(this,e)),"saveOption",(function(e){t.props.saveOption(t.props.node,e)})),SD(ED(t),"deleteOption",(function(e){t.props.deleteOption(t.props.node,e)})),SD(ED(t),"editOption",(function(e){t.props.editOption(e)})),SD(ED(t),"cancelEdit",(function(){t.props.cancelEdit()})),t.props.fetchAndEditConfig(t.props.node),t}return t=a,(n=[{key:"render",value:function(){return this.props.loading?ae.createElement("div",{className:"view"},ae.createElement(ga.LoadLines,null)):ae.createElement(mD,{saving:this.props.saving,onDeleteOption:this.deleteOption,onSaveOption:this.saveOption,onEditOption:this.editOption,onCancelEdit:this.cancelEdit,options:this.props.options})}}])&&_D(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function ND(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function RD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ND(Object(n),!0).forEach((function(t){PD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ND(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}SD(DD,"propTypes",{options:Nt().array.isRequired,loading:Nt().bool.isRequired,saving:Nt().bool.isRequired,saveOption:Nt().func.isRequired,deleteOption:Nt().func.isRequired,editOption:Nt().func.isRequired,cancelEdit:Nt().func.isRequired,fetchAndEditConfig:Nt().func.isRequired});var CD={sections:{},loading:!0,editSectionName:null,editOptionName:null,saving:!1};function TD(e,t){var n=t.sectionName,r=t.optionName,o=t.value,i=RD({},e.sections);return i[n]||(i[n]={}),i[n][r]=o||!0,i}function xD(e,t){var n=t.sectionName,r=t.optionName,o=RD({},e.sections);return o[n]&&(o[n]=RD({},o[n]),delete o[n][r],0==Object.keys(o[n]).length&&delete o[n]),o}function kD(e,t){var n=e.sections[t],r=Object.keys(n).map((function(r){return{editing:jD(e,t,r),sectionName:t,optionName:r,value:n[r]}})).sort((function(e,t){return e.optionName<t.optionName?-1:e.optionName>t.optionName?1:0}));return r.length>0&&(r[0].header=!0),r}function jD(e,t,n){return t===e.editSectionName&&n===e.editOptionName}var ID=(0,Rt.$j)((function(e,t){var n,r=e.config;return{node:t.node,options:(n=r,Object.keys(n.sections).map((function(e){return{sectionName:e,options:kD(n,e)}})).sort((function(e,t){return e.sectionName<t.sectionName?-1:e.sectionName>t.sectionName?1:0})).map((function(e){return e.options})).reduce((function(e,t){return e.concat(t)}),[])),loading:r.loading,saving:r.saving,editSectionName:r.editSectionName,editOptionName:r.editOptionName}}),(function(e){return{fetchAndEditConfig:function(t){e(function(e){return function(t){t({type:gS}),function(e){var t=hS(e);return v(t).then((function(e){if(e.error)throw new Error(e.reason);return{sections:e}}))}(e).then((function(n){t({type:mS,options:{sections:n.sections,node:e}})})).catch((function(n){re.addNotification({msg:"Failed to load the configuration. "+n.message,type:"error",clear:!0}),t({type:mS,options:{sections:[],node:e}})}))}}(t))},saveOption:function(t,n){e(function(e,t){return function(n){n({type:wS,options:t});var r=t.sectionName,o=t.optionName,i=t.value;return bS(e,r,o,i).then((function(){return function(e,t){t({type:ES,options:e}),re.addNotification({msg:"Option ".concat(e.optionName," saved"),type:"success"})}(t,n)})).catch((function(e){return function(e,t,n){n({type:OS,options:e}),re.addNotification({msg:"Option save failed: ".concat(t),type:"error"})}(t,e.message,n)}))}}(t,n))},deleteOption:function(t,n){e(function(e,t){return function(n){n({type:"DELETING_OPTION",options:t});var r=t.sectionName,o=t.optionName;return function(e,t,n){var r=yS(e,t,n);return w(r).then((function(e){if(e.error)throw new Error(e.reason);return e}))}(e,r,o).then((function(){return RS(t,n)})).catch((function(e){return PS(t,e.message,n)}))}}(t,n))},editOption:function(t){e(function(e){return function(t){t({type:_S,options:e})}}(t))},cancelEdit:function(t){e(function(e){return function(t){t({type:vS,options:e})}}(t))}}}))(DD);const AD=ID;var LD=function(e){var t=e.active,n=e.link,r=e.title;return ae.createElement("li",{className:t?"active":""},ae.createElement("a",{href:"#".concat(n)},r))};LD.propTypes={active:Nt().bool.isRequired,link:Nt().string.isRequired,icon:Nt().string,title:Nt().string.isRequired};const MD=function(e){var t=e.sidebarItems,n=e.selectedTab,r=t.map((function(e){return ae.createElement(LD,{key:e.title,active:n===e.title,title:e.title,link:e.link})}));return ae.createElement("nav",{className:"sidenav"},ae.createElement("ul",{className:"nav nav-list"},r))};function UD(e){return UD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UD(e)}function qD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function BD(e,t){return BD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},BD(e,t)}function VD(e,t){if(t&&("object"===UD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function FD(e){return FD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},FD(e)}var KD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BD(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=FD(r);if(o){var n=FD(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return VD(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"onOriginChange",value:function(e){"all"===e.target.value&&this.props.isAllOrigins||("selected"!==e.target.value||this.props.isAllOrigins)&&this.props.originChange("all"===e.target.value)}},{key:"render",value:function(){return this.props.corsEnabled?ae.createElement("div",null,ae.createElement("p",null,ae.createElement("strong",null," Origin Domains ")," "),ae.createElement("p",null,"Databases will accept requests from these domains: "),ae.createElement("label",{className:"radio"},ae.createElement("input",{type:"radio",checked:this.props.isAllOrigins,value:"all",onChange:this.onOriginChange.bind(this),name:"all-domains"})," All domains ( * )"),ae.createElement("label",{className:"radio"},ae.createElement("input",{type:"radio",checked:!this.props.isAllOrigins,value:"selected",onChange:this.onOriginChange.bind(this),name:"selected-domains"})," Restrict to specific domains")):null}}])&&qD(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);KD.propTypes={corsEnabled:Nt().bool,isAllOrigins:Nt().bool,originChange:Nt().func.isRequired};var zD=function(e){return!!HD(e)||(re.addNotification({msg:"Please enter a valid domain, starting with http/https.",type:"error",clear:!0}),!1)},HD=function(e){return/^https?:\/\/(.+)(:\d{2,5})?$/.test(e)};function GD(e){return GD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GD(e)}function WD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XD(e,t){return XD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},XD(e,t)}function QD(e,t){if(t&&("object"===GD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function $D(e){return $D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$D(e)}var JD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XD(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$D(r);if(o){var n=$D(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return QD(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={origin:""},t}return t=a,n=[{key:"onInputChange",value:function(e){this.setState({origin:e.target.value})}},{key:"addOrigin",value:function(e){if(e.preventDefault(),!zD(this.state.origin))return!1;var t=function(e){var t=document.createElement("a");return t.href=e,/:/.test(e)?t.protocol+"//"+t.host:t.protocol+"//"+t.hostname}(this.state.origin);this.props.addOrigin(t),this.setState({origin:""})}},{key:"onKeyUp",value:function(e){if(13==e.keyCode)return this.addOrigin(e)}},{key:"render",value:function(){return this.props.isVisible?ae.createElement("div",{id:"origin-domains-container"},ae.createElement("div",{className:"origin-domains"},ae.createElement("div",{className:"input-append"},ae.createElement("input",{type:"text",name:"new_origin_domain",placeholder:"https://example.com",onChange:this.onInputChange.bind(this),value:this.state.origin}),ae.createElement("button",{onClick:this.addOrigin.bind(this),className:"btn btn-secondary add-domain"},ae.createElement("i",{className:"icon fonticon-ok-circled"})," Add Domain")))):null}}],n&&WD(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function YD(e){return YD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YD(e)}function ZD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eN(e,t){return eN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},eN(e,t)}function tN(e,t){if(t&&("object"===YD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function nN(e){return nN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nN(e)}JD.propTypes={isVisible:Nt().bool.isRequired,addOrigin:Nt().func.isRequired};var rN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eN(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=nN(r);if(o){var n=nN(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return tN(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={edit:!1,updatedOrigin:t.props.origin},t}return t=a,(n=[{key:"editOrigin",value:function(e){e.preventDefault(),this.setState({edit:!this.state.edit})}},{key:"updateOrigin",value:function(e){e.preventDefault(),zD(this.state.updatedOrigin)&&(this.state.updatedOrigin&&this.props.origin!==this.state.updatedOrigin&&this.props.updateOrigin(this.state.updatedOrigin,this.props.origin),this.setState({edit:!1}))}},{key:"deleteOrigin",value:function(e){e.preventDefault(),this.props.deleteOrigin(this.props.origin)}},{key:"onInputChange",value:function(e){this.setState({updatedOrigin:e.target.value})}},{key:"onKeyUp",value:function(e){if(13===e.keyCode)return this.updateOrigin(e)}},{key:"createOriginDisplay",value:function(){return this.state.edit?ae.createElement("div",{className:"input-append edit-domain-section"},ae.createElement("input",{type:"text",name:"update_origin_domain",onChange:this.onInputChange.bind(this),onKeyUp:this.onKeyUp.bind(this),value:this.state.updatedOrigin}),ae.createElement("button",{onClick:this.updateOrigin.bind(this),className:"btn btn-primary update-origin"}," Update ")):ae.createElement("div",{className:"js-url url-display"},this.props.origin)}},{key:"render",value:function(){var e=this.createOriginDisplay();return ae.createElement("tr",null,ae.createElement("td",null,e),ae.createElement("td",{width:"30"},ae.createElement("span",null,ae.createElement("a",{className:"fonticon-pencil",onClick:this.editOrigin.bind(this),title:"Edit domain."}))),ae.createElement("td",{width:"30"},ae.createElement("span",null,ae.createElement("a",{href:"#","data-bypass":"true",className:"fonticon-trash",onClick:this.deleteOrigin.bind(this),title:"Delete domain."}))))}}])&&ZD(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function oN(e){return oN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oN(e)}function iN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aN(e,t){return aN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},aN(e,t)}function sN(e,t){if(t&&("object"===oN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function cN(e){return cN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cN(e)}rN.propTypes={origin:Nt().string.isRequired,updateOrigin:Nt().func.isRequired,deleteOrigin:Nt().func.isRequired};var uN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aN(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=cN(r);if(o){var n=cN(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return sN(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"createRows",value:function(){var e=this;return this.props.origins.map((function(t,n){return ae.createElement(rN,{updateOrigin:e.props.updateOrigin,deleteOrigin:e.props.deleteOrigin,key:n,origin:t})}))}},{key:"render",value:function(){var e=this.props,t=e.origins,n=e.isVisible;if(!t)return null;if(!n||0===t.length)return null;var r=this.createRows();return ae.createElement("table",{id:"origin-domain-table",className:"table table-striped"},ae.createElement("tbody",null,r))}}])&&iN(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function lN(e){return lN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lN(e)}function pN(e){return function(e){if(Array.isArray(e))return fN(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return fN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fN(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hN(e,t){return hN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hN(e,t)}function yN(e,t){if(t&&("object"===lN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function bN(e){return bN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bN(e)}uN.propTypes={isVisible:Nt().bool.isRequired,origins:Nt().arrayOf(Nt().string),updateOrigin:Nt().func.isRequired,deleteOrigin:Nt().func.isRequired};var mN=ga.LoadLines,gN=Va.ConfirmationModal,_N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hN(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=bN(r);if(o){var n=bN(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return yN(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.fetchAndLoadCORSOptions()}},{key:"enableCorsChange",value:function(){var e=this.props,t=e.corsEnabled,n=e.origins,r=e.node;(!t||_.isEmpty(n)||window.confirm(ie.i18n.en_US["cors-disable-cors-prompt"]))&&this.props.saveCORS({corsEnabled:!t,origins:n,node:r})}},{key:"save",value:function(){this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:this.props.origins,node:this.props.node})}},{key:"originChange",value:function(e){(!e||_.isEmpty(this.props.origins)||window.confirm("Are you sure? Switching to all origin domains will overwrite your specific origin domains."))&&this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:e?["*"]:[],node:this.props.node})}},{key:"addOrigin",value:function(e){this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:this.props.origins.concat(e),node:this.props.node})}},{key:"updateOrigin",value:function(e,t){var n=this.props.origins.slice(),r=_.indexOf(n,t);-1!==r&&(n[r]=e,this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:n,node:this.props.node}))}},{key:"deleteOrigin",value:function(){var e=this.props,t=e.corsEnabled,n=e.origins,r=e.node,o=e.domainToDelete,i=this.props.origins.indexOf(o);if(-1!==i){var a=[].concat(pN(n.slice(0,i)),pN(n.slice(i+1)));this.props.saveCORS({corsEnabled:t,origins:a,node:r})}}},{key:"render",value:function(){var e=[this.props.corsEnabled,!this.props.isAllOrigins].every((function(e){return!0===e})),t=ae.createElement("div",{id:this.props.corsEnabled?"collapsing-container":""},ae.createElement(KD,{corsEnabled:this.props.corsEnabled,originChange:this.originChange.bind(this),isAllOrigins:this.props.isAllOrigins}),ae.createElement(uN,{updateOrigin:this.updateOrigin.bind(this),deleteOrigin:this.props.showDeleteDomainConfirmation,isVisible:e,origins:this.props.origins}),ae.createElement(JD,{addOrigin:this.addOrigin.bind(this),isVisible:e}));this.props.isLoading&&(t=ae.createElement(mN,null));var n=ae.createElement("span",null,"Are you sure you want to delete ",ae.createElement("code",null,_.escape(this.props.domainToDelete)),"?");return ae.createElement("div",{className:"cors-page flex-body"},ae.createElement("header",{id:"cors-header"},ae.createElement("p",null,ie.i18n.en_US["cors-notice"])),ae.createElement("form",{id:"corsForm",onSubmit:this.save.bind(this)},ae.createElement("div",{className:"cors-enable"},this.props.corsEnabled?"CORS is currently enabled.":"CORS is currently disabled.",ae.createElement("br",null),ae.createElement("button",{type:"button",className:"enable-disable btn btn-secondary",onClick:this.enableCorsChange.bind(this),disabled:this.props.isLoading?"disabled":null},this.props.corsEnabled?"Disable CORS":"Enable CORS")),t),ae.createElement(gN,{title:"Confirm Deletion",visible:this.props.deleteDomainModalVisible,text:n,buttonClass:"btn-danger",onClose:this.props.hideDeleteDomainConfirmation,onSubmit:this.deleteOrigin.bind(this),successButtonLabel:"Delete Domain"}))}}])&&dN(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);const vN="EDIT_CORS",wN="CORS_SET_IS_LOADING",EN="CORS_SHOW_DELETE_DOMAIN_MODAL",ON="CORS_HIDE_DELETE_DOMAIN_MODAL";var SN=function(e,t,n,r){if(!t)throw new Error("node not set");return O(e+"/cors/"+n,r).then((function(e){if(e.error)throw new Error(e.reason);return e}))},DN=function(){return{type:wN,isLoading:!1}},NN=function(e){return{type:vN,options:e,isLoading:!1}},RN=function(){return{type:ON}},PN=function(e){return"Reason: "+(e&&e.message||"n/a")},CN=function(e){return _.isEmpty(e)?"":e.join(",")},TN={fetchAndLoadCORSOptions:function(e,t){return function(n){var r=v(e+"/cors").then((function(e){if(e.error)throw new Error(e.reason);return{origins:e.origins?e.origins.split(","):[],methods:e.methods,credentials:e.credentials,headers:e.headers}})),o=v(e+"/chttpd").then((function(e){if(e.error)throw new Error(e.reason);return e}));re.Promise.join(r,o,(function(e,r){var o=NN({origins:e.origins,corsEnabled:"true"===r.enable_cors,node:t});n(o)})).catch((function(e){re.addNotification({msg:"Could not load CORS settings.  "+PN(e),type:"error"})}))}},showLoadingBars:function(){return{type:wN,isLoading:!0}},hideLoadingBars:DN,showDomainDeleteConfirmation:function(e){return{type:EN,domainToDelete:e}},hideDomainDeleteConfirmation:RN,loadCORSOptions:NN,sanitizeOrigins:CN,saveCors:function(e,t){return function(n){var r,o,i,a=[];return a.push(function(e,t,n){if(!t)throw new Error("node not set");return O(e+"/chttpd/enable_cors",n.toString()).then((function(e){if(e.error)throw new Error(e.reason);return e}))}(e,t.node,t.corsEnabled)),t.corsEnabled&&(a.push((r=e,o=t.node,i=CN(t.origins),SN(r,o,"origins",i))),a.push(function(e,t){return SN(e,t,"credentials","true")}(e,t.node)),a.push(function(e,t){return SN(e,t,"headers","accept, authorization, content-type, origin, referer")}(e,t.node)),a.push(function(e,t){return SN(e,t,"methods","GET, PUT, POST, HEAD, DELETE")}(e,t.node))),re.Promise.all(a).then((function(){re.addNotification({msg:"CORS settings updated.",type:"success",clear:!0}),n(NN(t))})).catch((function(e){re.addNotification({msg:"Error! Could not save your CORS settings. Please try again. "+PN(e),type:"error",clear:!0}),n(RN()),n(DN())}))}},overrideFetchAndLoadCORSOptions:function(e){TN.fetchAndLoadCORSOptions=e},overrideSaveCors:function(e){TN.saveCors=e}};const xN=TN;const kN={CORSContainer:(0,Rt.$j)((function(e){var t=e.cors;return{node:t.node,corsEnabled:t.corsEnabled,isAllOrigins:t.isAllOrigins,isLoading:t.isLoading,origins:t.origins,deleteDomainModalVisible:t.deleteDomainModalVisible,domainToDelete:t.domainToDelete}}),(function(e,t){return{saveCORS:function(n){e(xN.showLoadingBars()),e(xN.saveCors(t.url,n))},fetchAndLoadCORSOptions:function(){e(xN.fetchAndLoadCORSOptions(t.url,t.node))},showDeleteDomainConfirmation:function(t){e(xN.showDomainDeleteConfirmation(t))},hideDeleteDomainConfirmation:function(){e(xN.hideDomainDeleteConfirmation())}}}))(_N),CORSScreen:_N,OriginInput:JD,Origins:KD,OriginTable:uN,OriginRow:rN};var jN=function(e){var t=e.node,n=e.crumbs,r=e.docURL,o=e.endpoint;return ae.createElement("header",{className:"two-panel-header"},ae.createElement("div",{className:"flex-layout flex-row"},ae.createElement("div",{id:"breadcrumbs",className:"faux__config-breadcrumbs"},ae.createElement(Vt,{crumbs:n})),ae.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},ae.createElement("div",{id:"react-headerbar",className:"flex-body"}," "),ae.createElement("div",{id:"right-header",className:"flex-fill"},ae.createElement(LS,{node:t})),ae.createElement(zt,{docURL:r,endpoint:o}),ae.createElement("div",{id:"notification-center-btn",className:"flex-fill"},ae.createElement(Ut,null)))))};const IN=function(e){var t=e.showCors,n=e.docURL,r=e.node,o=e.endpoint,i=e.crumbs,a=[{title:"Main config",link:"_config/"+r},{title:"CORS",link:"_config/"+r+"/cors"}],s=t?"CORS":"Main config",c=t?ae.createElement(kN.CORSContainer,{node:r,url:o}):ae.createElement(AD,{node:r});return ae.createElement("div",{id:"dashboard",className:"with-sidebar"},ae.createElement(jN,{docURL:n,endpoint:o,node:r,crumbs:i}),ae.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},ae.createElement("aside",{id:"sidebar-content",className:"scrollable"},ae.createElement(MD,{sidebarItems:a,selectedTab:s})),ae.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},ae.createElement("div",{id:"dashboard-upper-content"}),ae.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},c),ae.createElement("div",{id:"footer"}))))};var AN=re.RouteObject.extend({selectedHeader:"Configuration",routes:{_config:"checkNodes"},crumbs:[{name:"Config disabled"}],checkNodes:function(){sv.navigateToNodeBasedOnNodeCount("/_config/")}}),LN=re.RouteObject.extend({roles:["_admin"],selectedHeader:"Configuration",routes:{"_config/:node":"configForNode","_config/:node/cors":"configCorsForNode"},initialize:function(){},configForNode:function(e){return ae.createElement(IN,{node:e,docURL:re.constants.DOC_URLS.CONFIG,endpoint:hS(e),crumbs:[{name:"Config"}],showCors:!1})},configCorsForNode:function(e){return ae.createElement(IN,{node:e,docURL:re.constants.DOC_URLS.CONFIG,endpoint:hS(e),crumbs:[{name:"Config"}],showCors:!0})}}),MN=re.addon();MN.RouteObjects=[LN,AN];const UN=MN;UN.initialize=function(){re.addHeaderLink({title:"Configuration",href:"#/_config",icon:"fonticon-cog",className:"config"})},re.addReducers({config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:CD,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case mS:return RD(RD({},e),{},{sections:n.sections,loading:!1,editOptionName:null,editSectionName:null});case _S:return RD(RD({},e),{},{editSectionName:n.sectionName,editOptionName:n.optionName});case gS:return RD(RD({},e),{},{loading:!0});case vS:return RD(RD({},e),{},{editOptionName:null,editSectionName:null});case wS:return RD(RD({},e),{},{saving:!0});case ES:return RD(RD({},e),{},{editOptionName:null,editSectionName:null,sections:TD(e,n),saving:!1});case OS:return RD(RD({},e),{},{saving:!1});case DS:return RD(RD({},e),{},{sections:TD(e,n),saving:!1});case NS:return RD(RD({},e),{},{saving:!1});case SS:return RD(RD({},e),{},{sections:xD(e,n)});default:return e}}});const qN=UN;var BN=n(3297),VN=n.n(BN);const FN={REPLICATION_SOURCE:{LOCAL:"REPLICATION_SOURCE_LOCAL",REMOTE:"REPLICATION_SOURCE_REMOTE"},REPLICATION_TARGET:{EXISTING_LOCAL_DATABASE:"REPLICATION_TARGET_EXISTING_LOCAL_DATABASE",EXISTING_REMOTE_DATABASE:"REPLICATION_TARGET_EXISTING_REMOTE_DATABASE",NEW_LOCAL_DATABASE:"REPLICATION_TARGET_NEW_LOCAL_DATABASE",NEW_REMOTE_DATABASE:"REPLICATION_TARGET_NEW_REMOTE_DATABASE"},REPLICATION_TYPE:{ONE_TIME:"REPLICATION_TYPE_ONE_TIME",CONTINUOUS:"REPLICATION_TYPE_CONTINUOUS"},REPLICATION_AUTH_METHOD:{NO_AUTH:"NO_AUTH",BASIC:"BASIC_AUTH"}};function KN(e){return KN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KN(e)}function zN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GN(e,t){return GN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},GN(e,t)}function WN(e,t){if(t&&("object"===KN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function XN(e){return XN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},XN(e)}var QN=ga.StyledSelect,$N=function(e){var t=e.onChange,n=e.value;return ae.createElement("div",{className:"replication__section"},ae.createElement("div",{className:"replication__input-label"},"Database URL:"),ae.createElement("div",{className:""},ae.createElement("input",{type:"text",className:"replication__remote-connection-url",placeholder:"https://",value:n,onChange:function(e){return t(e.target.value)}})))};$N.propTypes={value:Nt().string.isRequired,onChange:Nt().func.isRequired};var JN=function(e){var t=e.value,n=e.onChange,r=e.databases.map((function(e){return{value:e,label:e}}));return ae.createElement("div",{className:"replication__section"},ae.createElement("div",{className:"replication__input-label"},"Name:"),ae.createElement("div",{className:"replication__input-react-select"},ae.createElement(ca.ZP,{name:"source-name",value:t,placeholder:"Database name",options:r,clearable:!1,onChange:function(e){var t=e.value;return n(t)}})))};JN.propTypes={value:Nt().string.isRequired,databases:Nt().array.isRequired,onChange:Nt().func.isRequired};var YN=function(e){var t=e.replicationSource,n=e.databases,r=e.localSource,o=e.remoteSource,i=e.onChangeRemote,a=e.onChangeLocal;return t===FN.REPLICATION_SOURCE.LOCAL?ae.createElement(JN,{value:r,databases:n,onChange:a}):ae.createElement($N,{value:o,onChange:i})};YN.propTypes={replicationSource:Nt().string.isRequired,databases:Nt().array.isRequired,localSource:Nt().string.isRequired,remoteSource:Nt().string.isRequired,onChangeRemote:Nt().func.isRequired,onChangeLocal:Nt().func.isRequired};var ZN=function(e){var t=e.onChange,n=e.value;return ae.createElement("div",{className:"replication__section"},ae.createElement("div",{className:"replication__input-label"},"Type:"),ae.createElement("div",{className:"replication__input-select"},ae.createElement(QN,{selectContent:[{value:"",label:"Select source type"},{value:FN.REPLICATION_SOURCE.LOCAL,label:"Local database"},{value:FN.REPLICATION_SOURCE.REMOTE,label:"Remote database"}].map((function(e){return ae.createElement("option",{value:e.value,key:e.value},e.label)})),selectChange:function(e){return t(e.target.value)},selectId:"replication-source",selectValue:n})))};ZN.propTypes={value:Nt().string.isRequired,onChange:Nt().func.isRequired};var eR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GN(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=XN(r);if(o){var n=XN(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return WN(this,e)});function a(){return zN(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"getReplicationSourceRow",value:function(){var e=this.props,t=e.replicationSource,n=e.localSource,r=e.onLocalSourceChange,o=e.onRemoteSourceChange,i=e.remoteSource,a=e.databases;return t?ae.createElement(YN,{replicationSource:t,databases:a,localSource:n,remoteSource:i,onChangeLocal:r,onChangeRemote:o}):null}},{key:"render",value:function(){var e=this.props,t=e.replicationSource,n=e.onSourceSelect;return ae.createElement("div",null,ae.createElement("h3",null,"Source"),ae.createElement(ZN,{onChange:n,value:t}),this.getReplicationSourceRow())}}])&&HN(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function tR(e){return tR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tR(e)}function nR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oR(e,t){return oR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oR(e,t)}function iR(e,t){if(t&&("object"===tR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function aR(e){return aR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},aR(e)}eR.propTypes={replicationSource:Nt().string.isRequired,localSource:Nt().string.isRequired,remoteSource:Nt().string.isRequired,databases:Nt().array.isRequired,onLocalSourceChange:Nt().func.isRequired,onRemoteSourceChange:Nt().func.isRequired};var sR=ga.StyledSelect,cR=function(e){var t=e.value,n=e.onChange;return ae.createElement("div",{className:"replication__section"},ae.createElement("div",{className:"replication__input-label"},"Type:"),ae.createElement("div",{id:"replication-target",className:"replication__input-select"},ae.createElement(sR,{selectContent:[{value:"",label:"Select target type"},{value:FN.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE,label:"Existing local database"},{value:FN.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE,label:"Existing remote database"},{value:FN.REPLICATION_TARGET.NEW_LOCAL_DATABASE,label:"New local database"},{value:FN.REPLICATION_TARGET.NEW_REMOTE_DATABASE,label:"New remote database"}].map((function(e){return ae.createElement("option",{value:e.value,key:e.value},e.label)})),selectChange:function(e){return n(e.target.value)},selectId:"replication-target",selectValue:t})))};cR.propTypes={value:Nt().string.isRequired,onChange:Nt().func.isRequired};var uR=function(e){var t=e.onChange,n=e.value;return ae.createElement("div",null,ae.createElement("input",{type:"text",className:"replication__remote-connection-url",placeholder:"https://",value:n,onChange:function(e){return t(e.target.value)}}))};uR.propTypes={value:Nt().string.isRequired,onChange:Nt().func.isRequired};var lR=function(e){var t=e.onChange,n=e.value,r=e.databases.map((function(e){return{value:e,label:e}}));return ae.createElement("div",{id:"replication-target-local",className:"replication__input-react-select"},ae.createElement(ca.ZP,{value:n,options:r,placeholder:"Database name",clearable:!1,onChange:function(e){var n=e.value;return t(n)}}))};lR.propTypes={value:Nt().string.isRequired,databases:Nt().array.isRequired,onChange:Nt().func.isRequired};var pR=function(e){var t=e.onChange,n=e.value;return ae.createElement("input",{type:"text",className:"replication__new-input",placeholder:"Database name",value:n,onChange:function(e){return t(e.target.value)}})};pR.propTypes={value:Nt().string.isRequired,onChange:Nt().func.isRequired};var fR=function(e){var t,n=e.replicationTarget,r=e.onLocalTargetChange,o=e.onRemoteTargetChange,i=e.localTarget,a=e.remoteTarget,s=e.databases;if(!n)return null;n===FN.REPLICATION_TARGET.NEW_LOCAL_DATABASE?(c="New database:",t=ae.createElement(pR,{value:i,onChange:r})):t=n===FN.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE?ae.createElement(lR,{onChange:r,databases:s,value:i}):ae.createElement(uR,{onChange:o,value:a,newRemote:FN.REPLICATION_TARGET.NEW_REMOTE_DATABASE===n});var c="Name:";return n!==FN.REPLICATION_TARGET.NEW_REMOTE_DATABASE&&n!==FN.REPLICATION_TARGET.NEW_LOCAL_DATABASE||(c="New database:"),ae.createElement("div",{className:"replication__section"},ae.createElement("div",{className:"replication__input-label"},c),ae.createElement("div",null,t))};fR.propTypes={databases:Nt().array.isRequired,onLocalTargetChange:Nt().func.isRequired,onRemoteTargetChange:Nt().func.isRequired,remoteTarget:Nt().string.isRequired,localTarget:Nt().string.isRequired,replicationTarget:Nt().string.isRequired};var dR=function(e){var t=e.replicationTarget,n=e.targetDatabasePartitioned,r=e.onTargetDatabasePartitionedChange,o=e.allowNewPartitionedLocalDbs;if(!t)return null;if(t!==FN.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&t!==FN.REPLICATION_TARGET.NEW_REMOTE_DATABASE)return null;var i=t===FN.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&!o,a=i?"Local server does not support partitioned databases":"Creates a new partitioned database",s=ae.createElement(en.u,{id:"new-db-partitioned-tooltip"},a);return ae.createElement("div",{className:"replication__section"},ae.createElement("div",{className:"replication__input-label"},"New database options:"),ae.createElement("div",{className:Zt()("replication__input-checkbox",{"replication__input-checkbox--disabled":i})},ae.createElement("input",{id:"target-db-is-partitioned",type:"checkbox",value:"true",checked:n,onChange:function(){r(!n)},disabled:i}),ae.createElement(en.Ox,{placement:"right",overlay:s},ae.createElement("label",{htmlFor:"target-db-is-partitioned"},"Partitioned"))))};dR.propTypes={onTargetDatabasePartitionedChange:Nt().func.isRequired,targetDatabasePartitioned:Nt().bool.isRequired,replicationTarget:Nt().string.isRequired,allowNewPartitionedLocalDbs:Nt().bool.isRequired};var hR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oR(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=aR(r);if(o){var n=aR(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return iR(this,e)});function a(){return nR(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.replicationTarget,n=e.onLocalTargetChange,r=e.onTargetChange,o=e.databases,i=e.localTarget,a=e.onRemoteTargetChange,s=e.remoteTarget,c=e.targetDatabasePartitioned,u=e.onTargetDatabasePartitionedChange,l=e.allowNewPartitionedLocalDbs;return ae.createElement("div",null,ae.createElement("h3",null,"Target"),ae.createElement(cR,{value:t,onChange:r}),ae.createElement(fR,{remoteTarget:s,replicationTarget:t,databases:o,localTarget:i,onRemoteTargetChange:a,onLocalTargetChange:n}),ae.createElement(dR,{replicationTarget:t,onTargetDatabasePartitionedChange:u,targetDatabasePartitioned:c,allowNewPartitionedLocalDbs:l}))}}])&&rR(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function yR(e){return yR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yR(e)}function bR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gR(e,t){return gR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gR(e,t)}function _R(e,t){if(t&&("object"===yR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function vR(e){return vR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vR(e)}hR.propTypes={databases:Nt().array.isRequired,onTargetChange:Nt().func.isRequired,onLocalTargetChange:Nt().func.isRequired,onRemoteTargetChange:Nt().func.isRequired,remoteTarget:Nt().string.isRequired,localTarget:Nt().string.isRequired,replicationTarget:Nt().string.isRequired};var wR=ga.StyledSelect,ER=function(e){var t=e.value,n=e.onChange;return ae.createElement("div",{className:"replication__section"},ae.createElement("div",{className:"replication__input-label"},"Replication type:"),ae.createElement("div",{className:"replication__input-select"},ae.createElement(wR,{selectContent:[{value:FN.REPLICATION_TYPE.ONE_TIME,label:"One time"},{value:FN.REPLICATION_TYPE.CONTINUOUS,label:"Continuous"}].map((function(e){return ae.createElement("option",{value:e.value,key:e.value},e.label)})),selectChange:function(e){return n(e.target.value)},selectId:"replication-target",selectValue:t})))};ER.propTypes={value:Nt().string.isRequired,onChange:Nt().func.isRequired};var OR=function(e){var t=e.value,n=e.onChange;return ae.createElement("div",{className:"replication__section"},ae.createElement("div",{className:"replication__input-label"},"Replication document:"),ae.createElement("div",{className:"replication__doc-name"},ae.createElement("span",{className:"fonticon fonticon-cancel replication__doc-name-icon",title:"Clear field",onClick:function(){return n("")}}),ae.createElement("input",{type:"text",className:"replication__doc-name-input",placeholder:"Custom ID (optional)",value:t,onChange:function(e){return n(e.target.value)}})))};OR.propTypes={value:Nt().string.isRequired,onChange:Nt().func.isRequired};var SR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gR(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=vR(r);if(o){var n=vR(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _R(this,e)});function a(){return bR(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.replicationType,n=e.replicationDocName,r=e.onDocChange,o=e.onTypeChange;return ae.createElement("div",null,ae.createElement("h3",null,"Options"),ae.createElement(ER,{onChange:o,value:t}),ae.createElement(OR,{onChange:r,value:n}))}}])&&mR(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);SR.propTypes={replicationDocName:Nt().string.isRequired,replicationType:Nt().string.isRequired,onDocChange:Nt().func.isRequired,onTypeChange:Nt().func.isRequired};var DR=ga.ConfirmButton,NR=function(e){var t=e.onClear,n=e.disabled,r=e.onClick;return ae.createElement("div",{className:"replication__button-row"},ae.createElement(DR,{customIcon:"fonticon-replicate",id:"replicate",text:"Start Replication",onClick:r,disabled:n}),ae.createElement("a",{className:"replication__clear-link",href:"#","data-bypass":"true",onClick:function(e){e.preventDefault(),t()}},"Clear"))};function RR(e){return RR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RR(e)}function PR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TR(e,t,n){return t&&CR(e.prototype,t),n&&CR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xR(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kR(e,t)}function kR(e,t){return kR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kR(e,t)}function jR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=LR(e);if(t){var o=LR(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return IR(this,n)}}function IR(e,t){if(t&&("object"===RR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return AR(e)}function AR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LR(e){return LR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},LR(e)}NR.propTypes={disabled:Nt().bool.isRequired,onClick:Nt().func.isRequired,onClear:Nt().func.isRequired};var MR=ga.StyledSelect,UR=function(e){xR(n,e);var t=jR(n);function n(e){var r;return PR(this,n),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(AR(r=t.call(this,e)),"getAuthOptions",(function(){var e=ie.i18n.en_US["replication-user-password-auth-label"],t=[{value:FN.REPLICATION_AUTH_METHOD.NO_AUTH,label:"None"},{value:FN.REPLICATION_AUTH_METHOD.BASIC,label:e}];return r.customAuths.map((function(e){t.push({value:e.typeValue,label:e.typeLabel})})),t.map((function(e){return ae.createElement("option",{value:e.value,key:e.value},e.label)}))})),r.onChangeType=r.onChangeType.bind(AR(r)),r.onChangeValue=r.onChangeValue.bind(AR(r)),r.customAuths=re.getExtensions("Replication:Auth"),r.customAuths||(r.customAuths=[]),r.customAuthTypes=r.customAuths.map((function(e){return e.typeValue})),r.customAuthHelp=re.getExtensions("Replication:Auth-help"),r.customAuthHelp||(r.customAuthHelp=[]),r}return TR(n,[{key:"onChangeType",value:function(e){this.props.onChangeAuthType(e)}},{key:"onChangeValue",value:function(e){this.props.onChangeAuth(e)}},{key:"getAuthInputFields",value:function(e,t){var n=this.props.authId;if(t==FN.REPLICATION_AUTH_METHOD.BASIC)return ae.createElement(qR,{onChange:this.onChangeValue,auth:e,authId:n});var r=this.customAuths.filter((function(e){return e.typeValue===t}));if(r&&r.length>0){var o=r[0].inputComponent;return ae.createElement(o,{onChange:this.onChangeValue,auth:e})}return null}},{key:"getHelpText",value:function(e){var t=this.customAuthHelp.filter((function(t){return e===t.authType})).map((function(e){return e.helpText}));return 0==t.length?null:ae.createElement("div",{className:"replication__section"},ae.createElement("div",{className:"replication__input-label"}),ae.createElement("div",{className:"replication__help-tile"},t[0]))}},{key:"render",value:function(){var e=this,t=this.props,n=t.credentials,r=t.authType,o=t.authId;return ae.createElement(ae.Fragment,null,ae.createElement("div",{className:"replication__section"},ae.createElement("div",{className:"replication__input-label"},"Authentication:"),ae.createElement("div",{className:"replication__input-select"},ae.createElement(MR,{selectContent:this.getAuthOptions(),selectChange:function(t){return e.onChangeType(t.target.value)},selectId:"select-"+o,selectValue:r}))),this.getAuthInputFields(n,r),this.getHelpText(r))}}]),n}(ae.Component);UR.propTypes={authId:Nt().string.isRequired,authType:Nt().string.isRequired,credentials:Nt().object,onChangeAuth:Nt().func.isRequired,onChangeAuthType:Nt().func.isRequired},UR.defaultProps={authType:FN.REPLICATION_AUTH_METHOD.NO_AUTH,onChangeAuthType:function(){},onChangeAuth:function(){}};var qR=function(e){xR(n,e);var t=jR(n);function n(e){var r;return PR(this,n),(r=t.call(this,e)).updatePassword=r.updatePassword.bind(AR(r)),r.updateUsername=r.updateUsername.bind(AR(r)),r.state={username:e.auth&&e.auth.username?e.auth.username:"",password:e.auth&&e.auth.password?e.auth.password:""},r}return TR(n,[{key:"updatePassword",value:function(e){this.setState({password:e}),this.props.onChange({username:this.state.username,password:e})}},{key:"updateUsername",value:function(e){this.setState({username:e}),this.props.onChange({username:e,password:this.state.password})}},{key:"render",value:function(){var e=this,t=ie.i18n.en_US["replication-username-input-placeholder"],n=ie.i18n.en_US["replication-password-input-placeholder"],r=this.props.authId;return ae.createElement(ae.Fragment,null,ae.createElement("div",{className:"replication__section"},ae.createElement("div",{className:"replication__input-label"}),ae.createElement("div",null,ae.createElement("input",{id:r+"-username",type:"text",placeholder:t,value:this.state.username,onChange:function(t){return e.updateUsername(t.target.value)},readOnly:this.props.usernameReadOnly}))),ae.createElement("div",{className:"replication__section"},ae.createElement("div",{className:"replication__input-label"}),ae.createElement("div",null,ae.createElement("input",{id:r+"-password",type:"password",placeholder:n,value:this.state.password,onChange:function(t){return e.updatePassword(t.target.value)}}))))}}]),n}(ae.Component);qR.propTypes={auth:Nt().object.isRequired,onChange:Nt().func.isRequired};var BR=ga.ConfirmButton,VR=function(e){var t=e.visible,n=e.onClose,r=e.onClick,o=e.multipleDocs,i=e.isReplicationDB;if(!t)return null;var a="",s="Delete ".concat(i?"Document":"Replication Job"),c="Deleting a replication ".concat(i?"document":"job"," stops continuous replication\n          and incomplete one-time replication, but does not affect replicated documents.");return o>1&&(a="You are deleting <strong>".concat(o,"</strong> replication ").concat(i?"documents":"jobs","."),s="Delete ".concat(i?"Documents":"Replication Jobs")),ae.createElement(en.u_,{dialogClassName:"replication_delete-doc-modal",show:t,onHide:function(){return n()}},ae.createElement(en.u_.Header,{closeButton:!0},ae.createElement(en.u_.Title,null,"Verify Deletion")),ae.createElement(en.u_.Body,null,ae.createElement("p",{dangerouslySetInnerHTML:{__html:a}}),ae.createElement("p",null,c)),ae.createElement(en.u_.Footer,null,ae.createElement("a",{className:"cancel-link",onClick:n},"Cancel"),ae.createElement(BR,{customIcon:"icon-trash",text:s,onClick:r})))};VR.propTypes={visible:Nt().bool.isRequired,isReplicationDB:Nt().bool.isRequired,onClick:Nt().func.isRequired,onClose:Nt().func.isRequired,multipleDocs:Nt().number.isRequired},VR.defaultProps={isReplicationDB:!0};var FR=function(e){var t=e.visible,n=e.onClose,r=e.errorMsg,o=e.status;if(!t)return null;var i="Replication Error",a=ae.createElement("p",null,"The replication job will be tried at increasing intervals");return"failed"===o.toLowerCase()&&(i="Replication Error - Failed",a=null),ae.createElement(en.u_,{dialogClassName:"replication__error-doc-modal",show:t,onHide:function(){return n()}},ae.createElement(en.u_.Header,{closeButton:!0},ae.createElement(en.u_.Title,null,i)),ae.createElement(en.u_.Body,null,ae.createElement("p",null,r),a),ae.createElement(en.u_.Footer,null))};FR.propTypes={visible:Nt().bool.isRequired,onClick:Nt().func.isRequired,onClose:Nt().func.isRequired,errorMsg:Nt().string.isRequired};var KR=function(e){var t=e.visible,n=e.docId,r=e.onClose,o=e.onClick;return t?ae.createElement(en.u_,{dialogClassName:"replication__error-doc-modal",show:t,onHide:function(){return r()}},ae.createElement(en.u_.Header,{closeButton:!0},ae.createElement(en.u_.Title,null,"Custom ID Conflict")),ae.createElement(en.u_.Body,null,ae.createElement("p",null,"A replication document with ID ",ae.createElement("code",null,n)," already exists."),ae.createElement("p",null,"You can overwrite the existing document, or change the new replication job’s document ID."),ae.createElement("p",null,"If you overwrite the existing document, any replication job currently using the replication document will stop, and that job will not appear in Replicator DB Activity. Replicated documents will not be affected.")),ae.createElement(en.u_.Footer,null,ae.createElement("button",{onClick:r,className:"btn replication__error-cancel"},"Change Document ID"),ae.createElement("button",{onClick:o,className:"btn replication__error-continue"},ae.createElement("i",{className:"icon icon-eraser"})," Overwrite Existing Document"))):null};function zR(e){return zR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zR(e)}function HR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GR(e,t){return GR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},GR(e,t)}function WR(e,t){if(t&&("object"===zR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return XR(e)}function XR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QR(e){return QR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},QR(e)}KR.propTypes={visible:Nt().bool.isRequired,onClick:Nt().func.isRequired,onClose:Nt().func.isRequired,docId:Nt().string.isRequired};var $R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GR(e,t)}(s,e);var t,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=QR(r);if(o){var n=QR(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return WR(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).submit=t.submit.bind(XR(t)),t.checkAuth=t.checkAuth.bind(XR(t)),t.runReplicationChecks=t.runReplicationChecks.bind(XR(t)),t}return t=s,n=[{key:"checkAuth",value:function(){var e=this;this.props.hideConflictModal();var t=this.props,n=t.replicationSource,r=t.replicationTarget,o=t.sourceAuthType,i=t.targetAuthType,a=t.sourceAuth,s=t.targetAuth,c=n===FN.REPLICATION_SOURCE.LOCAL,u=r===FN.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE||r===FN.REPLICATION_TARGET.NEW_LOCAL_DATABASE;if(!re.session.isAdminParty()){if(c&&o===FN.REPLICATION_AUTH_METHOD.NO_AUTH)return void re.addNotification({msg:"Missing credentials for local source database.",type:"error",clear:!0});if(u&&i===FN.REPLICATION_AUTH_METHOD.NO_AUTH)return void re.addNotification({msg:"Missing credentials for local target database.",type:"error",clear:!0})}this.checkLocalAccountCredentials(o,a,"source",c).then((function(){e.checkLocalAccountCredentials(i,s,"target",u).then((function(){e.submit()}),(function(){}))}),(function(){}))}},{key:"checkLocalAccountCredentials",value:function(e,t,n,r){if(e!==FN.REPLICATION_AUTH_METHOD.BASIC||!r)return re.Promise.resolve(!0);if(!t.username||!t.password){var o="Missing ".concat(n," credentials.");return re.addNotification({msg:o,type:"error",clear:!0}),re.Promise.reject(new Error(o))}return this.checkCredentials(t.username,t.password).then((function(e){if(e.error)throw e;return!0})).catch((function(e){throw re.addNotification({msg:"Your username or password for ".concat(n," database is incorrect."),type:"error",clear:!0}),e}))}},{key:"checkCredentials",value:function(e,t){return g(N.getServerUrl("/"),"GET",{credentials:"omit",headers:{Authorization:"Basic "+VN().encode(e+":"+t)}})}},{key:"checkReplicationDocID",value:function(){var e=this,t=this.props,n=t.showConflictModal,r=t.replicationDocName;(0,t.checkReplicationDocID)(r).then((function(t){t?n():e.checkAuth()}))}},{key:"runReplicationChecks",value:function(){var e=this.props.replicationDocName;this.checkSourceTargetDatabases()&&(e?this.checkReplicationDocID():this.checkAuth())}},{key:"checkSourceTargetDatabases",value:function(){var e=this.props,t=e.remoteTarget,n=e.remoteSource,r=e.replicationSource,o=e.replicationTarget,i=e.localTarget,s=e.localSource,c=e.databases;if(o===FN.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&-1!==_.indexOf(c,i))return re.addNotification({msg:"The <code>"+i+"</code> database already exists locally. Please enter another database name.",type:"error",escape:!1,clear:!0}),!1;if(o===FN.REPLICATION_TARGET.NEW_LOCAL_DATABASE||o===FN.REPLICATION_TARGET.NEW_REMOTE_DATABASE){var u="";if(/\s/.test(i)?u="The target database may not contain any spaces.":/^_/.test(i)&&(u="The target database may not start with an underscore."),u)return re.addNotification({msg:u,type:"error",escape:!1,clear:!0}),!1}if(r===FN.REPLICATION_SOURCE.REMOTE&&!(0,a.isEmpty)(n)){var l="";try{""===new URL(n).pathname.slice(1)&&(l="Invalid source database URL. Database name is missing.")}catch(e){l="Invalid source database URL."}if(l)return re.addNotification({msg:l,type:"error",escape:!1,clear:!0}),!1}if((o===FN.REPLICATION_TARGET.NEW_REMOTE_DATABASE||o===FN.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE)&&!(0,a.isEmpty)(t)){var p="";try{""===new URL(t).pathname.slice(1)&&(p="Invalid target database URL. Database name is missing.")}catch(e){p="Invalid target database URL."}if(p)return re.addNotification({msg:p,type:"error",escape:!1,clear:!0}),!1}return!(t===n&&!(0,a.isEmpty)(t)||s===i&&!(0,a.isEmpty)(s))||(re.addNotification({msg:"Cannot replicate a database to itself",type:"error",escape:!1,clear:!0}),!1)}},{key:"submit",value:function(){var e,t=this.props,n=t.replicationTarget,r=t.replicationSource,o=t.replicationType,i=t.replicationDocName,a=t.remoteTarget,s=t.remoteSource,c=t.localTarget,u=t.localSource,l=t.sourceAuthType,p=t.sourceAuth,f=t.targetAuthType,d=t.targetAuth,h=t.targetDatabasePartitioned;if(i){var y=this.props.docs.find((function(e){return e._id===i}));y&&(e=y._rev)}this.props.replicate({replicationTarget:n,replicationSource:r,replicationType:o,replicationDocName:i,localTarget:c,localSource:u,remoteTarget:a,remoteSource:s,_rev:e,sourceAuthType:l,sourceAuth:p,targetAuthType:f,targetAuth:d,targetDatabasePartitioned:h})}},{key:"confirmButtonEnabled",value:function(){var e=this.props,t=e.remoteSource,n=e.localSourceKnown,r=e.replicationSource,o=e.replicationTarget,i=e.localTargetKnown,a=e.localTarget;return!(e.submittedNoChange||!r||!o||r===FN.REPLICATION_SOURCE.LOCAL&&!n||o===FN.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE&&!i||o===FN.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&!a||r===FN.REPLICATION_SOURCE.REMOTE&&""===t)}},{key:"render",value:function(){var e=this.props,t=e.replicationSource,n=e.replicationTarget,r=e.replicationType,o=e.replicationDocName,i=e.conflictModalVisible,a=e.databases,s=e.localSource,c=e.remoteSource,u=e.remoteTarget,l=e.localTarget,p=e.targetDatabasePartitioned,f=e.allowNewPartitionedLocalDbs,d=e.updateFormField,h=e.clearReplicationForm,y=e.sourceAuthType,b=e.sourceAuth,m=e.targetAuthType,g=e.targetAuth;return ae.createElement("div",{style:{paddingBottom:20}},ae.createElement(eR,{replicationSource:t,localSource:s,databases:a,remoteSource:c,onSourceSelect:d("replicationSource"),onRemoteSourceChange:d("remoteSource"),onLocalSourceChange:d("localSource")}),ae.createElement(UR,{credentials:b,authType:y,onChangeAuthType:d("sourceAuthType"),onChangeAuth:d("sourceAuth"),authId:"replication-source-auth"}),ae.createElement("hr",{className:"replication__seperator",size:"1"}),ae.createElement(hR,{replicationTarget:n,onTargetChange:d("replicationTarget"),databases:a,localTarget:l,remoteTarget:u,allowNewPartitionedLocalDbs:f,targetDatabasePartitioned:p,onRemoteTargetChange:d("remoteTarget"),onLocalTargetChange:d("localTarget"),onTargetDatabasePartitionedChange:d("targetDatabasePartitioned")}),ae.createElement(UR,{credentials:g,authType:m,onChangeAuthType:d("targetAuthType"),onChangeAuth:d("targetAuth"),authId:"replication-target-auth"}),ae.createElement("hr",{className:"replication__seperator",size:"1"}),ae.createElement(SR,{replicationType:r,replicationDocName:o,onDocChange:d("replicationDocName"),onTypeChange:d("replicationType")}),ae.createElement(NR,{disabled:!this.confirmButtonEnabled(),onClick:this.runReplicationChecks,onClear:h}),ae.createElement(KR,{visible:i,onClick:this.checkAuth,onClose:this.props.hideConflictModal,docId:o}))}}],n&&HR(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(ae.Component);function JR(e){return JR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JR(e)}var YR=null,ZR=function(e){return YR&&!e||(YR=new re.Promise((function(e){var t=N.getServerUrl("/_scheduler/jobs");v(t,{raw:!0}).then((function(t){if(t.status>202)return e(!1);e(!0)}))}))),YR},eP=function(e){if(!e)return"";var t=new URL(e);return"".concat(t.origin,"/").concat(encodeURIComponent(t.pathname.slice(1)))},tP=function(e){if(!e)return"";var t=new URL(e);return"".concat(t.origin,"/").concat(decodeURIComponent(t.pathname.slice(1)))},nP=function(e){var t=e.lastIndexOf("@");return-1===t?e:(e.startsWith("https")?"https://":"http://")+e.slice(t+1)},rP=function(e){var t=e.replicationSource,n=e.localSource,r=e.remoteSource,o=e.sourceAuthType,i=e.sourceAuth,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location,s=a.origin,c=a.pathname,u={};if(t===FN.REPLICATION_SOURCE.LOCAL){var l=encodeURIComponent(n),p=N.getRootUrl({origin:s,pathname:c});u.url="".concat(p).concat(l)}else u.url=eP(nP(r));return iP(u,o,i),u},oP=function(e){var t=e.replicationTarget,n=e.localTarget,r=e.remoteTarget,o=e.targetAuthType,i=e.targetAuth,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location,s=a.origin,c=a.pathname,u={};if(t===FN.REPLICATION_TARGET.NEW_REMOTE_DATABASE||t===FN.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE)u.url=eP(nP(r));else{var l=encodeURIComponent(n),p=N.getRootUrl({origin:s,pathname:c});u.url="".concat(p).concat(l)}return iP(u,o,i),u},iP=function(e,t,n){if(t&&t!==FN.REPLICATION_AUTH_METHOD.NO_AUTH)if(t===FN.REPLICATION_AUTH_METHOD.BASIC)e.headers=(o=n.username,i=n.password,o&&i?{Authorization:"Basic "+VN().encode(o+":"+i)}:{});else{var r=re.getExtensions("Replication:Auth");r&&r.filter((function(e){return e.typeValue===t})).map((function(t){t.setCredentials&&t.setCredentials(e,n)}))}else e.headers={};var o,i},aP=function(e){return-1!==s().indexOf([FN.REPLICATION_TARGET.NEW_LOCAL_DATABASE,FN.REPLICATION_TARGET.NEW_REMOTE_DATABASE],e)},sP=function(e){return e===FN.REPLICATION_TYPE.CONTINUOUS},cP=function(e){var t=e;return e?("object"===JR(e)&&(t=e.url),function(e){try{var t=new URL(e);return"".concat(t.origin,"/").concat(decodeURIComponent(t.pathname.slice(1)))}catch(t){return e}}(t)):""},uP=function(e){return"error"===e.toLowerCase()||"crashing"===e.toLowerCase()?"retrying":e},lP=function(){return ZR().then((function(e){var t=N.getServerUrl("/_replicator/_all_docs?include_docs=true&limit=100"),n=v(t).then((function(e){return e.error?[]:e.rows.filter((function(e){return-1===e.id.indexOf("_design/")})).map((function(e){return e.doc})).map((function(e){return{_id:e._id,_rev:e._rev,selected:!1,source:cP(e.source),target:cP(e.target),createTarget:e.create_target,continuous:!0===e.continuous,status:e._replication_state,errorMsg:e._replication_state_reason?e._replication_state_reason:"",statusTime:new Date(e._replication_state_time),startTime:new Date(e._replication_start_time),url:"#/database/_replicator/".concat(encodeURIComponent(e._id)),raw:e}}))}));if(!e)return n;var r=pP();return re.Promise.join(n,r,(function(e,t){return function(e,t){return e.map((function(e){var n=t.find((function(t){return t.doc_id===e._id}));return n?(e.status=uP(n.state),n.start_time&&(e.startTime=new Date(n.start_time)),n.last_updated&&(e.stateTime=new Date(n.last_updated)),e):e}))}(e,t)})).catch((function(){return[]}))}))},pP=function(){var e=N.getServerUrl("/_scheduler/docs?include_docs=true");return v(e).then((function(e){return e.error?[]:e.docs}))},fP=function(e){return new Promise((function(t){var n=N.getServerUrl("/_replicator/".concat(e));v(n).then((function(e){"not_found"!==e.error?t(!0):t(!1)}))}))};function dP(e){return dP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dP(e)}function hP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bP(e,t,n){return t&&yP(e.prototype,t),n&&yP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mP(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gP(e,t)}function gP(e,t){return gP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gP(e,t)}function _P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wP(e);if(t){var o=wP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vP(this,n)}}function vP(e,t){if(t&&("object"===dP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function wP(e){return wP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wP(e)}var EP=function(e){var t,n;try{t=new URL(nP(e))}catch(e){return""}var r=N.getRootUrl();return n=function(e,t){try{var n=new URL(t),r=e.pathname.substring(n.pathname.length);return encodeURIComponent(r)}catch(e){return""}}(t,r),e.indexOf(window.location.hostname)>-1?ae.createElement("span",null,r,ae.createElement("a",{href:"#/database/".concat(n,"/_all_docs")},decodeURIComponent(n))):"".concat(t.origin).concat(t.pathname)},OP=function(e){mP(n,e);var t=_P(n);function n(e){var r;return hP(this,n),(r=t.call(this,e)).state={modalVisible:!1},r}return bP(n,[{key:"showModal",value:function(){this.setState({modalVisible:!0})}},{key:"closeModal",value:function(){this.setState({modalVisible:!1})}},{key:"getErrorIcon",value:function(){var e=this.props.status;return"error"!==e&&"retrying"!==e?null:ae.createElement("span",null,ae.createElement("a",{"data-bypass":"true",className:"replication__row-btn replication__row-btn--warning icon-exclamation-sign",onClick:this.showModal.bind(this),title:"View error message"}),ae.createElement(FR,{onClick:this.closeModal.bind(this),onClose:this.closeModal.bind(this),errorMsg:this.props.errorMsg,visible:this.state.modalVisible,status:e}))}},{key:"render",value:function(){var e=this.props,t=e.statusTime,n=e.status,r=h()(t),o=ae.createElement("span",null,n);if(r.isValid()){var i=r.format("MMM Do, h:mm a"),a=ae.createElement(en.u,{id:""},"Last updated: ",i);o=ae.createElement(en.Ox,{placement:"top",overlay:a},ae.createElement("span",null,n))}return ae.createElement("td",{className:"replication__row-status replication__row-status--".concat(n)},o,this.getErrorIcon())}}]),n}(ae.Component);OP.propTypes={statusTime:Nt().any,status:Nt().string,errorMsg:Nt().string.isRequired},OP.defaultProps={status:""};var SP=function(e){var t=e.onlyDeleteAction,n=e._id,r=e.url,o=e.deleteDocs,i=[];return t||(i.push(ae.createElement("li",{className:"replication__row-list",key:1},ae.createElement("a",{href:"#replication/id/".concat(encodeURIComponent(n)),className:"replication__row-btn icon-wrench replication__row-btn--no-left-pad",title:"Edit replication","data-bypass":"true"}))),i.push(ae.createElement("li",{className:"replication__row-list",key:2},ae.createElement("a",{className:"replication__row-btn fonticon-document",title:"Edit replication document",href:r,"data-bypass":"true"})))),i.push(ae.createElement("li",{className:"replication__row-list",key:3},ae.createElement("a",{className:"replication__row-btn icon-trash ".concat(t?"replication__row-btn--no-left-pad":""," "),title:"Delete ".concat(t?"job":"document"," ").concat(n),onClick:function(){return o(n)}}))),ae.createElement("ul",{className:"replication__row-actions-list"},i)};SP.propTypes={_id:Nt().string.isRequired,url:Nt().string,error:Nt().bool.isRequired,errorMsg:Nt().string.isRequired,deleteDocs:Nt().func.isRequired};var DP=function(e){var t=e._id,n=e.source,r=e.target,o=e.type,i=e.startTime,a=e.status,s=e.statusTime,c=e.url,u=e.selected,l=e.selectDoc,p=e.errorMsg,f=e.deleteDocs,d=e.onlyDeleteAction,y=e.showStateRow,b=h()(i),m=b.isValid()?b.format("MMM Do, h:mm a"):"",g=null;return y&&(g=ae.createElement(OP,{statusTime:s,status:a,errorMsg:p})),ae.createElement("tr",{className:"replication__table-row"},ae.createElement("td",{className:"replication__table-col"},ae.createElement("input",{checked:u,type:"checkbox",onChange:function(){return l(t)}})," "),ae.createElement("td",{className:"replication__table-col"},EP(n)),ae.createElement("td",{className:"replication__table-col"},EP(r)),ae.createElement("td",{className:"replication__table-col"},m),ae.createElement("td",{className:"replication__table-col"},o),g,ae.createElement("td",{className:"replication__table-col"},ae.createElement(SP,{onlyDeleteAction:d,deleteDocs:f,_id:t,url:c,error:"error"===a||"retrying"===a,errorMsg:p})))};DP.propTypes={_id:Nt().string.isRequired,source:Nt().string.isRequired,target:Nt().string.isRequired,type:Nt().string.isRequired,status:Nt().string,url:Nt().string,statusTime:Nt().object.isRequired,startTime:Nt().object,selected:Nt().bool.isRequired,selectDoc:Nt().func.isRequired,errorMsg:Nt().string.isRequired,deleteDocs:Nt().func.isRequired,onlyDeleteAction:Nt().bool.isRequired,showStateRow:Nt().bool.isRequired};var NP=function(e){var t=e.isSelected,n=e.deleteDocs,r=e.someDocsSelected,o=e.onCheck,i=r?ae.createElement("button",{onClick:function(){return n()},className:"bulk-select-trash fonticon fonticon-trash",title:"Delete all selected"}):null;return ae.createElement("div",{className:"replication__bulk-select-wrapper"},ae.createElement("div",{className:"replication__bulk-select-header"},ae.createElement("input",{className:"replication__bulk-select-input",checked:t,type:"checkbox",onChange:o})),i)};NP.propTypes={isSelected:Nt().bool.isRequired,someDocsSelected:Nt().bool.isRequired,onCheck:Nt().func.isRequired,deleteDocs:Nt().func.isRequired};var RP=function(e){var t=e.msg;return ae.createElement("tr",null,ae.createElement("td",{colSpan:"7",className:"replication__empty-row"},t))};RP.defaultProps={msg:"There is no replicator-db activity or history to display."};var PP=function(e){mP(n,e);var t=_P(n);function n(e){return hP(this,n),t.call(this,e)}return bP(n,[{key:"sort",value:function(e,t,n){var r=!1,o=n.sort((function(t,n){return t[e]<n[e]?(r=!0,-1):t[e]>n[e]?(r=!0,1):0}));return!t&&r&&o.reverse(),o}},{key:"renderRows",value:function(){var e=this;return 0===this.props.docs.length?ae.createElement(RP,null):this.sort(this.props.column,this.props.descending,this.props.docs).map((function(t,n){return ae.createElement(DP,{key:n,_id:t._id,selected:t.selected,selectDoc:e.props.selectDoc,source:t.source,target:t.target,type:!0===t.continuous?"Continuous":"One time",status:t.status,statusTime:t.statusTime,startTime:t.startTime,url:t.url,deleteDocs:e.props.deleteDocs,errorMsg:t.errorMsg,doc:t,onlyDeleteAction:e.props.onlyDeleteAction,showStateRow:e.props.showStateRow})}))}},{key:"iconDirection",value:function(e){return e!==this.props.column||this.props.descending?"fonticon-down-dir":"fonticon-up-dir"}},{key:"onSort",value:function(e){var t=this;return function(){t.props.changeSort({descending:e!==t.props.column||!t.props.descending,column:e})}}},{key:"isSelected",value:function(e){return e===this.props.column?"replication__table--selected":""}},{key:"stateCol",value:function(){return this.props.showStateRow?ae.createElement("th",{className:"replication__table-header-status",onClick:this.onSort("status")},"State",ae.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("status")," ").concat(this.isSelected("status"))})):null}},{key:"render",value:function(){return ae.createElement(en.iA,{striped:!0},ae.createElement("thead",null,ae.createElement("tr",null,ae.createElement("th",{className:"replication__table-bulk-select"},ae.createElement(NP,{isSelected:this.props.allDocsSelected,onCheck:this.props.selectAllDocs,someDocsSelected:this.props.someDocsSelected,deleteDocs:this.props.deleteDocs})),ae.createElement("th",{className:"replication__table-header-source",onClick:this.onSort("source")},"Source",ae.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("source")," ").concat(this.isSelected("source"))})),ae.createElement("th",{className:"replication__table-header-target",onClick:this.onSort("target")},"Target",ae.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("target")," ").concat(this.isSelected("target"))})),ae.createElement("th",{className:"replication__table-header-time",onClick:this.onSort("statusTime")},"Start Time",ae.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("statusTime")," ").concat(this.isSelected("statusTime"))})),ae.createElement("th",{className:"replication__table-header-type",onClick:this.onSort("continuous")},"Type",ae.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("continuous")," ").concat(this.isSelected("continuous"))})),this.stateCol(),ae.createElement("th",{className:"replication__table-header-actions"},"Actions"))),ae.createElement("tbody",null,this.renderRows()))}}]),n}(ae.Component);PP.defaultProps={onlyDeleteAction:!1,showStateRow:!0};var CP=function(e){var t=e.value,n=e.onChange;return ae.createElement("div",{className:"replication__filter"},ae.createElement("i",{className:"replication__filter-icon fonticon-filter"}),ae.createElement("input",{type:"text",placeholder:"Filter replications",className:"replication__filter-input",value:t,onChange:function(e){n(e.target.value)}}))};CP.propTypes={value:Nt().string.isRequired,onChange:Nt().func.isRequired};var TP=function(e){var t=e.filter,n=e.onFilterChange;return ae.createElement("div",{className:"replication__activity_header"},ae.createElement("div",null),ae.createElement(CP,{value:t,onChange:n}),ae.createElement("a",{href:"#/replication/_create",className:"btn save replication__activity_header-btn btn-primary"},ae.createElement("i",{className:"icon fonticon-plus-circled"}),"New Replication"))};function xP(e){return xP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xP(e)}function kP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jP(e,t){return jP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jP(e,t)}function IP(e,t){if(t&&("object"===xP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function AP(e){return AP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},AP(e)}TP.propTypes={filter:Nt().string.isRequired,onFilterChange:Nt().func.isRequired};var LP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jP(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=AP(r);if(o){var n=AP(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return IP(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={modalVisible:!1,unconfirmedDeleteDocId:null},t}return t=a,n=[{key:"closeModal",value:function(){this.setState({modalVisible:!1,unconfirmedDeleteDocId:null})}},{key:"showModal",value:function(e){this.setState({modalVisible:!0,unconfirmedDeleteDocId:e})}},{key:"confirmDeleteDocs",value:function(){var e=this,t=[];if(this.state.unconfirmedDeleteDocId){var n=this.props.docs.find((function(t){return t._id===e.state.unconfirmedDeleteDocId}));t.push(n)}else t=this.props.docs.filter((function(e){return e.selected}));this.props.deleteDocs(t),this.closeModal()}},{key:"numDocsSelected",value:function(){return this.props.docs.filter((function(e){return e.selected})).length}},{key:"render",value:function(){var e=this.props,t=e.onFilterChange,n=e.activitySort,r=e.changeActivitySort,o=e.docs,i=e.filter,a=e.selectAllDocs,s=e.someDocsSelected,c=e.allDocsSelected,u=e.selectDoc,l=this.state.modalVisible;return ae.createElement("div",{className:"replication__activity"},ae.createElement("p",{className:"replication__activity-caveat"},"Replications must have a replication document to display in the following table. Up to about 100 replications are displayed."),ae.createElement(TP,{filter:i,onFilterChange:t}),ae.createElement(PP,{someDocsSelected:s,allDocsSelected:c,selectAllDocs:a,docs:o,selectDoc:u,deleteDocs:this.showModal.bind(this),descending:n.descending,column:n.column,changeSort:r}),ae.createElement(VR,{isReplicationDB:!0,multipleDocs:this.numDocsSelected(),visible:l,onClose:this.closeModal.bind(this),onClick:this.confirmDeleteDocs.bind(this)}))}}],n&&kP(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function MP(e){return MP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MP(e)}function UP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qP(e,t){return qP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qP(e,t)}function BP(e,t){if(t&&("object"===MP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function VP(e){return VP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},VP(e)}LP.propTypes={docs:Nt().array.isRequired,filter:Nt().string.isRequired,selectAllDocs:Nt().func.isRequired,allDocsSelected:Nt().bool.isRequired,someDocsSelected:Nt().bool.isRequired,selectDoc:Nt().func.isRequired,onFilterChange:Nt().func.isRequired,deleteDocs:Nt().func.isRequired,activitySort:Nt().object.isRequired,changeActivitySort:Nt().func.isRequired};var FP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qP(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=VP(r);if(o){var n=VP(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return BP(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={modalVisible:!1,unconfirmedDeleteDocId:null},t}return t=a,n=[{key:"closeModal",value:function(){this.setState({modalVisible:!1,unconfirmedDeleteDocId:null})}},{key:"showModal",value:function(e){this.setState({modalVisible:!0,unconfirmedDeleteDocId:e})}},{key:"confirmDeleteDocs",value:function(){var e=this,t=[];if(this.state.unconfirmedDeleteDocId){var n=this.props.docs.find((function(t){return t._id===e.state.unconfirmedDeleteDocId}));t.push(n)}else t=this.props.docs.filter((function(e){return e.selected}));this.props.deleteDocs(t),this.closeModal()}},{key:"numDocsSelected",value:function(){return this.props.docs.filter((function(e){return e.selected})).length}},{key:"render",value:function(){var e=this.props,t=e.onFilterChange,n=e.activitySort,r=e.changeActivitySort,o=e.docs,i=e.filter,a=e.selectAllDocs,s=e.someDocsSelected,c=e.allDocsSelected,u=e.selectDoc,l=this.state.modalVisible;return ae.createElement("div",{className:"replication__activity"},ae.createElement("p",{className:"replication__activity-caveat"},"Active _replicate jobs are displayed. Completed and failed jobs are not."),ae.createElement(TP,{filter:i,onFilterChange:t}),ae.createElement(PP,{onlyDeleteAction:!0,showStateRow:!1,someDocsSelected:s,allDocsSelected:c,selectAllDocs:a,docs:o,selectDoc:u,deleteDocs:this.showModal.bind(this),descending:n.descending,column:n.column,changeSort:r}),ae.createElement(VR,{isReplicationDB:!1,multipleDocs:this.numDocsSelected(),visible:l,onClose:this.closeModal.bind(this),onClick:this.confirmDeleteDocs.bind(this)}))}}],n&&UP(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function KP(e){return KP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KP(e)}function zP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GP(e,t){return GP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},GP(e,t)}function WP(e,t){if(t&&("object"===KP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function XP(e){return XP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},XP(e)}FP.propTypes={docs:Nt().array.isRequired,filter:Nt().string.isRequired,selectAllDocs:Nt().func.isRequired,allDocsSelected:Nt().bool.isRequired,someDocsSelected:Nt().bool.isRequired,selectDoc:Nt().func.isRequired,onFilterChange:Nt().func.isRequired,deleteDocs:Nt().func.isRequired,activitySort:Nt().object.isRequired,changeActivitySort:Nt().func.isRequired};var QP=ga.LoadLines,$P=ga.Polling,JP=ga.RefreshBtn,YP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GP(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=XP(r);if(o){var n=XP(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return WP(this,e)});function a(){return zP(this,a),i.apply(this,arguments)}return t=a,n=[{key:"loadReplicationInfo",value:function(e,t){this.props.initReplicator(e.routeLocalSource,e.localSource),this.getAllActivity(),this.loadReplicationStateFrom(e,t)}},{key:"loadReplicationStateFrom",value:function(e,t){e.replicationId&&e.replicationId!==t.replicationId&&(this.props.clearReplicationForm(),this.props.getReplicationStateFrom(e.replicationId))}},{key:"getAllActivity",value:function(){this.props.getReplicationActivity(),this.props.getReplicateActivity()}},{key:"componentDidMount",value:function(){this.props.checkForNewApi(),this.props.getDatabasesList(),this.loadReplicationInfo(this.props,{})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.loadReplicationStateFrom(e,this.props),"new replication"!==this.props.tabSection&&"new replication"===e.tabSection&&this.props.clearReplicationForm()}},{key:"componentWillUnmount",value:function(){this.props.clearReplicationForm()}},{key:"showSection",value:function(){var e=this.props,t=e.replicationSource,n=e.replicationTarget,r=e.replicationType,o=e.replicationDocName,i=e.databases,a=e.localSource,s=e.remoteSource,c=e.remoteTarget,u=e.localTarget,l=e.statusDocs,p=e.statusFilter,f=e.loading,d=e.allDocsSelected,h=e.someDocsSelected,y=e.showConflictModal,b=e.localSourceKnown,m=e.localTargetKnown,g=e.updateFormField,_=e.authenticated,v=e.activityLoading,w=e.submittedNoChange,E=e.activitySort,O=e.tabSection,S=e.replicateInfo,D=e.replicateLoading,N=e.replicateFilter,R=e.allReplicateSelected,P=e.someReplicateSelected,C=e.hideConflictModal,T=e.isConflictModalVisible,x=e.filterDocs,k=e.filterReplicate,j=e.replicate,I=e.clearReplicationForm,A=e.selectAllDocs,L=e.changeActivitySort,M=e.selectDoc,U=e.deleteDocs,q=e.deleteReplicates,B=e.selectAllReplicates,V=e.selectReplicate,F=e.sourceAuthType,K=e.sourceAuth,z=e.targetAuthType,H=e.targetAuth,G=e.targetDatabasePartitioned,W=e.allowNewPartitionedLocalDbs;return"new replication"===O?f?ae.createElement(QP,null):ae.createElement($R,{docs:l,localTargetKnown:m,localSourceKnown:b,clearReplicationForm:I,replicate:j,replicationSource:t,replicationTarget:n,replicationType:r,replicationDocName:o,databases:i,localSource:a,remoteSource:s,remoteTarget:c,localTarget:u,sourceAuthType:F,sourceAuth:K,targetAuthType:z,targetAuth:H,targetDatabasePartitioned:G,allowNewPartitionedLocalDbs:W,updateFormField:g,conflictModalVisible:T,hideConflictModal:C,showConflictModal:y,checkReplicationDocID:fP,authenticated:_,submittedNoChange:w}):"_replicate"===O?D?ae.createElement(QP,null):ae.createElement(FP,{docs:S,filter:N,onFilterChange:k,selectDoc:V,selectAllDocs:B,allDocsSelected:R,someDocsSelected:P,activitySort:E,changeActivitySort:L,deleteDocs:q}):v?ae.createElement(QP,null):ae.createElement(LP,{docs:l,filter:p,onFilterChange:x,selectAllDocs:A,selectDoc:M,allDocsSelected:d,someDocsSelected:h,deleteDocs:U,activitySort:E,changeActivitySort:L})}},{key:"getHeaderComponents",value:function(){if("new replication"===this.props.tabSection)return null;var e="right-header-flex";return N.isIE1X()&&(e+=" "+e+"--ie1X"),ae.createElement("div",{className:e},ae.createElement($P,{min:60,max:600,startValue:300,stepSize:60,onPoll:this.getAllActivity.bind(this)}),ae.createElement(JP,{refresh:this.getAllActivity.bind(this)}))}},{key:"getTabElements",value:function(){var e=this.props.tabSection,t=[ae.createElement(ki,{key:1,selected:"activity"===e,text:"Replicator DB Activity",onChange:this.onTabChange.bind(this,"activity","#/replication")})];return this.props.supportNewApi&&t.push(ae.createElement(ki,{key:2,selected:"_replicate"===e,text:"_replicate Activity",onChange:this.onTabChange.bind(this,"_replicate","#/replication/_replicate")})),t}},{key:"onTabChange",value:function(e,t){re.navigate(t)}},{key:"getCrumbs",value:function(){return"new replication"===this.props.tabSection?[{name:"Job Configuration"}]:[{name:"Replication"}]}},{key:"getTabs",value:function(){return"new replication"===this.props.tabSection?null:ae.createElement(Ii,null,this.getTabElements())}},{key:"render",value:function(){return this.props.checkingAPI?ae.createElement(QP,null):ae.createElement(Ht,null,ae.createElement(Gt,{crumbs:this.getCrumbs()},this.getHeaderComponents()),ae.createElement(Wt,null,ae.createElement("div",{className:"template-content flex-body flex-layout flex-col"},this.getTabs(),ae.createElement("div",{className:"replication__page flex-layout flex-col"},this.showSection()))))}}],n&&HP(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);const ZP="INIT_REPLICATION",eC="REPLICATION_DATABASES_LOADED",tC="REPLICATION_UPDATE_FORM_FIELD",nC="REPLICATION_CLEAR_FORM",rC="REPLICATION_STARTING",oC="REPLICATION_STATUS",iC="REPLICATION_FETCHING_STATUS",aC="REPLICATION_FILTER_DOCS",sC="REPLICATION_TOGGLE_ALL_DOCS",cC="REPLICATION_TOGGLE_DOC",uC="REPLICATION_SET_STATE_FROM_DOC",lC="REPLICATION_SHOW_CONFLICT_MODAL",pC="REPLICATION_HIDE_CONFLICT_MODAL",fC="REPLICATION_CHANGE_ACTIVITY_SORT",dC="REPLICATION_CLEAR_SELECTED_DOCS",hC="REPLICATION_CHANGE_TAB_SECTION",yC="REPLICATION_FETCHING_REPLICATE_STATUS",bC="REPLICATION_REPLICATE_STATUS",mC="REPLICATION_SUPPORT_NEW_API",gC="REPLICATION_FILTER_REPLICATE",_C="REPLICATION_TOGGLE_ALL_REPLICATE",vC="REPLICATION_TOGGLE_REPLICATE",wC="REPLICATION_CLEAR_SELECTED_REPLICATES",EC="REPLICATION_FETCHING_FORM_STATE",OC=function(e){var t=s().isString(e)?e.trim().replace(/\/$/,""):e.url;return new URL(t).pathname.slice(1).split("/").pop()};var SC=function e(t){return function(n){var r=function(e){var t=e.replicationTarget,n=e.replicationSource,r=e.replicationType,o=e.replicationDocName,i=e.localTarget,a=e.localSource,s=e.remoteTarget,c=e.remoteSource,u=e._rev,l=e.sourceAuthType,p=e.sourceAuth,f=e.targetAuthType,d=e.targetAuth,h=e.targetDatabasePartitioned,y={user_ctx:{name:re.session.user().name,roles:["_admin","_reader","_writer"]},source:rP({replicationSource:n,localSource:a,remoteSource:c,sourceAuthType:l,sourceAuth:p}),target:oP({replicationTarget:t,replicationSource:n,remoteTarget:s,localTarget:i,targetAuthType:f,targetAuth:d}),create_target:aP(t),continuous:sP(r)};return h&&(y.create_target_params={partitioned:!0}),function(e,t,n){return e&&(n._id=e),t&&(n._rev=t),n}(o,u,y)}(t),o=N.getServerUrl("/_replicator"),i=E(o,r),a=OC(r.source),s=OC(r.target);n({type:rC});var c=function(e){re.addNotification({msg:e.reason,type:"error",clear:!0})};return i.then((function(e){if(!e.ok)throw e;re.addNotification({msg:"Replication from <code>".concat(decodeURIComponent(a),"</code> to <code>").concat(decodeURIComponent(s),"</code> has been scheduled."),type:"success",escape:!1,clear:!0}),n(DC()),re.navigate("#/replication")})).catch((function(r){if(r.error&&"not_found"===r.error)return function(){var e=N.getServerUrl("/_replicator");return O(e).then((function(e){if(!e.ok)throw{reason:"Failed to create the _replicator database."};return!0}))}().then((function(){return e(t)(n)})).catch(c);c(r)}))}},DC=function(){return function(e){e({type:iC}),ZR().then((function(e){return lP()})).then((function(t){e({type:oC,options:t})}))}},NC=function(){return function(e){ZR().then((function(t){t&&(e({type:yC}),ZR().then((function(e){if(!e)return[];var t=N.getServerUrl("/_scheduler/jobs");return v(t).then((function(e){return function(e){return e.jobs.filter((function(e){return null===e.database})).map((function(e){return{_id:e.id,source:cP(e.source.slice(0,e.source.length-1)),target:cP(e.target.slice(0,e.target.length-1)),startTime:new Date(e.start_time),statusTime:new Date(e.last_updated),status:uP(e.history[0].type),errorMsg:"",selected:!1,continuous:/continuous/.test(e.id),raw:e}}))}(e)}))})).then((function(t){e({type:bC,options:t})})))}))}},RC=function(e){var t={type:FN.REPLICATION_AUTH_METHOD.NO_AUTH,creds:{}};if(e.headers&&e.headers.Authorization){var n=e.headers.Authorization.substring(6);try{var r=VN().decode(n);return t.type=FN.REPLICATION_AUTH_METHOD.BASIC,t.creds={username:r.split(":")[0],password:r.split(":")[1]},t}catch(e){throw new Error("Error decoding Authorization header from replication document")}}var o=re.getExtensions("Replication:Auth"),i=void 0,a=void 0;return o&&o.map((function(t){!i&&t.getCredentials&&(i=t.getCredentials(e),a=t.typeValue)})),i&&(t.type=a,t.creds=i),t},PC=function(){return function(e){ZR().then((function(t){e({type:mC,options:t})}))}};function CC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CC(Object(n),!0).forEach((function(t){xC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kC=function(e){ie.utils.localStorageSet("replication-activity-sort",e)},jC=function(){var e=ie.utils.localStorageGet("replication-activity-sort");return e||(e={descending:!1,column:"statusTime"}),kC(e),e},IC={remoteSource:"remoteSource",remoteTarget:"remoteTarget",localTarget:"localTarget",replicationType:"replicationType",replicationDocName:"replicationDocName",replicationSource:"replicationSource",replicationTarget:"replicationTarget",localSource:"localSource",sourceAuthType:"sourceAuthType",sourceAuth:"sourceAuth",targetAuthType:"targetAuthType",targetAuth:"targetAuth",targetDatabasePartitioned:"targetDatabasePartitioned"},AC={loading:!1,databases:[],replicationSource:"",localSource:"",remoteSource:"",sourceAuthType:FN.REPLICATION_AUTH_METHOD.NO_AUTH,sourceAuth:{},replicationTarget:"",localTarget:"",remoteTarget:"",targetAuthType:FN.REPLICATION_AUTH_METHOD.NO_AUTH,targetAuth:{},targetDatabasePartitioned:!1,isConflictModalVisible:!1,replicationType:FN.REPLICATION_TYPE.ONE_TIME,replicationDocName:"",submittedNoChange:!1,statusDocs:[],statusFilteredStatusDocs:[],statusFilter:"",replicateFilter:"",allDocsSelected:!1,allReplicateSelected:!1,username:"",password:"",activityLoading:!1,tabSection:"new replication",supportNewApi:!1,fetchingReplicateInfo:!1,replicateInfo:[],checkingAPI:!0,activitySort:jC()},LC=function(e){var t=TC({},e);return Object.values(IC).forEach((function(e){t[e]="sourceAuth"===e||"targetAuth"===e?{}:"targetDatabasePartitioned"!==e&&""})),t.sourceAuthType=FN.REPLICATION_AUTH_METHOD.NO_AUTH,t.targetAuthType=FN.REPLICATION_AUTH_METHOD.NO_AUTH,t},MC=function(e,t,n){var r=TC(TC({},e),{},{submittedNoChange:!1});if(r[IC[t]]=n,t===IC.sourceAuthType||t===IC.replicationSource){var o=r[IC.sourceAuthType]===FN.REPLICATION_AUTH_METHOD.BASIC,i=r[IC.replicationSource]===FN.REPLICATION_SOURCE.LOCAL,a=!r[IC.sourceAuth]||!r[IC.sourceAuth].username;o&&i&&a&&(r[IC.sourceAuth]={username:re.session.user().name,password:""})}else if(t===IC.targetAuthType||t===IC.replicationTarget){var s=r[IC.targetAuthType]===FN.REPLICATION_AUTH_METHOD.BASIC,c=r[IC.replicationTarget]===FN.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE||r[IC.replicationTarget]===FN.REPLICATION_TARGET.NEW_LOCAL_DATABASE,u=!r[IC.targetAuth]||!r[IC.targetAuth].username;s&&c&&u&&(r[IC.targetAuth]={username:re.session.user().name,password:""})}return r},UC=function(e,t){var n=e.statusDocs.find((function(e){return e._id===t}));return n?(n.selected=!n.selected,TC(TC({},e),{},{allDocsSelected:!1})):e},qC=function(e){var t=TC(TC({},e),{},{allDocsSelected:!e.allDocsSelected});return rT(t).forEach((function(e){return e.selected=t.allDocsSelected})),t},BC=function(e,t){var n=TC({},e),r=n._replicateInfo.find((function(e){return e._id===t}));if(!r)return n;r.selected=!r.selected,n._allReplicateSelected=!1},VC=function(e){var t=TC(TC({},e),{},{allReplicateSelected:!e.allReplicateSelected});return bT(t).forEach((function(e){return e.selected=t.allReplicateSelected})),t},FC=function(e,t){var n=TC(TC({},e),{},{loading:!1});return Object.keys(t).reduce((function(e,n){return MC(e,n,t[n])}),n)},KC=function(e){return e.activityLoading},zC=function(e){return e.databases},HC=function(e){return e.replicationSource},GC=function(e){return e.localSource},WC=function(e){return-1!==_.indexOf(e.databases,e.localSource)},XC=function(e){return e.remoteSource},QC=function(e){return e.replicationTarget},$C=function(e){return e.localTarget},JC=function(e){return-1!==_.indexOf(e.databases,e.localTarget)},YC=function(e){return e.remoteTarget},ZC=function(e){return e.isConflictModalVisible},eT=function(e){return e.replicationType},tT=function(e){return e.replicationDocName},nT=function(e){return e.submittedNoChange},rT=function(e){return e.statusDocs.filter((function(t){return Object.values(t).filter((function(t){return t?t.toString().toLowerCase().match(e.statusFilter):null})).length>0}))},oT=function(e){return e.statusFilter},iT=function(e){return e.replicateFilter},aT=function(e){return e.allDocsSelected},sT=function(e){return rT(e).some((function(e){return e.selected}))},cT=function(e){return e.username},uT=function(e){return e.password},lT=function(e){return e.activitySort},pT=function(e){return e.checkingAPI},fT=function(e){return e.supportNewApi},dT=function(e){return e.fetchingReplicateInfo},hT=function(e){return e.allReplicateSelected},yT=function(e){return bT(e).some((function(e){return e.selected}))},bT=function(e){return e.replicateInfo.filter((function(t){return Object.values(t).filter((function(t){return!!t&&t.toString().toLowerCase().match(e._replicateFilter)})).length>0}))};const mT=(0,Rt.$j)((function(e,t){var n,r=e.replication;return{allowNewPartitionedLocalDbs:e.databases.partitionedDatabasesAvailable,routeLocalSource:t.routeLocalSource,replicationId:t.replicationId,tabSection:t.section,loading:(n=r,n.isLoading),activityLoading:KC(r),databases:zC(r),replicationSource:HC(r),localSource:GC(r),localSourceKnown:WC(r),remoteSource:XC(r),sourceAuthType:r.sourceAuthType,sourceAuth:r.sourceAuth,replicationTarget:QC(r),localTarget:$C(r),localTargetKnown:JC(r),remoteTarget:YC(r),targetAuthType:r.targetAuthType,targetAuth:r.targetAuth,targetDatabasePartitioned:r.targetDatabasePartitioned,isConflictModalVisible:ZC(r),replicationType:eT(r),replicationDocName:tT(r),submittedNoChange:nT(r),statusDocs:rT(r),statusFilter:oT(r),replicateFilter:iT(r),allDocsSelected:aT(r),someDocsSelected:sT(r),username:cT(r),password:uT(r),activitySort:lT(r),checkingApi:pT(r),supportNewApi:fT(r),replicateLoading:dT(r),replicateInfo:bT(r),allReplicateSelected:hT(r),someReplicateSelected:yT(r)}}),(function(e){return{checkForNewApi:function(){return e(PC())},updateFormField:function(t){return function(n){e(function(e,t){return{type:tC,options:{fieldName:e,value:t}}}(t,n))}},clearReplicationForm:function(){return e({type:nC})},initReplicator:function(t){return e((n=t,function(e){n&&void 0!==n&&e({type:ZP,options:{localSource:n}})}));var n},getReplicationActivity:function(){return e(DC())},getReplicateActivity:function(){return e(NC())},getReplicationStateFrom:function(t){return e(function(e){return function(t){t({type:EC});var n=N.getServerUrl("/_replicator/".concat(encodeURIComponent(e)));v(n).then((function(e){var n={replicationDocName:e._id,replicationType:e.continuous?FN.REPLICATION_TYPE.CONTINUOUS:FN.REPLICATION_TYPE.ONE_TIME},r=_.isObject(e.source)?e.source.url:e.source,o=_.isObject(e.target)?e.target.url:e.target;if(r.indexOf(window.location.hostname)>-1){var i=new URL(r);n.replicationSource=FN.REPLICATION_SOURCE.LOCAL,n.localSource=decodeURIComponent(i.pathname.slice(1))}else n.replicationSource=FN.REPLICATION_SOURCE.REMOTE,n.remoteSource=tP(r);var a=RC(e.source);if(n.sourceAuthType=a.type,n.sourceAuth=a.creds,o.indexOf(window.location.hostname)>-1){var s=new URL(o);n.replicationTarget=FN.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE,n.localTarget=decodeURIComponent(s.pathname.slice(1))}else n.replicationTarget=FN.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE,n.remoteTarget=tP(o);var c,u=RC(e.target);n.targetAuthType=u.type,n.targetAuth=u.creds,n.targetDatabasePartitioned=!(!(c=e.create_target_params)||!0!==c.partitioned),t({type:uC,options:n})})).catch((function(e){re.addNotification({msg:e.reason||e.message,type:"error",clear:!0})}))}}(t))},getDatabasesList:function(){return e((function(e){var t=N.getServerUrl("/_all_dbs");v(t).then((function(t){e({type:eC,options:{databases:t}})}))}))},replicate:function(t){return e(SC(t))},showConflictModal:function(){return e({type:lC})},hideConflictModal:function(){return e({type:pC})},filterReplicate:function(t){return e(function(e){return{type:gC,options:e}}(t))},filterDocs:function(t){return e(function(e){return{type:aC,options:e}}(t))},selectDoc:function(t){return e({type:cC,options:t})},deleteDocs:function(t){return e(function(e){return function(t){var n=e.map((function(e){var t=e.raw;return t._deleted=!0,t}));re.addNotification({msg:"Deleting doc".concat(n.length>1?"s":"","."),type:"success",escape:!1,clear:!0});var r=N.getServerUrl("/_replicator/_bulk_docs");E(r,{docs:n},{raw:!0}).then((function(e){if(!e.ok)throw e;return e})).then((function(){var n="The selected documents have been deleted.";1===e.length&&(n="Document <code>".concat(e[0]._id,"</code> has been deleted")),re.addNotification({msg:n,type:"success",escape:!1,clear:!0}),t({type:dC}),t(DC())})).catch((function(e){e.json().then((function(e){re.addNotification({msg:e.reason,type:"error",clear:!0})}))}))}}(t))},selectAllDocs:function(){return e({type:sC})},changeActivitySort:function(t){return e(function(e){return{type:fC,options:e}}(t))},selectAllReplicates:function(){return e({type:_C})},deleteReplicates:function(t){return e(function(e){return function(t){re.addNotification({msg:"Deleting _replicate".concat(e.length>1?"s":"","."),type:"success",escape:!1,clear:!0}),function(e){var t=e.map((function(e){var t={replication_id:e._id,cancel:!0},n=N.getServerUrl("/_replicate");return E(n,t)}));return re.Promise.all(t)}(e).then((function(){var n="The selected replications have been deleted.";1===e.length&&(n="Replication <code>".concat(e[0]._id,"</code> has been deleted")),t({type:wC}),t(NC()),re.addNotification({msg:n,type:"success",escape:!1,clear:!0})}),(function(e){var t=JSON.parse(e.responseText);re.addNotification({msg:t.reason,type:"error",clear:!0})}))}}(t))},selectReplicate:function(t){return e({type:vC,options:t})}}}))(YP),gT={RouteObjects:[re.RouteObject.extend({routes:{"replication/_create":"createView","replication/_create/:dbname":"createView","replication/id/:id":"createViewFromId",replication:"activityView","replication/_replicate":"replicateView"},selectedHeader:"Replication",roles:["fx_loggedIn"],setActivityCrumbs:function(){this.crumbs=[{name:"Replication"}]},setCreateReplicationCrumbs:function(){this.crumbs=[{name:"Replication",link:"replication"},{name:"New Replication"}]},createView:function(e){var t=e||"";return ae.createElement(mT,{routeLocalSource:t,section:"new replication"})},createViewFromId:function(e){return ae.createElement(mT,{replicationId:e,section:"new replication"})},activityView:function(){return ae.createElement(mT,{section:"activity"})},replicateView:function(){return ae.createElement(mT,{section:"_replicate"})}})],initialize:function(){re.addHeaderLink({title:"Replication",href:"#/replication",icon:"fonticon-replicate"}),re.session.isAuthenticated().then((function(){PC()}))}};re.addReducers({replication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AC,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case ZP:var o=TC(TC({},e),{},{loading:!0});return r.localSource&&(o.localSource=r.localSource,o.replicationSource=FN.REPLICATION_SOURCE.LOCAL,o.remoteSource="",o.replicationTarget="",o.localTarget="",o.remoteTarget=""),o;case eC:return TC(TC({},e),{},{loading:!1,databases:r.databases});case EC:return TC(TC({},e),{},{loading:!0});case tC:return MC(e,r.fieldName,r.value);case nC:return LC(e);case rC:return TC(TC({},e),{},{submittedNoChange:!0});case iC:return TC(TC({},e),{},{activityLoading:!0});case oC:return TC(TC({},e),{},{activityLoading:!1,statusDocs:r});case aC:return TC(TC({},e),{},{statusFilter:r});case gC:return TC(TC({},e),{},{replicateFilter:r});case cC:return UC(e,r);case sC:return qC(e);case vC:return BC(e,r);case _C:return VC(e);case uC:return FC(e,r);case lC:return TC(TC({},e),{},{isConflictModalVisible:!0});case pC:return TC(TC({},e),{},{isConflictModalVisible:!1});case fC:return kC(r),TC(TC({},e),{},{activitySort:jC()});case dC:return TC(TC({},e),{},{allDocsSelected:!1});case hC:return TC(TC({},e),{},{tabSection:r});case mC:return TC(TC({},e),{},{checkingApi:!1,supportNewApi:r});case yC:return TC(TC({},e),{},{fetchingReplicateInfo:!0});case bC:return TC(TC({},e),{},{fetchingReplicateInfo:!1,replicateInfo:r});case wC:return TC(TC({},e),{},{allReplicateSelected:!1});default:return e}}}),re.registerUrls("replication",{app:function(e){return"#/replication/_create/"+e},api:function(){return N.getApiUrl("/_replicator")}});const _T=gT,vT="SEARCH_INDEX_DESIGN_DOCS_LOADED",wT="SEARCH_INDEX_INIT",ET="SEARCH_INDEX_SET_NAME",OT="SEARCH_INDEX_SET_ANALYZER_TYPE",ST="SEARCH_INDEX_ADD_ANALYZER_ROW",DT="SEARCH_INDEX_REMOVE_ANALYZER_ROW",NT="SEARCH_INDEX_SET_ANALYZER_ROW_FIELD_NAME",RT="SEARCH_INDEX_SET_ANALYZER_ROW",PT="SEARCH_INDEX_SET_DEFAULT_MULTIPLE_ANALYZER",CT="SEARCH_INDEX_INIT_EDIT_SEARCH_INDEX",TT="SEARCH_INDEX_PREVIEW_MODEL_UPDATED",xT="SEARCH_INDEX_PREVIEW_REQUEST_MADE",kT="PREVIEW_MODEL_REQUEST_ERROR",jT="SEARCH_INDEX_SELECT_DESIGN_DOC",IT="SEARCH_INDEX_SET_SINGLE_ANALYZER",AT="SEARCH_INDEX_SET_SEARCH_QUERY",LT="SEARCH_INDEX_SET_LOADING",MT="SEARCH_INDEX_CLEAR",UT="SEARCH_INDEX_NEW_DESIGN_DOC_NAME_UPDATED",qT="SEARCH_INDEX_NEW_DESIGN_DOC_PARTITONED_UPDATED",BT="SEARCH_INDEX_PARTITION_PARAM_NOT_SUPPORTED",VT="SEARCH_INDEX_PARTITION_PARAM_MANDATORY",FT="single",KT="multiple",zT="standard",HT=[{label:"Single field (json)",code:{index:{fields:["foo"]},name:"foo-json-index",type:"json"}},{label:"Multiple fields (json)",code:{index:{fields:["foo","bar"]},name:"foo-bar-json-index",type:"json"}},{label:"Single field (text)",code:{index:{fields:[{name:"foo",type:"string"}]},name:"foo-text",type:"text"}},{label:"All fields (text)",code:{index:{default_field:{enabled:!1},index_array_lengths:!1},name:"all-text",type:"text"}},{label:"All fields with default field (text)",code:{index:{index_array_lengths:!1},name:"all-text",type:"text"}}];function GT(e){return GT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GT(e)}var WT={};WT.Doc=lt.Doc.extend({setIndex:function(e,t,n){if(!this.isDdoc())return!1;var r=this.get("indexes");return r||(r={}),r[e]||(r[e]={}),n&&(r[e].analyzer=n),r[e].index=t,this.set({indexes:r})},getIndex:function(e){return this.get("indexes")[e].index},getAnalyzer:function(e){return this.get("indexes")[e].analyzer},analyzerType:function(e){return"object"===GT(this.getAnalyzer(e))?KT:FT},dDocModel:function(){if(!this.isDdoc())return!1;var e=this.get("doc");return!!e&&new WT.Doc(e,{database:this.database})}}),WT.AllDocs=lt.AllDocs.extend({model:WT.Doc});const XT=WT;var QT=function(e,t,n,r,o,i){return i({type:xT}),function(e,t,n,r,o){var i=function(e,t,n,r,o){var i=t?encodeURIComponent(t):"";return re.urls("search","server",encodeURIComponent(e),i,encodeURIComponent(n),encodeURIComponent(r),"?limit=10&q="+encodeURIComponent(o))}(e,t,n,r,o);return v(i).then((function(e){if(e.error)throw new Error(e.reason);return e.rows}))}(e,t,n,r,o).then((function(e){i({type:TT,options:{searchResults:e}})})).catch((function(t){i({type:kT}),t&&-1!==t.message.indexOf("`partition` not supported")?i($T()):t&&-1!==t.message.indexOf("`partition` parameter is mandatory")?i(JT()):re.addNotification({msg:"Search failed: "+t.message,type:"error",clear:!0}),-1!==t.message.indexOf("not found")&&re.navigate(re.urls("allDocsSanitized","app",e),{trigger:!0})}))},$T=function(){return{type:BT}},JT=function(){return{type:VT}};const YT={dispatchInitNewSearchIndex:function(e){re.reduxDispatch({type:MT}),re.reduxDispatch({type:LT,options:{loading:!0}}),e.designDocs.fetch().then((function(){re.reduxDispatch({type:vT,options:{designDocs:e.designDocs,defaultDDoc:e.defaultDDoc,database:e.database}})}))},dispatchInitSearchIndex:function(e){if(re.reduxDispatch({type:LT,options:{loading:!0}}),re.reduxDispatch({type:wT,options:{databaseName:e.databaseName,partitionKey:e.partitionKey,ddocName:e.designDoc,indexName:e.indexName,searchQuery:e.query?e.query:""}}),e.query)return QT(e.databaseName,e.partitionKey,e.designDoc,e.indexName,e.query,re.reduxDispatch)},dispatchEditSearchIndex:function(e){var t=e.database,n=e.ddocID,r=e.designDocs,o=e.indexName;re.reduxDispatch({type:LT,options:{loading:!0}}),r.fetch().then((function(e){var i=e.rows.find((function(e){return e._id===n})).doc;if(!i.indexes||!i.indexes[o])throw Error('Index "'.concat(o,'" not found'));re.reduxDispatch({type:CT,options:{indexName:o,database:t,ddocID:n,designDocs:r}})})).catch((function(e){var t=e.message?e.message:"";re.addNotification({msg:'There was a problem editing the search index "'.concat(o,'". ')+t,type:"error",clear:!0})}))},selectTab:function(e){return function(t){t({type:"SEARCH_INDEX_SELECT_TAB",options:{tab:e}})}},setSearchIndexName:function(e){return function(t){t({type:ET,options:{value:e}})}},setAnalyzerType:function(e){return function(t){t({type:OT,options:{value:e}})}},addAnalyzerRow:function(e){return function(t){t({type:ST,options:{analyzer:e}})}},removeAnalyzerRow:function(e){return function(t){t({type:DT,options:{rowIndex:e}})}},setAnalyzerRowFieldName:function(e){return function(t){t({type:NT,options:{rowIndex:e.rowIndex,fieldName:e.fieldName}})}},setAnalyzer:function(e){return function(t){t({type:RT,options:{rowIndex:e.rowIndex,analyzer:e.analyzer}})}},setDefaultMultipleAnalyzer:function(e){return function(t){t({type:PT,options:{analyzer:e}})}},selectDesignDoc:function(e){return function(t){t({type:jT,options:{value:e}})}},saveSearchIndex:function(e,t,n){if(e.setIndex(t.indexName,t.indexFunction,t.analyzerInfo),t.lastSavedDesignDocName===e.id&&t.lastSavedSearchIndexName!==t.indexName){var r=e.get("indexes")||{};delete r[t.lastSavedSearchIndexName],e.set({indexes:r})}e.save().then((function(){if(t.designDocs.add(e,{merge:!0}),re.addNotification({msg:"The search index has been saved.",type:"success",clear:!0}),!t.isCreatingIndex&&t.lastSavedDesignDocName!==e.id){var r=zc.helpers.findDesignDoc(t.designDocs,t.lastSavedDesignDocName);zc.safeDeleteIndex(r,t.designDocs,"indexes",t.lastSavedSearchIndexName,{onSuccess:function(){Fs(t.designDocs)}})}Fs(t.designDocs),re.navigate(n,{trigger:!0})}),(function(e){var t=JSON.parse(e.responseText).reason;re.addNotification({msg:"Save failed: "+t,type:"error",clear:!0})}))},cloneSearchIndex:function(e){var t=function(e,t,n,r){if("new-doc"===t){var o={_id:"_design/"+n,indexes:{},language:"javascript"};return new XT.Doc(o,{database:r})}var i=e.find((function(e){return e.id===t}));return i?i.dDocModel():null}(e.designDocs,e.targetDesignDocName,e.newDesignDocName,e.database),n=t.get("indexes");if(n&&_.has(n,e.newIndexName))re.addNotification({msg:"That index name is already used in this design doc. Please enter a new name.",type:"error",clear:!0});else{n||(n={});var r=zc.helpers.findDesignDoc(e.designDocs,"_design/"+e.sourceDesignDocName).toJSON();n[e.newIndexName]=r.indexes[e.sourceIndexName],t.set({indexes:n}),t.save().then((function(){e.onComplete(),re.addNotification({msg:"The search index has been cloned.",type:"success",clear:!0}),Fs(e.designDocs)}),(function(t){e.onComplete();var n=JSON.parse(t.responseText).reason;re.addNotification({msg:"Clone failed: "+n,type:"error",clear:!0})}))}},deleteSearchIndex:function(e){zc.safeDeleteIndex(e.designDoc,e.designDocs,"indexes",e.indexName,{onSuccess:function(){if(e.isOnIndex){var t=re.urls("allDocs","app",e.database.safeID());re.navigate(t)}Fs(e.designDocs),re.addNotification({msg:"The <code>"+_.escape(e.indexName)+"</code> search index has been deleted.",type:"info",escape:!1,clear:!0}),Ks()}})},gotoEditSearchIndexPage:function(e,t,n,r){var o=t?encodeURIComponent(t):"";re.navigate("#"+re.urls("search","edit",encodeURIComponent(e),o,encodeURIComponent(n),encodeURIComponent(r)))},querySearch:function(e,t,n,r,o){var i=encodeURIComponent(e),a=encodeURIComponent(t),s=encodeURIComponent(n),c=encodeURIComponent(r),u=encodeURIComponent(o),l=t?re.urls("partitioned_search","app",i,a,s,c):re.urls("search","app",i,s,c);re.navigate("".concat(l).concat(c,"?").concat(u),{trigger:!0})},setSearchQuery:function(e){return function(t){t({type:AT,options:{query:e}})}},setSingleAnalyzer:function(e){return function(t){t({type:IT,options:{analyzer:e}})}},updateNewDesignDocName:function(e){return function(t){t({type:UT,options:{value:e}})}},updateNewDesignDocPartitioned:function(e){return function(t){t({type:qT,options:{value:e}})}},partitionParamNotSupported:$T,partitionParamIsMandatory:JT};function ZT(e){return ZT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZT(e)}function ex(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nx(e,t){return nx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nx(e,t)}function rx(e,t){if(t&&("object"===ZT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ox(e)}function ox(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ix(e){return ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ix(e)}function ax(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nx(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ix(r);if(o){var n=ix(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return rx(this,e)});function a(){var e;ex(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ax(ox(e=i.call.apply(i,[this].concat(n))),"querySearch",(function(t){if(t.preventDefault(),""===e.props.searchQuery.trim())return re.addNotification({msg:"Please enter a search term.",type:"error",clear:!0}),void e.searchInput.focus();var n=e.props,r=n.databaseName,o=n.partitionKey,i=n.ddocName,a=n.indexName,s=n.searchQuery;e.props.querySearch(r,o,i,a,s)})),ax(ox(e),"getRows",(function(){var t=encodeURIComponent(e.props.databaseName);return e.props.searchResults.map((function(n){var r={header:n.id,content:JSON.stringify(n,null,"  "),url:re.urls("document","app",t,encodeURIComponent(n.id))};return ae.createElement(ga.Document,{key:n.id,keylabel:"id:",doc:r,header:n.id,isDeletable:!1,docContent:r.content,onClick:e.onClick,docChecked:function(){},docIdentifier:n.id})}))})),ax(ox(e),"onClick",(function(e,t){t.url&&re.navigate(t.url)})),ax(ox(e),"onType",(function(t){e.props.setSearchQuery(t.target.value)})),ax(ox(e),"getResults",(function(){return e.props.hasActiveQuery?ae.createElement(ga.LoadLines,null):e.props.noResultsWarning?ae.createElement("div",{"data-select":"search-result-set"},e.props.noResultsWarning):!!e.props.searchResults&&(0===e.props.searchResults.length?ae.createElement("div",{"data-select":"search-result-set"},"No results found."):ae.createElement("div",{id:"doc-list","data-select":"search-result-set"},e.getRows()))})),e}return t=a,(n=[{key:"componentDidMount",value:function(){this.searchInput.focus()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"render",value:function(){var e=this,t=this.props.hasActiveQuery?"Querying...":"Query";return ae.createElement("div",null,ae.createElement("form",{id:"search-index-preview-form"},ae.createElement("span",{className:"input-append"},ae.createElement("input",{className:"span4",ref:function(t){return e.searchInput=t},type:"text",placeholder:"Enter your search query",onChange:this.onType,value:this.props.searchQuery}),ae.createElement("button",{className:"btn btn-primary",id:"search-index-query-button",type:"submit",disabled:this.props.hasActiveQuery,onClick:this.querySearch},t)),ae.createElement("a",{className:"help-link","data-bypass":"true",href:re.constants.DOC_URLS.SEARCH_INDEX_QUERIES,target:"_blank",rel:"noopener noreferrer"},ae.createElement("i",{className:"icon-question-sign"}))),this.getResults())}}])&&tx(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);ax(sx,"propTypes",{hasActiveQuery:Nt().bool.isRequired,searchQuery:Nt().string.isRequired,searchPerformed:Nt().bool.isRequired,querySearch:Nt().func.isRequired,setSearchQuery:Nt().func.isRequired,searchResults:Nt().array});const cx=(0,Rt.$j)((function(e){var t=e.search;return{databaseName:t.databaseName,partitionKey:t.partitionKey,ddocName:t.ddocName,indexName:t.indexName,hasActiveQuery:t.hasActiveQuery,searchQuery:t.searchQuery,searchPerformed:t.searchPerformed,searchResults:t.searchResults,noResultsWarning:t.noResultsWarning}}),(function(e){return{querySearch:function(e,t,n,r,o){YT.querySearch(e,t,n,r,o)},setSearchQuery:function(t){e(YT.setSearchQuery(t))}}}))(sx);function ux(e){return ux="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ux(e)}function lx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function px(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fx(e,t){return fx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fx(e,t)}function dx(e,t){if(t&&("object"===ux(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hx(e)}function hx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yx(e){return yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yx(e)}function bx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mx=ga.StyledSelect,gx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fx(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=yx(r);if(o){var n=yx(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return dx(this,e)});function a(){var e;lx(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bx(hx(e=i.call.apply(i,[this].concat(n))),"getAnalyzers",(function(){return["Standard","Keyword","Simple","Whitespace","Classic","Email"].map((function(e){return ae.createElement("option",{value:e.toLowerCase(),key:e},e)}))})),bx(hx(e),"getLanguages",(function(){return["Arabic","Armenian","Basque","Bulgarian","Brazilian","Catalan","Cjk","Chinese","Czech","Danish","Dutch","English","Finnish","French","Galician","German","Greek","Hindi","Hungarian","Indonesian","Irish","Italian","Japanese","Latvian","Norwegian","Persian","Polish","Portuguese","Romanian","Russian","Spanish","Swedish","Thai","Turkish"].map((function(e){return ae.createElement("option",{value:e.toLowerCase(),key:e},e)}))})),bx(hx(e),"getLabel",(function(){return""===e.props.label?null:ae.createElement("label",{htmlFor:e.props.id},e.props.label)})),e}return t=a,(n=[{key:"render",value:function(){var e=ae.createElement("optgroup",{label:"Language-specific",key:"languages"},this.getLanguages());return ae.createElement("div",{className:this.props.classes},this.getLabel(),ae.createElement(mx,{selectChange:this.props.onChange,selectValue:this.props.defaultSelected,selectId:this.props.id,selectContent:[this.getAnalyzers(),e]}))}}])&&px(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function _x(e){return _x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_x(e)}function vx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ex(e,t){return Ex=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ex(e,t)}function Ox(e,t){if(t&&("object"===_x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Sx(e)}function Sx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dx(e){return Dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dx(e)}function Nx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}bx(gx,"defaultProps",{defaultSelected:"standard",label:"Type",id:"analyzer-default",classes:"",onChange:function(){}}),bx(gx,"propTypes",{defaultSelected:Nt().string.isRequired,label:Nt().string.isRequired,id:Nt().string.isRequired,classes:Nt().string.isRequired,onChange:Nt().func.isRequired});var Rx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ex(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Dx(r);if(o){var n=Dx(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ox(this,e)});function a(){var e;vx(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Nx(Sx(e=i.call.apply(i,[this].concat(n))),"deleteRow",(function(t){t.preventDefault(),e.props.removeAnalyzerRow(e.props.rowIndex)})),Nx(Sx(e),"getFieldNameHeading",(function(t){return 0===e.props.rowIndex&&ae.createElement("label",{htmlFor:t},"Fieldname")})),Nx(Sx(e),"changeFieldName",(function(t){e.props.setAnalyzerRowFieldName({rowIndex:e.props.rowIndex,fieldName:t.target.value})})),Nx(Sx(e),"selectAnalyzer",(function(t){e.props.setAnalyzer({rowIndex:e.props.rowIndex,analyzer:t.target.value})})),e}return t=a,(n=[{key:"render",value:function(){var e="analyzer-row-"+this.props.rowIndex,t=0===this.props.rowIndex?"Analyzer":"",n="span12";return this.props.showErrors&&!this.props.row.valid&&(n+=" unhappy"),ae.createElement("li",null,ae.createElement("div",{className:"row-fluid"},ae.createElement("div",{className:"span4"},this.getFieldNameHeading(e),ae.createElement("input",{type:"text",value:this.props.row.fieldName,className:n,onChange:this.changeFieldName})),ae.createElement(gx,{id:e,label:t,defaultSelected:this.props.row.analyzer,classes:"span4",onChange:this.selectAnalyzer}),ae.createElement("div",{className:"span4"},ae.createElement("button",{className:"btn btn-danger delete-analyzer",onClick:this.deleteRow},"delete"))))}}])&&wx(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Px(e){return Px="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Px(e)}function Cx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tx(e,t){return Tx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tx(e,t)}function xx(e,t){if(t&&("object"===Px(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kx(e)}function kx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jx(e){return jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jx(e)}function Ix(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Nx(Rx,"propTypes",{rowIndex:Nt().number.isRequired,row:Nt().object.isRequired,showErrors:Nt().bool.isRequired,removeAnalyzerRow:Nt().func.isRequired,setAnalyzerRowFieldName:Nt().func.isRequired,setAnalyzer:Nt().func.isRequired});var Ax=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tx(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=jx(r);if(o){var n=jx(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return xx(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Ix(kx(t=i.call(this,e)),"addRow",(function(e){e.preventDefault(),t.props.addAnalyzerRow(t.props.defaultAnalyzer)})),Ix(kx(t),"getRows",(function(){return t.props.fields.map((function(e,n){return ae.createElement(Rx,{row:e,key:e.key,rowIndex:n,showErrors:t.state.showErrors,setAnalyzer:t.props.setAnalyzer,setAnalyzerRowFieldName:t.props.setAnalyzerRowFieldName,removeAnalyzerRow:t.props.removeAnalyzerRow})}))})),Ix(kx(t),"validate",(function(){t.setState({showErrors:!0});var e=!1,n=[],r=t.props.fields.every((function(t){return-1!==n.indexOf(t.fieldName)&&(e=!0),n.push(t.fieldName),t.valid}));return r&&!e||re.addNotification({msg:"Fieldnames cannot be empty and must be unique.",type:"error",clear:!0}),r})),t.state={showErrors:!1},t}return t=a,(n=[{key:"render",value:function(){return ae.createElement("div",null,ae.createElement(gx,{label:"Default",id:"defaultAnalyzer",defaultSelected:this.props.defaultAnalyzer,onChange:this.props.selectDefaultMultipleAnalyzer,isValidating:this.validate}),ae.createElement("ul",{id:"analyzer-fields",className:"unstyled"},this.getRows()),ae.createElement("button",{className:"addfield btn btn-small btn-primary",onClick:this.addRow},"Add Field"))}}])&&Cx(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Lx(e){return Lx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lx(e)}function Mx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ux(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qx(e,t){return qx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qx(e,t)}function Bx(e,t){if(t&&("object"===Lx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vx(e)}function Vx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fx(e){return Fx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fx(e)}function Kx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ix(Ax,"propTypes",{addAnalyzerRow:Nt().func.isRequired,defaultAnalyzer:Nt().string.isRequired,selectDefaultMultipleAnalyzer:Nt().func.isRequired,fields:Nt().array.isRequired});var zx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qx(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fx(r);if(o){var n=Fx(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Bx(this,e)});function a(){var e;Mx(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Kx(Vx(e=i.call.apply(i,[this].concat(n))),"selectAnalyzerType",(function(t){e.props.setAnalyzerType(t.target.value)})),Kx(Vx(e),"validate",(function(){return e.props.analyzerType===FT||e.analyzerMultiple.validate()})),Kx(Vx(e),"getAnalyzerFieldsAsObject",(function(){return e.props.analyzerFields.reduce((function(e,t){return e[t.fieldName.replace(/["']/g,"")]=t.analyzer,e}),{})})),Kx(Vx(e),"getInfo",(function(){return e.props.analyzerType===FT?e.props.singleAnalyzer:{name:"perfield",default:e.props.defaultMultipleAnalyzer,fields:e.getAnalyzerFieldsAsObject()}})),Kx(Vx(e),"selectSingleAnalyzer",(function(t){e.props.setSingleAnalyzer(t.target.value)})),Kx(Vx(e),"selectDefaultMultipleAnalyzer",(function(t){e.props.setDefaultMultipleAnalyzer(t.target.value)})),Kx(Vx(e),"getAnalyzerType",(function(){return e.props.analyzerType===FT?ae.createElement(gx,{label:"Type",defaultSelected:e.props.singleAnalyzer,onChange:e.selectSingleAnalyzer}):ae.createElement(Ax,{ref:function(t){return e.analyzerMultiple=t},defaultAnalyzer:e.props.defaultMultipleAnalyzer,selectDefaultMultipleAnalyzer:e.selectDefaultMultipleAnalyzer,fields:e.props.analyzerFields,addAnalyzerRow:e.props.addAnalyzerRow,removeAnalyzerRow:e.props.removeAnalyzerRow,setAnalyzerRowFieldName:e.props.setAnalyzerRowFieldName,setAnalyzer:e.props.setAnalyzer})})),e}return t=a,(n=[{key:"render",value:function(){var e="btn";this.props.analyzerType===KT&&(e+=" active");var t="btn";return this.props.analyzerType===FT&&(t+=" active"),ae.createElement("div",{className:"well"},ae.createElement("div",{className:"control-group"},ae.createElement("label",{htmlFor:"search-analyzer"},"Analyzer"),ae.createElement("div",{className:"btn-group toggle-btns",id:"analyzer"},ae.createElement("label",{style:{width:"82px"},htmlFor:"single-analyzer",className:t},"Single"),ae.createElement("input",{type:"radio",id:"single-analyzer",name:"search-analyzer",value:"single",checked:this.props.analyzerType===FT,onChange:this.selectAnalyzerType}),ae.createElement("input",{type:"radio",id:"multiple-analyzer",name:"search-analyzer",value:"multiple",checked:this.props.analyzerType===KT,onChange:this.selectAnalyzerType}),ae.createElement("label",{style:{width:"82px"},htmlFor:"multiple-analyzer",className:e},"Multiple"))),this.getAnalyzerType())}}])&&Ux(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Hx(e){return Hx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hx(e)}function Gx(){return Gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gx.apply(this,arguments)}function Wx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qx(e,t){return Qx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qx(e,t)}function $x(e,t){if(t&&("object"===Hx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Jx(e)}function Jx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yx(e){return Yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yx(e)}function Zx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Kx(zx,"propTypes",{analyzerType:Nt().string.isRequired,analyzerFields:Nt().array.isRequired,defaultMultipleAnalyzer:Nt().string.isRequired,singleAnalyzer:Nt().string.isRequired,setAnalyzerType:Nt().func.isRequired,setSingleAnalyzer:Nt().func.isRequired,setDefaultMultipleAnalyzer:Nt().func.isRequired,addAnalyzerRow:Nt().func.isRequired});var ek=iu.DesignDocSelector,tk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qx(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Yx(r);if(o){var n=Yx(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return $x(this,e)});function a(){var e;Wx(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Zx(Jx(e=i.call.apply(i,[this].concat(n))),"updateSearchIndexName",(function(t){e.props.setSearchIndexName(t.target.value)})),Zx(Jx(e),"saveIndex",(function(t){if(t.preventDefault(),e.designDocSelector.validate()&&e.analyzer.validate())if(e.props.searchIndexName.trim()){var n=e.props.saveDoc.id.replace(/_design\//,""),r=e.props.partitionKey?encodeURIComponent(e.props.partitionKey):"",o=re.urls("search","fragment",encodeURIComponent(e.props.database.id),r,encodeURIComponent(n),encodeURIComponent(e.props.searchIndexName));e.props.saveSearchIndex(e.props.saveDoc,{isCreatingIndex:e.props.isCreatingIndex,indexName:e.props.searchIndexName,designDocs:e.props.designDocs,database:e.props.database,indexFunction:e.getIndexFunction(),analyzerInfo:e.analyzer.getInfo(),lastSavedSearchIndexName:e.props.lastSavedSearchIndexName,lastSavedDesignDocName:e.props.lastSavedDesignDocName},o)}else re.addNotification({msg:"Please enter the index name.",type:"error",clear:!0})})),Zx(Jx(e),"getIndexFunction",(function(){return e.searchIndexEditor.getValue()})),Zx(Jx(e),"getDesignDocList",(function(){return e.props.designDocs.map((function(e){return e.id}))})),e}return t=a,(n=[{key:"getCancelLink",value:function(){var e=encodeURIComponent(this.props.database.id),t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"";if(!this.props.lastSavedDesignDocName||this.props.isCreatingIndex)return"#"+re.urls("allDocs","app",e,t);var n=ie.utils.getSafeIdForDoc(this.props.lastSavedDesignDocName),r=encodeURIComponent(this.props.lastSavedSearchIndexName);return"#"+re.urls("search","showIndex",e,t,n,r)}},{key:"render",value:function(){var e=this;if(this.props.isLoading)return ae.createElement("div",{className:"search-index-page-loading"},ae.createElement(ga.LoadLines,null));if(!this.props.database)return null;var t=this.props.isCreatingIndex?"New Search Index":"Edit Search Index",n=this.props.isCreatingIndex?"Create Document and Build Index":"Save Document and Build Index";return ae.createElement("form",{className:"form-horizontal search-query-save",id:"search-index"},ae.createElement("h3",{className:"simple-header"},t),ae.createElement(ek,{ref:function(t){return e.designDocSelector=t},designDocLabel:"Save to design document",designDocList:this.getDesignDocList(),isDbPartitioned:this.props.isDbPartitioned,newDesignDocName:this.props.newDesignDocName,newDesignDocPartitioned:this.props.newDesignDocPartitioned,selectedDesignDocName:this.props.ddocName,selectedDesignDocPartitioned:this.props.ddocPartitioned,onSelectDesignDoc:this.props.selectDesignDoc,onChangeNewDesignDocName:this.props.updateNewDesignDocName,onChangeNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned,docLink:ie.helpers.getDocUrl("DOC_URL_DESIGN_DOCS")}),ae.createElement("div",{className:"control-group"},ae.createElement("label",{htmlFor:"search-name"},"Index name"),ae.createElement("input",{type:"text",id:"search-name",value:this.props.searchIndexName,onChange:this.updateSearchIndexName})),ae.createElement(ga.CodeEditorPanel,{id:"search-function",className:"ace-editor-section",ref:function(t){return e.searchIndexEditor=t},title:"Search index function",allowZenMode:!1,docLink:ie.helpers.getDocUrl("SEARCH_INDEXES"),defaultCode:this.props.searchIndexFunction,blur:this.props.blur}),ae.createElement(zx,Gx({ref:function(t){return e.analyzer=t}},this.props)),ae.createElement("div",{className:"control-group"},ae.createElement("button",{id:"save-index",className:"btn btn-primary save",onClick:this.saveIndex},ae.createElement("i",{className:"icon fonticon-ok-circled"}),n),ae.createElement("a",{href:this.getCancelLink(),className:"index-cancel-link"},"Cancel")))}}])&&Xx(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function nk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nk(Object(n),!0).forEach((function(t){ok(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ok(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Zx(tk,"defaultProps",{isCreatingIndex:!0,blur:function(){},isLoading:!0}),Zx(tk,"propTypes",{isLoading:Nt().bool,isCreatingIndex:Nt().bool,database:Nt().object.isRequired,saveDoc:Nt().object.isRequired,newDesignDocName:Nt().string,blur:Nt().func,setSearchIndexName:Nt().func.isRequired,searchIndexFunction:Nt().string.isRequired,saveSearchIndex:Nt().func.isRequired,selectDesignDoc:Nt().func.isRequired,updateNewDesignDocName:Nt().func.isRequired});var ik=rk({designDocs:new Backbone.Collection,database:{},loading:!0,ddocName:"new-doc",partitionKey:"",indexName:"",databaseName:""},ck()),ak=[];function sk(){function e(){return Math.random().toString(36).substring(7)}for(var t=e();-1!==ak.indexOf(t);)t=e();return ak.push(t),t}function ck(){return{noResultsWarning:"",hasActiveQuery:!1,searchQuery:"",searchResults:void 0,searchPerformed:!1,newDesignDocName:"",newDesignDocPartitioned:!0,lastSavedSearchIndexName:"",searchIndexFunction:'function (doc) {\n  index("name", doc.name);\n}',searchIndexName:"newSearch",analyzerType:"single",analyzerFields:[],singleAnalyzer:zT,defaultMultipleAnalyzer:zT}}function uk(e,t){var n=t.analyzer,r=t.fieldName,o=e.analyzerFields.slice();return o.push({key:sk(),fieldName:r||"",analyzer:n,valid:r&&r.trim().length>0}),o}function lk(e,t){var n=e.analyzerFields.slice();return t=parseInt(t,10),n.splice(t,1),n}function pk(e,t){var n=t.fieldName,r=t.rowIndex,o=e.analyzerFields.slice(),i=parseInt(r,10);return o[i].fieldName=n,o[i].valid=""!==n,o}function fk(e,t){var n=t.analyzer,r=t.rowIndex,o=e.analyzerFields.slice();return o[parseInt(r,10)].analyzer=n,o}function dk(e,t){var n,r=t.database,o=t.designDocs,i=t.ddocID,a=t.indexName,s=o.find((function(e){return e.id===i})).dDocModel(),c=s.getAnalyzer(a);n=_.isString(c)?c:_.has(c,"default")?c.default:zT;var u=[];return c&&c.fields&&Object.keys(c.fields).forEach((function(e){u.push({key:sk(),fieldName:e||"",analyzer:c.fields[e],valid:!_.isUndefined(e)&&!_.isEmpty(e)})})),{loading:!1,searchPerformed:!1,database:r,designDocs:o,searchIndexName:a,ddocName:i,lastSavedSearchIndexName:a,lastSavedDesignDocName:i,searchIndexFunction:s.getIndex(a),analyzerType:s.analyzerType(a),singleAnalyzer:n,defaultMultipleAnalyzer:n,analyzerFields:u}}function hk(e,t){if("new-doc"===e.ddocName){var n={_id:"_design/"+e.newDesignDocName,views:{},language:"javascript"},r=new XT.Doc(n,{database:e.database});return t&&r.setDDocPartitionedOption(e.newDesignDocPartitioned),r}var o=e.designDocs.find((function(t){return t.id===e.ddocName||t.id==="_design/"+e.ddocName}));return o?o.dDocModel():null}var yk=(0,Rt.$j)((function(e,t){var n,r,o,i=e.search,a=e.databases,s=(n=i,r=a.isDbPartitioned,!!(o=n.designDocs.find((function(e){return e.id===n.ddocName||e.id==="_design/"+n.ddocName})))&&or(o.get("doc"),r));return{isCreatingIndex:t.isCreatingIndex,isLoading:i.loading,database:i.database,designDocs:i.designDocs,searchIndexFunction:i.searchIndexFunction,ddocName:i.ddocName,ddocPartitioned:s,lastSavedDesignDocName:i.lastSavedDesignDocName,lastSavedSearchIndexName:i.lastSavedSearchIndexName,searchIndexName:i.searchIndexName,analyzerType:i.analyzerType,analyzerFields:i.analyzerFields,analyzerFieldsObj:i.analyzerFieldsObj,defaultMultipleAnalyzer:i.defaultMultipleAnalyzer,singleAnalyzer:i.singleAnalyzer,saveDoc:hk(i,a.isDbPartitioned),newDesignDocName:i.newDesignDocName,newDesignDocPartitioned:i.newDesignDocPartitioned,isDbPartitioned:a.isDbPartitioned,partitionKey:t.partitionKey}}),(function(e){return{setSearchIndexName:function(t){e(YT.setSearchIndexName(t))},saveSearchIndex:function(e,t,n){YT.saveSearchIndex(e,t,n)},selectDesignDoc:function(t){e(YT.selectDesignDoc(t))},updateNewDesignDocName:function(t){e(YT.updateNewDesignDocName(t))},updateNewDesignDocPartitioned:function(t){e(YT.updateNewDesignDocPartitioned(t))},setAnalyzerType:function(t){e(YT.setAnalyzerType(t))},setSingleAnalyzer:function(t){e(YT.setSingleAnalyzer(t))},setDefaultMultipleAnalyzer:function(t){e(YT.setDefaultMultipleAnalyzer(t))},addAnalyzerRow:function(t){e(YT.addAnalyzerRow(t))},removeAnalyzerRow:function(t){e(YT.removeAnalyzerRow(t))},setAnalyzerRowFieldName:function(t){e(YT.setAnalyzerRowFieldName(t))},setAnalyzer:function(t){e(YT.setAnalyzer(t))}}}))(tk);const bk=yk;var mk=function(e){var t=e.section,n=e.database,r=e.indexName,o=e.ddocName,i=e.docURL,a=e.endpoint,s=e.dropDownLinks,c=e.designDocs,u=e.ddoc,l=e.selectedNavItem,p=e.partitionKey,f=e.onPartitionKeySelected,d=e.onGlobalModeSelected,h=e.globalMode;return ae.createElement("div",{id:"dashboard",className:"with-sidebar"},ae.createElement(Ny,{hideQueryOptions:!0,docURL:i,endpoint:a,dbName:n.id,dropDownLinks:s,database:n,showPartitionKeySelector:"search"===t,partitionKey:p,onPartitionKeySelected:f,onGlobalModeSelected:d,globalMode:h}),ae.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},ae.createElement("aside",{id:"sidebar-content",className:"scrollable"},ae.createElement(Sl,{selectedNavItem:l,selectedPartitionKey:p})),ae.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},ae.createElement("div",{className:"flex-body",id:"dashboard-lower-content"},ae.createElement("div",{className:"search-index-content"},ae.createElement("div",{className:"tab-content search-index-tab-content"},function(e,t,n,r,o,i,a){return"create"===e?ae.createElement(bk,{designDocs:o,ddoc:i,database:t,isCreatingIndex:!0,partitionKey:a}):"edit"===e?ae.createElement(bk,{database:t,indexName:n,ddocName:r,isCreatingIndex:!1,partitionKey:a}):ae.createElement(cx,null)}(t,n,r,o,c,u,p)))))))};mk.propTypes={section:Nt().string.isRequired,docURL:Nt().string,endpoint:Nt().string,ddocName:Nt().string,indexName:Nt().string,dropDownLinks:Nt().array.isRequired,database:Nt().object.isRequired};const gk=mk;var _k=Gs.extend({routes:{"database/:database/_design/:ddoc/_search/:search(?*searchQuery)":{route:"searchNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_search/:search(?*searchQuery)":{route:"search",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_indexes/:search(?*searchQuery)":{route:"searchNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_indexes/:search(?*searchQuery)":{route:"search",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_search/:search/edit":{route:"editNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_search/:search/edit":{route:"edit",roles:["fx_loggedIn"]},"database/:database/new_search":"createNoPartition","database/:database/_partition/:partitionkey/new_search":"create","database/:database/new_search/:designDoc":"createNoPartition","database/:database/_partition/:partitionkey/new_search/:designDoc":"create"},initialize:function(e,t){this.databaseName=t[0],this.database=new Rs.Model({id:this.databaseName}),this.data={database:new Rs.Model({id:this.databaseName})},this.data.designDocs=new XT.AllDocs(null,{database:this.data.database,params:{startkey:'"_design"',endkey:'"_design1"',include_docs:!0}}),Vs({database:this.data.database,designDocs:this.data.designDocs})},searchNoPartition:function(e,t,n,r){return this.search(e,"",t,n,r)},search:function(e,t,n,r,o){this.databaseName=e,this.ddocName=n,this.indexName=r;var i=new Qs("designDoc",{designDocName:n,designDocSection:"Search Indexes",indexName:r});zs(i);var a=this.getCrumbs(this.database);YT.dispatchInitSearchIndex({databaseName:e,partitionKey:t,designDoc:n,indexName:r,query:o}),St.fetchSelectedDatabaseInfo(e);var s=t?encodeURIComponent(t):"",c=re.urls("search","apiurl",this.databaseName,s,this.ddocName,this.indexName,o||"*:*"),u=o?"?".concat(encodeURIComponent(o)):"";return ae.createElement(gk,{section:"search",dropDownLinks:a,endpoint:c,docURL:re.constants.DOC_URLS.SEARCH_INDEXES,database:this.database,indexName:r,selectedNavItem:i,partitionKey:t,onPartitionKeySelected:function(t){var o=re.urls("partitioned_search","app",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n));re.navigate("#/"+o+encodeURIComponent(r)+u)},onGlobalModeSelected:function(){var t=re.urls("search","app",encodeURIComponent(e),encodeURIComponent(n));re.navigate("#/"+t+encodeURIComponent(r)+u)},globalMode:""===t})},editNoPartition:function(e,t,n){return this.edit(e,"",t,n)},edit:function(e,t,n,r){var o=new Qs("designDoc",{designDocName:n,designDocSection:"Search Indexes",indexName:r});zs(o),YT.dispatchEditSearchIndex({ddocID:"_design/"+n,database:this.database,indexName:r,designDocs:this.data.designDocs}),St.fetchSelectedDatabaseInfo(e);var i=this.getCrumbs(this.database);return ae.createElement(gk,{section:"edit",dropDownLinks:i,database:this.database,indexName:r,ddocName:n,selectedNavItem:o,partitionKey:t})},createNoPartition:function(e,t){return this.create(e,"",t)},create:function(e,t,n){var r=new Qs("");YT.dispatchInitNewSearchIndex({database:this.database,designDocs:this.data.designDocs,defaultDDoc:n}),St.fetchSelectedDatabaseInfo(e);var o=this.getCrumbs(this.database);return ae.createElement(gk,{section:"create",dropDownLinks:o,database:this.database,designDocs:this.data.designDocs,ddoc:n,selectedNavItem:r,partitionKey:t})},getCrumbs:function(e){return[{type:"back",link:"/_all_dbs"},{name:e.id}]}});XT.RouteObjects=[_k];const vk=XT;function wk(e){return e?"/_partition/"+e:""}vk.initialize=function(){v(N.getServerUrl("/")).then((function(e){return e.features&&-1!==e.features.indexOf("search")})).catch((function(){return!1})).then((function(e){e&&(re.registerExtension("sidebar:list",{selector:"indexes",name:"Search Indexes",urlNamespace:"search",indexLabel:"search index",onDelete:YT.deleteSearchIndex,onClone:YT.cloneSearchIndex,onEdit:YT.gotoEditSearchIndexPage}),re.registerExtension("sidebar:links",{title:"New Search Index",url:"new_search",icon:"fonticon-plus-circled",showForPartitionedDDocs:!0}),re.registerExtension("sidebar:newLinks",{url:"new_search",name:"Search Index"}),re.registerExtension("IndexTypes:propNames","indexes"),re.registerExtension("mango:indexTemplates",HT))}))},re.registerUrls("partitioned_search",{app:function(e,t,n){return"database/"+e+wk(t)+"/_design/"+n+"/_search/"}}),re.registerUrls("search",{server:function(e,t,n,r,o){return N.getServerUrl("/"+e+wk(t)+"/_design/"+n+"/_search/"+r+o)},app:function(e,t){return"database/"+e+"/_design/"+t+"/_search/"},edit:function(e,t,n,r){return"database/"+e+wk(t)+"/_design/"+n+"/_search/"+r+"/edit"},fragment:function(e,t,n,r){return"database/"+e+wk(t)+"/_design/"+n+"/_search/"+r},showIndex:function(e,t,n,r){return"database/"+e+wk(t)+"/"+n+"/_search/"+r},apiurl:function(e,t,n,r,o){return window.location.origin+"/"+encodeURIComponent(e)+"/_design/"+encodeURIComponent(n)+"/_search/"+encodeURIComponent(r)+"?q="+encodeURIComponent(o)}}),re.addReducers({search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ik,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case LT:return rk(rk({},e),{},{loading:n.loading});case vT:var r=rk(rk({},e),{},{loading:!1,designDocs:n.designDocs,database:n.database},ck());return n.defaultDDoc&&(r.ddocName="_design/"+n.defaultDDoc),r;case ET:return rk(rk({},e),{},{searchIndexName:n.value});case OT:return rk(rk({},e),{},{analyzerType:n.value});case IT:return rk(rk({},e),{},{singleAnalyzer:n.analyzer});case ST:return rk(rk({},e),{},{analyzerFields:uk(e,n)});case xT:return rk(rk({},e),{},{hasActiveQuery:!0});case kT:return rk(rk({},e),{},{hasActiveQuery:!1,searchResults:[]});case AT:return rk(rk({},e),{},{searchQuery:n.query});case TT:return rk(rk({},e),{},{searchResults:n.searchResults,hasActiveQuery:!1,searchPerformed:!0});case DT:return rk(rk({},e),{},{analyzerFields:lk(e,n.rowIndex)});case NT:return rk(rk({},e),{},{analyzerFields:pk(e,n)});case RT:return rk(rk({},e),{},{analyzerFields:fk(e,n)});case PT:return rk(rk({},e),{},{defaultMultipleAnalyzer:n.analyzer});case CT:return rk(rk({},e),dk(0,n));case jT:return rk(rk({},e),{},{ddocName:n.value});case MT:return rk(rk({},ik),{},{designDocs:new Backbone.Collection});case wT:return rk(rk({},e),{},{loading:!1,databaseName:n.databaseName,partitionKey:n.partitionKey,ddocName:n.ddocName,indexName:n.indexName,searchQuery:n.searchQuery,searchResults:""===n.searchQuery?void 0:e.searchResults,noResultsWarning:""});case UT:return rk(rk({},e),{},{newDesignDocName:n.value});case qT:return rk(rk({},e),{},{newDesignDocPartitioned:n.value});case BT:return rk(rk({},e),{},{noResultsWarning:"The selected index does not support partitions. Switch back to global mode."});case VT:return rk(rk({},e),{},{noResultsWarning:"The selected index requires a partition key. Use the selector at the top to enter a partition key."});default:return e}}});const Ek=vk;function Ok(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ok(Object(n),!0).forEach((function(t){Dk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ok(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nk={corsEnabled:!1,origins:[],isAllOrigins:!1,configChanged:!1,shouldSaveChange:!1,node:"",isLoading:!0,deleteDomainModalVisible:!1,domainToDelete:""},Rk=re.addon();Rk.initialize=function(){},re.addReducers({cors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nk,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case vN:var n=t.options;return Sk(Sk({},e),{},{isLoading:!1,node:n.node,corsEnabled:n.corsEnabled,isAllOrigins:-1!==s().indexOf(n.origins,"*"),origins:n.origins,deleteDomainModalVisible:!1,domainToDelete:""});case EN:return Sk(Sk({},e),{},{deleteDomainModalVisible:!0,domainToDelete:t.domainToDelete});case ON:return Sk(Sk({},e),{},{deleteDomainModalVisible:!1,domainToDelete:""});case wN:return Sk(Sk({},e),{},{isLoading:t.isLoading});default:return e}}});const Pk=Rk;var Ck=function(e){var t=e.removeItem,n=e.section,r=e.type,o=e.value;return ae.createElement("li",{className:"permissions__entry"},ae.createElement("span",null,o),ae.createElement("button",{onClick:function(){return t(n,r,o)},type:"button",className:"pull-right close"},"×"))};Ck.propTypes={value:Nt().string.isRequired,removeItem:Nt().func.isRequired};const Tk=Ck;function xk(e){return xk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xk(e)}function kk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ik(e,t){return Ik=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ik(e,t)}function Ak(e,t){if(t&&("object"===xk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Lk(e)}function Lk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mk(e){return Mk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mk(e)}function Uk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qk=ie.helpers.getDocUrl,Bk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ik(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mk(r);if(o){var n=Mk(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ak(this,e)});function a(){var e;kk(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Uk(Lk(e=i.call.apply(i,[this].concat(n))),"state",{newRole:"",newName:""}),Uk(Lk(e),"getHelp",(function(){return e.props.section,"Database members can access the database. If no members are defined, the database is public. "})),Uk(Lk(e),"isEmptyValue",(function(e,t){return!!s().isEmpty(e)&&(re.addNotification({msg:"Cannot add an empty value for "+t+".",type:"error"}),!0)})),Uk(Lk(e),"addNames",(function(t){t.preventDefault(),e.isEmptyValue(e.state.newName,"names")||(e.props.addItem({type:"names",section:e.props.section,value:e.state.newName}),e.setState({newName:""}))})),Uk(Lk(e),"addRoles",(function(t){t.preventDefault(),e.isEmptyValue(e.state.newRole,"roles")||(e.props.addItem({type:"roles",section:e.props.section,value:e.state.newRole}),e.setState({newRole:""}))})),Uk(Lk(e),"getItems",(function(t,n){return t.map((function(t,r){return ae.createElement(Tk,{key:r,value:t,section:e.props.section,type:n,removeItem:e.props.removeItem})}))})),Uk(Lk(e),"getNames",(function(){return e.getItems(e.props.names,"names")})),Uk(Lk(e),"getRoles",(function(){return e.getItems(e.props.roles,"roles")})),Uk(Lk(e),"nameChange",(function(t){e.setState({newName:t.target.value})})),Uk(Lk(e),"roleChange",(function(t){e.setState({newRole:t.target.value})})),e}return t=a,(n=[{key:"render",value:function(){var e=this.props.section;return ae.createElement("div",{className:"permissions__"+e},ae.createElement("header",{className:"page-header"},ae.createElement("h3",null,e),ae.createElement("p",{className:"help"},this.getHelp(),ae.createElement("a",{className:"help-link","data-bypass":"true",href:qk("DB_PERMISSION"),target:"_blank",rel:"noopener noreferrer"},ae.createElement("i",{className:"icon-question-sign"})))),ae.createElement("div",{className:"row-fluid"},ae.createElement("div",{className:"span6"},ae.createElement("header",null,ae.createElement("h4",null,"Users"),ae.createElement("p",null,"Specify users who will have ",this.props.section," access to this database.")),ae.createElement("form",{onSubmit:this.addNames,className:"permission-item-form permissions-add-user form-inline"},ae.createElement("input",{onChange:this.nameChange,value:this.state.newName,type:"text",className:"item input-small",placeholder:"Username"}),ae.createElement("button",{type:"submit",className:"btn btn-primary"},ae.createElement("i",{className:"icon fonticon-plus-circled"})," Add User")),ae.createElement("ul",{className:"unstyled permission-items span10"},this.getNames())),ae.createElement("div",{className:"span6"},ae.createElement("header",null,ae.createElement("h4",null,"Roles"),ae.createElement("p",null,"Users with any of the following role(s) will have ",this.props.section," access.")),ae.createElement("form",{onSubmit:this.addRoles,className:"permission-item-form permissions-add-role form-inline"},ae.createElement("input",{onChange:this.roleChange,value:this.state.newRole,type:"text",className:"item input-small",placeholder:"Role"}),ae.createElement("button",{type:"submit",className:"btn btn-primary"},ae.createElement("i",{className:"icon fonticon-plus-circled"})," Add Role")),ae.createElement("ul",{className:"unstyled permission-items span10"},this.getRoles()))))}}])&&jk(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);Uk(Bk,"defaultProps",{names:[],roles:[]});const Vk=Bk;function Fk(e,t,n,r){return!!e[t]&&!!e[t][n]&&-1!==e[t][n].indexOf(r)}var Kk="PERMISSIONS_UPDATE",zk=function(e){return{type:Kk,permissions:e}},Hk=function(e,t,n){return fetch(e,{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",method:"PUT",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(!e.ok)throw new Error(e.reason);return e})).then((function(){return re.addNotification({msg:"Database permissions has been updated."}),n(zk(t))})).catch((function(e){re.addNotification({msg:"Could not update permissions - reason: "+e,type:"error"})}))};function Gk(e){return Gk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gk(e)}function Wk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xk(e,t){return Xk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xk(e,t)}function Qk(e,t){if(t&&("object"===Gk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $k(e)}function $k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jk(e){return Jk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jk(e)}var Yk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xk(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Jk(r);if(o){var n=Jk(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Qk(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).addItem=t.addItem.bind($k(t)),t.removeItem=t.removeItem.bind($k(t)),t}return t=a,n=[{key:"addItem",value:function(e){var t=e.section,n=e.type,r=e.value;if(Fk(this.props.security,t,n,r))return re.addNotification({msg:"Role/Name has already been added",type:"error"}),null;this.props.dispatch(function(e,t,n,r,o){return function(i){!function(e,t,n,r){if(Fk(e,t,n,r))throw new Error("Role/Name has already been added");!function(e,t,n,r){e[t]||(e[t]={}),e[t][n]||(e[t][n]=[]),e[t][n].push(r)}(e,t,n,r)}(t,n,r,o),Hk(e,t,i).catch((function(e){re.addNotification({msg:e.message,type:"error"})}))}}(this.props.url,this.props.security,t,n,r))}},{key:"removeItem",value:function(e,t,n){this.props.dispatch(function(e,t,n,r,o){return function(i){!function(e,t,n,r){if(!Fk(e,t,n,r))throw new Error("Role/Name does not exist");e[t][n]=e[t][n].filter((function(e){return e!==r}))}(t,n,r,o),Hk(e,t,i).catch((function(e){re.addNotification({msg:e.message,type:"error"})}))}}(this.props.url,this.props.security,e,t,n))}},{key:"render",value:function(){var e=this.props,t=e.adminRoles,n=e.adminNames,r=e.memberRoles,o=e.memberNames;return ae.createElement("div",{className:"permissions-page flex-body"},ae.createElement("div",null,ae.createElement(Vk,{roles:t,names:n,addItem:this.addItem,removeItem:this.removeItem,section:"admins"}),ae.createElement(Vk,{roles:r,names:o,addItem:this.addItem,removeItem:this.removeItem,section:"members"})))}}],n&&Wk(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function Zk(e){return Zk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zk(e)}function ej(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tj(e,t){return tj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tj(e,t)}function nj(e,t){if(t&&("object"===Zk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function rj(e){return rj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rj(e)}Yk.propTypes={security:Nt().object.isRequired};var oj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tj(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=rj(r);if(o){var n=rj(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return nj(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,n=[{key:"componentDidMount",value:function(){var e=this.props;(0,e.dispatch)(function(e){return function(t){return fetch(e,{headers:{Accept:"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){if(e.error&&e.reason)throw t(zk({admins:{roles:["_admin"]},members:{roles:["_admin"]}})),new Error(e.reason);t(zk(e))})).catch((function(e){re.addNotification({msg:"Failed to retrieve permissions. Please try again. Reason:"+e.message,type:"error"})}))}}(e.url))}},{key:"render",value:function(){return this.props.isLoading?ae.createElement(Ao,null):ae.createElement(Yk,this.props)}}],n&&ej(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function ij(){return ij=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ij.apply(this,arguments)}oj.propTypes={isLoading:Nt().bool.isRequired,adminRoles:Nt().array.isRequired,adminNames:Nt().array.isRequired,memberNames:Nt().array.isRequired,memberRoles:Nt().array.isRequired,security:Nt().object.isRequired};var aj={isLoading:!0,security:{},adminRoles:[],adminNames:[],memberNames:[],memberRoles:[]};function sj(e,t){return t[e]&&t[e].roles?t[e].roles:[]}function cj(e,t){return t[e]&&t[e].names?t[e].names:[]}var uj=function(e){return e.security},lj=function(e){return e.adminRoles},pj=function(e){return e.adminNames},fj=function(e){return e.memberNames},dj=function(e){return e.memberRoles};const hj=(0,Rt.$j)((function(e){var t,n=e.permissions;return{isLoading:(t=n,t.isLoading),adminRoles:lj(n),adminNames:pj(n),memberNames:fj(n),memberRoles:dj(n),security:uj(n)}}))(oj),yj=function(e){var t=e.docURL,n=e.database,r=e.endpoint,o=e.dbName,i=e.dropDownLinks,a=e.partitionKey,s=new Qs("permissions");return ae.createElement("div",{id:"dashboard",className:"with-sidebar"},ae.createElement(Ny,{hideQueryOptions:!0,hideJumpToDoc:!0,docURL:t,endpoint:r,dbName:o,dropDownLinks:i,database:n}),ae.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},ae.createElement("aside",{id:"sidebar-content",className:"scrollable"},ae.createElement(Sl,{selectedNavItem:s,selectedPartitionKey:a})),ae.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},ae.createElement(hj,{url:r}))))};var bj=Gs.extend({roles:["fx_loggedIn"],routes:{"database/:database/_partition/:partitionKey/permissions":{route:"permissions",roles:["fx_loggedIn"]},"database/:database/permissions":{route:"permissions",roles:["fx_loggedIn"]}},initialize:function(){ie.getParams().include_docs=!0},permissions:function(e,t){this.database=new Rs.Model({id:e}),this.createDesignDocsCollection(),this.addSidebar("permissions");var n=[{name:this.database.id,link:Rs.databaseUrl(e)},{name:"Permissions"}],r=encodeURIComponent(e),o=re.urls("permissions","server",r);return ae.createElement(yj,{docURL:re.constants.DOC_URLS.DB_PERMISSION,endpoint:o,dbName:this.database.id,dropDownLinks:n,database:this.database,partitionKey:t})}});const mj={RouteObjects:[bj],initialize:function(){}};re.addReducers({permissions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aj,t=arguments.length>1?arguments[1]:void 0;if(t.type===Kk){var n=t.permissions;return ij({},e,{isLoading:!1,security:n,adminRoles:sj("admins",n),adminNames:cj("admins",n),memberRoles:sj("members",n),memberNames:cj("members",n)})}return e}});const gj=mj;var _j=function(e){var t=e.message;re.addNotification({msg:t,type:"error"})},vj=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((function(e){return e}))},wj=function(e,t){return vj(!_.isEmpty(e),!_.isEmpty(t))},Ej=function(){re.dispatch({type:"AUTH_HIDE_PASSWORD_MODAL"})};function Oj(e){return Oj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oj(e)}function Sj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dj(e,t){return Dj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dj(e,t)}function Nj(e,t){if(t&&("object"===Oj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Rj(e){return Rj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rj(e)}var Pj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dj(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Rj(r);if(o){var n=Rj(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Nj(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this)).state={username:"",password:""},e}return t=a,(n=[{key:"onUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"onPasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"submit",value:function(e){e.preventDefault(),this.checkUnrecognizedAutoFill()||this.login(this.state.username,this.state.password)}},{key:"checkUnrecognizedAutoFill",value:function(){if(""!==this.state.username||""!==this.state.password)return!1;var e=this.props.testBlankUsername?this.props.testBlankUsername:this.usernameField.value,t=this.props.testBlankPassword?this.props.testBlankPassword:this.passwordField.value;return this.setState({username:e,password:t}),this.login(e,t),!0}},{key:"login",value:function(e,t){!function(e,t,n){wj(e,t)?ow({name:e,password:t}).then((function(e){if(e.error)return _j({message:e.reason}),e;var t=ie.i18n.en_US["auth-logged-in"];if(t&&re.addNotification({msg:t}),n&&-1===n.indexOf("login"))return re.navigate(n);re.navigate("/")})).catch(_j):_j({message:ie.i18n.en_US["auth-missing-credentials"]})}(e,t,this.props.urlBack)}},{key:"componentDidMount",value:function(){this.usernameField.focus()}},{key:"render",value:function(){var e=this;return ae.createElement("div",{className:"couch-login-wrapper"},ae.createElement("div",{className:"row-fluid"},ae.createElement("div",{className:"span12"},ae.createElement("form",{id:"login",onSubmit:this.submit.bind(this)},ae.createElement("p",{className:"help-block"},"Enter your username and password."),ae.createElement("input",{id:"username",type:"text",name:"username",ref:function(t){return e.usernameField=t},placeholder:"Username",size:"24",onChange:this.onUsernameChange.bind(this),value:this.state.username}),ae.createElement("br",null),ae.createElement("input",{id:"password",type:"password",name:"password",ref:function(t){return e.passwordField=t},placeholder:"Password",size:"24",onChange:this.onPasswordChange.bind(this),value:this.state.password}),ae.createElement("br",null),ae.createElement("button",{id:"submit",className:"btn btn-success",type:"submit"},"Log In")))))}}])&&Sj(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);Pj.defaultProps={urlBack:""},Pj.propTypes={urlBack:Nt().string.isRequired};const Cj=Pj;function Tj(e){return Tj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tj(e)}function xj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kj(e,t){return kj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kj(e,t)}function jj(e,t){if(t&&("object"===Tj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ij(e)}function Ij(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Aj(e){return Aj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Aj(e)}var Lj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kj(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Aj(r);if(o){var n=Aj(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return jj(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={password:""},t.authenticate=t.authenticate.bind(Ij(t)),t.onKeyPress=t.onKeyPress.bind(Ij(t)),t}return t=a,(n=[{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.authenticate()}},{key:"authenticate",value:function(){var e=re.session.user().name;this.props.onSubmit(e,this.state.password,this.props.onSuccess)}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,r=t.onClose,o=t.submitBtnLabel,i=t.headerTitle,a=t.modalMessage;return this.props.visible?ae.createElement(en.u_,{dialogClassName:"enter-password-modal",show:n,onHide:function(){return r()}},ae.createElement(en.u_.Header,{closeButton:!0},ae.createElement(en.u_.Title,null,i)),ae.createElement(en.u_.Body,null,a,ae.createElement("input",{style:{width:"385px"},type:"password",className:"password-modal-input",placeholder:"Enter your password",autoFocus:!0,value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},onKeyPress:this.onKeyPress})),ae.createElement(en.u_.Footer,null,ae.createElement("a",{className:"cancel-link",onClick:function(){return r()}},"Cancel"),ae.createElement(ga.ConfirmButton,{text:o,onClick:this.authenticate}))):null}}])&&xj(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);Lj.propTypes={visible:Nt().bool.isRequired,modalMessage:Nt().oneOfType([Nt().string,Nt().element]),onSubmit:Nt().func.isRequired,onClose:Nt().func.isRequired,submitBtnLabel:Nt().string},Lj.defaultProps={headerTitle:"Enter Password",visible:!1,modalMessage:"",onClose:Ej,onSubmit:function(e,t,n){ow({name:e,password:t}).then((function(r){if(r.error)throw r;Ej(),n(e,t)})).catch((function(){re.addNotification({msg:"Your username or password is incorrect.",type:"error",clear:!0})}))},onSuccess:function(){},submitBtnLabel:"Continue"};const Mj=Lj;function Uj(e){return Uj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uj(e)}function qj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bj(e,t){return Bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bj(e,t)}function Vj(e,t){if(t&&("object"===Uj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Fj(e){return Fj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fj(e)}var Kj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bj(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fj(r);if(o){var n=Fj(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Vj(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={username:"",password:""},t}return t=a,(n=[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"componentDidMount",value:function(){this.usernameField.focus()}},{key:"createAdmin",value:function(e){e.preventDefault(),this.props.createAdmin(this.state.username,this.state.password,this.props.loginAfter,this.props.nodes)}},{key:"render",value:function(){var e=this;return ae.createElement("div",{className:"faux__auth-page"},ae.createElement("h3",null,"Create Admins"),ae.createElement("p",null,"Before a server admin is configured, all clients have admin privileges. This is fine when HTTP access is restricted to trusted users. ",ae.createElement("strong",null,"If end-users will be accessing this CouchDB, you must create an admin account to prevent accidental (or malicious) data loss.")),ae.createElement("p",null,"Server admins can create and destroy databases, install and update _design documents, run the test suite, and edit all aspects of CouchDB configuration."),ae.createElement("form",{id:"create-admin-form",onSubmit:this.createAdmin.bind(this)},ae.createElement("input",{id:"username",type:"text",ref:function(t){return e.usernameField=t},name:"name",placeholder:"Username",size:"24",onChange:this.onChangeUsername.bind(this)}),ae.createElement("br",null),ae.createElement("input",{id:"password",type:"password",name:"password",placeholder:"Password",size:"24",onChange:this.onChangePassword.bind(this)}),ae.createElement("p",null,"Non-admin users have read and write access to all databases, which are controlled by validation. CouchDB can be configured to block all access to anonymous users."),ae.createElement("button",{type:"submit",id:"create-admin",className:"btn btn-primary"},"Create Admin")))}}])&&qj(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);Kj.propTypes={loginAfter:Nt().bool.isRequired},Kj.defaultProps={loginAfter:!1};const zj=(0,Rt.$j)((function(e){return{nodes:e.clusters.nodes}}),{createAdmin:function(e,t,n,r){return function(){var o=r[0].node;if(!wj(e,t))return _j({message:ie.i18n.en_US["auth-missing-credentials"]});rw({name:e,password:t,node:o}).then((function(e){return e.error?_j({message:"".concat(ie.i18n.en_US["auth-admin-creation-failed-prefix"]," ").concat(e.reason)}):(re.addNotification({msg:ie.i18n.en_US["auth-admin-created"]}),n?re.navigate("/login"):void 0)}))}}})(Kj);function Hj(e){return Hj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hj(e)}function Gj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wj(e,t){return Wj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wj(e,t)}function Xj(e,t){if(t&&("object"===Hj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Qj(e){return Qj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qj(e)}var $j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wj(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Qj(r);if(o){var n=Qj(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Xj(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={password:"",passwordConfirm:""},t}return t=a,(n=[{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onChangePasswordConfirm",value:function(e){this.setState({passwordConfirm:e.target.value})}},{key:"componentDidMount",value:function(){this.passwordField.focus()}},{key:"changePassword",value:function(e){e.preventDefault(),this.props.changePassword(this.props.username,this.state.password,this.state.passwordConfirm,this.props.nodes)}},{key:"render",value:function(){var e=this;return ae.createElement("div",{className:"faux__auth-page"},ae.createElement("h3",null,"Change Password"),ae.createElement("form",{id:"change-password",onSubmit:this.changePassword.bind(this)},ae.createElement("p",null,"Enter your new password."),ae.createElement("input",{id:"password",type:"password",ref:function(t){return e.passwordField=t},name:"password",placeholder:"Password",size:"24",onChange:this.onChangePassword.bind(this),value:this.state.password}),ae.createElement("br",null),ae.createElement("input",{id:"password-confirm",type:"password",name:"password_confirm",placeholder:"Verify Password",size:"24",onChange:this.onChangePasswordConfirm.bind(this),value:this.state.passwordConfirm}),ae.createElement("br",null),ae.createElement("p",null,ae.createElement("button",{type:"submit",className:"btn btn-primary"},"Change"))))}}])&&Gj(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);const Jj={LoginForm:Cj,PasswordModal:Mj,CreateAdminForm:zj,ChangePasswordForm:(0,Rt.$j)((function(e){return{nodes:e.clusters.nodes,username:re.session.user().name}}),{changePassword:function(e,t,n,r){return function(){if(!function(e,t){return vj(!_.isEmpty(e),!_.isEmpty(t),e===t)}(t,n))return _j({message:ie.i18n.en_US["auth-passwords-not-matching"]});rw({name:e,password:t,node:r[0].node}).then((function(){re.addNotification({msg:ie.i18n.en_US["auth-change-password"]})}),_j)}}})($j)};var Yj=Jj.CreateAdminForm,Zj=Jj.ChangePasswordForm,eI=function(e){var t=e.crumbs;return ae.createElement("header",null,ae.createElement("div",{className:"flex-layout flex-row"},ae.createElement("div",{id:"breadcrumbs",className:"flex-body"},ae.createElement(Vt,{crumbs:t}))))},tI=function(e){var t=e.crumbs,n=e.component;return ae.createElement(Ht,null,ae.createElement(eI,{crumbs:t}),ae.createElement(Wt,null,n))},nI=function(e){var t=e.changePassword;return ae.createElement(Ii,null,ae.createElement(ki,{key:1,selected:t,text:"Change Password",onChange:function(){re.navigate("#changePassword")}}),ae.createElement(ki,{key:2,selected:!t,text:"Create Server Admin",onChange:function(){re.navigate("#addAdmin")}}))},rI=function(e){var t=e.crumbs,n=e.changePassword,r=n?ae.createElement(Zj,null):ae.createElement(Yj,{loginAfter:!1});return ae.createElement(Ht,null,ae.createElement(eI,{crumbs:t}),ae.createElement(Wt,null,ae.createElement("div",{className:"template-content flex-body flex-layout flex-col"},ae.createElement(nI,{changePassword:n}),ae.createElement("div",{id:"dashboard-conten1t",className:"flex-layout flex-col"},r))))},oI=Jj.LoginForm,iI=Jj.CreateAdminForm,aI=[{name:"Log In to CouchDB"}];const sI=[re.RouteObject.extend({routes:{"login?*extra":"login",login:"login",logout:"logout",createAdmin:"checkNodes","createAdmin/:node":"createAdminForNode"},checkNodes:function(){sv.navigateToNodeBasedOnNodeCount("/createAdmin/")},login:function(){return ae.createElement(tI,{crumbs:aI,component:ae.createElement(oI,{urlBack:ie.getParams().urlback})})},logout:function(){re.addNotification({msg:"You have been logged out."}),iw().then(aw).then((function(){return re.navigate("/")})).catch(_j)},createAdminForNode:function(){return sv.fetchNodes(),ae.createElement(tI,{crumbs:[{name:"Create Admin"}],component:ae.createElement(iI,{loginAfter:!0})})}}),re.RouteObject.extend({hideNotificationCenter:!0,hideApiBar:!0,selectedHeader:"Your Account",routes:{changePassword:{route:"checkNodesForPasswordChange",roles:["fx_loggedIn"]},"changePassword/:node":{route:"changePassword",roles:["fx_loggedIn"]},addAdmin:{route:"checkNodesForAddAdmin",roles:["_admin"]},"addAdmin/:node":{route:"addAdmin",roles:["_admin"]}},checkNodesForPasswordChange:function(){sv.navigateToNodeBasedOnNodeCount("/changePassword/")},checkNodesForAddAdmin:function(){sv.navigateToNodeBasedOnNodeCount("/addAdmin/")},changePassword:function(){return sv.fetchNodes(),ae.createElement(rI,{crumbs:[{name:"User Management"}],changePassword:!0})},addAdmin:function(){return sv.fetchNodes(),ae.createElement(rI,{crumbs:[{name:"User Management"}],changePassword:!1})}})];function cI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,a.includes)(e,"_admin")}var lI=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._user={name:!1,roles:[]},this._onChange={},this._authenticatedPromise=new(U())((function(e,t){n._authenticateResolve=e,n._authenticateReject=t})),this._allowAdminParty=t.allowAdminParty}var t,n;return t=e,n=[{key:"isAuthenticated",value:function(){return this._authenticatedPromise}},{key:"setUser",value:function(e){var t=this;return this._user.name!==e.name&&(this._user={name:e.name,roles:e.roles,isAdmin:uI(e.roles)},(0,a.each)(this._onChange,(function(e){return e(t._user)}))),this._user}},{key:"user",value:function(){return this._user}},{key:"getSession",value:function(){var e=this;return aw().then((function(t){e.setUser(t),e.isLoggedIn()&&e._authenticateResolve(e.user())})).catch((function(t){e._authenticateReject(t)}))}},{key:"isAdminParty",value:function(){return!!this._allowAdminParty&&!this._user.name&&this._user.isAdmin}},{key:"isLoggedIn",value:function(){return!_.isNull(this._user.name)}},{key:"userRoles",value:function(){var e=this._user;return this.isLoggedIn()?(-1===e.roles.indexOf("fx_loggedIn")&&e.roles.push("fx_loggedIn"),e.roles):[]}},{key:"onChange",value:function(e){var t=this,n=(0,a.uniqueId)();return this._onChange[n]=e,function(){delete t._onChange[n]}}},{key:"matchesRoles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===e.length)return!0;var t=_.intersection(this.userRoles(),e).length;return t>0}}],n&&cI(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),pI=function(){re.removeHeaderLink({id:"auth",bottomNav:!0})};re.setSession(new lI({allowAdminParty:!0}));const fI={initialize:function(){re.addHeaderLink({id:"auth",title:"Login",href:"#/login",icon:"fonticon-user",bottomNav:!0}),re.session.onChange((function(){var e,t=re.session;t.isAdminParty()?(e={id:"auth",title:"Admin Party!",href:"#/createAdmin",icon:"fonticon-user",bottomNav:!0},pI(),re.addHeaderLink(e),re.hideLogin()):t.isLoggedIn()?(e={id:"auth",title:"Your Account",href:"#/changePassword",icon:"fonticon-user",bottomNav:!0},pI(),re.addHeaderLink(e),re.showLogout()):(pI(),re.showLogin())}))},RouteObjects:sI};var dI,hI,yI=re.addon(),bI=new ft.Model({id:"verifytestdb",name:"verifytestdb"}),mI=new ft.Model({id:"verifytestdb_replicate",name:"verifytestdb_replicate"});yI.testProcess={saveDoc:function(){return(dI=new lt.Doc({_id:"test_doc_1",a:1},{database:bI})).save()},destroyDoc:function(){return dI.destroy()},updateDoc:function(){return dI.set({b:"hello"}),dI.save()},saveDB:function(){return bI.save()},setupDB:function(e){return new re.Promise((function(t,n){e.fetch().then((function(){return e.destroy()}),(function(){t()})).then((function(){t()}),(function(e,t,r){n(new Error(r))}))}))},setup:function(){return re.Promise.all([this.setupDB(bI),this.setupDB(mI)])},testView:function(){var e,t,n=new re.Promise((function(n,r){e=n,t=r}));return v(hI.url()+"/_view/testview").then((function(e){if(e.error)throw new Error(e.reason||e.error);return e})).then((function(n){var r=(n=_.isString(n)?JSON.parse(n):n).rows[0];6===r.value&&e(),t(new Error("Values expect 6, got "+r.value))}),t),n},setupView:function(){var e=new lt.Doc({_id:"test_doc_10",a:1},{database:bI}),t=new lt.Doc({_id:"test_doc_20",a:2},{database:bI}),n=new lt.Doc({_id:"test_doc_30",a:3},{database:bI});return hI=new lt.Doc({_id:"_design/view_check",views:{testview:{map:"function (doc) { emit(doc._id, doc.a); }",reduce:"_sum"}}},{database:bI}),re.Promise.all([e.save(),t.save(),n.save(),hI.save()])},setupReplicate:function(){return E(N.getServerUrl("/_replicate"),{create_target:!0,source:"verifytestdb",target:"verifytestdb_replicate"}).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))},testReplicate:function(){return new re.Promise((function(e,t){mI.fetch().then((function(){var n=mI.get("doc_count");4!==n?t(new Error("Replication Failed, expected 4 docs got "+n)):e()}),t)}))},removeDBs:function(){mI.destroy(),bI.destroy()}};const gI=yI;function _I(e){return _I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_I(e)}function vI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function EI(e,t){return EI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},EI(e,t)}function OI(e,t){if(t&&("object"===_I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function SI(e){return SI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},SI(e)}var DI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EI(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=SI(r);if(o){var n=SI(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return OI(this,e)});function a(){return vI(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){return ae.createElement("button",{id:"start",className:"btn btn-primary",onClick:this.props.verify,disabled:this.props.isVerifying},this.props.isVerifying?"Verifying":"Verify Installation")}}])&&wI(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(DI,"propTypes",{verify:Nt().func.isRequired,isVerifying:Nt().bool.isRequired});const NI={CREATE_DATABASE:"TEST_CREATE_DATABASE",CREATE_DOCUMENT:"TEST_CREATE_DOCUMENT",UPDATE_DOCUMENT:"TEST_UPDATE_DOCUMENT",DELETE_DOCUMENT:"TEST_DELETE_DOCUMENT",CREATE_VIEW:"TEST_CREATE_VIEW",REPLICATION:"TEST_REPLICATION"};function RI(e){return RI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RI(e)}function PI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TI(e,t){return TI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},TI(e,t)}function xI(e,t){if(t&&("object"===RI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kI(e)}function kI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jI(e){return jI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jI(e)}function II(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var AI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TI(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=jI(r);if(o){var n=jI(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return xI(this,e)});function a(){var e;PI(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return II(kI(e=i.call.apply(i,[this].concat(n))),"showTestResult",(function(t){return e.props.testResults[t].complete?e.props.testResults[t].success?ae.createElement("span",null,"✓"):ae.createElement("span",null,"✗"):""})),e}return t=a,(n=[{key:"render",value:function(){return ae.createElement("table",{className:"table table-striped table-bordered"},ae.createElement("thead",null,ae.createElement("tr",null,ae.createElement("th",null,"Test"),ae.createElement("th",null,"Status"))),ae.createElement("tbody",null,ae.createElement("tr",null,ae.createElement("td",null,"Create Database"),ae.createElement("td",{id:"js-test-create-db"},this.showTestResult(NI.CREATE_DATABASE))),ae.createElement("tr",null,ae.createElement("td",null,"Create Document"),ae.createElement("td",{id:"js-test-create-doc"},this.showTestResult(NI.CREATE_DOCUMENT))),ae.createElement("tr",null,ae.createElement("td",null,"Update Document"),ae.createElement("td",{id:"js-test-update-doc"},this.showTestResult(NI.UPDATE_DOCUMENT))),ae.createElement("tr",null,ae.createElement("td",null,"Delete Document"),ae.createElement("td",{id:"js-test-delete-doc"},this.showTestResult(NI.DELETE_DOCUMENT))),ae.createElement("tr",null,ae.createElement("td",null,"Create View"),ae.createElement("td",{id:"js-test-create-view"},this.showTestResult(NI.CREATE_VIEW))),ae.createElement("tr",null,ae.createElement("td",null,"Replication"),ae.createElement("td",{id:"js-test-replication"},this.showTestResult(NI.REPLICATION)))))}}])&&CI(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function LI(e){return LI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LI(e)}function MI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UI(e,t){return UI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},UI(e,t)}function qI(e,t){if(t&&("object"===LI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function BI(e){return BI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},BI(e)}II(AI,"propTypes",{testResults:Nt().object.isRequired});var VI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UI(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=BI(r);if(o){var n=BI(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return qI(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).props.resetTests(),t}return t=a,(n=[{key:"render",value:function(){return ae.createElement("div",null,ae.createElement(DI,{verify:this.props.startVerification,isVerifying:this.props.isVerifying}),ae.createElement(AI,{testResults:this.props.testResults}))}}])&&MI(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);const FI="VERIFY_INSTALL_START",KI="VERIFY_INSTALL_RESET",zI="VERIFY_INSTALL_SINGLE_TEST_COMPLETE",HI="VERIFY_INSTALL_ALL_TESTS_COMPLETE";var GI=function(e,t){return function(){t({type:zI,test:e,success:!0})}},WI=!0,XI=function(e,t){return function(n){if(WI=!1,n){t({type:zI,test:e,success:!1});var r="n/a";n.responseText?r=JSON.parse(n.responseText).reason:n.message&&(r=n.message),re.addNotification({msg:"Error: "+r,type:"error"})}}},QI=function(){return function(e){e({type:KI})}};const $I=(0,Rt.$j)((function(e){var t=e.verifyinstall;return{isVerifying:t.isVerifying,testResults:t.tests}}),(function(e){return{resetTests:function(){e(QI())},startVerification:function(){e(QI()),e((function(e){e({type:FI});var t=gI.testProcess;t.setup().then((function(){return t.saveDB().then(GI(NI.CREATE_DATABASE,e))}),XI(NI.CREATE_DATABASE,e)).then((function(){return t.saveDoc().then(GI(NI.CREATE_DOCUMENT,e))}),XI(NI.CREATE_DATABASE,e)).then((function(){return t.updateDoc().then(GI(NI.UPDATE_DOCUMENT,e))}),XI(NI.CREATE_DOCUMENT,e)).then((function(){return t.destroyDoc().then(GI(NI.DELETE_DOCUMENT,e))}),XI(NI.UPDATE_DOCUMENT,e)).then((function(){return t.setupView().then((function(){return t.testView().then(GI(NI.CREATE_VIEW,e))}))}),XI(NI.DELETE_DOCUMENT,e)).then((function(){return t.setupReplicate().then((function(){return t.testReplicate().then(GI(NI.REPLICATION,e))}))}),XI(NI.CREATE_VIEW,e)).then((function(){}),XI(NI.REPLICATION,e)).then((function(){e({type:HI}),WI&&re.addNotification({msg:"Success! Your CouchDB installation is working. Time to Relax.",type:"success"}),t.removeDBs()}))}))}}}))(VI);var JI=re.RouteObject.extend({routes:{verifyinstall:"verifyInstall"},selectedHeader:"Verify",verifyInstall:function(){return ae.createElement(Qt,{component:ae.createElement($I,null),crumbs:[{name:"Verify CouchDB Installation"}]})}});gI.RouteObjects=[JI];const YI=gI;function ZI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZI(Object(n),!0).forEach((function(t){tA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nA={isVerifying:!1,tests:{}};function rA(e){var t=eA({},e);return Object.keys(t).forEach((function(e){t[e]={complete:!1}})),t}function oA(e,t,n){var r=eA({},e);if(!_.has(r,t))throw new Error("Invalid test name passed to updateTestStatus()");return r[t]={complete:!0,success:n},r}Object.keys(NI).forEach((function(e){nA.tests[NI[e]]={complete:!1}})),YI.initialize=function(){re.addHeaderLink({title:"Verify",href:"#/verifyinstall",icon:"fonticon-ok-circled",bottomNav:!0})},re.addReducers({verifyinstall:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case FI:return eA(eA({},e),{},{isVerifying:!0});case KI:return eA(eA({},e),{},{tests:rA(e.tests)});case zI:return eA(eA({},e),{},{tests:oA(e.tests,t.test,t.success)});case HI:return eA(eA({},e),{},{isVerifying:!1});default:return e}}});const iA=YI;var aA=[{title:"CouchDB Official Documentation — Online",link:"http://docs.couchdb.org/en/latest/",iconClassName:"couchdb-icon"},{title:"CouchDB Official Documentation — Offline",link:"./docs/index.html",iconClassName:"couchdb-icon"},{title:"CouchDB Weekly News",link:"http://blog.couchdb.org/",iconClassName:"couchdb-icon"},{title:"CouchDB Homepage",link:"https://couchdb.apache.org/",iconClassName:"couchdb-icon"},{title:"CouchDB on GitHub",link:"https://github.com/apache/couchdb",iconClassName:"github-icon"},{title:"Fauxton on GitHub",link:"https://github.com/apache/couchdb-fauxton",iconClassName:"github-icon"},{title:"Fauxton Visual Guide",link:"https://couchdb.apache.org/fauxton-visual-guide/index.html",iconClassName:"couchdb-icon"},{title:"The Apache Software Foundation",link:"http://www.apache.org/",iconClassName:"asf-feather-icon"},{title:"Follow CouchDB on Twitter",link:"https://twitter.com/couchdb",iconClassName:"twitter-icon"},{title:"Follow CouchDB on LinkedIn",link:"https://www.linkedin.com/company/apache-couchdb",iconClassName:"linkedin-icon"}];const sA=function(e){var t=e.links,n=void 0===t?aA:t;return ae.createElement("div",{id:"documentation-page",className:"scrollable"},ae.createElement("div",{className:"links"},ae.createElement("table",null,ae.createElement("tbody",null,n.map((function(e){return ae.createElement("tr",{key:e.title},ae.createElement("td",{className:"icons-container"},ae.createElement("div",{className:"icon "+e.iconClassName}," ")),ae.createElement("td",null,ae.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer","data-bypass":"true"},e.title)))}))))))};var cA=re.RouteObject.extend({selectedHeader:"Documentation",hideApiBar:!0,hideNotificationCenter:!0,routes:{documentation:"documentation"},roles:["fx_loggedIn"],documentation:function(){return ae.createElement(Qt,{component:ae.createElement(sA,null),crumbs:[{name:"Documentation"}]})}});cA.RouteObjects=[cA];const uA=cA;uA.initialize=function(){re.addHeaderLink({id:"Documentation",title:"Documentation",icon:"fonticon-bookmark",href:"#/documentation",bottomNav:!0,top:!0})};const lA=uA;function pA(e){return pA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pA(e)}function fA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dA(e,t){return dA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dA(e,t)}function hA(e,t){if(t&&("object"===pA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yA(e)}function yA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bA(e){return bA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bA(e)}var mA=function(e){var t=e.showNews,n=e.isChecked,r=e.toggleChange;return ae.createElement("div",null,ae.createElement("p",null,"When you click this button, you are requesting content and sharing your IP address with ",ae.createElement("a",{href:"https://blog.couchdb.org/"},"blog.couchdb.org")," which is edited by the Apache CouchDB PMC and maintained by ",ae.createElement("a",{href:"https://wordpress.com/"},"wordpress.com"),"."),ae.createElement("p",null,"If you don’t want to share your IP address, do not click the button."),ae.createElement("button",{className:"btn btn-primary",onClick:t},"Load News"),ae.createElement("label",{className:"news-checkbox"},ae.createElement("input",{type:"checkbox",checked:n,onChange:r}),"Remember my choice"))};const gA={NewsPage:function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dA(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=bA(r);if(o){var n=bA(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return hA(this,e)});function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).showNews=t.showNews.bind(yA(t)),t.toggleChange=t.toggleChange.bind(yA(t));var n=!!ie.utils.localStorageGet("allow-IP-sharing");return t.state={showNews:!!n,allowsIpSharing:n},t}return t=a,(n=[{key:"showNews",value:function(){this.setState({showNews:!0})}},{key:"toggleChange",value:function(){var e=this.state.allowsIpSharing;this.setState({allowsIpSharing:!e}),ie.utils.localStorageSet("allow-IP-sharing",!e)}},{key:"render",value:function(){var e=ae.createElement(mA,{showNews:this.showNews,toggleChange:this.toggleChange,isChecked:this.state.allowsIpSharing});return this.state.showNews&&(e=ae.createElement("iframe",{src:"https://blog.couchdb.org",width:"100%",height:"100%"})),ae.createElement("div",{className:"news-page"},e)}}])&&fA(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component)};var _A=re.RouteObject.extend({selectedHeader:"News",hideApiBar:!0,hideNotificationCenter:!0,routes:{news:"news"},roles:["fx_loggedIn"],news:function(){return ae.createElement(Qt,{component:ae.createElement(gA.NewsPage,null),crumbs:[{name:"News"}]})}});_A.RouteObjects=[_A];const vA=_A;vA.initialize=function(){re.addHeaderLink({id:"News",title:"News",icon:"fonticon-clipboard",href:"#/news",bottomNav:!0,top:!0})};const wA=[Xe,{initialize:function(){}},Rs,ov,bE,ZO,dS,qN,_T,Ek,Pk,gj,fI,iA,lA,vA];function EA(e){return EA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EA(e)}function OA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DA(e,t){return DA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},DA(e,t)}function NA(e,t){if(t&&("object"===EA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return RA(e)}function RA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PA(e){return PA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},PA(e)}function CA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var TA=ga.Copy,xA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DA(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=PA(r);if(o){var n=PA(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return NA(this,e)});function a(){var e;OA(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return CA(RA(e=i.call.apply(i,[this].concat(n))),"clearNotification",(function(){var t=e.props.item.toastId;e.props.clearSingleNotification(t)})),e}return t=a,(n=[{key:"render",value:function(){var e=this.props.item.time.fromNow(),t="fonticon "+{success:"fonticon-ok-circled",error:"fonticon-attention-circled",info:"fonticon-info-circled"}[this.props.item.type],n="all"!==this.props.filter&&this.props.filter!==this.props.item.type,r=this.props.style,o=r.opacity,i=r.height;return 0===o&&0===i?null:ae.createElement("li",{style:{opactiy:o,height:i+"px",borderBottomColor:"rgba(34, 34, 34, ".concat(o,")")},"aria-hidden":n},ae.createElement("div",{className:"flex-layout flex-row"},ae.createElement("span",{className:t}),ae.createElement("div",{className:"flex-body"},ae.createElement("p",null,this.props.item.cleanMsg),ae.createElement("div",{className:"notification-actions"},ae.createElement("span",{className:"time-elapsed"},e),ae.createElement("span",{className:"divider"},"|"),ae.createElement(TA,{uniqueKey:(0,Pl.Z)(),text:this.props.item.cleanMsg,displayType:"text"}))),ae.createElement("button",{type:"button",onClick:this.clearNotification},"×")))}}])&&SA(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function kA(e){return kA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kA(e)}function jA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AA(e,t){return AA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},AA(e,t)}function LA(e,t){if(t&&("object"===kA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return MA(e)}function MA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UA(e){return UA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},UA(e)}function qA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}CA(xA,"propTypes",{item:Nt().object.isRequired,filter:Nt().string.isRequired,clearSingleNotification:Nt().func.isRequired});var BA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AA(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=UA(r);if(o){var n=UA(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return LA(this,e)});function a(){var e;jA(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return qA(MA(e=i.call.apply(i,[this].concat(n))),"getNotifications",(function(t){var n;return n=t.length||e.props.notifications.length?t.map((function(t){var n=t.key,r=t.data,o=t.style;return ae.createElement(xA,{item:r,filter:e.props.filter,clearSingleNotification:e.props.clearSingleNotification,key:n,style:o})})):ae.createElement("li",{className:"no-notifications"},"No notifications."),ae.createElement("ul",{className:"notification-list"},n)})),qA(MA(e),"getStyles",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.props.notifications.map((function(n){var r=t.find((function(e){return e.key===n.toastId.toString()})),o=!r&&{opacity:0,height:0};return o||n.type!==e.props.filter&&"all"!==e.props.filter?n.type!==e.props.filter&&(o={opacity:(0,ci.ST)(0,ci.um.stiff),height:(0,ci.ST)(0,ci.um.stiff)}):o={opacity:(0,ci.ST)(1,ci.um.stiff),height:(0,ci.ST)(61,ci.um.stiff)},{key:n.toastId.toString(),style:o,data:n}}));return n})),e}return t=a,(n=[{key:"render",value:function(){var e=this;if(!this.props.isVisible&&0===this.props.style.x)return null;var t={all:"flex-body",success:"flex-body",error:"flex-body",info:"flex-body"};t[this.props.filter]+=" selected";var n="notification-page-mask ".concat(this.props.isVisible?" visible":"");return ae.createElement("div",{id:"notification-center"},ae.createElement("div",{className:"notification-center-panel flex-layout flex-col visible",style:{transform:"translate(".concat(this.props.style.x,"px)")}},ae.createElement("header",{className:"flex-layout flex-row"},ae.createElement("span",{className:"fonticon fonticon-bell"}),ae.createElement("h1",{className:"flex-body"},"Notifications"),ae.createElement("button",{"aria-label":"Hide Notifications Center",type:"button",onClick:this.props.hideNotificationCenter},"×")),ae.createElement("ul",{"aria-label":"Filters",className:"notification-filter flex-layout flex-row"},ae.createElement("li",{className:t.all,title:"All notifications","data-filter":"all",onClick:function(){return e.props.selectNotificationFilter("all")}},"All"),ae.createElement("li",{className:t.success,title:"Success notifications","data-filter":"success",onClick:function(){return e.props.selectNotificationFilter("success")}},ae.createElement("span",{className:"fonticon fonticon-ok-circled"})),ae.createElement("li",{className:t.error,title:"Error notifications","data-filter":"error",onClick:function(){return e.props.selectNotificationFilter("error")}},ae.createElement("span",{className:"fonticon fonticon-attention-circled"})),ae.createElement("li",{className:t.info,title:"Info notifications","data-filter":"info",onClick:function(){return e.props.selectNotificationFilter("info")}},ae.createElement("span",{className:"fonticon fonticon-info-circled"}))),ae.createElement("div",{className:"flex-body"},ae.createElement(ci.bg,{styles:this.getStyles},this.getNotifications)),ae.createElement("footer",null,ae.createElement("input",{type:"button",value:"Clear All",className:"btn btn-small btn-secondary",onClick:this.props.clearAllNotifications}))),ae.createElement("div",{className:n,onClick:this.props.hideNotificationCenter}))}}])&&IA(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);function VA(e){return VA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VA(e)}function FA(){return FA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FA.apply(this,arguments)}function KA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HA(e,t){return HA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},HA(e,t)}function GA(e,t){if(t&&("object"===VA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return WA(e)}function WA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XA(e){return XA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},XA(e)}function QA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}qA(BA,"propTypes",{isVisible:Nt().bool.isRequired,filter:Nt().string.isRequired,notifications:Nt().array.isRequired,hideNotificationCenter:Nt().func.isRequired,selectNotificationFilter:Nt().func.isRequired,clearAllNotifications:Nt().func.isRequired,clearSingleNotification:Nt().func.isRequired});var $A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HA(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=XA(r);if(o){var n=XA(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return GA(this,e)});function a(){var e;KA(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return QA(WA(e=i.call.apply(i,[this].concat(n))),"getStyles",(function(){var t={key:"1",style:{x:320}};return e.props.isVisible?t.style={x:(0,ci.ST)(0)}:t.style={x:(0,ci.ST)(320)},[t]})),QA(WA(e),"getNotificationCenterPanel",(function(t){var n=t.map((function(t){var n=t.style;return ae.createElement(BA,FA({key:"1",style:n},e.props))}));return ae.createElement("aside",{"aria-label":"Notifications"},n)})),e}return t=a,(n=[{key:"render",value:function(){return ae.createElement(ci.bg,{styles:this.getStyles},this.getNotificationCenterPanel)}}])&&zA(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);const JA=(0,Rt.$j)((function(e){var t=e.notifications;return{isVisible:t.notificationCenterVisible,filter:t.selectedNotificationFilter,notifications:t.notifications}}),(function(e){return{hideNotificationCenter:function(){e((function(e){e({type:xe})}))},selectNotificationFilter:function(t){e(function(e){return function(t){t({type:Ie,options:{filter:e}})}}(t))},clearAllNotifications:function(){e((function(e){e({type:je})}))},clearSingleNotification:function(t){e(function(e){return function(t){t({type:ke,options:{toastId:e}})}}(t))}}}))($A);function YA(e){return YA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YA(e)}function ZA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eL(e,t){return eL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},eL(e,t)}function tL(e,t){if(t&&("object"===YA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function nL(e){return nL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nL(e)}function rL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eL(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=nL(r);if(o){var n=nL(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return tL(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"getMsg",value:function(){return{__html:this.props.message}}},{key:"getContent",value:function(){return ae.createElement("p",{className:"perma-warning__content",dangerouslySetInnerHTML:this.getMsg()})}},{key:"render",value:function(){return this.props.visible&&this.props.message?ae.createElement("div",{id:"perma-warning"},this.getContent()):null}}])&&ZA(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);rL(oL,"defaultProps",{visible:!1}),rL(oL,"propTypes",{visible:Nt().bool.isRequired,message:Nt().string});const iL=(0,Rt.$j)((function(e){var t=e.notifications;return{visible:t.permanentNotificationVisible,message:t.permanentNotificationMessage}}))(oL);var aL=function(e){var t=e.version;return t?ae.createElement("div",{className:"faux-navbar__version-footer"},"Fauxton on  ",ae.createElement("a",{href:"http://couchdb.apache.org/"},"Apache CouchDB"),ae.createElement("div",null,"v. ",t),ae.createElement("a",{href:"https://docs.couchdb.org/en/latest/whatsnew/".concat(t.split(".").slice(0,2).join("."),".html")},"What's New?")):null};aL.propTypes={version:Nt().string};const sL=aL;var cL=function(e){var t=e.toggleMenu,n=e.isMinimized,r=Zt()("faux-navbar__burger",{"faux-navbar--wide":!n},{"faux-navbar--narrow":n}),o=n?"icon-resize-horizontal":"icon-signin faux-navbar__burger__icon--flipped";return ae.createElement("div",{"aria-expanded":!n,"aria-label":"Toggle Navigation Menu",className:r,onClick:t,role:"button",tabIndex:"0"},ae.createElement("i",{"aria-hidden":"true",className:"faux-navbar__burger__icon "+o}))};cL.propTypes={toggleMenu:Nt().func.isRequired,isMinimized:Nt().bool.isRequired};const uL=cL;var lL=function(e){var t=e.link,n=e.active,r=e.isMinimized,o=n===t.title,i=Zt()("faux-navbar__link",{"faux-navbar__link--active":o},{"faux-navbar__link--inactive":!o},{"faux-navbar--wide":!r},{"faux-navbar--narrow":r}),a=r?null:ae.createElement("span",{className:"faux-navbar__text"},t.title),s=null;return t.icon&&(s=ae.createElement("i",{"aria-hidden":"true",className:Zt()(t.icon,"fonticon faux-navbar__icon",{"faux-navbar__icon-badge":t.badge})})),ae.createElement("a",{"aria-current":o?"page":null,"aria-label":t.title,className:i,href:t.href,target:t.target?"_blank":null,rel:"noreferrer noopener","data-bypass":t.target?"true":null},ae.createElement("div",{"data-nav-name":t.title,className:"faux-navbar__itemarea"},s,a))};lL.propTypes={link:Nt().object.isRequired,active:Nt().string,isMinimized:Nt().bool.isRequired};const pL=lL;var fL=function(e){var t=e.isMinimized,n=Zt()("faux-navbar__brand-logo",{"faux-navbar__brand-logo--wide":!t},{"faux-navbar__brand-logo--narrow":t});return ae.createElement("div",{className:"faux-navbar__brand"},ae.createElement("div",{className:n}))};fL.propTypes={isMinimized:Nt().bool.isRequired};const dL=fL;var hL=function(e){var t=e.username,n=e.isMinimized,r=Zt()("faux-navbar__logout__textcontainer",{"faux-navbar__logout__textcontainer--narrow":n},{"faux-navbar__logout__textcontainer--wide":!n});return ae.createElement("a",{className:"faux-logout__link",href:"#/logout"},ae.createElement("div",{className:r},ae.createElement("span",{className:"faux-navbar__logout__text"},"Log Out")," ",n?null:ae.createElement("span",{className:"faux-navbar__logout__username"},s().escape(t))))};hL.propTypes={username:Nt().string,isMinimized:Nt().bool.isRequired};const yL=hL;var bL=function(e){var t=e.isMinimized,n=Zt()("faux-navbar__login__textcontainer",{"faux-navbar__login__textcontainer--narrow":t},{"faux-navbar__login__textcontainer--wide":!t});return ae.createElement("a",{className:"faux-login__link",href:"#/login"},ae.createElement("div",{className:n},ae.createElement("span",{className:"faux-navbar__logout__text"},"Login")))};bL.propTypes={isMinimized:Nt().bool.isRequired};const mL=bL;function gL(e){return gL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gL(e)}function _L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vL(e,t){return vL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vL(e,t)}function wL(e,t){if(t&&("object"===gL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function EL(e){return EL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},EL(e)}var OL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vL(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=EL(r);if(o){var n=EL(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return wL(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"createLinks",value:function(e){var t=this.props,n=t.activeLink,r=t.isMinimized;return e.map((function(e,t){return ae.createElement(pL,{key:t,link:e,active:n,isMinimized:r})}))}},{key:"render",value:function(){var e=this.props,t=e.isMinimized,n=e.version,r=e.isLoginSectionVisible,o=e.isLoginVisibleInsteadOfLogout,i=e.activeLink,a=e.username,s=e.isNavBarVisible,c=e.toggleNavbarMenu;if(!s)return null;var u=this.createLinks(this.props.navLinks),l=this.createLinks(this.props.bottomNavLinks),p=this.createLinks(this.props.footerNavLinks),f=Zt()("faux-navbar",{"faux-navbar--wide":!t},{"faux-navbar--narrow":t}),d=o?ae.createElement(mL,{active:i,isMinimized:t}):ae.createElement(yL,{username:a,isMinimized:t});return ae.createElement("div",{className:f},ae.createElement("nav",null,ae.createElement("div",{className:"faux-navbar__linkcontainer"},ae.createElement(uL,{isMinimized:t,toggleMenu:c}),ae.createElement("div",{className:"faux-navbar__links"},u,l),ae.createElement("div",{className:"faux-navbar__footer"},ae.createElement(dL,{isMinimized:t}),ae.createElement("div",null,p),ae.createElement(sL,{version:n}),r?d:null))))}}])&&_L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(ae.Component);OL.propTypes={activeLink:Nt().string,isMinimized:Nt().bool.isRequired,version:Nt().string,username:Nt().string,navLinks:Nt().array,bottomNavLinks:Nt().array,footerNavLinks:Nt().array,isNavBarVisible:Nt().bool,isLoginSectionVisible:Nt().bool.isRequired,isLoginVisibleInsteadOfLogout:Nt().bool.isRequired,toggleNavbarMenu:Nt().func.isRequired};const SL=OL;const DL=(0,Rt.$j)((function(e){var t=e.navigation,n=re.session.user();return{navLinks:t.navLinks,bottomNavLinks:t.bottomNavLinks,footerNavLinks:t.footerNavLinks,activeLink:t.activeLink,version:t.version,isMinimized:t.isMinimized,isNavBarVisible:t.navBarVisible,isLoginSectionVisible:t.loginSectionVisible,isLoginVisibleInsteadOfLogout:t.loginVisibleInsteadOfLogout,username:n&&n.name?n.name:""}}),(function(e){return{toggleNavbarMenu:function(){e((function(e){e({type:ce})}))}}}))(SL);function NL(e){return NL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NL(e)}function RL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function CL(e,t,n){return t&&PL(e.prototype,t),n&&PL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function TL(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xL(e,t)}function xL(e,t){return xL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xL(e,t)}function kL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=AL(e);if(t){var o=AL(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jL(this,n)}}function jL(e,t){if(t&&("object"===NL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return IL(e)}function IL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AL(e){return AL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},AL(e)}var LL=function(e){TL(n,e);var t=kL(n);function n(e){var r;return RL(this,n),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(IL(r=t.call(this,e)),"onKeydown",(function(e){27===(e.keyCode||e.which)&&Me.Am.dismiss()})),r.state={routerOptions:e.router.currentRouteOptions},e.router.currentRouteOptions&&e.router.currentRouteOptions.selectedHeader&&r.props.setNavbarActiveLink(r.state.routerOptions.selectedHeader),r}return CL(n,[{key:"componentDidMount",value:function(){var e=this;this.props.router.on("new-component",(function(t){e.setState({routerOptions:t}),e.props.setNavbarActiveLink(e.state.routerOptions.selectedHeader)})),this.props.router.on("trigger-update",(function(){e.forceUpdate()})),document.addEventListener("keydown",this.onKeydown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeydown)}},{key:"render",value:function(){return this.state.routerOptions&&this.state.routerOptions.component||null}}]),n}(ae.Component),ML=function(e){TL(n,e);var t=kL(n);function n(e){return RL(this,n),t.call(this,e)}return CL(n,[{key:"render",value:function(){var e=Zt()({closeMenu:this.props.isPrimaryNavMinimized}),t=Zt()({"app-container__with-perm-notification":this.props.isPermanentNotificationShowing});return ae.createElement("div",null,ae.createElement(Me.Ix,{className:"toast-container",position:"top-right",autoClose:5e3,closeButton:!1,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),ae.createElement(iL,null),ae.createElement("div",{id:"notifications"},ae.createElement(JA,null)),ae.createElement("div",{id:"main",className:e},ae.createElement("div",{id:"app-container",className:t},ae.createElement("div",{className:"wrapper"},ae.createElement("div",{role:"main",className:"pusher"},ae.createElement(LL,{router:this.props.router,setNavbarActiveLink:this.props.setNavbarActiveLink})),ae.createElement("div",{id:"primary-navbar"},ae.createElement(DL,null))))))}}]),n}(ae.Component);const UL=(0,Rt.$j)((function(e){var t=e.navigation,n=e.notifications;return{isPrimaryNavMinimized:t.isMinimized,isPermanentNotificationShowing:n.permanentNotificationVisible}}),(function(e){return{setNavbarActiveLink:function(t){var n;e((n=t,function(e){e({type:he,name:n})}))}}}))(ML);var qL=n(62505),BL=n(43916);function VL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}re.addMiddleware(BL.Z);var FL,KL=(0,qL.MT)((0,qL.UY)(re.reducers),qL.md.apply(void 0,function(e){if(Array.isArray(e))return VL(e)}(FL=re.middlewares)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(FL)||function(e,t){if(e){if("string"==typeof e)return VL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?VL(e,t):void 0}}(FL)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()));re.reduxDispatch=function(e){KL.dispatch(e)},re.reduxState=function(){return KL.getState()},ie.addons=wA,re.router=ie.router=new re.Router(ie.addons),P().history.start({pushState:!1,root:ie.root}),"ActiveXObject"in window&&o().ajaxSetup({cache:!1});var zL=function e(t){return t?"A"===t.tagName?t:e(t.parentNode):null};document.addEventListener("click",(function(e){var t=zL(e.target);if(t&&!t.getAttribute("data-bypass")){var n={prop:t.href,attr:t.getAttribute("href")};if(n.prop){var r=location.protocol+"//"+location.host;n.prop&&n.prop.slice(0,r.length)===r&&(e.preventDefault(),ie.router.navigate(n.attr,!0))}}})),z.render(ae.createElement(Rt.zt,{store:KL},ae.createElement(UL,{router:ie.router})),document.getElementById("app"))},4927:(e,t)=>{var n,r,o;function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}r=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===a(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r=n(1).Beautifier,o=n(5).Options;e.exports=function(e,t){return new r(e,t).beautify()},e.exports.defaultOptions=function(){return new o}},function(e,t,n){"use strict";var r=n(2).Output,o=n(3).Token,i=n(4),a=n(5).Options,s=n(7).Tokenizer,c=n(7).line_starters,u=n(7).positionable_operators,l=n(7).TOKEN;function p(e,t){return-1!==t.indexOf(e)}function f(e,t){return e&&e.type===l.RESERVED&&e.text===t}function d(e,t){return e&&e.type===l.RESERVED&&p(e.text,t)}var h=["case","return","do","if","throw","else","await","break","continue","async"],y=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].replace(/-/g,"_")]=e[n];return t}(["before-newline","after-newline","preserve-newline"]),b=[y.before_newline,y.preserve_newline],m="BlockStatement",g="Statement",_="ObjectLiteral",v="ArrayLiteral",w="ForInitializer",E="Conditional",O="Expression";function S(e,t){t.multiline_frame||t.mode===w||t.mode===E||e.remove_indent(t.start_line_index)}function D(e){return e===v}function N(e){return p(e,[O,w,E])}function R(e,t){t=t||{},this._source_text=e||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new a(t)}R.prototype.create_flags=function(e,t){var n=0;return e&&(n=e.indentation_level,!this._output.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level)),{mode:t,parent:e,last_token:e?e.last_token:new o(l.START_BLOCK,""),last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,alignment:0,line_indent_level:e?e.line_indent_level:n,start_line_index:this._output.get_line_number(),ternary_depth:0}},R.prototype._reset=function(e){var t=e.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new r(this._options,t),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(m);var n=new s(e,this._options);return this._tokens=n.tokenize(),e},R.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e=this._reset(this._source_text),t=this._options.eol;"auto"===this._options.eol&&(t="\n",e&&i.lineBreak.test(e||"")&&(t=e.match(i.lineBreak)[0]));for(var n=this._tokens.next();n;)this.handle_token(n),this._last_last_text=this._flags.last_token.text,this._flags.last_token=n,n=this._tokens.next();return this._output.get_code(t)},R.prototype.handle_token=function(e,t){e.type===l.START_EXPR?this.handle_start_expr(e):e.type===l.END_EXPR?this.handle_end_expr(e):e.type===l.START_BLOCK?this.handle_start_block(e):e.type===l.END_BLOCK?this.handle_end_block(e):e.type===l.WORD||e.type===l.RESERVED?this.handle_word(e):e.type===l.SEMICOLON?this.handle_semicolon(e):e.type===l.STRING?this.handle_string(e):e.type===l.EQUALS?this.handle_equals(e):e.type===l.OPERATOR?this.handle_operator(e):e.type===l.COMMA?this.handle_comma(e):e.type===l.BLOCK_COMMENT?this.handle_block_comment(e,t):e.type===l.COMMENT?this.handle_comment(e,t):e.type===l.DOT?this.handle_dot(e):e.type===l.EOF?this.handle_eof(e):(e.type,l.UNKNOWN,this.handle_unknown(e,t))},R.prototype.handle_whitespace_and_comments=function(e,t){var n=e.newlines,r=this._options.keep_array_indentation&&D(this._flags.mode);if(e.comments_before)for(var o=e.comments_before.next();o;)this.handle_whitespace_and_comments(o,t),this.handle_token(o,t),o=e.comments_before.next();if(r)for(var i=0;i<n;i+=1)this.print_newline(i>0,t);else if(this._options.max_preserve_newlines&&n>this._options.max_preserve_newlines&&(n=this._options.max_preserve_newlines),this._options.preserve_newlines&&n>1){this.print_newline(!1,t);for(var a=1;a<n;a+=1)this.print_newline(!0,t)}};var P=["async","break","continue","return","throw","yield"];R.prototype.allow_wrap_or_preserved_newline=function(e,t){if(t=void 0!==t&&t,!this._output.just_added_newline()){var n=this._options.preserve_newlines&&e.newlines||t;if(p(this._flags.last_token.text,u)||p(e.text,u)){var r=p(this._flags.last_token.text,u)&&p(this._options.operator_position,b)||p(e.text,u);n=n&&r}if(n)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(d(this._flags.last_token,P))return;this._output.set_wrap_point()}}},R.prototype.print_newline=function(e,t){if(!t&&";"!==this._flags.last_token.text&&","!==this._flags.last_token.text&&"="!==this._flags.last_token.text&&(this._flags.last_token.type!==l.OPERATOR||"--"===this._flags.last_token.text||"++"===this._flags.last_token.text))for(var n=this._tokens.peek();!(this._flags.mode!==g||this._flags.if_block&&f(n,"else")||this._flags.do_block);)this.restore_mode();this._output.add_new_line(e)&&(this._flags.multiline_frame=!0)},R.prototype.print_token_line_indentation=function(e){this._output.just_added_newline()&&(this._options.keep_array_indentation&&e.newlines&&("["===e.text||D(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(e.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},R.prototype.print_token=function(e){if(this._output.raw)this._output.add_raw_token(e);else{if(this._options.comma_first&&e.previous&&e.previous.type===l.COMMA&&this._output.just_added_newline()&&","===this._output.previous_line.last()){var t=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(t),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(e),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(e),this._output.non_breaking_space=!0,this._output.add_token(e.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)}},R.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},R.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},R.prototype.set_mode=function(e){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,e),this._flags=this.create_flags(this._previous_flags,e),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},R.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===g&&S(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},R.prototype.start_of_object_property=function(){return this._flags.parent.mode===_&&this._flags.mode===g&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||d(this._flags.last_token,["get","set"]))},R.prototype.start_of_statement=function(e){var t=!1;return!!(t=(t=(t=(t=(t=(t=(t=t||d(this._flags.last_token,["var","let","const"])&&e.type===l.WORD)||f(this._flags.last_token,"do"))||!(this._flags.parent.mode===_&&this._flags.mode===g)&&d(this._flags.last_token,P)&&!e.newlines)||f(this._flags.last_token,"else")&&!(f(e,"if")&&!e.comments_before))||this._flags.last_token.type===l.END_EXPR&&(this._previous_flags.mode===w||this._previous_flags.mode===E))||this._flags.last_token.type===l.WORD&&this._flags.mode===m&&!this._flags.in_case&&!("--"===e.text||"++"===e.text)&&"function"!==this._last_last_text&&e.type!==l.WORD&&e.type!==l.RESERVED)||this._flags.mode===_&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||d(this._flags.last_token,["get","set"])))&&(this.set_mode(g),this.indent(),this.handle_whitespace_and_comments(e,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e,d(e,["do","for","if","while"])),!0)},R.prototype.handle_start_expr=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e);var t=O;if("["===e.text){if(this._flags.last_token.type===l.WORD||")"===this._flags.last_token.text)return d(this._flags.last_token,c)&&(this._output.space_before_token=!0),this.print_token(e),this.set_mode(t),this.indent(),void(this._options.space_in_paren&&(this._output.space_before_token=!0));t=v,D(this._flags.mode)&&("["!==this._flags.last_token.text&&(","!==this._flags.last_token.text||"]"!==this._last_last_text&&"}"!==this._last_last_text)||this._options.keep_array_indentation||this.print_newline()),p(this._flags.last_token.type,[l.START_EXPR,l.END_EXPR,l.WORD,l.OPERATOR])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===l.RESERVED)"for"===this._flags.last_token.text?(this._output.space_before_token=this._options.space_before_conditional,t=w):p(this._flags.last_token.text,["if","while"])?(this._output.space_before_token=this._options.space_before_conditional,t=E):p(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:"import"===this._flags.last_token.text&&""===e.whitespace_before?this._output.space_before_token=!1:(p(this._flags.last_token.text,c)||"catch"===this._flags.last_token.text)&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===l.EQUALS||this._flags.last_token.type===l.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e);else if(this._flags.last_token.type===l.WORD){this._output.space_before_token=!1;var n=this._tokens.peek(-3);if(this._options.space_after_named_function&&n){var r=this._tokens.peek(-4);d(n,["async","function"])||"*"===n.text&&d(r,["async","function"])?this._output.space_before_token=!0:this._flags.mode===_&&("{"!==n.text&&","!==n.text&&("*"!==n.text||"{"!==r.text&&","!==r.text)||(this._output.space_before_token=!0))}}else this.allow_wrap_or_preserved_newline(e);(this._flags.last_token.type===l.RESERVED&&("function"===this._flags.last_word||"typeof"===this._flags.last_word)||"*"===this._flags.last_token.text&&(p(this._last_last_text,["function","yield"])||this._flags.mode===_&&p(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}";"===this._flags.last_token.text||this._flags.last_token.type===l.START_BLOCK?this.print_newline():this._flags.last_token.type!==l.END_EXPR&&this._flags.last_token.type!==l.START_EXPR&&this._flags.last_token.type!==l.END_BLOCK&&"."!==this._flags.last_token.text&&this._flags.last_token.type!==l.COMMA||this.allow_wrap_or_preserved_newline(e,e.newlines),this.print_token(e),this.set_mode(t),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},R.prototype.handle_end_expr=function(e){for(;this._flags.mode===g;)this.restore_mode();this.handle_whitespace_and_comments(e),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(e,"]"===e.text&&D(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type!==l.START_EXPR||this._options.space_in_empty_paren?this._output.space_before_token=!0:(this._output.trim(),this._output.space_before_token=!1)),this.deindent(),this.print_token(e),this.restore_mode(),S(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===E&&(this._previous_flags.mode=O,this._flags.do_block=!1,this._flags.do_while=!1)},R.prototype.handle_start_block=function(e){this.handle_whitespace_and_comments(e);var t=this._tokens.peek(),n=this._tokens.peek(1);"switch"===this._flags.last_word&&this._flags.last_token.type===l.END_EXPR?(this.set_mode(m),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(m):n&&(p(n.text,[":",","])&&p(t.type,[l.STRING,l.WORD,l.RESERVED])||p(t.text,["get","set","..."])&&p(n.type,[l.WORD,l.RESERVED]))?p(this._last_last_text,["class","interface"])?this.set_mode(m):this.set_mode(_):this._flags.last_token.type===l.OPERATOR&&"=>"===this._flags.last_token.text?this.set_mode(m):p(this._flags.last_token.type,[l.EQUALS,l.START_EXPR,l.COMMA,l.OPERATOR])||d(this._flags.last_token,["return","throw","import","default"])?this.set_mode(_):this.set_mode(m);var r=!t.comments_before&&"}"===t.text,o=r&&"function"===this._flags.last_word&&this._flags.last_token.type===l.END_EXPR;if(this._options.brace_preserve_inline){var i=0,a=null;this._flags.inline_frame=!0;do{if(i+=1,(a=this._tokens.peek(i-1)).newlines){this._flags.inline_frame=!1;break}}while(a.type!==l.EOF&&(a.type!==l.END_BLOCK||a.opened!==e))}("expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==l.OPERATOR&&(o||this._flags.last_token.type===l.EQUALS||d(this._flags.last_token,h)&&"else"!==this._flags.last_token.text)?this._output.space_before_token=!0:this.print_newline(!1,!0):(!D(this._previous_flags.mode)||this._flags.last_token.type!==l.START_EXPR&&this._flags.last_token.type!==l.COMMA||((this._flags.last_token.type===l.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===l.COMMA||this._flags.last_token.type===l.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(e),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==l.OPERATOR&&this._flags.last_token.type!==l.START_EXPR&&(this._flags.last_token.type!==l.START_BLOCK||this._flags.inline_frame?this._output.space_before_token=!0:this.print_newline())),this.print_token(e),this.indent(),r||this._options.brace_preserve_inline&&this._flags.inline_frame||this.print_newline()},R.prototype.handle_end_block=function(e){for(this.handle_whitespace_and_comments(e);this._flags.mode===g;)this.restore_mode();var t=this._flags.last_token.type===l.START_BLOCK;this._flags.inline_frame&&!t?this._output.space_before_token=!0:"expand"===this._options.brace_style?t||this.print_newline():t||(D(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(e)},R.prototype.handle_word=function(e){if(e.type===l.RESERVED&&(p(e.text,["set","get"])&&this._flags.mode!==_||"import"===e.text&&"("===this._tokens.peek().text||p(e.text,["as","from"])&&!this._flags.import_block||this._flags.mode===_&&":"===this._tokens.peek().text)&&(e.type=l.WORD),this.start_of_statement(e)?d(this._flags.last_token,["var","let","const"])&&e.type===l.WORD&&(this._flags.declaration_statement=!0):!e.newlines||N(this._flags.mode)||this._flags.last_token.type===l.OPERATOR&&"--"!==this._flags.last_token.text&&"++"!==this._flags.last_token.text||this._flags.last_token.type===l.EQUALS||!this._options.preserve_newlines&&d(this._flags.last_token,["var","let","const","set","get"])?this.handle_whitespace_and_comments(e):(this.handle_whitespace_and_comments(e),this.print_newline()),this._flags.do_block&&!this._flags.do_while){if(f(e,"while"))return this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0,void(this._flags.do_while=!0);this.print_newline(),this._flags.do_block=!1}if(this._flags.if_block)if(!this._flags.else_block&&f(e,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===g;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&d(e,["case","default"]))return this.print_newline(),this._flags.last_token.type!==l.END_BLOCK&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(e),void(this._flags.in_case=!0);if(this._flags.last_token.type!==l.COMMA&&this._flags.last_token.type!==l.START_EXPR&&this._flags.last_token.type!==l.EQUALS&&this._flags.last_token.type!==l.OPERATOR||this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e),f(e,"function"))return(p(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!p(this._flags.last_token.text,["(","[","{",":","=",","])&&this._flags.last_token.type!==l.OPERATOR)&&(this._output.just_added_blankline()||e.comments_before||(this.print_newline(),this.print_newline(!0))),this._flags.last_token.type===l.RESERVED||this._flags.last_token.type===l.WORD?d(this._flags.last_token,["get","set","new","export"])||d(this._flags.last_token,P)||f(this._flags.last_token,"default")&&"export"===this._last_last_text||"declare"===this._flags.last_token.text?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===l.OPERATOR||"="===this._flags.last_token.text?this._output.space_before_token=!0:(this._flags.multiline_frame||!N(this._flags.mode)&&!D(this._flags.mode))&&this.print_newline(),this.print_token(e),void(this._flags.last_word=e.text);var t="NONE";this._flags.last_token.type===l.END_BLOCK?this._previous_flags.inline_frame?t="SPACE":d(e,["else","catch","finally","from"])?"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines?t="NEWLINE":(t="SPACE",this._output.space_before_token=!0):t="NEWLINE":this._flags.last_token.type===l.SEMICOLON&&this._flags.mode===m?t="NEWLINE":this._flags.last_token.type===l.SEMICOLON&&N(this._flags.mode)?t="SPACE":this._flags.last_token.type===l.STRING?t="NEWLINE":this._flags.last_token.type===l.RESERVED||this._flags.last_token.type===l.WORD||"*"===this._flags.last_token.text&&(p(this._last_last_text,["function","yield"])||this._flags.mode===_&&p(this._last_last_text,["{",","]))?t="SPACE":this._flags.last_token.type===l.START_BLOCK?t=this._flags.inline_frame?"SPACE":"NEWLINE":this._flags.last_token.type===l.END_EXPR&&(this._output.space_before_token=!0,t="NEWLINE"),d(e,c)&&")"!==this._flags.last_token.text&&(t=this._flags.inline_frame||"else"===this._flags.last_token.text||"export"===this._flags.last_token.text?"SPACE":"NEWLINE"),d(e,["else","catch","finally"])?(this._flags.last_token.type!==l.END_BLOCK||this._previous_flags.mode!==m||"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines)&&!this._flags.inline_frame?this.print_newline():(this._output.trim(!0),"}"!==this._output.current_line.last()&&this.print_newline(),this._output.space_before_token=!0):"NEWLINE"===t?d(this._flags.last_token,h)||"declare"===this._flags.last_token.text&&d(e,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==l.END_EXPR?this._flags.last_token.type===l.START_EXPR&&d(e,["var","let","const"])||":"===this._flags.last_token.text||(f(e,"if")&&f(e.previous,"else")?this._output.space_before_token=!0:this.print_newline()):d(e,c)&&")"!==this._flags.last_token.text&&this.print_newline():this._flags.multiline_frame&&D(this._flags.mode)&&","===this._flags.last_token.text&&"}"===this._last_last_text?this.print_newline():"SPACE"===t&&(this._output.space_before_token=!0),!e.previous||e.previous.type!==l.WORD&&e.previous.type!==l.RESERVED||(this._output.space_before_token=!0),this.print_token(e),this._flags.last_word=e.text,e.type===l.RESERVED&&("do"===e.text?this._flags.do_block=!0:"if"===e.text?this._flags.if_block=!0:"import"===e.text?this._flags.import_block=!0:this._flags.import_block&&f(e,"from")&&(this._flags.import_block=!1))},R.prototype.handle_semicolon=function(e){this.start_of_statement(e)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(e);for(var t=this._tokens.peek();!(this._flags.mode!==g||this._flags.if_block&&f(t,"else")||this._flags.do_block);)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(e)},R.prototype.handle_string=function(e){this.start_of_statement(e)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(e),this._flags.last_token.type===l.RESERVED||this._flags.last_token.type===l.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===l.COMMA||this._flags.last_token.type===l.START_EXPR||this._flags.last_token.type===l.EQUALS||this._flags.last_token.type===l.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e):this.print_newline()),this.print_token(e)},R.prototype.handle_equals=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0},R.prototype.handle_comma=function(e){this.handle_whitespace_and_comments(e,!0),this.print_token(e),this._output.space_before_token=!0,this._flags.declaration_statement?(N(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)):this._flags.mode===_||this._flags.mode===g&&this._flags.parent.mode===_?(this._flags.mode===g&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)},R.prototype.handle_operator=function(e){var t="*"===e.text&&(d(this._flags.last_token,["function","yield"])||p(this._flags.last_token.type,[l.START_BLOCK,l.COMMA,l.END_BLOCK,l.SEMICOLON])),n=p(e.text,["-","+"])&&(p(this._flags.last_token.type,[l.START_BLOCK,l.START_EXPR,l.EQUALS,l.OPERATOR])||p(this._flags.last_token.text,c)||","===this._flags.last_token.text);if(this.start_of_statement(e));else{var r=!t;this.handle_whitespace_and_comments(e,r)}if(d(this._flags.last_token,h))return this._output.space_before_token=!0,void this.print_token(e);if("*"!==e.text||this._flags.last_token.type!==l.DOT)if("::"!==e.text){if(this._flags.last_token.type===l.OPERATOR&&p(this._options.operator_position,b)&&this.allow_wrap_or_preserved_newline(e),":"===e.text&&this._flags.in_case)return this.print_token(e),this._flags.in_case=!1,this._flags.case_body=!0,void(this._tokens.peek().type!==l.START_BLOCK?(this.indent(),this.print_newline()):this._output.space_before_token=!0);var o=!0,i=!0,a=!1;if(":"===e.text?0===this._flags.ternary_depth?o=!1:(this._flags.ternary_depth-=1,a=!0):"?"===e.text&&(this._flags.ternary_depth+=1),!n&&!t&&this._options.preserve_newlines&&p(e.text,u)){var s=":"===e.text,f=s&&a,_=s&&!a;switch(this._options.operator_position){case y.before_newline:return this._output.space_before_token=!_,this.print_token(e),s&&!f||this.allow_wrap_or_preserved_newline(e),void(this._output.space_before_token=!0);case y.after_newline:return this._output.space_before_token=!0,!s||f?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(e):this._output.space_before_token=!1,this.print_token(e),void(this._output.space_before_token=!0);case y.preserve_newline:return _||this.allow_wrap_or_preserved_newline(e),o=!(this._output.just_added_newline()||_),this._output.space_before_token=o,this.print_token(e),void(this._output.space_before_token=!0)}}if(t){this.allow_wrap_or_preserved_newline(e),o=!1;var v=this._tokens.peek();i=v&&p(v.type,[l.WORD,l.RESERVED])}else"..."===e.text?(this.allow_wrap_or_preserved_newline(e),o=this._flags.last_token.type===l.START_BLOCK,i=!1):(p(e.text,["--","++","!","~"])||n)&&(this._flags.last_token.type!==l.COMMA&&this._flags.last_token.type!==l.START_EXPR||this.allow_wrap_or_preserved_newline(e),o=!1,i=!1,!e.newlines||"--"!==e.text&&"++"!==e.text||this.print_newline(!1,!0),";"===this._flags.last_token.text&&N(this._flags.mode)&&(o=!0),this._flags.last_token.type===l.RESERVED?o=!0:this._flags.last_token.type===l.END_EXPR?o=!("]"===this._flags.last_token.text&&("--"===e.text||"++"===e.text)):this._flags.last_token.type===l.OPERATOR&&(o=p(e.text,["--","-","++","+"])&&p(this._flags.last_token.text,["--","-","++","+"]),p(e.text,["+","-"])&&p(this._flags.last_token.text,["--","++"])&&(i=!0)),(this._flags.mode!==m||this._flags.inline_frame)&&this._flags.mode!==g||"{"!==this._flags.last_token.text&&";"!==this._flags.last_token.text||this.print_newline());this._output.space_before_token=this._output.space_before_token||o,this.print_token(e),this._output.space_before_token=i}else this.print_token(e);else this.print_token(e)},R.prototype.handle_block_comment=function(e,t){return this._output.raw?(this._output.add_raw_token(e),void(e.directives&&"end"===e.directives.preserve&&(this._output.raw=this._options.test_output_raw))):e.directives?(this.print_newline(!1,t),this.print_token(e),"start"===e.directives.preserve&&(this._output.raw=!0),void this.print_newline(!1,!0)):i.newline.test(e.text)||e.newlines?void this.print_block_commment(e,t):(this._output.space_before_token=!0,this.print_token(e),void(this._output.space_before_token=!0))},R.prototype.print_block_commment=function(e,t){var n,r=function(e){for(var t=[],n=(e=e.replace(i.allLineBreaks,"\n")).indexOf("\n");-1!==n;)t.push(e.substring(0,n)),n=(e=e.substring(n+1)).indexOf("\n");return e.length&&t.push(e),t}(e.text),o=!1,a=!1,s=e.whitespace_before,c=s.length;if(this.print_newline(!1,t),this.print_token_line_indentation(e),this._output.add_token(r[0]),this.print_newline(!1,t),r.length>1){for(o=function(e,t){for(var n=0;n<e.length;n++)if("*"!==e[n].trim().charAt(0))return!1;return!0}(r=r.slice(1)),a=function(e,t){for(var n,r=0,o=e.length;r<o;r++)if((n=e[r])&&0!==n.indexOf(t))return!1;return!0}(r,s),o&&(this._flags.alignment=1),n=0;n<r.length;n++)o?(this.print_token_line_indentation(e),this._output.add_token(r[n].replace(/^\s+/g,""))):a&&r[n]?(this.print_token_line_indentation(e),this._output.add_token(r[n].substring(c))):(this._output.current_line.set_indent(-1),this._output.add_token(r[n])),this.print_newline(!1,t);this._flags.alignment=0}},R.prototype.handle_comment=function(e,t){e.newlines?this.print_newline(!1,t):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(e),this.print_newline(!1,t)},R.prototype.handle_dot=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e,!0),d(this._flags.last_token,h)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(e,")"===this._flags.last_token.text&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(e)},R.prototype.handle_unknown=function(e,t){this.print_token(e),"\n"===e.text[e.text.length-1]&&this.print_newline(!1,t)},R.prototype.handle_eof=function(e){for(;this._flags.mode===g;)this.restore_mode();this.handle_whitespace_and_comments(e)},e.exports.Beautifier=R},function(e,t,n){"use strict";function r(e){this.__parent=e,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function o(e,t){this.__cache=[""],this.__indent_size=e.indent_size,this.__indent_string=e.indent_char,e.indent_with_tabs||(this.__indent_string=new Array(e.indent_size+1).join(e.indent_char)),t=t||"",e.indent_level>0&&(t=new Array(e.indent_level+1).join(this.__indent_string)),this.__base_string=t,this.__base_string_length=t.length}function i(e,t){this.__indent_cache=new o(e,t),this.raw=!1,this._end_with_newline=e.end_with_newline,this.indent_size=e.indent_size,this.wrap_line_length=e.wrap_line_length,this.indent_empty_lines=e.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new r(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}r.prototype.clone_empty=function(){var e=new r(this.__parent);return e.set_indent(this.__indent_count,this.__alignment_count),e},r.prototype.item=function(e){return e<0?this.__items[this.__items.length+e]:this.__items[e]},r.prototype.has_match=function(e){for(var t=this.__items.length-1;t>=0;t--)if(this.__items[t].match(e))return!0;return!1},r.prototype.set_indent=function(e,t){this.is_empty()&&(this.__indent_count=e||0,this.__alignment_count=t||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},r.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},r.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},r.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var e=this.__parent.current_line;return e.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),e.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),e.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===e.__items[0]&&(e.__items.splice(0,1),e.__character_count-=1),!0}return!1},r.prototype.is_empty=function(){return 0===this.__items.length},r.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},r.prototype.push=function(e){this.__items.push(e);var t=e.lastIndexOf("\n");-1!==t?this.__character_count=e.length-t:this.__character_count+=e.length},r.prototype.pop=function(){var e=null;return this.is_empty()||(e=this.__items.pop(),this.__character_count-=e.length),e},r.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},r.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},r.prototype.trim=function(){for(;" "===this.last();)this.__items.pop(),this.__character_count-=1},r.prototype.toString=function(){var e="";return this.is_empty()?this.__parent.indent_empty_lines&&(e=this.__parent.get_indent_string(this.__indent_count)):(e=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),e+=this.__items.join("")),e},o.prototype.get_indent_size=function(e,t){var n=this.__base_string_length;return t=t||0,e<0&&(n=0),(n+=e*this.__indent_size)+t},o.prototype.get_indent_string=function(e,t){var n=this.__base_string;return t=t||0,e<0&&(e=0,n=""),t+=e*this.__indent_size,this.__ensure_cache(t),n+this.__cache[t]},o.prototype.__ensure_cache=function(e){for(;e>=this.__cache.length;)this.__add_column()},o.prototype.__add_column=function(){var e=this.__cache.length,t=0,n="";this.__indent_size&&e>=this.__indent_size&&(e-=(t=Math.floor(e/this.__indent_size))*this.__indent_size,n=new Array(t+1).join(this.__indent_string)),e&&(n+=new Array(e+1).join(" ")),this.__cache.push(n)},i.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},i.prototype.get_line_number=function(){return this.__lines.length},i.prototype.get_indent_string=function(e,t){return this.__indent_cache.get_indent_string(e,t)},i.prototype.get_indent_size=function(e,t){return this.__indent_cache.get_indent_size(e,t)},i.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},i.prototype.add_new_line=function(e){return!(this.is_empty()||!e&&this.just_added_newline()||(this.raw||this.__add_outputline(),0))},i.prototype.get_code=function(e){this.trim(!0);var t=this.current_line.pop();t&&("\n"===t[t.length-1]&&(t=t.replace(/\n+$/g,"")),this.current_line.push(t)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join("\n");return"\n"!==e&&(n=n.replace(/[\n]/g,e)),n},i.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},i.prototype.set_indent=function(e,t){return e=e||0,t=t||0,this.next_line.set_indent(e,t),this.__lines.length>1?(this.current_line.set_indent(e,t),!0):(this.current_line.set_indent(),!1)},i.prototype.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},i.prototype.add_token=function(e){this.__add_space_before_token(),this.current_line.push(e),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},i.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},i.prototype.remove_indent=function(e){for(var t=this.__lines.length;e<t;)this.__lines[e]._remove_indent(),e++;this.current_line._remove_wrap_indent()},i.prototype.trim=function(e){for(e=void 0!==e&&e,this.current_line.trim();e&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},i.prototype.just_added_newline=function(){return this.current_line.is_empty()},i.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},i.prototype.ensure_empty_line_above=function(e,t){for(var n=this.__lines.length-2;n>=0;){var o=this.__lines[n];if(o.is_empty())break;if(0!==o.item(0).indexOf(e)&&o.item(-1)!==t){this.__lines.splice(n+1,0,new r(this)),this.previous_line=this.__lines[this.__lines.length-2];break}n--}},e.exports.Output=i},function(e,t,n){"use strict";e.exports.Token=function(e,t,n,r){this.type=e,this.text=t,this.comments_before=null,this.newlines=n||0,this.whitespace_before=r||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},function(e,t,n){"use strict";var r="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",o="(?:\\\\u[0-9a-fA-F]{4}|[\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a"+r+"])";t.identifier=new RegExp(o+"(?:\\\\u[0-9a-fA-F]{4}|[\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f])*","g"),t.identifierStart=new RegExp(o),t.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|[\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a"+r+"\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f])+"),t.newline=/[\n\r\u2028\u2029]/,t.lineBreak=new RegExp("\r\n|"+t.newline.source),t.allLineBreaks=new RegExp(t.lineBreak.source,"g")},function(e,t,n){"use strict";var r=n(6).Options,o=["before-newline","after-newline","preserve-newline"];function i(e){r.call(this,e,"js");var t=this.raw_options.brace_style||null;"expand-strict"===t?this.raw_options.brace_style="expand":"collapse-preserve-inline"===t?this.raw_options.brace_style="collapse,preserve-inline":void 0!==this.raw_options.braces_on_own_line&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var n=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var i=0;i<n.length;i++)"preserve-inline"===n[i]?this.brace_preserve_inline=!0:this.brace_style=n[i];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",o),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}i.prototype=new r,e.exports.Options=i},function(e,t,n){"use strict";function r(e,t){this.raw_options=o(e,t),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char),this.indent_with_tabs&&(this.indent_char="\t",1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php"],["auto"])}function o(e,t){var n,r={};for(n in e=i(e))n!==t&&(r[n]=e[n]);if(t&&e[t])for(n in e[t])r[n]=e[t][n];return r}function i(e){var t,n={};for(t in e)n[t.replace(/-/g,"_")]=e[t];return n}r.prototype._get_array=function(e,t){var n=this.raw_options[e],r=t||[];return"object"===a(n)?null!==n&&"function"==typeof n.concat&&(r=n.concat()):"string"==typeof n&&(r=n.split(/[^a-zA-Z0-9_\/\-]+/)),r},r.prototype._get_boolean=function(e,t){var n=this.raw_options[e];return void 0===n?!!t:!!n},r.prototype._get_characters=function(e,t){var n=this.raw_options[e],r=t||"";return"string"==typeof n&&(r=n.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),r},r.prototype._get_number=function(e,t){var n=this.raw_options[e];t=parseInt(t,10),isNaN(t)&&(t=0);var r=parseInt(n,10);return isNaN(r)&&(r=t),r},r.prototype._get_selection=function(e,t,n){var r=this._get_selection_list(e,t,n);if(1!==r.length)throw new Error("Invalid Option Value: The option '"+e+"' can only be one of the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return r[0]},r.prototype._get_selection_list=function(e,t,n){if(!t||0===t.length)throw new Error("Selection list cannot be empty.");if(n=n||[t[0]],!this._is_valid_selection(n,t))throw new Error("Invalid Default Value!");var r=this._get_array(e,n);if(!this._is_valid_selection(r,t))throw new Error("Invalid Option Value: The option '"+e+"' can contain only the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return r},r.prototype._is_valid_selection=function(e,t){return e.length&&t.length&&!e.some((function(e){return-1===t.indexOf(e)}))},e.exports.Options=r,e.exports.normalizeOpts=i,e.exports.mergeOpts=o},function(e,t,n){"use strict";var r=n(8).InputScanner,o=n(9).Tokenizer,i=n(9).TOKEN,a=n(13).Directives,s=n(4),c=n(12).Pattern,u=n(14).TemplatablePattern;function l(e,t){return-1!==t.indexOf(e)}var p={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:i.START,RAW:i.RAW,EOF:i.EOF},f=new a(/\/\*/,/\*\//),d=/0[xX][0123456789abcdefABCDEF]*|0[oO][01234567]*|0[bB][01]*|\d+n|(?:\.\d+|\d+\.?\d*)(?:[eE][+-]?\d+)?/,h=/[0-9]/,y=/[^\d\.]/,b=">>> === !== << && >= ** != == <= >> || |> < / - + > : & % ? ^ | *".split(" "),m=">>>= ... >>= <<= === >>> !== **= => ^= :: /= << <= == && -= >= >> != -- += ** || ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";m=(m="\\?\\.(?!\\d) "+(m=m.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"))).replace(/ /g,"|");var g,_=new RegExp(m),v="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),w=v.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),E=new RegExp("^(?:"+w.join("|")+")$"),O=function(e,t){o.call(this,e,t),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var n=new c(this._input),r=new u(this._input).read_options(this._options);this.__patterns={template:r,identifier:r.starting_with(s.identifier).matching(s.identifierMatch),number:n.matching(d),punct:n.matching(_),comment:n.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:n.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:n.matching(/<!--/),html_comment_end:n.matching(/-->/),include:n.starting_with(/#include/).until_after(s.lineBreak),shebang:n.starting_with(/#!/).until_after(s.lineBreak),xml:n.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/),single_quote:r.until(/['\\\n\r\u2028\u2029]/),double_quote:r.until(/["\\\n\r\u2028\u2029]/),template_text:r.until(/[`\\$]/),template_expression:r.until(/[`}\\]/)}};(O.prototype=new o)._is_comment=function(e){return e.type===p.COMMENT||e.type===p.BLOCK_COMMENT||e.type===p.UNKNOWN},O.prototype._is_opening=function(e){return e.type===p.START_BLOCK||e.type===p.START_EXPR},O.prototype._is_closing=function(e,t){return(e.type===p.END_BLOCK||e.type===p.END_EXPR)&&t&&("]"===e.text&&"["===t.text||")"===e.text&&"("===t.text||"}"===e.text&&"{"===t.text)},O.prototype._reset=function(){g=!1},O.prototype._get_next_token=function(e,t){var n=null;this._readWhitespace();var r=this._input.peek();return null===r?this._create_token(p.EOF,""):n=(n=(n=(n=(n=(n=(n=(n=(n=n||this._read_non_javascript(r))||this._read_string(r))||this._read_word(e))||this._read_singles(r))||this._read_comment(r))||this._read_regexp(r,e))||this._read_xml(r,e))||this._read_punctuation())||this._create_token(p.UNKNOWN,this._input.next())},O.prototype._read_word=function(e){var t;return""!==(t=this.__patterns.identifier.read())?(t=t.replace(s.allLineBreaks,"\n"),e.type!==p.DOT&&(e.type!==p.RESERVED||"set"!==e.text&&"get"!==e.text)&&E.test(t)?"in"===t||"of"===t?this._create_token(p.OPERATOR,t):this._create_token(p.RESERVED,t):this._create_token(p.WORD,t)):""!==(t=this.__patterns.number.read())?this._create_token(p.WORD,t):void 0},O.prototype._read_singles=function(e){var t=null;return"("===e||"["===e?t=this._create_token(p.START_EXPR,e):")"===e||"]"===e?t=this._create_token(p.END_EXPR,e):"{"===e?t=this._create_token(p.START_BLOCK,e):"}"===e?t=this._create_token(p.END_BLOCK,e):";"===e?t=this._create_token(p.SEMICOLON,e):"."===e&&y.test(this._input.peek(1))?t=this._create_token(p.DOT,e):","===e&&(t=this._create_token(p.COMMA,e)),t&&this._input.next(),t},O.prototype._read_punctuation=function(){var e=this.__patterns.punct.read();if(""!==e)return"="===e?this._create_token(p.EQUALS,e):"?."===e?this._create_token(p.DOT,e):this._create_token(p.OPERATOR,e)},O.prototype._read_non_javascript=function(e){var t="";if("#"===e){if(this._is_first_token()&&(t=this.__patterns.shebang.read()))return this._create_token(p.UNKNOWN,t.trim()+"\n");if(t=this.__patterns.include.read())return this._create_token(p.UNKNOWN,t.trim()+"\n");e=this._input.next();var n="#";if(this._input.hasNext()&&this._input.testChar(h)){do{n+=e=this._input.next()}while(this._input.hasNext()&&"#"!==e&&"="!==e);return"#"===e||("["===this._input.peek()&&"]"===this._input.peek(1)?(n+="[]",this._input.next(),this._input.next()):"{"===this._input.peek()&&"}"===this._input.peek(1)&&(n+="{}",this._input.next(),this._input.next())),this._create_token(p.WORD,n)}this._input.back()}else if("<"===e&&this._is_first_token()){if(t=this.__patterns.html_comment_start.read()){for(;this._input.hasNext()&&!this._input.testChar(s.newline);)t+=this._input.next();return g=!0,this._create_token(p.COMMENT,t)}}else if(g&&"-"===e&&(t=this.__patterns.html_comment_end.read()))return g=!1,this._create_token(p.COMMENT,t);return null},O.prototype._read_comment=function(e){var t=null;if("/"===e){var n="";if("*"===this._input.peek(1)){n=this.__patterns.block_comment.read();var r=f.get_directives(n);r&&"start"===r.ignore&&(n+=f.readIgnored(this._input)),n=n.replace(s.allLineBreaks,"\n"),(t=this._create_token(p.BLOCK_COMMENT,n)).directives=r}else"/"===this._input.peek(1)&&(n=this.__patterns.comment.read(),t=this._create_token(p.COMMENT,n))}return t},O.prototype._read_string=function(e){if("`"===e||"'"===e||'"'===e){var t=this._input.next();return this.has_char_escapes=!1,t+="`"===e?this._read_string_recursive("`",!0,"${"):this._read_string_recursive(e),this.has_char_escapes&&this._options.unescape_strings&&(t=function(e){for(var t="",n=0,o=new r(e),i=null;o.hasNext();)if((i=o.match(/([\s]|[^\\]|\\\\)+/g))&&(t+=i[0]),"\\"===o.peek()){if(o.next(),"x"===o.peek())i=o.match(/x([0-9A-Fa-f]{2})/g);else{if("u"!==o.peek()){t+="\\",o.hasNext()&&(t+=o.next());continue}i=o.match(/u([0-9A-Fa-f]{4})/g)}if(!i)return e;if((n=parseInt(i[1],16))>126&&n<=255&&0===i[0].indexOf("x"))return e;if(n>=0&&n<32){t+="\\"+i[0];continue}t+=34===n||39===n||92===n?"\\"+String.fromCharCode(n):String.fromCharCode(n)}return t}(t)),this._input.peek()===e&&(t+=this._input.next()),t=t.replace(s.allLineBreaks,"\n"),this._create_token(p.STRING,t)}return null},O.prototype._allow_regexp_or_xml=function(e){return e.type===p.RESERVED&&l(e.text,["return","case","throw","else","do","typeof","yield"])||e.type===p.END_EXPR&&")"===e.text&&e.opened.previous.type===p.RESERVED&&l(e.opened.previous.text,["if","while","for"])||l(e.type,[p.COMMENT,p.START_EXPR,p.START_BLOCK,p.START,p.END_BLOCK,p.OPERATOR,p.EQUALS,p.EOF,p.SEMICOLON,p.COMMA])},O.prototype._read_regexp=function(e,t){if("/"===e&&this._allow_regexp_or_xml(t)){for(var n=this._input.next(),r=!1,o=!1;this._input.hasNext()&&(r||o||this._input.peek()!==e)&&!this._input.testChar(s.newline);)n+=this._input.peek(),r?r=!1:(r="\\"===this._input.peek(),"["===this._input.peek()?o=!0:"]"===this._input.peek()&&(o=!1)),this._input.next();return this._input.peek()===e&&(n+=this._input.next(),n+=this._input.read(s.identifier)),this._create_token(p.STRING,n)}return null},O.prototype._read_xml=function(e,t){if(this._options.e4x&&"<"===e&&this._allow_regexp_or_xml(t)){var n="",r=this.__patterns.xml.read_match();if(r){for(var o=r[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),i=0===o.indexOf("{"),a=0;r;){var c=!!r[1],u=r[2];if(!(r[r.length-1]||"![CDATA["===u.slice(0,8))&&(u===o||i&&u.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(c?--a:++a),n+=r[0],a<=0)break;r=this.__patterns.xml.read_match()}return r||(n+=this._input.match(/[\s\S]*/g)[0]),n=n.replace(s.allLineBreaks,"\n"),this._create_token(p.STRING,n)}}return null},O.prototype._read_string_recursive=function(e,t,n){var r,o;"'"===e?o=this.__patterns.single_quote:'"'===e?o=this.__patterns.double_quote:"`"===e?o=this.__patterns.template_text:"}"===e&&(o=this.__patterns.template_expression);for(var i=o.read(),a="";this._input.hasNext();){if((a=this._input.next())===e||!t&&s.newline.test(a)){this._input.back();break}"\\"===a&&this._input.hasNext()?("x"===(r=this._input.peek())||"u"===r?this.has_char_escapes=!0:"\r"===r&&"\n"===this._input.peek(1)&&this._input.next(),a+=this._input.next()):n&&("${"===n&&"$"===a&&"{"===this._input.peek()&&(a+=this._input.next()),n===a&&(a+="`"===e?this._read_string_recursive("}",t,"`"):this._read_string_recursive("`",t,"${"),this._input.hasNext()&&(a+=this._input.next()))),i+=a+=o.read()}return i},e.exports.Tokenizer=O,e.exports.TOKEN=p,e.exports.positionable_operators=b.slice(),e.exports.line_starters=v.slice()},function(e,t,n){"use strict";var r=RegExp.prototype.hasOwnProperty("sticky");function o(e){this.__input=e||"",this.__input_length=this.__input.length,this.__position=0}o.prototype.restart=function(){this.__position=0},o.prototype.back=function(){this.__position>0&&(this.__position-=1)},o.prototype.hasNext=function(){return this.__position<this.__input_length},o.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__input.charAt(this.__position),this.__position+=1),e},o.prototype.peek=function(e){var t=null;return e=e||0,(e+=this.__position)>=0&&e<this.__input_length&&(t=this.__input.charAt(e)),t},o.prototype.__match=function(e,t){e.lastIndex=t;var n=e.exec(this.__input);return!n||r&&e.sticky||n.index!==t&&(n=null),n},o.prototype.test=function(e,t){return t=t||0,(t+=this.__position)>=0&&t<this.__input_length&&!!this.__match(e,t)},o.prototype.testChar=function(e,t){var n=this.peek(t);return e.lastIndex=0,null!==n&&e.test(n)},o.prototype.match=function(e){var t=this.__match(e,this.__position);return t?this.__position+=t[0].length:t=null,t},o.prototype.read=function(e,t,n){var r,o="";return e&&(r=this.match(e))&&(o+=r[0]),!t||!r&&e||(o+=this.readUntil(t,n)),o},o.prototype.readUntil=function(e,t){var n,r=this.__position;e.lastIndex=this.__position;var o=e.exec(this.__input);return o?(r=o.index,t&&(r+=o[0].length)):r=this.__input_length,n=this.__input.substring(this.__position,r),this.__position=r,n},o.prototype.readUntilAfter=function(e){return this.readUntil(e,!0)},o.prototype.get_regexp=function(e,t){var n=null,o="g";return t&&r&&(o="y"),"string"==typeof e&&""!==e?n=new RegExp(e,o):e&&(n=new RegExp(e.source,o)),n},o.prototype.get_literal_regexp=function(e){return RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},o.prototype.peekUntilAfter=function(e){var t=this.__position,n=this.readUntilAfter(e);return this.__position=t,n},o.prototype.lookBack=function(e){var t=this.__position-1;return t>=e.length&&this.__input.substring(t-e.length,t).toLowerCase()===e},e.exports.InputScanner=o},function(e,t,n){"use strict";var r=n(8).InputScanner,o=n(3).Token,i=n(10).TokenStream,a=n(11).WhitespacePattern,s={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},c=function(e,t){this._input=new r(e),this._options=t||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new a(this._input)};c.prototype.tokenize=function(){var e;this._input.restart(),this.__tokens=new i,this._reset();for(var t=new o(s.START,""),n=null,r=[],a=new i;t.type!==s.EOF;){for(e=this._get_next_token(t,n);this._is_comment(e);)a.add(e),e=this._get_next_token(t,n);a.isEmpty()||(e.comments_before=a,a=new i),e.parent=n,this._is_opening(e)?(r.push(n),n=e):n&&this._is_closing(e,n)&&(e.opened=n,n.closed=e,n=r.pop(),e.parent=n),e.previous=t,t.next=e,this.__tokens.add(e),t=e}return this.__tokens},c.prototype._is_first_token=function(){return this.__tokens.isEmpty()},c.prototype._reset=function(){},c.prototype._get_next_token=function(e,t){this._readWhitespace();var n=this._input.read(/.+/g);return n?this._create_token(s.RAW,n):this._create_token(s.EOF,"")},c.prototype._is_comment=function(e){return!1},c.prototype._is_opening=function(e){return!1},c.prototype._is_closing=function(e,t){return!1},c.prototype._create_token=function(e,t){return new o(e,t,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},c.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},e.exports.Tokenizer=c,e.exports.TOKEN=s},function(e,t,n){"use strict";function r(e){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=e}r.prototype.restart=function(){this.__position=0},r.prototype.isEmpty=function(){return 0===this.__tokens_length},r.prototype.hasNext=function(){return this.__position<this.__tokens_length},r.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__tokens[this.__position],this.__position+=1),e},r.prototype.peek=function(e){var t=null;return e=e||0,(e+=this.__position)>=0&&e<this.__tokens_length&&(t=this.__tokens[e]),t},r.prototype.add=function(e){this.__parent_token&&(e.parent=this.__parent_token),this.__tokens.push(e),this.__tokens_length+=1},e.exports.TokenStream=r},function(e,t,n){"use strict";var r=n(12).Pattern;function o(e,t){r.call(this,e,t),t?this._line_regexp=this._input.get_regexp(t._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}o.prototype=new r,o.prototype.__set_whitespace_patterns=function(e,t){e+="\\t ",t+="\\n\\r",this._match_pattern=this._input.get_regexp("["+e+t+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+t+"]")},o.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var e=this._input.read(this._match_pattern);if(" "===e)this.whitespace_before_token=" ";else if(e){var t=this.__split(this._newline_regexp,e);this.newline_count=t.length-1,this.whitespace_before_token=t[this.newline_count]}return e},o.prototype.matching=function(e,t){var n=this._create();return n.__set_whitespace_patterns(e,t),n._update(),n},o.prototype._create=function(){return new o(this._input,this)},o.prototype.__split=function(e,t){e.lastIndex=0;for(var n=0,r=[],o=e.exec(t);o;)r.push(t.substring(n,o.index)),n=o.index+o[0].length,o=e.exec(t);return n<t.length?r.push(t.substring(n,t.length)):r.push(""),r},e.exports.WhitespacePattern=o},function(e,t,n){"use strict";function r(e,t){this._input=e,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,t&&(this._starting_pattern=this._input.get_regexp(t._starting_pattern,!0),this._match_pattern=this._input.get_regexp(t._match_pattern,!0),this._until_pattern=this._input.get_regexp(t._until_pattern),this._until_after=t._until_after)}r.prototype.read=function(){var e=this._input.read(this._starting_pattern);return this._starting_pattern&&!e||(e+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),e},r.prototype.read_match=function(){return this._input.match(this._match_pattern)},r.prototype.until_after=function(e){var t=this._create();return t._until_after=!0,t._until_pattern=this._input.get_regexp(e),t._update(),t},r.prototype.until=function(e){var t=this._create();return t._until_after=!1,t._until_pattern=this._input.get_regexp(e),t._update(),t},r.prototype.starting_with=function(e){var t=this._create();return t._starting_pattern=this._input.get_regexp(e,!0),t._update(),t},r.prototype.matching=function(e){var t=this._create();return t._match_pattern=this._input.get_regexp(e,!0),t._update(),t},r.prototype._create=function(){return new r(this._input,this)},r.prototype._update=function(){},e.exports.Pattern=r},function(e,t,n){"use strict";function r(e,t){e="string"==typeof e?e:e.source,t="string"==typeof t?t:t.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+t,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+t,"g")}r.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var t={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(e);n;)t[n[1]]=n[2],n=this.__directive_pattern.exec(e);return t},r.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)},e.exports.Directives=r},function(e,t,n){"use strict";var r=n(12).Pattern,o={django:!1,erb:!1,handlebars:!1,php:!1};function a(e,t){r.call(this,e,t),this.__template_pattern=null,this._disabled=i({},o),this._excluded=i({},o),t&&(this.__template_pattern=this._input.get_regexp(t.__template_pattern),this._excluded=i(this._excluded,t._excluded),this._disabled=i(this._disabled,t._disabled));var n=new r(e);this.__patterns={handlebars_comment:n.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:n.starting_with(/{{{/).until_after(/}}}/),handlebars:n.starting_with(/{{/).until_after(/}}/),php:n.starting_with(/<\?(?:[=]|php)/).until_after(/\?>/),erb:n.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:n.starting_with(/{%/).until_after(/%}/),django_value:n.starting_with(/{{/).until_after(/}}/),django_comment:n.starting_with(/{#/).until_after(/#}/)}}a.prototype=new r,a.prototype._create=function(){return new a(this._input,this)},a.prototype._update=function(){this.__set_templated_pattern()},a.prototype.disable=function(e){var t=this._create();return t._disabled[e]=!0,t._update(),t},a.prototype.read_options=function(e){var t=this._create();for(var n in o)t._disabled[n]=-1===e.templating.indexOf(n);return t._update(),t},a.prototype.exclude=function(e){var t=this._create();return t._excluded[e]=!0,t._update(),t},a.prototype.read=function(){var e="";e=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var t=this._read_template();t;)this._match_pattern?t+=this._input.read(this._match_pattern):t+=this._input.readUntil(this.__template_pattern),e+=t,t=this._read_template();return this._until_after&&(e+=this._input.readUntilAfter(this._until_pattern)),e},a.prototype.__set_templated_pattern=function(){var e=[];this._disabled.php||e.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||e.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||e.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(e.push(this.__patterns.django._starting_pattern.source),e.push(this.__patterns.django_value._starting_pattern.source),e.push(this.__patterns.django_comment._starting_pattern.source)),this._until_pattern&&e.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+e.join("|")+")")},a.prototype._read_template=function(){var e="",t=this._input.peek();if("<"===t){var n=this._input.peek(1);this._disabled.php||this._excluded.php||"?"!==n||(e=e||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||"%"!==n||(e=e||this.__patterns.erb.read())}else"{"===t&&(this._disabled.handlebars||this._excluded.handlebars||(e=(e=(e=e||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(e=e||this.__patterns.django_value.read()),this._excluded.django||(e=(e=e||this.__patterns.django_comment.read())||this.__patterns.django.read())));return e},e.exports.TemplatablePattern=a}]),o=r,void 0===(n=function(){return{js_beautify:o}}.apply(t,[]))||(e.exports=n)},70488:()=>{var e=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function t(e,t,n,r){t&&(n(e={a:t,d:e}),r.push.apply(r,e.e))}function n(n,r){var o,i={};!function(){for(var t=n.concat(r),a=[],s={},c=0,u=t.length;c<u;++c){var l=t[c],p=l[3];if(p)for(var f=p.length;--f>=0;)i[p.charAt(f)]=l;p=""+(l=l[1]),s.hasOwnProperty(p)||(a.push(l),s[p]=e)}a.push(/[\S\s]/),o=function(e){function t(e){var t=e.charCodeAt(0);if(92!==t)return t;var n=e.charAt(1);return(t=p[n])?t:"0"<=n&&n<="7"?parseInt(e.substring(1),8):"u"===n||"x"===n?parseInt(e.substring(2),16):e.charCodeAt(1)}function n(e){return e<32?(e<16?"\\x0":"\\x")+e.toString(16):("\\"!==(e=String.fromCharCode(e))&&"-"!==e&&"["!==e&&"]"!==e||(e="\\"+e),e)}function r(e){for(var r=e.substring(1,e.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),o=(e=[],[]),i="^"===r[0],a=i?1:0,s=r.length;a<s;++a){var c,u=r[a];/\\[bdsw]/i.test(u)?e.push(u):(u=t(u),a+2<s&&"-"===r[a+1]?(c=t(r[a+2]),a+=2):c=u,o.push([u,c]),c<65||u>122||(c<65||u>90||o.push([32|Math.max(65,u),32|Math.min(c,90)]),c<97||u>122||o.push([-33&Math.max(97,u),-33&Math.min(c,122)])))}for(o.sort((function(e,t){return e[0]-t[0]||t[1]-e[1]})),r=[],u=[NaN,NaN],a=0;a<o.length;++a)(s=o[a])[0]<=u[1]+1?u[1]=Math.max(u[1],s[1]):r.push(u=s);for(o=["["],i&&o.push("^"),o.push.apply(o,e),a=0;a<r.length;++a)s=r[a],o.push(n(s[0])),s[1]>s[0]&&(s[1]+1>s[0]&&o.push("-"),o.push(n(s[1])));return o.push("]"),o.join("")}function o(e){for(var t=e.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),n=t.length,o=[],s=0,c=0;s<n;++s){var u=t[s];"("===u?++c:"\\"===u.charAt(0)&&(u=+u.substring(1))&&u<=c&&(o[u]=-1)}for(s=1;s<o.length;++s)-1===o[s]&&(o[s]=++i);for(c=s=0;s<n;++s)"("===(u=t[s])?void 0===o[++c]&&(t[s]="(?:"):"\\"===u.charAt(0)&&(u=+u.substring(1))&&u<=c&&(t[s]="\\"+o[c]);for(c=s=0;s<n;++s)"^"===t[s]&&"^"!==t[s+1]&&(t[s]="");if(e.ignoreCase&&a)for(s=0;s<n;++s)e=(u=t[s]).charAt(0),u.length>=2&&"["===e?t[s]=r(u):"\\"!==e&&(t[s]=u.replace(/[A-Za-z]/g,(function(e){return e=e.charCodeAt(0),"["+String.fromCharCode(-33&e,32|e)+"]"})));return t.join("")}for(var i=0,a=!1,s=!1,c=0,u=e.length;c<u;++c){var l=e[c];if(l.ignoreCase)s=!0;else if(/[a-z]/i.test(l.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){a=!0,s=!1;break}}var p={b:8,t:9,n:10,v:11,f:12,r:13},f=[];for(c=0,u=e.length;c<u;++c){if((l=e[c]).global||l.multiline)throw Error(""+l);f.push("(?:"+o(l)+")")}return RegExp(f.join("|"),s?"gi":"g")}(a)}();var s=r.length;return function e(n){for(var c=n.d,u=[c,"pln"],l=0,p=n.a.match(o)||[],f={},d=0,h=p.length;d<h;++d){var y,b=p[d],m=f[b],g=void 0;if("string"==typeof m)y=!1;else{var _=i[b.charAt(0)];if(_)g=b.match(_[1]),m=_[0];else{for(y=0;y<s;++y)if(_=r[y],g=b.match(_[1])){m=_[0];break}g||(m="pln")}!(y=m.length>=5&&"lang-"===m.substring(0,5))||g&&"string"==typeof g[1]||(y=!1,m="src"),y||(f[b]=m)}if(_=l,l+=b.length,y){y=g[1];var v=b.indexOf(y),w=v+y.length;g[2]&&(v=(w=b.length-g[2].length)-y.length),m=m.substring(5),t(c+_,b.substring(0,v),e,u),t(c+_+v,y,a(m,y),u),t(c+_+w,b.substring(w),e,u)}else u.push(c+_,m)}n.e=u}}function r(t){var r=[],o=[];t.tripleQuotedStrings?r.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,e,"'\""]):t.multiLineStrings?r.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,e,"'\"`"]):r.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,e,"\"'"]),t.verbatimStrings&&o.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,e]);var i=t.hashComments;return i&&(t.cStyleComments?(i>1?r.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,e,"#"]):r.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,e,"#"]),o.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,e])):r.push(["com",/^#[^\n\r]*/,e,"#"])),t.cStyleComments&&(o.push(["com",/^\/\/[^\n\r]*/,e]),o.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,e])),t.regexLiterals&&o.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*/])(?:[^/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]),(i=t.types)&&o.push(["typ",i]),(t=(""+t.keywords).replace(/^ | $/g,"")).length&&o.push(["kwd",RegExp("^(?:"+t.replace(/[\s,]+/g,"|")+")\\b"),e]),r.push(["pln",/^\s+/,e," \r\n\t "]),o.push(["lit",/^@[$_a-z][\w$@]*/i,e],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,e],["pln",/^[$_a-z][\w$@]*/i,e],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,e,"0123456789"],["pln",/^\\[\S\s]?/,e],["pun",/^.[^\s\w"-$'./@\\`]*/,e]),n(r,o)}function o(t,n){function r(e){switch(e.nodeType){case 1:if(a.test(e.className))break;if("BR"===e.nodeName)o(e),e.parentNode&&e.parentNode.removeChild(e);else for(e=e.firstChild;e;e=e.nextSibling)r(e);break;case 3:case 4:if(u){var t=e.nodeValue,n=t.match(s);if(n){var i=t.substring(0,n.index);e.nodeValue=i,(t=t.substring(n.index+n[0].length))&&e.parentNode.insertBefore(c.createTextNode(t),e.nextSibling),o(e),i||e.parentNode.removeChild(e)}}}}function o(e){for(;!e.nextSibling;)if(!(e=e.parentNode))return;var t;for(e=function e(t,n){var r=n?t.cloneNode(!1):t;if(o=t.parentNode){var o=e(o,1),i=t.nextSibling;o.appendChild(r);for(var a=i;a;a=i)i=a.nextSibling,o.appendChild(a)}return r}(e.nextSibling,0);(t=e.parentNode)&&1===t.nodeType;)e=t;l.push(e)}var i,a=/(?:^|\s)nocode(?:\s|$)/,s=/\r\n?|\n/,c=t.ownerDocument;t.currentStyle?i=t.currentStyle.whiteSpace:window.getComputedStyle&&(i=c.defaultView.getComputedStyle(t,e).getPropertyValue("white-space"));var u=i&&"pre"===i.substring(0,3);for(i=c.createElement("LI");t.firstChild;)i.appendChild(t.firstChild);for(var l=[i],p=0;p<l.length;++p)r(l[p]);n===(0|n)&&l[0].setAttribute("value",n);var f=c.createElement("OL");f.className="linenums";for(var d=Math.max(0,n-1|0)||0,h=(p=0,l.length);p<h;++p)(i=l[p]).className="L"+(p+d)%10,i.firstChild||i.appendChild(c.createTextNode(" ")),f.appendChild(i);t.appendChild(f)}function i(e,t){for(var n=t.length;--n>=0;){var r=t[n];g.hasOwnProperty(r)?window.console&&console.warn("cannot override language handler %s",r):g[r]=e}}function a(e,t){return e&&g.hasOwnProperty(e)||(e=/^\s*</.test(t)?"default-markup":"default-code"),g[e]}function s(t){var n=t.g;try{var r=function(t){var n,r=/(?:^|\s)nocode(?:\s|$)/,o=[],i=0,a=[],s=0;t.currentStyle?n=t.currentStyle.whiteSpace:window.getComputedStyle&&(n=document.defaultView.getComputedStyle(t,e).getPropertyValue("white-space"));var c=n&&"pre"===n.substring(0,3);return function e(t){switch(t.nodeType){case 1:if(r.test(t.className))break;for(var n=t.firstChild;n;n=n.nextSibling)e(n);"BR"!==(n=t.nodeName)&&"LI"!==n||(o[s]="\n",a[s<<1]=i++,a[s++<<1|1]=t);break;case 3:case 4:(n=t.nodeValue).length&&(n=c?n.replace(/\r\n?/g,"\n"):n.replace(/[\t\n\r ]+/g," "),o[s]=n,a[s<<1]=i,i+=n.length,a[s++<<1|1]=t)}}(t),{a:o.join("").replace(/\n$/,""),c:a}}(t.h),o=r.a;t.a=o,t.c=r.c,t.d=0,a(n,o)(t);var i,s,c=/\bMSIE\b/.test(navigator.userAgent),u=(n=/\n/g,t.a),l=u.length,p=(r=0,t.c),f=p.length,d=(o=0,t.e),h=d.length;for(t=0,d[h]=l,s=i=0;s<h;)d[s]!==d[s+2]?(d[i++]=d[s++],d[i++]=d[s++]):s+=2;for(h=i,s=i=0;s<h;){for(var y=d[s],b=d[s+1],m=s+2;m+2<=h&&d[m+1]===b;)m+=2;d[i++]=y,d[i++]=b,s=m}for(d.length=i;o<f;){var g,_=p[o+2]||l,v=d[t+2]||l,w=(m=Math.min(_,v),p[o+1]);if(1!==w.nodeType&&(g=u.substring(r,m))){c&&(g=g.replace(n,"\r")),w.nodeValue=g;var E=w.ownerDocument,O=E.createElement("SPAN");O.className=d[t+1];var S=w.parentNode;S.replaceChild(O,w),O.appendChild(w),r<_&&(p[o+1]=w=E.createTextNode(u.substring(m,_)),S.insertBefore(w,O.nextSibling))}(r=m)>=_&&(o+=2),r>=v&&(t+=2)}}catch(e){"console"in window&&console.log(e&&e.stack?e.stack:e)}}var c,u,l=[c=[[u=["break,continue,do,else,for,if,return,while"],"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],p=[c,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],f=[p,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],d=[u,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],h=[u,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],y=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,b=/\S/,m=r({keywords:[l,f,c=[c,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+d,h,u=[u,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"]],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),g={};i(m,["default-code"]),i(n([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),i(n([["pln",/^\s+/,e," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,e,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]),i(n([],[["atv",/^[\S\s]+/]]),["uq.val"]),i(r({keywords:l,hashComments:!0,cStyleComments:!0,types:y}),["c","cc","cpp","cxx","cyc","m"]),i(r({keywords:"null,true,false"}),["json"]),i(r({keywords:f,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:y}),["cs"]),i(r({keywords:p,cStyleComments:!0}),["java"]),i(r({keywords:u,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]),i(r({keywords:d,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]),i(r({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]),i(r({keywords:h,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]),i(r({keywords:c,cStyleComments:!0,regexLiterals:!0}),["js"]),i(r({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),i(n([],[["str",/^[\S\s]+/]]),["regex"]),window.prettyPrintOne=function(e,t,n){var r=document.createElement("PRE");return r.innerHTML=e,n&&o(r,n),s({g:t,i:n,h:r}),r.innerHTML},window.prettyPrint=function(t){for(var n=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],r=[],i=0;i<n.length;++i)for(var a=0,c=n[i].length;a<c;++a)r.push(n[i][a]);n=e;var u=Date;u.now||(u={now:function(){return+new Date}});var l=0,p=/\blang(?:uage)?-([\w.]+)(?!\S)/;!function e(){for(var n=window.PR_SHOULD_USE_CONTINUATION?u.now()+250:1/0;l<r.length&&u.now()<n;l++){var i=r[l];if((a=i.className).indexOf("prettyprint")>=0){var a,c,f;if(f=!(a=a.match(p))){for(var d=void 0,h=(f=i).firstChild;h;h=h.nextSibling){var y=h.nodeType;d=1===y?d?f:h:3===y&&b.test(h.nodeValue)?f:d}f=(c=d===f?void 0:d)&&"CODE"===c.tagName}for(f&&(a=c.className.match(p)),a&&(a=a[1]),f=!1,d=i.parentNode;d;d=d.parentNode)if(("pre"===d.tagName||"code"===d.tagName||"xmp"===d.tagName)&&d.className&&d.className.indexOf("prettyprint")>=0){f=!0;break}f||((f=!!(f=i.className.match(/\blinenums\b(?::(\d+))?/))&&(!f[1]||!f[1].length||+f[1]))&&o(i,f),s({g:a,h:i,i:f}))}}l<r.length?setTimeout(e,250):t&&t()}()},window.PR={createSimpleLexer:n,registerLangHandler:i,sourceDecorator:r,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}}()}},e=>{var t=t=>e(e.s=t);e.O(0,[736],(()=>(t(35005),t(32005),t(38603),t(32013),t(77131),t(85299),t(77588),t(16399)))),e.O()}]);