<!--
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed
under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the License for the
specific language governing permissions and limitations under the License.
--><!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1.1. Installation on Unix-like systems &mdash; Apache CouchDB® 3.3 Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/rtd_theme.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://docs.couchdb.org/en/stable/install/unix.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1.2. Installation on Windows" href="windows.html" />
    <link rel="prev" title="1. Installation" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Apache CouchDB®
              <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
<h2>Table of Contents</h2>

              <p class="caption" role="heading"><span class="caption-text">User Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../replication/index.html">2. Replication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ddocs/index.html">3. Design Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../best-practices/index.html">4. Best Practices</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Administration Guides</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">1. Installation</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.1. Installation on Unix-like systems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation-using-the-apache-couchdb-convenience-binary-packages">1.1.1. Installation using the Apache CouchDB convenience binary packages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#enabling-the-apache-couchdb-package-repository">1.1.1.1. Enabling the Apache CouchDB package repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-the-apache-couchdb-packages">1.1.1.2. Installing the Apache CouchDB packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gpg-keys-used-for-signing-the-couchdb-repositories">1.1.1.3. GPG keys used for signing the CouchDB repositories</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#installation-from-source">1.1.2. Installation from source</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dependencies">1.1.3. Dependencies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#debian-based-systems">1.1.3.1. Debian-based Systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="#redhat-based-fedora-centos-rhel-systems">1.1.3.2. RedHat-based (Fedora, CentOS, RHEL) Systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fedora-36">1.1.3.3. Fedora 36</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mac-os-x">1.1.3.4. Mac OS X</a></li>
<li class="toctree-l4"><a class="reference internal" href="#freebsd">1.1.3.5. FreeBSD</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#installing">1.1.4. Installing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#user-registration-and-security">1.1.5. User Registration and Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="#first-run">1.1.6. First Run</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-as-a-daemon">1.1.7. Running as a Daemon</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="windows.html">1.2. Installation on Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="mac.html">1.3. Installation on macOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="freebsd.html">1.4. Installation on FreeBSD</a></li>
<li class="toctree-l2"><a class="reference internal" href="docker.html">1.5. Installation via Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="snap.html">1.6. Installation via Snap</a></li>
<li class="toctree-l2"><a class="reference internal" href="kubernetes.html">1.7. Installation on Kubernetes</a></li>
<li class="toctree-l2"><a class="reference internal" href="search.html">1.8. Search Plugin Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrading.html">1.9. Upgrading from prior CouchDB releases</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html">1.10. Troubleshooting an Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../setup/index.html">2. Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config/index.html">3. Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cluster/index.html">4. Cluster Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintenance/index.html">5. Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fauxton/index.html">6. Fauxton</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experimental.html">7. Experimental Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">1. API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../json-structure.html">2. JSON Structure Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../query-server/index.html">3. Query Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../partitioned-dbs/index.html">4. Partitioned Databases</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew/index.html">1. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cve/index.html">2. Security Issues / CVEs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cve/index.html#reporting-new-security-problems-with-apache-couchdb">3. Reporting New Security Problems with Apache CouchDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">4. License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">5. Contributing to this Documentation</a></li>
</ul>

<h2>Quick Reference Guides</h2>
<ul>
<li><a href="../http-routingtable.html">API Quick Reference</a></li>
<li><a href="../config-ref.html">Configuration Quick Reference</a></li>
</ul>


<h2>Local Links</h2>
<ul>
<li><a href="../">Fauxton</a></li>
</ul>


<h2>More Help</h2>
<ul>
<li><a href="https://couchdb.apache.org/">CouchDB Homepage</a></li>
<li><a href="https://couchdb.apache.org/#mailing-list">Mailing Lists</a></li>
<li><a href="https://couchdb.apache.org/#chat">Realtime Chat</a></li>
<li><a href="https://github.com/apache/couchdb/issues">Issue Tracker</a></li>
<li><a href="../download.html">Download Docs</a></li>
</ul>



        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Apache CouchDB®</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">1. </span>Installation</a></li>
      <li class="breadcrumb-item active"><span class="section-number">1.1. </span>Installation on Unix-like systems</li>
  
    
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/install/unix.rst.txt" rel="nofollow"> View page source</a>
      </li>
  

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation-on-unix-like-systems">
<span id="install-unix"></span><h1><span class="section-number">1.1. </span>Installation on Unix-like systems<a class="headerlink" href="#installation-on-unix-like-systems" title="Permalink to this heading">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>CouchDB 3.0+ will not run without an admin user being created first.
Be sure to <a class="reference internal" href="../config/auth.html#config-admins"><span class="std std-ref">create an admin user</span></a> before starting
CouchDB!</p>
</div>
<section id="installation-using-the-apache-couchdb-convenience-binary-packages">
<span id="install-unix-binary"></span><h2><span class="section-number">1.1.1. </span>Installation using the Apache CouchDB convenience binary packages<a class="headerlink" href="#installation-using-the-apache-couchdb-convenience-binary-packages" title="Permalink to this heading">¶</a></h2>
<p>If you are running one of the following operating systems, the easiest way
to install CouchDB is to use the convenience binary packages:</p>
<ul class="simple">
<li><p>CentOS/RHEL 7</p></li>
<li><p>CentOS/RHEL 8</p></li>
<li><p>Debian 10 (buster)</p></li>
<li><p>Debian 11 (bullseye)</p></li>
<li><p>Ubuntu 18.04 (bionic)</p></li>
<li><p>Ubuntu 20.04 (focal)</p></li>
</ul>
<p>These RedHat-style rpm packages and Debian-style deb packages will install CouchDB at
<code class="docutils literal notranslate"><span class="pre">/opt/couchdb</span></code> and ensure CouchDB is run at system startup by the appropriate init
subsystem (SysV-style initd or systemd).</p>
<p>The Debian-style deb packages <em>also</em> pre-configure CouchDB as a standalone or clustered
node, prompt for the address to which it will bind, and a password for the admin user.
Responses to these prompts may be pre-seeded using standard <code class="docutils literal notranslate"><span class="pre">debconf</span></code> tools. Further
details are in the <a class="reference external" href="https://github.com/apache/couchdb-pkg/blob/main/debian/README.Debian">README.Debian</a> file.</p>
<p>For distributions lacking a compatible SpiderMonkey library, Apache CouchDB
also provides packages for the 1.8.5 version.</p>
<section id="enabling-the-apache-couchdb-package-repository">
<h3><span class="section-number">1.1.1.1. </span>Enabling the Apache CouchDB package repository<a class="headerlink" href="#enabling-the-apache-couchdb-package-repository" title="Permalink to this heading">¶</a></h3>
<p><strong>Debian or Ubuntu</strong>: Run the following commands:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>curl<span class="w"> </span>apt-transport-https<span class="w"> </span>gnupg
curl<span class="w"> </span>https://couchdb.apache.org/repo/keys.asc<span class="w"> </span><span class="p">|</span><span class="w"> </span>gpg<span class="w"> </span>--dearmor<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/usr/share/keyrings/couchdb-archive-keyring.gpg<span class="w"> </span>&gt;/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="nb">source</span><span class="w"> </span>/etc/os-release
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;deb [signed-by=/usr/share/keyrings/couchdb-archive-keyring.gpg] https://apache.jfrog.io/artifactory/couchdb-deb/ </span><span class="si">${</span><span class="nv">VERSION_CODENAME</span><span class="si">}</span><span class="s2"> main&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/couchdb.list<span class="w"> </span>&gt;/dev/null
</pre></div>
</div>
<p><strong>RedHat or CentOS</strong>: Run the following commands:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>yum-utils
sudo<span class="w"> </span>yum-config-manager<span class="w"> </span>--add-repo<span class="w"> </span>https://couchdb.apache.org/repo/couchdb.repo
</pre></div>
</div>
</section>
<section id="installing-the-apache-couchdb-packages">
<h3><span class="section-number">1.1.1.2. </span>Installing the Apache CouchDB packages<a class="headerlink" href="#installing-the-apache-couchdb-packages" title="Permalink to this heading">¶</a></h3>
<p><strong>Debian or Ubuntu</strong>: Run the following commands:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>update
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>couchdb
</pre></div>
</div>
<p>Debian/Ubuntu installs from binaries can be pre-configured for single node or
clustered installations. For clusters, multiple nodes will still need to be
joined together and configured consistently across all machines; <strong>follow the</strong>
<a class="reference internal" href="../setup/cluster.html#setup-cluster"><span class="std std-ref">Cluster Setup</span></a> <strong>walkthrough</strong> to complete the process.</p>
<p><strong>RedHat/CentOS</strong>: Run the command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>couchdb
</pre></div>
</div>
<p>Once installed, <a class="reference internal" href="../config/auth.html#config-admins"><span class="std std-ref">create an admin user</span></a> by hand before
starting CouchDB, if your installer didn’t do this for you already.</p>
<p>You can now start the service.</p>
<p><strong>Your installation is not complete. Be sure to complete the</strong>
<a class="reference internal" href="../setup/index.html#setup"><span class="std std-ref">Setup</span></a> <strong>steps for a single node or clustered installation.</strong></p>
<p><strong>Relax!</strong> CouchDB is installed and running.</p>
</section>
<section id="gpg-keys-used-for-signing-the-couchdb-repositories">
<h3><span class="section-number">1.1.1.3. </span>GPG keys used for signing the CouchDB repositories<a class="headerlink" href="#gpg-keys-used-for-signing-the-couchdb-repositories" title="Permalink to this heading">¶</a></h3>
<p>As of 2021.04.25, the <em>repository</em> signing key for both types of supported packages
is:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pub<span class="w">   </span>rsa8192<span class="w"> </span><span class="m">2015</span>-01-19<span class="w"> </span><span class="o">[</span>SC<span class="o">]</span>
<span class="w">      </span>390EF70BB1EA12B2773962950EE62FB37A00258D
uid<span class="w">           </span>The<span class="w"> </span>Apache<span class="w"> </span>Software<span class="w"> </span>Foundation<span class="w"> </span><span class="o">(</span>Package<span class="w"> </span>repository<span class="w"> </span>signing<span class="w"> </span>key<span class="o">)</span><span class="w"> </span>&lt;root@apache.org&gt;
</pre></div>
</div>
<p>As of 2021.04.25, the <em>package</em> signing key (only used for <code class="docutils literal notranslate"><span class="pre">rpm</span></code> packages) is:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pub<span class="w">   </span>rsa4096<span class="w"> </span><span class="m">2017</span>-07-28<span class="w"> </span><span class="o">[</span>SC<span class="o">]</span><span class="w"> </span><span class="o">[</span>expires:<span class="w"> </span><span class="m">2022</span>-07-27<span class="o">]</span>
<span class="w">      </span>2EC788AE3F239FA13E82D215CDE711289384AE37
uid<span class="w">           </span>Joan<span class="w"> </span>Touzet<span class="w"> </span><span class="o">(</span>Apache<span class="w"> </span>Code<span class="w"> </span>Signing<span class="w"> </span>Key<span class="o">)</span><span class="w"> </span>&lt;wohali@apache.org&gt;
</pre></div>
</div>
<p>As of 2021.11.13, the <em>package</em> signing key (only used for <code class="docutils literal notranslate"><span class="pre">rpm</span></code> packages) is:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pub<span class="w">   </span>rsa4096<span class="w"> </span><span class="m">2019</span>-09-05<span class="w"> </span><span class="o">[</span>SC<span class="o">]</span><span class="w"> </span><span class="o">[</span>expires:<span class="w"> </span><span class="m">2039</span>-01-02<span class="o">]</span>
<span class="w">      </span>0BD7A98499C4AB41C910EE65FC04DFBC9657A78E
uid<span class="w">           </span>Nicolae<span class="w"> </span>Vatamaniuc<span class="w"> </span>&lt;vatamane@apache.org&gt;
uid<span class="w">           </span>default<span class="w"> </span>&lt;vatamane@gmail.com&gt;
</pre></div>
</div>
<p>All are available from most popular GPG key servers. The <code class="docutils literal notranslate"><span class="pre">rpm</span></code>
signing keys should be listed in the <a class="reference external" href="https://downloads.apache.org/couchdb/KEYS">KEYS</a> list as well.</p>
</section>
</section>
<section id="installation-from-source">
<h2><span class="section-number">1.1.2. </span>Installation from source<a class="headerlink" href="#installation-from-source" title="Permalink to this heading">¶</a></h2>
<p>The remainder of this document describes the steps required to install CouchDB
directly from source code.</p>
<p>This guide, as well as the INSTALL.Unix document in the official tarball
release are the canonical sources of installation information. However, many
systems have gotchas that you need to be aware of. In addition, dependencies
frequently change as distributions update their archives.</p>
</section>
<section id="dependencies">
<span id="install-unix-dependencies"></span><h2><span class="section-number">1.1.3. </span>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this heading">¶</a></h2>
<p>You should have the following installed:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://erlang.org/">Erlang OTP (20.x &gt;= 20.3.8.11, 21.x &gt;= 21.2.3, 22.x &gt;= 22.0.5, 23.x, 24.x)</a></p></li>
<li><p><a class="reference external" href="http://icu-project.org/">ICU</a></p></li>
<li><p><a class="reference external" href="http://www.openssl.org/">OpenSSL</a></p></li>
<li><p><a class="reference external" href="https://spidermonkey.dev/">Mozilla SpiderMonkey (1.8.5, 60, 68, 78, 91)</a></p></li>
<li><p><a class="reference external" href="http://www.gnu.org/software/make/">GNU Make</a></p></li>
<li><p><a class="reference external" href="http://gcc.gnu.org/">GNU Compiler Collection</a></p></li>
<li><p><a class="reference external" href="http://curl.haxx.se/libcurl/">libcurl</a></p></li>
<li><p><a class="reference external" href="http://www.gnu.org/s/help2man/">help2man</a></p></li>
<li><p><a class="reference external" href="http://python.org/">Python (&gt;=3.6) for docs and tests</a></p></li>
<li><p><a class="reference external" href="http://pypi.python.org/pypi/Sphinx">Python Sphinx (&gt;=1.1.3)</a></p></li>
</ul>
<p>You will only need libcurl if you plan to run the JavaScript test suite. And
help2man is only need if you plan on installing the CouchDB man pages.
Sphinx is only required for building the online documentation.
Documentation build can be disabled by adding the <code class="docutils literal notranslate"><span class="pre">--disable-docs</span></code> flag to
the <code class="docutils literal notranslate"><span class="pre">configure</span></code> script.</p>
<section id="debian-based-systems">
<h3><span class="section-number">1.1.3.1. </span>Debian-based Systems<a class="headerlink" href="#debian-based-systems" title="Permalink to this heading">¶</a></h3>
<p>You can install the dependencies by running:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>--no-install-recommends<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>build-essential<span class="w"> </span>pkg-config<span class="w"> </span>erlang<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>libicu-dev<span class="w"> </span>libmozjs185-dev<span class="w"> </span>libcurl4-openssl-dev
</pre></div>
</div>
<p>Be sure to update the version numbers to match your system’s available
packages.</p>
</section>
<section id="redhat-based-fedora-centos-rhel-systems">
<h3><span class="section-number">1.1.3.2. </span>RedHat-based (Fedora, CentOS, RHEL) Systems<a class="headerlink" href="#redhat-based-fedora-centos-rhel-systems" title="Permalink to this heading">¶</a></h3>
<p>You can install the dependencies by running:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>autoconf<span class="w"> </span>autoconf-archive<span class="w"> </span>automake<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>curl-devel<span class="w"> </span>erlang-asn1<span class="w"> </span>erlang-erts<span class="w"> </span>erlang-eunit<span class="w"> </span>gcc-c++<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>erlang-os_mon<span class="w"> </span>erlang-xmerl<span class="w"> </span>erlang-erl_interface<span class="w"> </span>help2man<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>libicu-devel<span class="w"> </span>libtool<span class="w"> </span>perl-Test-Harness
</pre></div>
</div>
<p>Warning: To build a release for CouchDB the erlang-reltool package is required,
yet on CentOS/RHEL this package depends on erlang-wx which pulls in wxGTK
and several X11 libraries. If CouchDB is being built on a console only
server it might be a good idea to install this in a separate step to the
rest of the dependencies, so that the package and all its dependencies
can be removed using the <code class="docutils literal notranslate"><span class="pre">yum</span> <span class="pre">history</span></code> tool after the release is built.
(reltool is needed only during release build but not for CouchDB functioning)</p>
<p>The package can be installed by running:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>erlang-reltool
</pre></div>
</div>
</section>
<section id="fedora-36">
<h3><span class="section-number">1.1.3.3. </span>Fedora 36<a class="headerlink" href="#fedora-36" title="Permalink to this heading">¶</a></h3>
<p>On Fedora 36, you may need these packages in addition to the ones listed above:</p>
<ul class="simple">
<li><p><cite>mozjs91-devel</cite></p></li>
<li><p><cite>erlang-rebar</cite></p></li>
</ul>
<p>If the system contains dangling links to Erlang chunk files, the compiler will
abort. They can be deleted with the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>find<span class="w"> </span>-L<span class="w"> </span>/usr/lib64/erlang/lib/<span class="w"> </span>-type<span class="w"> </span>l<span class="w"> </span>-name<span class="w"> </span>chunks<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>rm<span class="w"> </span>-f
</pre></div>
</div>
<p>Fauxton is not built on the Node.js version (v16) shipped by the system. The
installation of v12.22.12 can be done via:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>wget<span class="w"> </span>https://nodejs.org/download/release/v12.22.12/node-v12.22.12-linux-x64.tar.gz
mkdir<span class="w"> </span>-p<span class="w"> </span>/usr/local/lib/nodejs
tar<span class="w"> </span>-xvf<span class="w"> </span>node-v12.22.12-linux-x64.tar.gz<span class="w"> </span>-C<span class="w"> </span>/usr/local/lib/nodejs
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/lib/nodejs/node-v12.22.12-linux-x64/bin:<span class="nv">$PATH</span>
</pre></div>
</div>
<p>Note that due to a problem with the Python package sphinx-build, it is not
possible to compile the documentation on Fedora 36. You can skip compiling the
documentation via:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>./configure<span class="w"> </span>--disable-docs<span class="w"> </span>--spidermonkey-version<span class="w"> </span><span class="m">91</span>
</pre></div>
</div>
</section>
<section id="mac-os-x">
<h3><span class="section-number">1.1.3.4. </span>Mac OS X<a class="headerlink" href="#mac-os-x" title="Permalink to this heading">¶</a></h3>
<p>Follow <a class="reference internal" href="mac.html#install-mac-homebrew"><span class="std std-ref">Installation with Homebrew</span></a> reference for Mac App installation.</p>
<p>If you are installing from source, you will need to install the Command
Line Tools:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>xcode-select<span class="w"> </span>--install
</pre></div>
</div>
<p>You can then install the other dependencies by running:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>brew<span class="w"> </span>install<span class="w"> </span>autoconf<span class="w"> </span>autoconf-archive<span class="w"> </span>automake<span class="w"> </span>libtool<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>erlang<span class="w"> </span>icu4c<span class="w"> </span>spidermonkey<span class="w"> </span>curl<span class="w"> </span>pkg-config
</pre></div>
</div>
<p>You will need <cite>Homebrew</cite> installed to use the <code class="docutils literal notranslate"><span class="pre">brew</span></code> command.</p>
<p>Some versions of Mac OS X ship a problematic OpenSSL library. If
you’re experiencing troubles with CouchDB crashing intermittently with
a segmentation fault or a bus error, you will need to install your own
version of OpenSSL. See the wiki, mentioned above, for more information.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="http://mxcl.github.com/homebrew/">Homebrew</a></p></li>
</ul>
</div>
</section>
<section id="freebsd">
<h3><span class="section-number">1.1.3.5. </span>FreeBSD<a class="headerlink" href="#freebsd" title="Permalink to this heading">¶</a></h3>
<p>FreeBSD requires the use of GNU Make. Where <code class="docutils literal notranslate"><span class="pre">make</span></code> is specified in this
documentation, substitute <code class="docutils literal notranslate"><span class="pre">gmake</span></code>.</p>
<p>You can install this by running:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pkg<span class="w"> </span>install<span class="w"> </span>gmake
</pre></div>
</div>
</section>
</section>
<section id="installing">
<h2><span class="section-number">1.1.4. </span>Installing<a class="headerlink" href="#installing" title="Permalink to this heading">¶</a></h2>
<p>Once you have satisfied the dependencies you should run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>./configure
</pre></div>
</div>
<p>If you wish to customize the installation, pass <code class="docutils literal notranslate"><span class="pre">--help</span></code> to this script.</p>
<p>If everything was successful you should see the following message:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>You<span class="w"> </span>have<span class="w"> </span>configured<span class="w"> </span>Apache<span class="w"> </span>CouchDB,<span class="w"> </span><span class="nb">time</span><span class="w"> </span>to<span class="w"> </span>relax.
</pre></div>
</div>
<p>Relax.</p>
<p>To build CouchDB you should run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>release
</pre></div>
</div>
<p>Try <code class="docutils literal notranslate"><span class="pre">gmake</span></code> if <code class="docutils literal notranslate"><span class="pre">make</span></code> is giving you any problems.</p>
<p>If include paths or other compiler options must be specified, they can be passed to rebar, which compiles CouchDB, with the ERL_CFLAGS environment variable. Likewise, options may be passed to the linker with the ERL_LDFLAGS environment variable:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>release<span class="w"> </span><span class="nv">ERL_CFLAGS</span><span class="o">=</span><span class="s2">&quot;-I/usr/local/include/js -I/usr/local/lib/erlang/usr/include&quot;</span>
</pre></div>
</div>
<p>If everything was successful you should see the following message:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>...<span class="w"> </span><span class="k">done</span>
You<span class="w"> </span>can<span class="w"> </span>now<span class="w"> </span>copy<span class="w"> </span>the<span class="w"> </span>rel/couchdb<span class="w"> </span>directory<span class="w"> </span>anywhere<span class="w"> </span>on<span class="w"> </span>your<span class="w"> </span>system.
Start<span class="w"> </span>CouchDB<span class="w"> </span>with<span class="w"> </span>./bin/couchdb<span class="w"> </span>from<span class="w"> </span>within<span class="w"> </span>that<span class="w"> </span>directory.
</pre></div>
</div>
<p>Relax.</p>
<p>Note: a fully-fledged <code class="docutils literal notranslate"><span class="pre">./configure</span></code> with the usual GNU Autotools options
for package managers and a corresponding <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code> are in
development, but not part of the 2.0.0 release.</p>
</section>
<section id="user-registration-and-security">
<span id="install-unix-security"></span><h2><span class="section-number">1.1.5. </span>User Registration and Security<a class="headerlink" href="#user-registration-and-security" title="Permalink to this heading">¶</a></h2>
<p>For OS X, in the steps below, substitute <code class="docutils literal notranslate"><span class="pre">/Users/couchdb</span></code> for
<code class="docutils literal notranslate"><span class="pre">/home/couchdb</span></code>.</p>
<p>You should create a special <code class="docutils literal notranslate"><span class="pre">couchdb</span></code> user for CouchDB.</p>
<p>On many Unix-like systems you can run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>adduser<span class="w"> </span>--system<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--shell<span class="w"> </span>/bin/bash<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--group<span class="w"> </span>--gecos<span class="w"> </span><span class="se">\</span>
<span class="w">        </span><span class="s2">&quot;CouchDB Administrator&quot;</span><span class="w"> </span>couchdb
</pre></div>
</div>
<p>On Mac OS X you can use the Workgroup Manager to create users up to version
10.9, and dscl or sysadminctl after version 10.9. Search Apple’s support
site to find the documentation appropriate for your system. As of recent
versions of OS X, this functionality is also included in Server.app,
available through the App Store only as part of OS X Server.</p>
<p>You must make sure that the user has a working POSIX shell and a writable
home directory.</p>
<p>You can test this by:</p>
<ul class="simple">
<li><p>Trying to log in as the <code class="docutils literal notranslate"><span class="pre">couchdb</span></code> user</p></li>
<li><p>Running <code class="docutils literal notranslate"><span class="pre">pwd</span></code> and checking the present working directory</p></li>
</ul>
<p>As a recommendation, copy the <code class="docutils literal notranslate"><span class="pre">rel/couchdb</span></code> directory into
<code class="docutils literal notranslate"><span class="pre">/home/couchdb</span></code> or <code class="docutils literal notranslate"><span class="pre">/Users/couchdb</span></code>.</p>
<p>Ex: copy the built couchdb release to the new user’s home directory:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>-R<span class="w"> </span>/path/to/couchdb/rel/couchdb<span class="w"> </span>/home/couchdb
</pre></div>
</div>
<p>Change the ownership of the CouchDB directories by running:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>chown<span class="w"> </span>-R<span class="w"> </span>couchdb:couchdb<span class="w"> </span>/home/couchdb
</pre></div>
</div>
<p>Change the permission of the CouchDB directories by running:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>find<span class="w"> </span>/home/couchdb<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-exec<span class="w"> </span>chmod<span class="w"> </span><span class="m">0770</span><span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span>
</pre></div>
</div>
<p>Update the permissions for your ini files:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>chmod<span class="w"> </span><span class="m">0644</span><span class="w"> </span>/home/couchdb/etc/*
</pre></div>
</div>
</section>
<section id="first-run">
<h2><span class="section-number">1.1.6. </span>First Run<a class="headerlink" href="#first-run" title="Permalink to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be sure to <a class="reference internal" href="../config/auth.html#config-admins"><span class="std std-ref">create an admin user</span></a> before trying to
start CouchDB!</p>
</div>
<p>You can start the CouchDB server by running:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>-i<span class="w"> </span>-u<span class="w"> </span>couchdb<span class="w"> </span>/home/couchdb/bin/couchdb
</pre></div>
</div>
<p>This uses the <code class="docutils literal notranslate"><span class="pre">sudo</span></code> command to run the <code class="docutils literal notranslate"><span class="pre">couchdb</span></code> command as the
<code class="docutils literal notranslate"><span class="pre">couchdb</span></code> user.</p>
<p>When CouchDB starts it should eventually display following messages:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>database_does_not_exist,<span class="o">[{</span>mem3_shards,load_shards_from_db,<span class="s2">&quot;_users&quot;</span><span class="w"> </span>...
</pre></div>
</div>
<p>Don’t be afraid, we will fix this in a moment.</p>
<p>To check that everything has worked, point your web browser to:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>http://127.0.0.1:5984/_utils/index.html
</pre></div>
</div>
<p>From here you should verify your installation by pointing your web browser to:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>http://localhost:5984/_utils/index.html#verifyinstall
</pre></div>
</div>
<p><strong>Your installation is not complete. Be sure to complete the</strong>
<a class="reference internal" href="../setup/index.html#setup"><span class="std std-ref">Setup</span></a> <strong>steps for a single node or clustered installation.</strong></p>
</section>
<section id="running-as-a-daemon">
<h2><span class="section-number">1.1.7. </span>Running as a Daemon<a class="headerlink" href="#running-as-a-daemon" title="Permalink to this heading">¶</a></h2>
<p>CouchDB no longer ships with any daemonization scripts.</p>
<p>The CouchDB team recommends <a class="reference external" href="http://smarden.org/runit/">runit</a> to
run CouchDB persistently and reliably. According to official site:</p>
<blockquote>
<div><p><em>runit</em> is a cross-platform Unix init scheme with service supervision,
a replacement for sysvinit, and other init schemes. It runs on
GNU/Linux, *BSD, MacOSX, Solaris, and can easily be adapted to
other Unix operating systems.</p>
</div></blockquote>
<p>Configuration of runit is straightforward; if you have questions, contact
the CouchDB <a class="reference external" href="http://mail-archives.apache.org/mod_mbox/couchdb-user/">user mailing list</a>
or <a class="reference external" href="http://webchat.freenode.net/?channels=#couchdb">IRC-channel #couchdb</a>
in FreeNode network.</p>
<p>Let’s consider configuring runit on Ubuntu 18.04. The following
steps should be considered only as an example. Details will vary
by operating system and distribution. Check your system’s package
management tools for specifics.</p>
<p>Install runit:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>runit
</pre></div>
</div>
<p>Create a directory where logs will be written:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>mkdir<span class="w"> </span>/var/log/couchdb
sudo<span class="w"> </span>chown<span class="w"> </span>couchdb:couchdb<span class="w"> </span>/var/log/couchdb
</pre></div>
</div>
<p>Create directories that will contain runit configuration for CouchDB:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>mkdir<span class="w"> </span>/etc/sv/couchdb
sudo<span class="w"> </span>mkdir<span class="w"> </span>/etc/sv/couchdb/log
</pre></div>
</div>
<p>Create /etc/sv/couchdb/log/run script:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>
<span class="nb">exec</span><span class="w"> </span>svlogd<span class="w"> </span>-tt<span class="w"> </span>/var/log/couchdb
</pre></div>
</div>
<p>Basically it determines where and how exactly logs will be written.
See <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">svlogd</span></code> for more details.</p>
<p>Create /etc/sv/couchdb/run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">HOME</span><span class="o">=</span>/home/couchdb
<span class="nb">exec</span><span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="nb">exec</span><span class="w"> </span>chpst<span class="w"> </span>-u<span class="w"> </span>couchdb<span class="w"> </span>/home/couchdb/bin/couchdb
</pre></div>
</div>
<p>This script determines how exactly CouchDB will be launched.
Feel free to add any additional arguments and environment
variables here if necessary.</p>
<p>Make scripts executable:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>chmod<span class="w"> </span>u+x<span class="w"> </span>/etc/sv/couchdb/log/run
sudo<span class="w"> </span>chmod<span class="w"> </span>u+x<span class="w"> </span>/etc/sv/couchdb/run
</pre></div>
</div>
<p>Then run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>ln<span class="w"> </span>-s<span class="w"> </span>/etc/sv/couchdb/<span class="w"> </span>/etc/service/couchdb
</pre></div>
</div>
<p>In a few seconds runit will discover a new symlink and start CouchDB.
You can control CouchDB service like this:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>sv<span class="w"> </span>status<span class="w"> </span>couchdb
sudo<span class="w"> </span>sv<span class="w"> </span>stop<span class="w"> </span>couchdb
sudo<span class="w"> </span>sv<span class="w"> </span>start<span class="w"> </span>couchdb
</pre></div>
</div>
<p>Naturally now CouchDB will start automatically shortly after system starts.</p>
<p>You can also configure systemd, launchd or SysV-init daemons to launch
CouchDB and keep it running using standard configuration files. Consult
your system documentation for more information.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="1. Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="windows.html" class="btn btn-neutral float-right" title="1.2. Installation on Windows" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Apache Software Foundation. CouchDB® is a registered trademark of the Apache Software Foundation.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>