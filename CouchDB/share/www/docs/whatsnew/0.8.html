<!--
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed
under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the License for the
specific language governing permissions and limitations under the License.
--><!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1.20. 0.8.x Branch &mdash; Apache CouchDB® 3.3 Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/rtd_theme.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://docs.couchdb.org/en/stable/whatsnew/0.8.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2. Security Issues / CVEs" href="../cve/index.html" />
    <link rel="prev" title="1.19. 0.9.x Branch" href="0.9.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Apache CouchDB®
              <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
<h2>Table of Contents</h2>

              <p class="caption" role="heading"><span class="caption-text">User Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../replication/index.html">2. Replication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ddocs/index.html">3. Design Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../best-practices/index.html">4. Best Practices</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Administration Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">1. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../setup/index.html">2. Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config/index.html">3. Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cluster/index.html">4. Cluster Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintenance/index.html">5. Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fauxton/index.html">6. Fauxton</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experimental.html">7. Experimental Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">1. API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../json-structure.html">2. JSON Structure Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../query-server/index.html">3. Query Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../partitioned-dbs/index.html">4. Partitioned Databases</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">1. Release Notes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="3.3.html">1.1. 3.3.x Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.2.html">1.2. 3.2.x Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.1.html">1.3. 3.1.x Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="3.0.html">1.4. 3.0.x Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.3.html">1.5. 2.3.x Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.2.html">1.6. 2.2.x Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.1.html">1.7. 2.1.x Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.0.html">1.8. 2.0.x Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.7.html">1.9. 1.7.x Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.6.html">1.10. 1.6.x Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.5.html">1.11. 1.5.x Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.4.html">1.12. 1.4.x Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.3.html">1.13. 1.3.x Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.2.html">1.14. 1.2.x Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.1.html">1.15. 1.1.x Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.0.html">1.16. 1.0.x Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="0.11.html">1.17. 0.11.x Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="0.10.html">1.18. 0.10.x Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="0.9.html">1.19. 0.9.x Branch</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.20. 0.8.x Branch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#version-0-8-1-incubating">1.20.1. Version 0.8.1-incubating</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#build-and-system-integration">1.20.1.1. Build and System Integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#database-core">1.20.1.2. Database Core</a></li>
<li class="toctree-l4"><a class="reference internal" href="#futon">1.20.1.3. Futon</a></li>
<li class="toctree-l4"><a class="reference internal" href="#javascript-view-server">1.20.1.4. JavaScript View Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#http-interface">1.20.1.5. HTTP Interface</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#version-0-8-0-incubating">1.20.2. Version 0.8.0-incubating</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">1.20.2.1. Build and System Integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">1.20.2.2. Database Core</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">1.20.2.3. Futon</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">1.20.2.4. JavaScript View Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">1.20.2.5. HTTP Interface</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cve/index.html">2. Security Issues / CVEs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cve/index.html#reporting-new-security-problems-with-apache-couchdb">3. Reporting New Security Problems with Apache CouchDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">4. License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">5. Contributing to this Documentation</a></li>
</ul>

<h2>Quick Reference Guides</h2>
<ul>
<li><a href="../http-routingtable.html">API Quick Reference</a></li>
<li><a href="../config-ref.html">Configuration Quick Reference</a></li>
</ul>


<h2>Local Links</h2>
<ul>
<li><a href="../">Fauxton</a></li>
</ul>


<h2>More Help</h2>
<ul>
<li><a href="https://couchdb.apache.org/">CouchDB Homepage</a></li>
<li><a href="https://couchdb.apache.org/#mailing-list">Mailing Lists</a></li>
<li><a href="https://couchdb.apache.org/#chat">Realtime Chat</a></li>
<li><a href="https://github.com/apache/couchdb/issues">Issue Tracker</a></li>
<li><a href="../download.html">Download Docs</a></li>
</ul>



        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Apache CouchDB®</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">1. </span>Release Notes</a></li>
      <li class="breadcrumb-item active"><span class="section-number">1.20. </span>0.8.x Branch</li>
  
    
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/whatsnew/0.8.rst.txt" rel="nofollow"> View page source</a>
      </li>
  

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="x-branch">
<span id="release-0-8-x"></span><h1><span class="section-number">1.20. </span>0.8.x Branch<a class="headerlink" href="#x-branch" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#version-0-8-1-incubating" id="id6">Version 0.8.1-incubating</a></p></li>
<li><p><a class="reference internal" href="#version-0-8-0-incubating" id="id7">Version 0.8.0-incubating</a></p></li>
</ul>
</nav>
<section id="version-0-8-1-incubating">
<span id="release-0-8-1"></span><h2><a class="toc-backref" href="#id6" role="doc-backlink"><span class="section-number">1.20.1. </span>Version 0.8.1-incubating</a><a class="headerlink" href="#version-0-8-1-incubating" title="Permalink to this heading">¶</a></h2>
<section id="build-and-system-integration">
<h3><span class="section-number">1.20.1.1. </span>Build and System Integration<a class="headerlink" href="#build-and-system-integration" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>The <cite>couchdb</cite> script no longer uses <cite>awk</cite> for configuration checks as this
was causing portability problems.</p></li>
<li><p>Updated <cite>sudo</cite> example in <cite>README</cite> to use the <cite>-i</cite> option, this fixes
problems when invoking from a directory the <cite>couchdb</cite> user cannot access.</p></li>
</ul>
</section>
<section id="database-core">
<h3><span class="section-number">1.20.1.2. </span>Database Core<a class="headerlink" href="#database-core" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fix for replication problems where the write queues can get backed up if the
writes aren’t happening fast enough to keep up with the reads. For a large
replication, this can exhaust memory and crash, or slow down the machine
dramatically. The fix keeps only one document in the write queue at a time.</p></li>
<li><p>Fix for databases sometimes incorrectly reporting that they contain 0
documents after compaction.</p></li>
<li><p>CouchDB now uses ibrowse instead of inets for its internal HTTP client
implementation. This means better replication stability.</p></li>
</ul>
</section>
<section id="futon">
<h3><span class="section-number">1.20.1.3. </span>Futon<a class="headerlink" href="#futon" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>The view selector dropdown should now work in Opera and Internet Explorer
even when it includes optgroups for design documents. (<a class="reference external" href="https://issues.apache.org/jira/browse/COUCHDB-81">COUCHDB-81</a>)</p></li>
</ul>
</section>
<section id="javascript-view-server">
<h3><span class="section-number">1.20.1.4. </span>JavaScript View Server<a class="headerlink" href="#javascript-view-server" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Sealing of documents has been disabled due to an incompatibility with
SpiderMonkey 1.9.</p></li>
<li><p>Improve error handling for undefined values emitted by map functions.
(<a class="reference external" href="https://issues.apache.org/jira/browse/COUCHDB-83">COUCHDB-83</a>)</p></li>
</ul>
</section>
<section id="http-interface">
<h3><span class="section-number">1.20.1.5. </span>HTTP Interface<a class="headerlink" href="#http-interface" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fix for chunked responses where chunks were always being split into multiple
TCP packets, which caused problems with the test suite under Safari, and in
some other cases.</p></li>
<li><p>Fix for an invalid JSON response body being returned for some kinds of
views. (<a class="reference external" href="https://issues.apache.org/jira/browse/COUCHDB-84">COUCHDB-84</a>)</p></li>
<li><p>Fix for connections not getting closed after rejecting a chunked request.
(<a class="reference external" href="https://issues.apache.org/jira/browse/COUCHDB-55">COUCHDB-55</a>)</p></li>
<li><p>CouchDB can now be bound to IPv6 addresses.</p></li>
<li><p>The HTTP <cite>Server</cite> header now contains the versions of CouchDB and Erlang.</p></li>
</ul>
</section>
</section>
<section id="version-0-8-0-incubating">
<span id="release-0-8-0"></span><h2><a class="toc-backref" href="#id7" role="doc-backlink"><span class="section-number">1.20.2. </span>Version 0.8.0-incubating</a><a class="headerlink" href="#version-0-8-0-incubating" title="Permalink to this heading">¶</a></h2>
<section id="id1">
<h3><span class="section-number">1.20.2.1. </span>Build and System Integration<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>CouchDB can automatically respawn following a server crash.</p></li>
<li><p>Database server no longer refuses to start with a stale PID file.</p></li>
<li><p>System logrotate configuration provided.</p></li>
<li><p>Improved handling of ICU shared libraries.</p></li>
<li><p>The <cite>couchdb</cite> script now automatically enables SMP support in Erlang.</p></li>
<li><p>The <cite>couchdb</cite> and <cite>couchjs</cite> scripts have been improved for portability.</p></li>
<li><p>The build and system integration have been improved for portability.</p></li>
</ul>
</section>
<section id="id2">
<h3><span class="section-number">1.20.2.2. </span>Database Core<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>The view engine has been completely decoupled from the storage engine. Index
data is now stored in separate files, and the format of the main database
file has changed.</p></li>
<li><p>Databases can now be compacted to reclaim space used for deleted documents
and old document revisions.</p></li>
<li><p>Support for incremental map/reduce views has been added.</p></li>
<li><p>To support map/reduce, the structure of design documents has changed. View
values are now JSON objects containing at least a <cite>map</cite> member, and
optionally a <cite>reduce</cite> member.</p></li>
<li><p>View servers are now identified by name (for example <cite>javascript</cite>) instead of
by media type.</p></li>
<li><p>Automatically generated document IDs are now based on proper UUID generation
using the crypto module.</p></li>
<li><p>The field <cite>content-type</cite> in the JSON representation of attachments has been
renamed to <cite>content_type</cite> (underscore).</p></li>
</ul>
</section>
<section id="id3">
<h3><span class="section-number">1.20.2.3. </span>Futon<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>When adding a field to a document, Futon now just adds a field with an
autogenerated name instead of prompting for the name with a dialog. The name
is automatically put into edit mode so that it can be changed immediately.</p></li>
<li><p>Fields are now sorted alphabetically by name when a document is displayed.</p></li>
<li><p>Futon can be used to create and update permanent views.</p></li>
<li><p>The maximum number of rows to display per page on the database page can now
be adjusted.</p></li>
<li><p>Futon now uses the XMLHTTPRequest API asynchronously to communicate with the
CouchDB HTTP server, so that most operations no longer block the browser.</p></li>
<li><p>View results sorting can now be switched between ascending and descending by
clicking on the <cite>Key</cite> column header.</p></li>
<li><p>Fixed a bug where documents that contained a <cite>&#64;</cite> character could not be
viewed. (<a class="reference external" href="https://issues.apache.org/jira/browse/COUCHDB-12">COUCHDB-12</a>)</p></li>
<li><p>The database page now provides a <cite>Compact</cite> button to trigger database
compaction. (<a class="reference external" href="https://issues.apache.org/jira/browse/COUCHDB-38">COUCHDB-38</a>)</p></li>
<li><p>Fixed portential double encoding of document IDs and other URI segments in
many instances. (<a class="reference external" href="https://issues.apache.org/jira/browse/COUCHDB-39">COUCHDB-39</a>)</p></li>
<li><p>Improved display of attachments.</p></li>
<li><p>The JavaScript Shell has been removed due to unresolved licensing issues.</p></li>
</ul>
</section>
<section id="id4">
<h3><span class="section-number">1.20.2.4. </span>JavaScript View Server<a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>SpiderMonkey is no longer included with CouchDB, but rather treated as a
normal external dependency. A simple C program (<cite>_couchjs</cite>) is provided that
links against an existing SpiderMonkey installation and uses the interpreter
embedding API.</p></li>
<li><p>View functions using the default JavaScript view server can now do logging
using the global <cite>log(message)</cite> function. Log messages are directed into the
CouchDB log at <cite>INFO</cite> level. (<a class="reference external" href="https://issues.apache.org/jira/browse/COUCHDB-59">COUCHDB-59</a>)</p></li>
<li><p>The global <cite>map(key, value)</cite> function made available to view code has been
renamed to <cite>emit(key, value)</cite>.</p></li>
<li><p>Fixed handling of exceptions raised by view functions.</p></li>
</ul>
</section>
<section id="id5">
<h3><span class="section-number">1.20.2.5. </span>HTTP Interface<a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>CouchDB now uses MochiWeb instead of inets for the HTTP server
implementation. Among other things, this means that the extra configuration
files needed for inets (such as <cite>couch_httpd.conf</cite>) are no longer used.</p></li>
<li><p>The HTTP interface now completely supports the <cite>HEAD</cite> method. (<a class="reference external" href="https://issues.apache.org/jira/browse/COUCHDB-3">COUCHDB-3</a>)</p></li>
<li><p>Improved compliance of <cite>Etag</cite> handling with the HTTP specification.
(<a class="reference external" href="https://issues.apache.org/jira/browse/COUCHDB-13">COUCHDB-13</a>)</p></li>
<li><p>Etags are no longer included in responses to document <cite>GET</cite> requests that
include query string parameters causing the JSON response to change without
the revision or the URI having changed.</p></li>
<li><p>The bulk document update API has changed slightly on both the request and the
response side. In addition, bulk updates are now atomic.</p></li>
<li><p>CouchDB now uses <cite>TCP_NODELAY</cite> to fix performance problems with persistent
connections on some platforms due to nagling.</p></li>
<li><p>Including a <cite>?descending=false</cite> query string parameter in requests to views
no longer raises an error.</p></li>
<li><p>Requests to unknown top-level reserved URLs (anything with a leading
underscore) now return a <cite>unknown_private_path</cite> error instead of the
confusing <cite>illegal_database_name</cite>.</p></li>
<li><p>The Temporary view handling now expects a JSON request body, where the JSON
is an object with at least a <cite>map</cite> member, and optional <cite>reduce</cite> and
<cite>language</cite> members.</p></li>
<li><p>Temporary views no longer determine the view server based on the Content-Type
header of the <cite>POST</cite> request, but rather by looking for a <cite>language</cite> member
in the JSON body of the request.</p></li>
<li><p>The status code of responses to <cite>DELETE</cite> requests is now 200 to reflect that
that the deletion is performed synchronously.</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="0.9.html" class="btn btn-neutral float-left" title="1.19. 0.9.x Branch" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../cve/index.html" class="btn btn-neutral float-right" title="2. Security Issues / CVEs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Apache Software Foundation. CouchDB® is a registered trademark of the Apache Software Foundation.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>